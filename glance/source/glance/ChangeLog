commit 1ded23d6c314dac444f9b61d1b1bed8a37fd6c2c
Merge: b13e10b 90d6ef8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Dec 4 14:00:54 2013 +0000

    Merge "Migrate to oslo.messaging"

commit 90d6ef8130fd7e121e35221eb1452e6646ba4047
Author: Flavio Percoco <flaper87@gmail.com>
Date:   Thu Nov 21 14:40:22 2013 +0100

    Migrate to oslo.messaging
    
    Glance currently uses a custom notifier and it has been maintaining it
    for a long time. In a hope of reducing duplicated code and improving
    cross-project contributions, this patch replaces the old notifier with
    the one, recently developed, in oslo.messaging.
    
    The oslo.messaging project is a port of the old oslo-rpc code to a
    standalone, more stable and improved project. It brings all the benefits
    that oslo-rpc would've brought as well as an easier way to integrate
    with other projects.
    
    This patch also:
    
        - Reduces the code shipped along with Glance since all the code
          copied from oslo-incubator related to the notifier is not needed
          anymore.
        - Improves the stability of existing, broker based, notifications.
        - Brings HA support.
        - Keeps backward compatibility by translating the old
          `notifier_strategy` into oslo.messaging drivers.
    
    Changes to the code:
    
        - It is now necessary to pass the request context to the
          notification call.
        - Notifier package is no longer necessary. A notifier module was
          added instead.
        - New, notifier related, configurations were added.
        - A lot of code was removed
    
    Since there's still not an official release, requirements.txt points to
    the latest tarball created. A release for oslo.messaging is planned for
    Icehouse.
    
    docImpact
    Implements bp oslo-messaging
    
    Change-Id: I8cd84772bc5867e06b2a50ed7e15b9e86f0b94ad

commit b13e10b5e594c2ad807006e10efdd6c941403d2b
Author: Alex Meade <hatboy112@yahoo.com>
Date:   Mon Nov 25 01:57:24 2013 +0000

    Add config option to limit image members
    
    This patch adds the image_member_quota config option. This allows a deployer
    to limit the number of image members allowed per image. The default value
    is 128, to be consistent with other quota defaults. Users will only be able
    to update an image if the result of the transaction would be under this limit.
    
    This is for both Glance v1 and v2
    
    Fixes bug 1252459
    docImpact
    
    Change-Id: I02f5e82ca4c4acf6cd7bc94f9b99086054a616c9

commit 4e7d9cdaf9e6d1c260a61f232e4ec0e21819ac0e
Author: Alex Meade <hatboy112@yahoo.com>
Date:   Fri Nov 22 15:54:06 2013 +0000

    Add config option to limit image tags
    
    This patch adds the image_tag_quota config option. This allows a deployer
    to limit the number of image tags allowed on an image for v2. The default value
    is 128. If an image is somehow over the limit, tags can still be removed but no
    more may be added.
    
    Fixes bug 1252337
    docImpact
    
    Change-Id: I2036e2a88601d7c5aa85fad32d90fe0ed30b84c8

commit 574936f650a144aad730cfa4d7501928ae0dd631
Merge: 6d2b7ea b318742
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Dec 3 07:30:32 2013 +0000

    Merge "Remove unused package in requirement.txt"

commit 6d2b7ea3fc1316be6b528447d40af7d6073fc6d3
Merge: 5b8474e 61f47af
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Dec 3 07:30:29 2013 +0000

    Merge "DB migration changes to support DB2 as sqlalchemy backend"

commit 5b8474ef128057e5bb5e06bdc4c972e951f19c81
Merge: 6628666 5fc030c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Dec 3 07:23:22 2013 +0000

    Merge "Use assertEqual instead of assertEquals in unit tests"

commit 66286664fba72a1c1a6ddc1f6e7bd0c1740754b2
Merge: ae1a726 0e470ca
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Dec 2 23:59:54 2013 +0000

    Merge "Replace deprecated method assertEquals"

commit ae1a7262bc433711fba8d2cb8cebe0d66054131e
Merge: 530a1c8 88bb1af
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Dec 2 23:51:46 2013 +0000

    Merge "Enable F40X checking"

commit 61f47af345322f2562c2ce1b3e2b77023ad7555d
Author: David Peraza <dperaza@linux.vnet.ibm.com>
Date:   Mon Jul 1 19:46:25 2013 +0000

    DB migration changes to support DB2 as sqlalchemy backend
    
    Implements bp db2-database
    
    SQLAlchemy works in general, only changes needed to allow DB2
    backend are these migration updates. The main difference
    with DB2 is around index creation and constraints updates.
    
    Change-Id: If5aa371328ef49ec93029ed15993871cfe5522cd

commit 530a1c8051a157d3953f742ecc2cfa73541dd0c0
Merge: bdbc76e 21510b1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Dec 2 04:19:30 2013 +0000

    Merge "Don't use deprecated module commands"

commit 0e470ca468870bb605c8171bf169df9406c52e05
Author: Chang Bo Guo <guochbo@cn.ibm.com>
Date:   Sat Nov 30 05:29:52 2013 -0800

    Replace deprecated method assertEquals
    
    TestCase.assertEquals is deprecated since Python 2.7, so need use new
    method name assertEqual.
    See http://docs.python.org/2/library/unittest.html#deprecated-aliases
    
    Change-Id: Iae9074f2afe2a572b60f6192aa6c871db42360ec

commit bdbc76e39259ec0a9f8f7551f813d4394e301068
Merge: 1408ff7 2e98c72
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Nov 30 03:03:41 2013 +0000

    Merge "Clean up duplicate code in v2.image_data.py"

commit 2e98c72a5e75bb28e1829ceda3b7dde62f455c48
Author: David Koo <kpublicmail@gmail.com>
Date:   Fri Nov 29 21:03:39 2013 +0800

    Clean up duplicate code in v2.image_data.py
    
    glance/api/v2/image_data.py:ImageDataController.upload has two identical
    "except exception.StorageFull as e" clauses. One should be removed.
    
    Fixes bug #1256207
    
    Change-Id: I42fc5126e493591045d09ffb9abbc4816e63ef60

commit 1408ff71f4d849c319866be92414361d8103acdd
Author: huangtianhua <huangtianhua@huawei.com>
Date:   Fri Nov 29 16:44:51 2013 +0800

    Fix docstring on detail in glance/api/v1/images.py
    
    "Returns detailed information for all public, available images" is
    inappropriate on detail, because the private image can be returned also.
    
    Change-Id: Ib173a6813cb70270866476368ffa1ccbb77047aa
    Closes-Bug: #1256217

commit 5fc030cce44ca0849cc3d2c1830ead6804c70cf9
Author: Sergio Cazzolato <sergio.j.cazzolato@intel.com>
Date:   Thu Nov 28 21:58:09 2013 -0500

    Use assertEqual instead of assertEquals in unit tests
    
    The method assertEquals has been deprecated since python 2.7.
    http://docs.python.org/2/library/unittest.html#deprecated-aliases
    Also in Python 3, a deprecated warning is raised when using assertEquals
    therefore we should use assertEqual instead.
    
    Change-Id: Ic8f152766d70146300b74f3803d7dab1e4de50e2
    Closes-Bug: #1256734

commit b31874284212d49560ddf4f36e5c9ca5d221f605
Author: Noboru Arai <arai@mxa.nes.nec.co.jp>
Date:   Thu Nov 28 11:32:36 2013 +0900

    Remove unused package in requirement.txt
    
    This patch is similar to https://bugs.launchpad.net/glance/+bug/1252344.
    
    Currently wsgiref/passlib package exist in requirement.txt,
    but I confirmed that they are unused in glance source by "grep" command.
    
    I removed them to clean up.
    
    Closes-bug: #1255826
    Change-Id: Ibbc2f1d413efacd0c18ba16c9250ef08470667d1

commit 2f97e120ec412f52de842d1389f0618b02a5eab2
Merge: 7ca0174 b3849a9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 27 16:16:05 2013 +0000

    Merge "Verify for duplicate location+metadata instances"

commit 88bb1af1d5e1e4d80be1e8bb7e21072c9c3b85e4
Author: Victor Sergeyev <vsergeyev@mirantis.com>
Date:   Mon Nov 4 17:12:24 2013 +0200

    Enable F40X checking
    
    Clean up imports due to F401 and F403 checks.
    F401  'module' imported but unused
    F403  unable to detect undefined names with wildcard import
    
    Change-Id: I487edb157de1a6babc7ad8a3fb65f195e476c490

commit b3849a9cc94212215898adc3d0127565220287a5
Author: Flavio Percoco <flaper87@gmail.com>
Date:   Fri Nov 15 18:04:08 2013 +0100

    Verify for duplicate location+metadata instances
    
    Glance allow users to have duplicated locations for the same image. This
    could led to some confusion and bad UX. This patch introduces such check
    in the insert method and makes both extend and append use it to add new
    images.
    
    The patch also adds a new exception - DuplicateLocation - and handles it
    in the v2 of the API. When `DuplicateLocation` is raised, a BadRequest
    will be returned back to the client.
    
    A new test for this functionality was added as well.
    
    Change-Id: I32400d467408e3d56bbbdbb3379357f2ee812e56
    Closes-bug: 1251244

commit 7ca0174d8c14252f705d3fd3a69325e5e4a65c58
Merge: ccb82b7 ff35e28
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 27 10:14:42 2013 +0000

    Merge "Add eclipse project files to .gitignore"

commit ccb82b776aeb5eef0125b860539c49a2f6c8a1ee
Merge: 9f70041 9941a51
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 27 01:02:53 2013 +0000

    Merge "Fixed quotes in _assert_tables() method"

commit 9f70041f54a44f99738aea3e5da544d036c34b4c
Merge: 53b6c18 d798615
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 27 01:02:43 2013 +0000

    Merge "Adds domain level support for tasks"

commit 53b6c18a004445103dff09e0518234f8891d32fe
Merge: 0a5064d 9a1049f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 26 22:57:54 2013 +0000

    Merge "Use common db model class from Oslo"

commit d79861560bafce63ff807b10cb435fd59e7becaa
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Sun Sep 1 16:17:25 2013 +0800

    Adds domain level support for tasks
    
    Includes:-
      - Domain Task class
      - Domain TaskFactory class
      - DB TaskRepo class
      - Necessary proxy classes for all of the above
      - Tasks related exceptions
      - Unit tests as applicable
    
    Partially implement blueprint async-glance-workers
    
    Change-Id: I619224bcc55b62303f3539454649528f2edc6e9d

commit 0a5064dc1e62a5961443b2a671e4265bf9c0aefc
Merge: c8dcacc 5eb852e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 26 20:42:18 2013 +0000

    Merge "Add tests for glance/notifier/notify_kombu"

commit c8dcacc454197fa3f837cfcaa483b4184666eb41
Merge: 8d8ddd5 3e38898
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 26 16:53:02 2013 +0000

    Merge "Documentation for using policies for protected properties"

commit ff35e28d23f5899d22a194d8860e6ca4ca2051b4
Author: Luis A. Garcia <luis@linux.vnet.ibm.com>
Date:   Fri Nov 8 20:21:17 2013 +0000

    Add eclipse project files to .gitignore
    
    Like some of the other projects (nova, heat, oslo, cinder) git ignore
    eclipse project files. This will remove manual steps for people
    developing from eclipse.
    
    Change-Id: Ib908c8d419072b440f5ec647bea8f13b97e48f7c

commit 8d8ddd50d0894ef9275f83074b590b55663d4616
Merge: b889924 b7f9120
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 26 14:40:42 2013 +0000

    Merge "Remove lxml requirement"

commit b889924c870e46faf870b9df32a5f9edc2435d16
Merge: fc99690 5ebf2e0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 26 11:54:57 2013 +0000

    Merge "Adding an image status transition diagram for dev doc"

commit fc996908e6b836164ab4eb8d87d1c382fbf1dbde
Merge: 8a9cf72 d35bcee
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 26 08:36:04 2013 +0000

    Merge "Add upload policy for glance v2 api"

commit 8a9cf72e749c9a25e99f347d5aea1a230b79c3fa
Merge: 8d232f7 48052ee
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 25 23:14:21 2013 +0000

    Merge "Log a message when image object not found in swift"

commit 8d232f7860ec7027e27d5275234cb7a08a22c148
Merge: 14d8fe4 6ea690b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 25 22:41:54 2013 +0000

    Merge "Cleanup and make HACKING.rst DRYer"

commit 9941a51aa17c62e5adff3c36843e6c2c3abc6348
Author: Victor Sergeyev <vsergeyev@mirantis.com>
Date:   Thu Nov 21 17:08:54 2013 +0200

    Fixed quotes in _assert_tables() method
    
    We suppose, that for some reason we need double-quotes around the
    some table names (see change id Id93283905256247bdd2663b799d41a7925804542)
    but there is also can be normal case, when we have table names without quotes
    
    Related to blueprint db-use-oslo-common-code
    
    Change-Id: I834cafc6796d517d731c3324fff5008c08b31f7a

commit 9a1049f9f640acfbd819ff119505d51aebd477c9
Author: Victor Sergeyev <vsergeyev@mirantis.com>
Date:   Tue Oct 15 14:31:16 2013 +0300

    Use common db model class from Oslo
    
    Modified common model class - added common `models.ModelBase` and
    `models.TimestampMixin` classes as base class instead of object.
    Renamed base model class from `ModelBase` to `GlanceBase`.
    Removed duplicated code.
    
    blueprint db-use-oslo-common-code
    
    Change-Id: I6038adcfcb6b985736ac8d9374ac0a2fe1cdcc96

commit d35bcee6abe5d02548525f79e5815c7c7e44dbae
Author: iccha.sethi <iccha.sethi@rackspace.com>
Date:   Sun Nov 24 21:08:13 2013 +0000

    Add upload policy for glance v2 api
    
    Related to bug 1250918
    
    There currently exists no check in set_data function for glance
    api v2 in the policy layer. This patch adds upload_image policy.
    
    DocImpact
    
    Change-Id: Ibccc78f8bccff3baa5aca574cf17bd14c5403ca2

commit 14d8fe408abada19354ecedce0b0c1db02c9a701
Merge: f936017 f63d2f6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 25 09:42:28 2013 +0000

    Merge "Add config option to limit image properties"

commit f93601759df5fa8f1f670eb1dacd815526094ced
Merge: ecf2ed2 1407aa1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 25 06:05:47 2013 +0000

    Merge "Explicit listing of Glance policies in json file"

commit 5ebf2e0b9bddc618bb8526289f181f3fc6617f3f
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Sat Oct 26 23:36:16 2013 +0800

    Adding an image status transition diagram for dev doc
    
    Now there is no image status transition diagram in the dev
    doc, this patch will add one and keep the image source as
    a dot file so that it can be updated easily in the future.
    See http://www.graphviz.org to get more info about .dot file.
    
    Fixes bug 1244995
    
    Change-Id: I076c461f688be93eab8d3d1fa541990d7b79da5e

commit f63d2f67ed1e7b8246b36bd08517a55a702a48a9
Author: Alex Meade <hatboy112@yahoo.com>
Date:   Fri Nov 15 22:42:55 2013 +0000

    Add config option to limit image properties
    
    This patch adds the image_property_quota config option. This allows a deployer
    to limit the number of image properties allowed on an image. The default value
    is 128, as is currently the limit enforced by nova. Users will only be able to
    update an image if the result of the transaction would be under this limit.
    This behavior is intended to be similar to 'quota_metadata_items' in nova.
    
    This is for both Glance v1 and v2.
    
    Fixes bug 1251518
    docImpact
    
    Change-Id: I4aa9504deae836404f11c9ada71a91f85caeba4c

commit ecf2ed21df38b45ba9ad6a7ce44ec75da247c5e0
Merge: 4b44488 4027cd4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 25 00:41:05 2013 +0000

    Merge "Log unhandled exceptions"

commit 1407aa18181f12fdfe21195902b460895defb3c0
Author: Yanis Guenane <yanis.guenane@enovance.com>
Date:   Thu Nov 21 15:50:23 2013 +0000

    Explicit listing of Glance policies in json file
    
    Most OpenStack components do list their policies in their policy.json but not
    Glance. It will let user directly know what options is available to them.
    Previously non-listed policy do follow the default rule now.
    List of available policies have been taken from Developer Guide page :
    http://docs.openstack.org/developer/glance/policies.html#constructing-a-policy-configuration-file
    
    Closes-Bug: #1254461
    Change-Id: I833db8385c2d3e8962a9c19b77c94d962eac475e

commit 4b44488d0527d220cb08ebc0617cb8a9adec1614
Merge: cdf241f e9468d7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Nov 24 14:05:23 2013 +0000

    Merge "Sync openstack.common.local from oslo"

commit cdf241f0f5b80bad2113dd2fedb26be9aff6eb87
Merge: 6f503d2 b316059
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Nov 24 08:02:49 2013 +0000

    Merge "Fixes content-type checking for image uploading in API v1 and v2"

commit 6f503d219b1274d48525f334ec57ff34127eecf4
Author: OpenStack Jenkins <jenkins@openstack.org>
Date:   Sat Nov 23 06:04:15 2013 +0000

    Imported Translations from Transifex
    
    Change-Id: I5f66ae08d76954b18441484db4fbdc303da942da

commit a9e1f7d1e5a95f1e42f0011e1330fe03a3bcbfb9
Merge: 5efe1c2 192e42e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 22 16:23:16 2013 +0000

    Merge "Add tests for glance/image_cache/client.py"

commit e9468d77a41ada6d77021c32c5df4351d368ea72
Author: Ilya Pekelny <ipekelny@mirantis.com>
Date:   Fri Nov 22 15:08:31 2013 +0200

    Sync openstack.common.local from oslo
    
    `local` has a broken TLS symbol - strong_store, fixed in oslo some time ago in
    Ib544be1485823f6c619312fdee5a04031f48bbb4. All direct and indirect
    (lockutils and rpc) usages of strong_store might be potentially affected.
    Original change to Nova: If4dd973acc23921dbc2bc69bb76225deb2802dad
    
    Closes-Bug: #1254046
    Change-Id: I934149092cacaaa78009565b6d8a6ba348c2dbe4

commit 5efe1c2b8f346a6a7eef76fd7a4a792be667ae32
Merge: 0d93999 30696aa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 22 12:40:07 2013 +0000

    Merge "Clean up numeric expressions with oslo constants"

commit 30696aa243a2770242e32739428d9f6432d0d395
Author: Chang Bo Guo <guochbo@cn.ibm.com>
Date:   Sun Nov 3 05:52:33 2013 -0800

    Clean up numeric expressions with oslo constants
    
    Replace numeric expressions with olso constants to make code
    more readable. This patch won't replace single 1024 if 1024 not
    in an expression like number * 1024.
    
    Change-Id: Ic1137774f0f9a2be89a7c2706d6eb52eb906ff1f

commit 21510b1f35c1e3cc9e230ed1ff6af75c118f0d62
Author: Chang Bo Guo <guochbo@cn.ibm.com>
Date:   Wed Nov 6 04:26:07 2013 -0800

    Don't use deprecated module commands
    
    The commands module was deprecated since version 2.6 and it has been
    removed in Python 3. Use the subprocess module instead.
    See http://docs.python.org/2/library/commands#module-commands
    
    Closes-Bug: #1248216
    Change-Id: I0a89dbba374a28b16a6e24f2a1b05ce06e044de4

commit 0d93999c966de03e3adcf16e29cd924485b5c06d
Merge: e6be4ac 84b0597
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 22 00:46:58 2013 +0000

    Merge "Fixes image delete and upload contention"

commit 5eb852e616cb5f76258c11249cf024a7c3329fca
Author: Julia Varlamova <jvarlamova@mirantis.com>
Date:   Mon Aug 26 12:23:48 2013 +0400

    Add tests for glance/notifier/notify_kombu
    
    Add tests for glance/notifier/notify_kombu in
    RabbitStrategyTestCase class.
    Tests for:
    - _close()
    - _connect()
    - time.sleep() in reconnect()
    - processing KombuMaxRetriesReached error in _notify()
    
    Change-Id: I39805ce460ce2b71dcb05e63cb898c5569d726b0

commit 84b05974b42762efb6d690a7b46ae76aec0ece45
Author: Edward Hope-Morley <edward.hope-morley@canonical.com>
Date:   Sat Oct 26 19:06:19 2013 -0700

    Fixes image delete and upload contention
    
    If an image upload completes during a delete on the same
    image, the image data may not be deleted. This patch
    resolves this issue and provides a unit test to test it.
    
    Co-authored-by: Hirofumi Ichihara <ichihara.hirofumi@lab.ntt.co.jp>
    Change-Id: I913cd3e4963b7b60da6a856eb820c1afcc9017d7
    Fixes: bug 1245099

commit 4027cd4e704508889f0a86f5e56c9554fa0863a0
Author: Russell Sim <russell.sim@gmail.com>
Date:   Mon Nov 11 16:31:07 2013 +1100

    Log unhandled exceptions
    
    Enable logging of unhandled exceptions within the WSGI server.  In the
    case of an internal server error a stacktrace will be logged if glance
    API or registry has the verbose option set to True.
    
    Partial-Bug: #1246968
    Change-Id: I68390495331ba30dab1cd60584d0ed01357514ae

commit 192e42e232234ba60a84fab19e25b38077fb22ec
Author: Julia Varlamova <jvarlamova@mirantis.com>
Date:   Tue Nov 19 16:54:03 2013 +0400

    Add tests for glance/image_cache/client.py
    
    - add test cases for all CacheClient's functions in
    CacheClientTestCase class
    - add test cases for get_client function in
    GetClientTestCase class
    
    Change-Id: Idff48cbc1cf8c1f33125c258e97a4587bb1123bd

commit b7f9120cd4623d8284c4edfea760ef10e1193492
Author: Alex Meade <hatboy112@yahoo.com>
Date:   Mon Nov 18 16:54:52 2013 +0000

    Remove lxml requirement
    
    Fixes bug 1252344
    
    Change-Id: Iaa10b7c78bf03b00c84a27592265bb79203df376

commit e6be4ac6d05c04ff93ca83f2a5cce9631326a3fb
Author: Victor Sergeyev <vsergeyev@mirantis.com>
Date:   Thu May 30 14:21:54 2013 +0400

    Sync common db and db.sqlalchemy code from Oslo
    
    Patch contains common code from Oslo for work with database:
    work around session, connection, engines, models, migrations
    and another utils for work with DB.
    
    We should use this code instead of Glance implementation.
    
    blueprint use-oslo-common-db-code
    
    Change-Id: I7d2bd32db7265f06efd10f5071e3426c6e10a348

commit 3428e6d637896690164b0a08d3dd3852b0c3c560
Author: Julia Varlamova <jvarlamova@mirantis.com>
Date:   Fri Nov 15 19:50:43 2013 +0400

    Update glance/opensatck/common from oslo Part 3
    
    Update from oslo:
    - glance/openstack/common/fixture
    - glance/openstack/common/test.py
    
    And update openstack-common.conf
    
    Oslo commit: 764ad35e89d20008bf48d17e4129cfce5b717a6c
    
    Change-Id: Ic20666521e2e3d4241035bcb07fa7da3a4a5bf38

commit 94aad9ec7d920edcc0be59c1ffa6b8223ecc983a
Merge: 7ed9ae0 7e6319d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 15 00:53:13 2013 +0000

    Merge "glance-manage should work like nova-manage"

commit 7e6319d95554413f1a0856603f434c9c60b8d256
Author: AmalaBasha <amala.alungal@RACKSPACE.COM>
Date:   Wed Sep 18 18:52:47 2013 +0530

    glance-manage should work like nova-manage
    
    nova-manage supports subcommands of db, for nova-manage,
    eg) 'nova-manage db sync',
    glance manage however has individual commands like db_sync, db_version
    etc. This patch aims at adding the db operations as subcommands to db in
    glance-manage similar to nova and refactoring this bit of code in
    cmd/manage.py
    
    Fixes: bug 1213197
    Change-Id: I6fad31766bc1cec2a666a7ebc8df5c732007c5f1

commit ce2e5dc60b017f6302878d36d2f4e16b19080afb
Merge: 638e9e6 dab83f9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 28 02:16:07 2013 +0000

    Merge "Update my mailmap"

commit 638e9e6c315097757aa12edc892d2ab7eb7ddceb
Merge: f8fbf00 da1e39a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Oct 27 14:51:34 2013 +0000

    Merge "Adds tasks to db api"

commit f8fbf007ca2dfe64d6dccbc02459b9af7de70048
Merge: 4887427 63b45d8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Oct 27 12:30:59 2013 +0000

    Merge "Remove redundant dependencies in test-requirements"

commit 4887427742e8956fff7478439268df343b344e3f
Merge: 8160ae2 4abd3e2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Oct 27 11:30:22 2013 +0000

    Merge "Convert Windows to Unix style line endings"

commit da1e39af71b795df18026b3c1eaac049114ed4ec
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Thu Sep 12 15:47:17 2013 +0800

    Adds tasks to db api
    
    And includes unit test cases.
    
    Partially implement blueprint async-glance-workers
    
    Change-Id: I4b11e3531edf7c85d27f2a4e5667b920fe2333e7

commit 7ed9ae055d0269cdea65a38b9700ee2cf6d708db
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Sat Oct 26 03:27:49 2013 +0800

    Sync lockutils from oslo
    
    Change-Id: I906810cd8b109dd2b88e76c5aec9536c62913068
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit 9e439a1f8eb305d5124939b5ab1626d8d9edf8d3
Merge: da539f2 607acb3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 14 12:46:47 2013 +0000

    Merge "Add policy style '@'/'!' rules to prop protections"

commit da539f2f3152fa27685cc33e006092019d4041ca
Merge: 616b097 1236af6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 13 14:32:37 2013 +0000

    Merge "Enable H501: do not use locals() for formatting"

commit 616b097c052f5bf59b05326ed1d2d1ae1c703dc9
Author: Chang Bo Guo <guochbo@cn.ibm.com>
Date:   Fri Nov 1 22:17:34 2013 -0700

    sync log from oslo
    
    5fef5a8105 allow keeping of existing loggers with fileConfig
    fb8075a19d Add amqp=WARN,qpid=WARN to default_log_levels
    4654a5d247 Don't override default value for eventlet.wsgi.server logging
    41ddd7a975 _get_log_file_path explictly return, when logfile/logdire unset
    e12e6b45f8 Make openstack.common.log Python 3 compatible
    572cfecb4d Make Messages unicode before hitting logging
    3243cdfbe9 python3: handle module moves in log
    
    DocImpact
    
    Change-Id: I3f58066c6d18477ec7cfcfd610c71baae9b2e21f

commit d6ac1b18c883c3e46d0094b3bbbb187ebb4c2cf5
Merge: a3b79e6 e99780f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 13 03:22:23 2013 +0000

    Merge "Remove use of locals() when creating messages"

commit a3b79e6bac603292fcd014c84dfa46ede03ee2cd
Merge: c3311b6 3db3eda
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 12 15:37:53 2013 +0000

    Merge "Remove "image_cache_invalid_entry_grace_period" option"

commit c3311b61aee5efab3c2884e31604fc7de791fa97
Merge: 93edd1b 66f52c0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 12 15:08:01 2013 +0000

    Merge "Remove unused method setup_logging"

commit 607acb33be18f0e508329f3c8514061322d294a9
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Wed Sep 11 16:31:38 2013 +0000

    Add policy style '@'/'!' rules to prop protections
    
    A value of '@' will always allow the corresponding operation for a
    property, and '!' will always disallow the operation.
    
    Related to blueprint api-v2-property-protection
    
    DocImpact
    
    Change-Id: I1196a58a6f97cd0856bf97463386776a00359a49

commit 93edd1bdc67d31bb0058d157d97af444b7f195e4
Merge: 6e9c4dc 518bbf7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 12 13:41:45 2013 +0000

    Merge "Changed header from LLC to Foundation based on trademark policies"

commit 6e9c4dc9f94baef8cc3a72d3c6cc0da9547be343
Merge: 60f4cfd 0777911
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 12 07:54:07 2013 +0000

    Merge "Add unit test cases for get func of db member repo"

commit 60f4cfda04947e95c28b1c2934427d1828914849
Merge: 069c33e d4e3d8b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 12 06:58:10 2013 +0000

    Merge "Glance v2: Include image/member id in 404 Response"

commit 1236af603949352c1d6b809841f2ff7e89aaca35
Author: Luis A. Garcia <luis@linux.vnet.ibm.com>
Date:   Mon Nov 11 23:14:49 2013 +0000

    Enable H501: do not use locals() for formatting
    
    Change-Id: I8b63c76b50cb3bb74b136678a945df79eb19856e

commit e99780fe8de9a183f5ec3fa3708c884174bf4017
Author: Luis A. Garcia <luis@linux.vnet.ibm.com>
Date:   Fri Nov 8 20:54:40 2013 +0000

    Remove use of locals() when creating messages
    
    Per the hacking guidelines locals() should not be used when creating
    messages, but additionally this is preparation for upcoming message
    internationalization work.
    
    Change-Id: I9ce616b94faf2d7df895c6bffb94baac8c82c7ce

commit 069c33e78dda8b50b90451ea302894928a382467
Merge: 8828ae8 753885d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 11 17:39:25 2013 +0000

    Merge "assertEquals is deprecated, use assertEqual"

commit 8828ae84396d4a9cc264c8ab20bdef0dee0aa756
Merge: 91c31f5 94b9e66
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 11 16:02:50 2013 +0000

    Merge "Fixes error message encoding issue when using qpid"

commit 91c31f5996bd7df87be0a1c0f59557e4db000962
Merge: 153e33a d09e144
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 11 10:12:57 2013 +0000

    Merge "Document default log location in config files"

commit 3db3edabe6771f9d24e995720b82b600f3031386
Author: Noboru Arai <arai@mxa.nes.nec.co.jp>
Date:   Mon Nov 11 15:03:56 2013 +0900

    Remove "image_cache_invalid_entry_grace_period" option
    
     "image_cache_invalid_entry_grace_period" option is unused
    in *.py, but the option is used in glance-cache.conf.
    
     I removed "image_cache_invalid_entry_grace_period" option
    from glance-cache.conf.
    
    Change-Id: Id235945f9cc89219118e4a3ec077f0e887a3b3ef
    Closes-Bug: #1249949

commit 0777911704a603a8f34cb17ce2b35e5186a566b5
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Sun Sep 29 22:05:44 2013 +0800

    Add unit test cases for get func of db member repo
    
    Fixes bug 1232756
    
    Change-Id: I35a2cca7108d0a178d33a15594a2b8d56961ab73

commit 153e33a8f5ae097aa1d9f0bdbf0010fc387dc22c
Merge: e62c5b0 127fc75
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 7 04:49:18 2013 +0000

    Merge "Sync units module from olso"

commit 753885d3cd3ecf2126dc3e39b56ee4705e34386c
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Sun Sep 29 22:52:07 2013 +0200

    assertEquals is deprecated, use assertEqual
    
    Also change to assertTrue/False where assertEqual(True,/False) was
    used.
    
    Change-Id: I9e592d9c40c3da61b5e7af7e7ad5247645249eff

commit e62c5b0dda67db8703ec53336b66d3cd1a23d96d
Merge: 6ba3ebb 6a4fc92
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 6 16:55:05 2013 +0000

    Merge "Fix Pep8 1.4.6 warnings"

commit d09e1447b20038ee43b9269811f28db5cae446df
Author: Jon Bernard <jobernar@redhat.com>
Date:   Tue Nov 5 14:21:46 2013 -0500

    Document default log location in config files
    
    It's not immediately obvious where log output will go if the 'log_file' and
    'use_syslog' directives are either missing or commented out.  This patch updates
    the documentation in the config files to mention the stdout default.  This
    should help remove any confusion when configuring logging for glance.
    
    Change-Id: I36f2a9d30bdee1949e60f413b7f181631c564ed5
    Closes-Bug: #1248292

commit 66f52c0b0d03362b72f65631af3e562cc999f84a
Author: Chang Bo Guo <guochbo@cn.ibm.com>
Date:   Fri Nov 1 19:53:07 2013 -0700

    Remove unused method setup_logging
    
    Method setup_logging in glance/common/config.py wasn't used anywhere.
    Similar function is in oslo, and some modules in Glance are using
    function log.setup from oslo, like glance/cmd/manage.py#L123
    
    Closes-Bug: #1248214
    
    Change-Id: Icda26943f02df5e495179868aa8b1f4c4e151803

commit 6ba3ebbf8d55ea2619da50f68b435936e6ad7e51
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Sun Jun 9 10:46:50 2013 +0200

    Start using PyFlakes and Hacking
    
    Instead of globally ignoring Pyflakes and Hacking
    warnings, blacklist explitly only those that trigger
    numerously. Fix the rest alongway and start to gate
    on those that are now passing.
    
    Change-Id: Ia19dc708cf0ccab2da5b46d1652f16e901499c24

commit 127fc7505c04614e67d14bd1a279c09f5a533f67
Author: Chang Bo Guo <guochbo@cn.ibm.com>
Date:   Sun Nov 3 05:21:47 2013 -0800

    Sync units module from olso
    
    There are lots of numeric expressions across some projects, such as
    1024*1024 , 1024**3, 1000, 1000000 etc. This patch adds binary and
    decimal unit constants. Replacing nummeric experssions with these
    constants makes code more readable.
    
    Change-Id: I45fb5a10009f22b1eedb07b3e52f1ce40403b068

commit 94b9e66360387d24548f165cc4c7ee67f5160a0c
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Mon Oct 21 23:19:32 2013 +0800

    Fixes error message encoding issue when using qpid
    
    Making the message only consist of primitive types
    before sending it by qpid.
    
    Fixes bug 1242734
    
    Change-Id: I3ff7a19af9a7671f955345ada6acfba8bf573c70

commit 0c1f60d06bae8e571c7accb596ad9268ac066c40
Author: Nikhil Komawar <nikhil.komawar@rackspace.com>
Date:   Wed Oct 23 16:34:48 2013 -0400

    Use mock in test_policy
    
    FakePolicyEnforcer is trying to imitate the real policy enforcer.
    We don't need it in the test_policy tests.
    
    fixes bug 1243902
    
    Change-Id: Id82d09dc9aafbf57b6fc968ae1ded944b8d64229

commit 650c311dafee4ed297cc0bbebc625ce4f5239628
Merge: 6199ebe 1fbf098
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 31 21:49:22 2013 +0000

    Merge "Use HTTP storage to test copy file functionality"

commit 6199ebe7e1e5c00f3cc7ab8c5d8782e653665114
Merge: 4e7c8e6 c04ebd1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 31 17:46:20 2013 +0000

    Merge "Fixes wrong Qpid protocol configuration"

commit 4e7c8e6d553e9d187b6c7f6eb284b4b7d63cfd74
Author: Thomas Leaman <thomas.leaman@hp.com>
Date:   Thu Sep 26 15:34:13 2013 +0000

    Use packaged version of ordereddict
    
    Removes the need for ordereddict source to exist in the project.
    Uses collections.OrderedDict for python2.7 and above and falls
    back to ordereddict.OrderedDict for python2.6
    
    Fixes bug 1229569
    
    Change-Id: Iaf8b500d7b340f370df239bfe9ab0656575dc93b

commit a3591f8e27aeb2f5c0f84a1445edf9af57773744
Author: OpenStack Jenkins <jenkins@openstack.org>
Date:   Wed Oct 30 06:02:36 2013 +0000

    Imported Translations from Transifex
    
    Change-Id: I88962562acbec7151079d0022d09ed0f9335458d

commit e8fc1aec2148392ff74028c0839ab208eda613b6
Merge: c0e3602 635ceac
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 29 15:46:49 2013 +0000

    Merge "checking length of argument list in "glance-cache-image" command"

commit c0e3602940998ad4f1562f9afa95f6a6d7b71911
Merge: f664fb4 21ea5f6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 29 11:15:47 2013 +0000

    Merge "Replace qpid_host with qpid_hostname"

commit f664fb4dfe5824ae0b641f383f0033d2ce24aba7
Merge: 46340c2 cdd39e0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 28 23:03:06 2013 +0000

    Merge "Addition of third example for Property Protections"

commit d4e3d8b6a24620393027787a24bfc5849dc94367
Author: Alex Meade <hatboy112@yahoo.com>
Date:   Fri Oct 25 15:17:02 2013 +0000

    Glance v2: Include image/member id in 404 Response
    
    Fixes bug 1242920
    
    Change-Id: Idfce3026073be036f0c2416d33065741a342abfd

commit 46340c289cd20fcfa7b3425948d64b8281bbcd7c
Merge: ce2e5dc d02a50f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 28 14:57:32 2013 +0000

    Merge "Avoid redefinition of test"

commit 21ea5f6535dd484fa7934d07f3519fbda7e5f6ee
Author: Flavio Percoco <flaper87@gmail.com>
Date:   Mon Oct 21 16:20:26 2013 +0200

    Replace qpid_host with qpid_hostname
    
    This patch replaces `qpid_host` with `qpid_hostname` in both the
    documentation and the config file sample. `qpid_host` has been shipped
    as the parameter to specify qpid's hostname, although the correct one is
    `qpid_hostname`.
    
    DocImpact
    Closes-bug 1242715
    
    Change-Id: I25f2d0e505560e1762f7f059728c33c47a23439e

commit 6a4fc92ceec29255faec7e6bb20ccbb562be1b2b
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Fri Oct 18 17:00:56 2013 +0200

    Fix Pep8 1.4.6 warnings
    
    Pep8 1.4.6 fixes some missed occassions of the indentation
    checks.
    
    Change-Id: Ie87005a9b204db70d4b22bc28425758b282b1eb0

commit b316059835798875403b4e60fddad8e2976c0b28
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Mon Oct 21 16:59:04 2013 +0800

    Fixes content-type checking for image uploading in API v1 and v2
    
    wsgi.Request.get_content_type() need a list or set for
    allowed_content_types as parameter, but API controller passes request's
    content type as a string into it directly. This caused 'in' testing
    failure.
    
    Fixes bug: 1241387
    
    Change-Id: I820ccce92e4ec1c94b5144309d6ebe2b57baaf55
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit dab83f9fd9a4b6c0eed6a6433304d46744c2d24a
Author: Zhenguo Niu <zhenguo@unitedstack.com>
Date:   Fri Oct 25 16:14:33 2013 +0800

    Update my mailmap
    
    Using new email address.
    
    Change-Id: I8643bd23a1c7de9c8066b8e00853a2860dbbfd2f

commit cdd39e0495b1d82f46ed1604966144e613f3f857
Author: eos2102 <eos2102@gmail.com>
Date:   Wed Oct 23 21:08:22 2013 -0700

    Addition of third example for Property Protections
    
    Includes an example to limit all property interactions to admin only using policy rule
    context_is_admin defined in policy.json
    
    Change-Id: I22dddc06a84312b3b1cbd195cb84839e0321a9f0
    Closes-Bug: #1243945

commit 8160ae293383ec600c05fd2e4b38164bca7704c4
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Mon Oct 21 18:40:06 2013 +0800

    Sync iso8601 requirement and fixes test case failures
    
    1. Sync requirements from global.
    2. iso8601>=0.1.7 "parse_date()" could successfully handle date string
    which only have date part like YYYY-MM-DD, it caused two Glance test
    cases failure.
    
    Fixes bug: 1242501
    
    Change-Id: I2625eb3888111829a9da4d093b34193b8795f264
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit c04ebd1a77d5dcf226812fadab08257207641220
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Thu Oct 24 01:19:39 2013 +0800

    Fixes wrong Qpid protocol configuration
    
    notify_qpid.py is suffering from the same issue as described in
    launchpad bug https://bugs.launchpad.net/oslo/+bug/1158807.
    Instead of setting connection.transport, it is attempting to
    set connection.protocol.
    
    Fixes bug 1243821
    
    Change-Id: Ice3e7ad917c158a5953475809f3f46f48fd6054d

commit 1fbf09814481229e722873474d0be56bb7d53803
Author: Arnaud Legendre <arnaudleg@gmail.com>
Date:   Mon Oct 21 11:16:00 2013 -0700

    Use HTTP storage to test copy file functionality
    
    The copy file functionality should be tested using Filesystem and HTTP
    backend stores instead of S3 and Swift (requiring more configuration).
    
    Closes-Bug: #1175940
    
    Change-Id: I8c45598f2f004006f379861479f6f34150d0f649

commit 63b45d8785531c4b1aa2b6101a553380c0795880
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Fri Aug 16 10:34:40 2013 +0800

    Remove redundant dependencies in test-requirements
    
    Hacking 0.7 already pins down pep8, pyflakes and flake8 so they can be
    removed from test-requirements as they are indirect dependencies.
    
    Co-author: Joe Gordon <joe.gordon0@gmail.com>
    
    Change-Id: Ia9f50e35f292ba35f8ca036cd66c930a3ad46ffd

commit 3e388988fed9545c8e37666c389611e9c8b0536f
Author: iccha.sethi <iccha.sethi@rackspace.com>
Date:   Tue Oct 15 14:14:54 2013 +0000

    Documentation for using policies for protected properties
    
    Add documentation for using policies to describe
    property protections.
    
    Related to bp api-v2-property-protection
    
    Change-Id: Ic1fc4d3d69dee7ba65462a5bda6cdbe1a266077e

commit 635ceac07969a700756e571ff5777993b59b9829
Author: Noboru Arai <arai@mxa.nes.nec.co.jp>
Date:   Fri Oct 11 13:04:52 2013 +0900

    checking length of argument list in "glance-cache-image" command
    
    Currently, "image id" is got by "pop" method without checking length
    of argument list in "queue_image" method(glance/cmd/cache_manage.py)
    
    Consequently, only last element of argument list is used,
    other elements are ignored.
     ex)
      glance-cache-image queue-image <image-id1> <image-id2> <image-id3>
      -> <image-id3> is selected and queued.
         <image-id1>/<image-id2> is ignored.
    
    Because "glance-cache-image" command is user command(*),
    I think that elements which are ignored should not be existed
    and checking of length is essential.
    
    In order to check length, I replaced "try/except" statement with
    "if/else" statement.
    
    Also, I modified 2 methods at the same point.
     -delete_queued_image
     -delete_cached_image
    
     * http://docs.openstack.org/developer/glance/cache.html
    
    Change-Id: I5cff1f9b5fe8f718ca74f1c9f58dba469396dc8f
    Closes-Bug: #1236709

commit 56b225fb6f61308436603e2c9ce44ce580be1991
Merge: a2052a4 eb87f1f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 17 17:42:40 2013 +0000

    Merge "Using policies for protected properties"

commit a2052a47982f7bea88c92283f5dca45f3c9462bf
Merge: 29c0c00 0e262d1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 17 16:55:24 2013 +0000

    Merge "optimize queries for image-list"

commit 29c0c006050ce851a1966f21be994b23dc2373d8
Merge: 419cea9 e8e293d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 17 14:12:54 2013 +0000

    Merge "Use built-in print() instead of print statement"

commit 419cea96bb865ab225cd825e4c80efda99b33608
Merge: 9117488 3b71b28
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 17 09:00:31 2013 +0000

    Merge "Refactor glance/tests/unit/v1/test_registry_client.py"

commit 0e262d1ec7f5c7073a6d9f1d7bfadc3777b62297
Author: Venkatesh Sampath <venkatesh.sampath@rackspace.com>
Date:   Wed Aug 21 16:59:10 2013 +0530

    optimize queries for image-list
    
    - avoid full table scan on images table by converting,
    images.is_public = 1 OR images.owner = 'OWNER'
    to
    query WHERE images.is_public = 1
    UNION
    query WHERE images.owner = 'OWNER'
    - move image related conditions to the inner union queries
    - remove unwanted union of queries in case of admin querying for image list
    - change the condition images.status != 'killed' to images.status in ('active', 'saving', 'queued', 'pending_delete', 'deleted')
    - convert the correlation subqueries that are used for image_property filters into inner joins
    
    Fixes bug 1211315
    
    depends on bug 1214830
    
    Change-Id: Ie7458044edbe1ef64871bcf5ef4996ed3cc0f957

commit eb87f1fae8f13c7ab09c9fec56bbfa1fdfdf17fc
Author: iccha.sethi <iccha.sethi@rackspace.com>
Date:   Sun Sep 15 15:37:57 2013 +0000

    Using policies for protected properties
    
    This patch extends the way we can define rules for property protections.
    It allows us to use the roles/rules defined in policy.json and leverage
    the policy language for property protections as well.
    
    DocImpact
    
    Related to bp api-v2-property-protection
    
    Change-Id: I4789ebb2645171280185d2c76138e78d954b5954

commit 91174889c328dd98fce28e49b7829a60017b7ca0
Merge: 519e11f f7e9122
Author: OpenStack Jenkins <jenkins@openstack.org>
Date:   Wed Oct 16 22:20:49 2013 +0000

    Merge "Updated from global requirements"

commit 519e11f30a008bc038687bc785a8217c0fad0569
Merge: e17e914 52ab24b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 16 20:11:27 2013 +0000

    Merge "V2 RpcApi should register when db pool is enabled"

commit e17e9142425890d677191912220a1c3b69db3fd5
Merge: 6abd845 233290f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 16 19:10:08 2013 +0000

    Merge "Add call to get specific image member"

commit 6ea690b5c90cb9c534a2e90bd43f2c0d0e892a18
Author: Keshava Bharadwaj <kb.sankethi@gmail.com>
Date:   Wed Oct 16 15:52:49 2013 +0530

    Cleanup and make HACKING.rst DRYer
    
    Reference the OpenStack hacking guide in HACKING.rst and remove
    duplicate entries. Adds placeholder section for glance specific
    rules.
    
    Change-Id: I1bfff8c69c9370e2d648197b7e71e229695ef627

commit 6abd845ca783c5f75b2eebc78b35c81f7ef5c55e
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Tue Aug 20 14:15:07 2013 +0800

    Enable tasks data model and table for async worker
    
    Add tasks data model and table for async worker to
    store the tasks data persistently.
    
    Partially implement blueprint async-glance-workers
    
    Change-Id: I2b2d70295da4905bf75cffc2b2eadec174d1abfc

commit f7e912214091b361b5629b729987893dfe28ebb9
Author: OpenStack Jenkins <jenkins@openstack.org>
Date:   Wed Oct 16 16:09:02 2013 +0000

    Updated from global requirements
    
    Change-Id: I4f26d3a8790c799e5c1f7f81031406e0c57545f9

commit 503c07d057cd27f723782b693713f3d277a7391f
Merge: 3021172 1b81289
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 16 16:08:23 2013 +0000

    Merge "Correct documentation related to protected properties"

commit 233290f4a6c2f34100436b7cb9374c2b42fefa99
Author: iccha.sethi <iccha.sethi@rackspace.com>
Date:   Tue Oct 1 18:54:16 2013 +0000

    Add call to get specific image member
    
    Fixes bug 1233806
    
    Add GET call to get a specific image member. Makes it easier to
    check image member status
    
    DocImpact
    
    Change-Id: I63039bc15d2045fbceb71cae56225a9ee9eecd51

commit 3021172d9f650b546dd1bec48b25e26805f5ff84
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Sat Sep 7 15:15:56 2013 +0200

    Put formatting operation outside localisation call
    
    Otherwise the strings will not be properly extracted
    for translation.
    
    Change-Id: I21a1c56577e7cd9fb2e31fe380b3c3bc8d1c48bf

commit fe942d3bf683881197c775a17386d32fcebb8635
Merge: f4a3def 41b3b0d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 16 06:47:44 2013 +0000

    Merge "Remove unused import"

commit f4a3defac2a4670dca5f1f80c14f3132dce80d26
Merge: 90372cc cb2b0a4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 15 20:58:45 2013 +0000

    Merge "Code dedup in glance/tests/unit/v1/test_registry_api.py"

commit 90372cc9ab0f62f9fc8d33c3d9b8c03cb48e0e93
Merge: bb80490 43fd5ac
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 15 20:48:32 2013 +0000

    Merge "Removed unsued import, HTTPError in v1/images.py."

commit bb8049087e2195968ae3c1e3e995d9dca9fa9642
Merge: 27c886e f868ae9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 15 19:24:51 2013 +0000

    Merge "Fix typo in config string"

commit 27c886eb3f5b62407037676be490d5f31a0a9ed4
Merge: 2445683 55dcb9e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 15 19:09:11 2013 +0000

    Merge "Refactor glance/tests/unit/v2/test_registry_client.py"

commit 2445683b6c2379882b052eb5c932fd80bbfd82bc
Merge: f8c8a7e 91a226c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 15 18:20:37 2013 +0000

    Merge "Improve test/utils.py"

commit f8c8a7e85d9a00655d5a76c4ed9b7f1534612336
Merge: b0e09db 00ff936
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 15 18:06:33 2013 +0000

    Merge "The V2 Api should delete a non existent image"

commit 41b3b0d4899ea19900794f4da32b39058f8440b6
Author: Victor Sergeyev <vsergeyev@mirantis.com>
Date:   Tue Oct 15 15:12:08 2013 +0300

    Remove unused import
    
    Module exception from glance.common in
    glance.tests.unit.v2.test registry api module seems to
    be unused, so it's import can be safely removed.
    
    Change-Id: Ifc201c6fb1226e556d4217898844e04069d81932

commit b0e09db3d0180948025b165d9a672f664a112ee3
Merge: e332808 149f4e0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Oct 12 04:26:11 2013 +0000

    Merge "Remove whitespace from cfg options"

commit e3328089ef8b99b6ecf66bb2e07aec59388d4afd
Merge: 2f3a86b dab794e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Oct 12 01:58:28 2013 +0000

    Merge "Enclose command args in with_venv.sh"

commit 2f3a86b1108c40865228c61a6a76b9ad251c8e8e
Merge: c144a87 113a229
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Oct 11 22:18:10 2013 +0000

    Merge "Use Unix style LF instead of DOS style CRLF"

commit 00ff9367f25d34ea43aceb40a6146d8d53e5c06f
Author: sridevik <koushiksridevi8@gmail.com>
Date:   Thu Sep 19 01:34:59 2013 -0500

    The V2 Api should delete a non existent image
    
    Glance V2 api initiates the deletion of an image that
    got deleted during upload. This ensures that there
    are no orphaned chunks of the image left behind
    
    Fixes bug #1226013
    
    Change-Id: I4cf5c49d2a6d2157a38467d9f7bcb20c4562b642

commit c144a8796ef02c7fc2b1a0b6f07c8d313811c6c3
Merge: 3a9e59b 408ceba
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Oct 11 02:19:42 2013 +0000

    Merge "Avoid printing URIs which can contain credentials"

commit 408cebacc3d8b3e602a098ff9eff27b8fbdfc696
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Mon Sep 30 16:34:17 2013 +0000

    Avoid printing URIs which can contain credentials
    
    Fix for bug 1233275.
    
    Change-Id: I24d8b57418eb678767b33840973a632eb2132c6a

commit 149f4e061cc8d200cbef566ca46d06626d28f422
Author: Andreas Jaeger <aj@suse.de>
Date:   Thu Oct 10 21:00:28 2013 +0200

    Remove whitespace from cfg options
    
    This extra whitespace will cause warnings in the openstack-manuals,
    hus remove it.
    
    Change-Id: If0c7c2a06b9c6a01c87ee7e03ee5b17a18c746e9

commit 3a9e59bc9005b1eaf9c7a241ff585aee4053d5c2
Merge: 1f03b99 18581b3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 10 16:20:26 2013 +0000

    Merge "Update functional tests for swift changes"

commit 1f03b99ec284df9ef4684d807e68e19c3b630d76
Merge: b08bec9 6d5fd48
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 10 16:19:48 2013 +0000

    Merge "Fixes rbd _delete_image snapshot with missing image"

commit b08bec98da38f5c85ef2613d7d7e81edcf17885c
Merge: 3b8a8e7 74eb73f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 10 16:02:03 2013 +0000

    Merge "Glance GET /v2/images fails with 500 due to erroneous policy check"

commit 3b8a8e73f6710bc58f7f5833afdcb4f1666cd5e5
Merge: 475fd0e 51c5185
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 10 16:00:59 2013 +0000

    Merge "Remove start index 0 in range()"

commit 113a22984b111ae454ab96d539773ce3974f4f1e
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Wed Oct 9 21:07:54 2013 +0000

    Use Unix style LF instead of DOS style CRLF
    
    This was causing pyflakes to fail with syntax errors on some systems:
    <stdin>:22: invalid syntax
    
    Change-Id: I57669392a5ee2a786d2a6e18a9dfd0abb054b71b

commit 475fd0eaf78f96cd5143e6015474e892db259962
Merge: 2c8b299 f5eb70f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 9 17:48:07 2013 +0000

    Merge "Remove the unused mapper of image member create"

commit 2c8b2992c5b81cd08816c4235dee90e2b8fb2287
Merge: 0f9a081 b01f121
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 9 16:08:34 2013 +0000

    Merge "Glance manage should parse glance-api.conf"

commit 0f9a0812e6e2460e04faf1050d2e132bb93e4244
Merge: 8692ac4 2d1a67a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 9 16:01:45 2013 +0000

    Merge "Do not allow the same member to be added twice"

commit 8692ac4c468d764e01f734bf29ece2170922cb94
Merge: a50bfbf b040c1a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 9 16:00:54 2013 +0000

    Merge "Fix misused assertTrue in unit tests"

commit a50bfbf490fd354d08abd25b67aaab83b2a17a85
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Mon Oct 7 11:44:33 2013 +0800

    Adding 'download_image' policy enforcement to image cache middleware
    
    Currently image cache middleware not care 'download_image' policy, the
    enforcement caused user receive empty content but with HTTP 200 code
    rather than 403 when client attempt to download image using v2 API. And
    the real Forbidden exception be logged in glance-api log which image
    application action raised. The end user is confused by this behavior.
    
    Fixes bug: 1235378
    
    Change-Id: Ibaa7ccf8613ee3cce4cb6a72e3206a2c94122222
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit b01f1212a572f97def840631e7b8c9d7edbc8d14
Author: sridevik <koushiksridevi8@gmail.com>
Date:   Mon Sep 16 00:31:40 2013 -0500

    Glance manage should parse glance-api.conf
    
    glance-manage does not currently parse glance-api.conf, when
    glance-registry.conf is present. Currently it's parsed conditionally.
    But, when some configs from glance-api.conf are required, we would
    need parse them both.
    eg. CONF.swift_store_user, CONF.swift_store_key in glance-api.conf
    
    Fixes bug #1225863
    
    Change-Id: I553c1bb460229489b38a57d9c91995816bfe09ee

commit 0059c1d8aac4e4afc12d5a5dcbe10db3aa32df8c
Merge: 4c64bf1 0057aed
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 9 04:32:00 2013 +0000

    Merge "Allow tests to run with both provenances of mox"

commit 6d5fd4836475d0f3787b669cab5ef2d5266f474f
Author: Edward Hope-Morley <edward.hope-morley@canonical.com>
Date:   Mon Sep 30 12:22:30 2013 +0100

    Fixes rbd _delete_image snapshot with missing image
    
    Also ignore if _delete_image returns NotFound when cleaning up
    following failed attempt to create a new image with add().
    
    Also added unit tests.
    
    Change-Id: Id66866b4260385a6324cc277c5ac665f81493c89
    Fixes: bug 1233097

commit 4c64bf1f0f739b83ef000bb7f88bc1161cbb0b6c
Merge: 5048cee 5a95201
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 7 18:48:52 2013 +0000

    Merge "Swift store add should not use wildcard raise"

commit 1b8128948491704dbf0d1dfeed4c7b1a73df6b77
Author: iccha.sethi <iccha.sethi@rackspace.com>
Date:   Mon Sep 30 18:18:22 2013 +0000

    Correct documentation related to protected properties
    
    Fixes bug 1233303
    
    Specified conditions under which glance api will not start
    successfully.
    
    DocImpact
    
    Change-Id: I8498e9e51f5c7e0d411379c0574c0b8e300f77c2

commit 18581b3370b4aa8554bb0fafa33919de609c9626
Author: Thomas Leaman <thomas.leaman@hp.com>
Date:   Mon Oct 7 14:24:03 2013 +0000

    Update functional tests for swift changes
    
    It seems that a couple of changes to the store calls have slipped
    through unnoticed:
    
    * store.add() now returns a 4-tuple
    * x-container-read and x-container-write headers use tenant:user rather
      than just tenant.
    
    fixes bug 1236339
    
    Change-Id: Ic5c311bcc2999e13203e0d3ad37bce5ac5f27e2d

commit 43fd5acdf0f5d89dc677086daf6a27ae8bab6a33
Author: Pamela-Rose Virtucio <virtu006@umn.edu>
Date:   Sat Oct 5 20:05:35 2013 +0000

    Removed unsued import, HTTPError in v1/images.py.
    
    Fixes bug 1235762
    
    Change-Id: Ice5574f1f61d5064d73f0dd41a1f183b951e145f

commit 0057aed72c6e92fbc7bfe27eb9a30f191eed3fd4
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Oct 3 11:24:35 2013 +0000

    Allow tests to run with both provenances of mox
    
    We currently have a requirement for mox >= 0.5.3.
    
    Confusingly there are two flavours of "mox 0.5.3"
    in the wild:
    
    1) pypi's mox-0.5.3.tar.gz (https://pypi.python.org/pypi/mox)
    2) Google's mox-0.5.3.tar.gz (https://code.google.com/p/pymox/)
    
    These are not exactly the same; tests which can pass on (1) may
    fail on (2).
    
    Fedora packages are based on (1) while Debian/Ubuntu packages
    are based on (2).
    
    This is a known issue: https://code.google.com/p/pymox/issues/detail?id=40
    
    When running the tests using a virtual env (1) is used, but
    on Debian/Ubuntu when not running using a virtual env (2)
    will be used: this leads to 3 of the 1740 tests failing.
    
    This patch allows all 1743 tests to run whether you are running
    in a virtual env or using Debian/Ubuntu/Fedora packages.
    
    Fix for bug 1212625.
    
    Change-Id: Ib0b11ec18aafbfb7f3d243bf149b94f93a1c13c9

commit 74eb73fe976b41f76fef1e1dcd1bc90d5f65a5f6
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Thu Sep 26 15:49:01 2013 +0800

    Glance GET /v2/images fails with 500 due to erroneous policy check
    
    This patch will fix below two issues of V2 ResponseSerializer for
    images-list, image-show, image-update and image-download.
    
    1. A user should be able to list/show/update/download image without
    needing permission on get_image_location.
    2. A policy failure should result in a 403 return code. We're
    getting a 500.
    
    Fixes bug 1231255
    
    Change-Id: Ie0ec2d574eea4433c4f610ec66a22cb16cae6dc6

commit 5048ceea989d93c8819d2dc6377803fc74620d14
Merge: 04cd202 f42ed64
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 2 15:41:54 2013 +0000

    Merge "Open Icehouse development"

commit 2d1a67a9f6a032045c8176a1a53d7613d8b0d567
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Fri Sep 27 01:05:29 2013 +0800

    Do not allow the same member to be added twice
    
    This patch add an existence check before add new member for image.
    
    Fixes bug 1231485
    
    Change-Id: I10d37c6f169e070ea6699cca78b6360be9fb11dc

commit 04cd202fd10ebac15792eb30648bd87da1371eb7
Merge: 1932931 1414c3f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 1 15:31:37 2013 +0000

    Merge "Add rbd store support for zero size image"

commit 1932931e7da69d673a85514ce46608f787df7576
Merge: 1b7faff 6d19527
Author: OpenStack Jenkins <jenkins@openstack.org>
Date:   Tue Oct 1 14:56:52 2013 +0000

    Merge "Imported Translations from Transifex"

commit 1b7faff41e264bf1d42012b88dc654965e4fd370
Merge: 43748fd 2e7aa76
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 1 09:44:15 2013 +0000

    Merge "Fixing glance-api hangs in the qpid notifier"

commit 52ab24bbac04182ae171432f28e47f336259f954
Author: sridevik <koushiksridevi8@gmail.com>
Date:   Thu Sep 12 08:43:29 2013 -0500

    V2 RpcApi should register when db pool is enabled
    
    The rpc api controller registers the public methods of db_api
    But, use_tpool is True, the thread pool wrapper's methods are
    used which would lead to failures.
    
    Fixes Bug #1221037
    
    Change-Id: Iaba10178c7da1548257e2180658c2dc8ba3e048b

commit 43748fd296cf9939539c5275dfd24d2ef436289e
Merge: f4f2a82 63fbdd9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 1 08:13:09 2013 +0000

    Merge "Corrected v2 image sharing documentation."

commit 6d1952787981ba78badd4cccbb52b3d06c270435
Author: OpenStack Jenkins <jenkins@openstack.org>
Date:   Tue Oct 1 06:15:59 2013 +0000

    Imported Translations from Transifex
    
    Change-Id: I3c8e78ae5dfc6563aeaa2172c16249fcfa897950

commit f42ed64f7056422152609e4b1362dae0c3154556
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Mon Sep 30 11:45:13 2013 -0700

    Open Icehouse development
    
    This should be accepted/merged once all the RC1 bugfixes are in.
    
    This bumps the target version to 2014.1, effectively opening the master
    branch to Icehouse development, ending the feature freeze.
    
    The Havana release branch is cut from the previous commit in master.
    
    Change-Id: Ib8aedc149750ce32558f1fbbf51263f2110be3ac

commit f4f2a8272887ecec603b62946d065aa2ec52a5ca
Merge: 2791c16 c8b6fa1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 30 16:13:54 2013 +0000

    Merge "Add documentation for property protections"

commit 2791c16fe1a8e56bb658d54ab8106c2c962894d9
Merge: 7605ebb 849eba3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Sep 29 21:42:13 2013 +0000

    Merge "Fixes typos of v1 meta data in glanceapi.rst"

commit 4abd3e25bb28b497af38588ca4d495e9bbf927fd
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Sun Sep 29 22:45:15 2013 +0200

    Convert Windows to Unix style line endings
    
    This is more consistent with other files and fixes
    Hacking warning H601.
    
    Change-Id: I2ba5436df78dc82ca48bf53bc178106edd514f4c

commit 7605ebbe25db21d521b6d21541dd76d88be71b0c
Merge: d36b3dc acf8052
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Sep 28 04:57:38 2013 +0000

    Merge "Adding checking to prevent conflict image size"

commit d36b3dc43ddc9d8b006c8e35db7d4b87d5764a58
Merge: 567fab9 7ba7333
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Sep 28 04:53:38 2013 +0000

    Merge "Fixes V2 member-create allows adding an empty tenantId as member"

commit c8b6fa1ad17011b57852379e2fea005d09e6f6f3
Author: Thomas Leaman <thomas.leaman@hp.com>
Date:   Thu Sep 26 15:47:00 2013 +0000

    Add documentation for property protections
    
    Related to bp api-v2-property-protection
    
    DocImpact
    
    Change-Id: Ia1bd44accfd95fa3b96f462a77b202ff4dddde3b

commit 567fab9061f9648b006c54043ba875a25a67e17b
Merge: f6dc40f 8a85be0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 27 10:42:31 2013 +0000

    Merge "Add swift_store_ssl_compression param"

commit acf805234ff0a922bedb47eb292f18a355e7cc57
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Sun Sep 22 14:14:02 2013 +0800

    Adding checking to prevent conflict image size
    
    Adding necessary checking to api v1 controller, to prevent client
    provide conflict image size by '--location' and '--size' arguments.
    
    Fixes bug: 1220744
    docImpact
    
    Change-Id: I0b846dd885ea6b675495058ac038eb9b5777fb81
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit f6dc40fbcd9908f84846aa621c60ff022c8b8928
Merge: 8c31de4 4a83dbb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 26 21:04:35 2013 +0000

    Merge "Change response code for successful delete image member to 204."

commit 7ba7333d9f9d565156746ff7586bf52a071c0047
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Fri Sep 27 01:34:54 2013 +0800

    Fixes V2 member-create allows adding an empty tenantId as member
    
    Adding a precheck for the member id in RequestDeserializer.
    
    Fixes bug 1231497
    
    Change-Id: Ia60486b0ebeff2a9923cfbe1a262dfa9d2a44246

commit 2e7aa761b6c2b31f4cbd9703ee19090b6757508a
Author: Attila Fazekas <afazekas@redhat.com>
Date:   Mon Sep 23 08:44:37 2013 +0200

    Fixing glance-api hangs in the qpid notifier
    
    Glance-api was able to hang in qpid notifier under heavy image creation load.
    
    The ``thread`` and ``select`` modules used by the python-qpid for managing
    the AMQP connection. When the eventlet was not able to switch between threads
    because leaded to hang and/or pipe(2) leaking issues.
    
    * Monkey patching the ``select`` and ``thread`` modules to be  eventlet friendly
      in order to avoid hanging issues.
    
    * The reference to the connection object in the QpidStrategy
      was replaceable by a concurrent thread, which could cause various issues.
      Using just local variables for storing connection object in order to avoid
      concurrent unsafe manipulation.
    
    Fixing bug 1229042
    
    Change-Id: I8fa8c4f36892b96d406216cb3c64854a94ca9df7

commit 8c31de4d9a0451439dbe2342490cffd1387bc059
Merge: 0513fcd 29d4383
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 26 00:24:21 2013 +0000

    Merge "Cache cleaner wrongly deletes cache for non invalid images"

commit 4a83dbb9e6ef9cc69176d8d96de6993ee4b45f77
Author: Brian Rosmaita <brian.rosmaita@rackspace.com>
Date:   Wed Sep 25 12:34:00 2013 +0000

    Change response code for successful delete image member to 204.
    
    The delete image member call currently returns 200 with no response
    body.  According to the API contract, 200 means to expect a body.
    This patch changes the response code to 204.
    
    Change-Id: Id48187b3c47e39075a352d3027dd3d3451d46905
    Closes-Bug: #1229366

commit 29d4383b166a77595df1b2a24b02a5b2556aaba2
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Mon Sep 23 11:45:57 2013 +0800

    Cache cleaner wrongly deletes cache for non invalid images
    
    Based on current implement of method delete_stalled_files,
    it's just deleting all the images located in /incomplete
    instead of using the param 'older_than' to check if it
    should be deleted. So this fix will use 'older_than' to
    confirm brfore deleting.
    
    Fixes bug 1228256
    
    Change-Id: Ica27915f8b9b098ecae1e38c8e678d6acf4f2f76

commit 0513fcd67d52422ec046f831692c1c36f61e00b0
Merge: 4efd136 31681c5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 25 01:32:41 2013 +0000

    Merge "Require oslo.config 1.2.0 final"

commit 4efd136d5a85ef914a86736eee153dbd6c2c2846
Merge: 58e6059 60ab0c8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 24 21:46:26 2013 +0000

    Merge "Convert location meta data from pickle to string."

commit 31681c58f7da6acc350695e2bfcc3574f1d82c02
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Sep 24 21:01:42 2013 +0100

    Require oslo.config 1.2.0 final
    
    Now that 1.2.0 has been released, require it rather than one of the beta
    release tarballs.
    
    Closes-Bug: #1182861
    Change-Id: I75ffc4a572d14488d19491a38742d6920951c171

commit 58e6059ecfb1383efcb8c685f61eb2d01249a1d8
Merge: 7d7bf3f dbfaf9a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 24 18:20:48 2013 +0000

    Merge "Disallow access/modify members of deleted image"

commit 7d7bf3f04b580fc9bfbeece9bd12418884d020cf
Merge: 4f4b478 49c6948
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 24 15:56:24 2013 +0000

    Merge "Ensure prop protections are read/enforced in order"

commit e8e293d43e2c62c6cdeac046e13df454ea25d9b4
Author: Chang Bo Guo <guochbo@cn.ibm.com>
Date:   Wed Sep 18 01:21:00 2013 -0700

    Use built-in print() instead of print statement
    
    In python 3 print statement is not supported, so we should use
    only print() functions.
    
    Fixes bug 1226943
    
    Change-Id: I0ae4cc7e5996ed30c69e153ba51438c56e56c09a

commit 5a95201bf34805c38836c7b81112efe3e3aa6d8a
Author: sridevik <koushiksridevi8@gmail.com>
Date:   Fri Sep 20 03:35:36 2013 -0500

    Swift store add should not use wildcard raise
    
    When there is an yield block in an except clause prior to wildcard raise,
    if the thread is re-scheduled, the raise generates a TypeError.
    Since the caught exception has NoneType, it causes a wrong exception(NoneType)
    to be raised.
    
    Fixes bug #1226258
    
    Change-Id: I6ce56d1943535279f2ad40c7978b1539ed638d57

commit 63fbdd9a5af311eb20b7321a0f9f6549700b35f4
Author: Brian Rosmaita <brian.rosmaita@rackspace.com>
Date:   Mon Sep 23 18:49:31 2013 +0000

    Corrected v2 image sharing documentation.
    
    corrected request body for POST to /v2/.../members
    removed GET /v2/images/{imageId}/members/{memberId} (call not implemented)
    
    Change-Id: Iafbba48c7d5e8b8b38e77b7ead216d0e7e235cb2
    Closes-Bug: #1229351

commit 8a85be099e2b110b5252841f635528f85be5193d
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Jun 13 16:25:47 2013 +0000

    Add swift_store_ssl_compression param
    
    Add a new glance-api.conf parameter 'swift_store_ssl_compression',
    which allows disabling SSL layer compression for https swift requests.
    
    This can increase performance when transferring compressed images (eg
    qcow2) to/from swift.
    
    Addresses bug 1190666.
    
    DocImpact.
    
    Change-Id: Ic26dba9dce5ea7e5c09fdd531746b93cec54fc5c

commit 48052ee8ebc61b6b354c2694e5bd88840b7184a4
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Sep 19 16:58:30 2013 +0000

    Log a message when image object not found in swift
    
    We should log when a request for an image object in swift returns a 404.
    
    Fix for bug 1227786.
    
    Change-Id: I27a970840cf448196245ba1e58523b9e0b1495f5

commit 49c69485e41d483abb18b689c65bd043b7a29695
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Thu Sep 12 12:52:10 2013 +0000

    Ensure prop protections are read/enforced in order
    
    Property protections need to be enforced in the order specified by the
    configuration file. i.e. [^x_owner.*] should be enforced before [.*]
    given the example config.
    
    To achieve this, use a list of tuples to store the rules rather than a
    dict, and also ensure to specify dict_type when parsing the
    configuration file for python 2.6.
    
    Fixes bug 1224449
    
    Change-Id: Ib22cb34b7daef081c95717b55a991b8d613468c4

commit 4f4b47803f3a7f820a6f68866fe7a36a37aff00e
Author: sridevik <koushiksridevi8@gmail.com>
Date:   Fri Sep 13 00:44:01 2013 -0500

    Funtional Tests should call glance.db.get_api
    
    The test_registry , test_simple and test_sqlalchemy tests import the
    modules directly instead of calling get_api of db/__init__.py
    With the introduction of db_pool, they should use the get_api method.
    
    Also adds a tear down to the ThreadPoolWrapper tests to fix jenkins
    issues related to the CONF using tpool set to True in the tests.
    
    Fixes Bug #1223167
    Change-Id: I66e9f5fba449107ad92e895f6a9e550e0bcddf1c

commit 4954ea5a09a39457eb362f81118bf7110f3fb6f9
Merge: 26a47e7 a44517c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 20 02:11:59 2013 +0000

    Merge "Adding encryption support for image multiple locations"

commit dab794e6fb1543a61586c060ccdb84a88119df5f
Author: ZhiQiang Fan <aji.zqfan@gmail.com>
Date:   Mon Sep 9 14:22:44 2013 +0800

    Enclose command args in with_venv.sh
    
    Sync tools/with_venv.sh from oslo, it will support argument with
    blanks.
    
    Change-Id: Ibb802b21d609ea6b54fc168b17705f06ad1cb86a
    Closes-Bug: #1220937

commit f868ae92c54a90e4c1503ea4fdb4a76a3adfb477
Author: Andreas Jaeger <aj@suse.de>
Date:   Thu Sep 19 22:40:03 2013 +0200

    Fix typo in config string
    
    Add a single space to change "isthis" to "is this".
    
    Change-Id: I95a001f5025ef4c41467b363cdd3adf8258e8f10

commit a44517c51960df94e9402611e9f012684d7d5890
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Tue Aug 27 23:00:09 2013 +0800

    Adding encryption support for image multiple locations
    
    Adding necessary encryption and decryption code to registry API v1
    server and client side, in order to take care image's all locations but
    single location only.
    
    docImpact
    Implement bp: image-location-status
    Fixes bug: 1218712
    
    Change-Id: I999426469c196da1094cc46b5237bf1bc2006877
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit 849eba3b2d1e07c1e00b21daed8fd48ee5d97023
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Wed Sep 18 00:41:17 2013 +0800

    Fixes typos of v1 meta data in glanceapi.rst
    
    Fixes bug 1226701
    
    Change-Id: Ie5547f5020d0dad3a2d9a9a96db0b5dd1d2dc34e

commit 26a47e77238e98b25d5943cfa7f24cb20304580c
Author: sridevik <koushiksridevi8@gmail.com>
Date:   Mon Sep 16 06:29:24 2013 -0500

    Respond with 410 after upload if image was deleted
    
    When updating the image after upload, we should return an
    HTTPGone instead of a 500 error if the image cannot
    be found.
    This will provide more information to nova when this occurs
    during snapshotting.
    
    Fixes bug #1217838
    
    Change-Id: I6e9875a9ff95ed3e9c38685785473138327ad4a1

commit b040c1aecc989db14134f0a3843de3b4abe7ba8c
Author: Chang Bo Guo <guochbo@cn.ibm.com>
Date:   Mon Sep 16 20:41:24 2013 -0700

    Fix misused assertTrue in unit tests
    
    Refactored unit tests to use assertEqual instead of assertTrue
    where needed.
    
    Fixes bug #1226374
    
    Change-Id: Iac5117c7a8dd3769aa6e303c6830aad291d5a0f7

commit 4164949ce6834314186d46e7c71d0a0631d60d45
Merge: 272a223 71985de
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Sep 14 06:28:35 2013 +0000

    Merge "Convert non-English exception message when a store loading error"

commit 60ab0c8c564af989882f0ea2609019ea7206e2b3
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Thu Sep 5 11:07:29 2013 -1000

    Convert location meta data from pickle to string.
    
    This patch fixes a potential security issue.
    Fixes bug: 1213241
    
    Change-Id: I6414d16ec72f26ceabbaf1364ad737f19f18381e

commit 272a223726fd059b023e3d9bfe9981b8c07f4955
Merge: c0c1436 677d1b0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 11 22:55:00 2013 +0000

    Merge "add missing index for 'owner' column on images table."

commit dbfaf9aedb3d3f8f110322b73c66205e530826e9
Author: Edward Hope-Morley <edward.hope-morley@canonical.com>
Date:   Fri Aug 2 15:11:06 2013 +0100

    Disallow access/modify members of deleted image
    
    It should not be possible to access or modify memberships for a
    deleted image. A 404 error will now be returned if a deleted
    images' members are accessed or modified.
    
    Fixes: bug #1207266
    Co-authored-by: Hirofumi Ichihara <ichihara.hirofumi@lab.ntt.co.jp>
    
    Change-Id: I3e1a7c1cd96b8c85cf0c20286533ced510580492

commit c0c14368f41af4eb540a46c4bfd8a036a50e10ab
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Sep 11 13:07:22 2013 +0000

    Fix typo in protected property message
    
    Fix for bug 1223861.
    
    Change-Id: Idad6143fcd587779b94cb155ffbe489759275265

commit f5eb70f918cc1a0e390e463c6535350609ac44a0
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Wed Sep 11 13:49:36 2013 +0800

    Remove the unused mapper of image member create
    
    For image members v1, we don't support "create" method,
    but we're mapping it in router.py. So this fix will
    remove the unused mapper.
    
    Fixes bug 1223658
    
    Change-Id: I20401656ea2930a026cf8b67825d9ec9f6623487

commit 518bbf72982348d5b66b73681ea639bc08e83e57
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Tue Sep 10 18:29:39 2013 +0200

    Changed header from LLC to Foundation based on trademark policies
    
    Fixes: Bug 1214176
    
    Change-Id: I4e394c33d810fe7d48066ff7cb6143f7eae25f13

commit 08987b12eb5ba5e1e15977af26362180d72650c5
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Tue Aug 27 16:39:41 2013 +0000

    Implement protected properties for API v1
    
    Related to bp api-v2-property-protection
    
    DocImpact
    
    Change-Id: Ia56ca251e78f37dcd6cf63c9696f0e5e07ed5f5c

commit 1414c3fa8e12604a35e2c299dcac13830a419aaf
Author: Edward Hope-Morley <edward.hope-morley@canonical.com>
Date:   Mon Aug 19 14:22:11 2013 +0100

    Add rbd store support for zero size image
    
    If glanceclient does not provide image size to RBD store add() it
    will create a zero-size image and fail when writing to it. If
    provided with zero size we now work out the size of each chunk
    being written and resize the rbd image prior to each write. This
    will be much slower than if new the image size on create but it
    will at least work.
    
    There is a corresponding glanceclient fix to ensure content-length
    is set if known by the glanceclient, see bug 1220197
    
    Change-Id: I014c4b71c77c92b9876786d1ba438cdb90f83233
    Fixes: bug #1213880

commit 2b2b5f38cc1eb42df72c265ba8487a9e6ed34419
Merge: 339606d 6bd098e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 6 11:40:24 2013 +0000

    Merge "Remove unused import"

commit 51c5185eea331cfb6da1869415e9e7a9be5a4efb
Author: Wu Wenxiang <wu.wenxiang@99cloud.net>
Date:   Thu Aug 22 08:47:10 2013 +0800

    Remove start index 0 in range()
    
    Remove the useless arg ("start index" = 0) in files, since its default
    value is 0, to make code cleaner.
    
    Change-Id: I9d91ab8a8033b9a6c9b77608dea92c91a994c7fc

commit 339606db33946566f17d86c1e40277632e95fe7d
Merge: 7363a7c fe897c0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 21:53:41 2013 +0000

    Merge "emit warning while running flake8 without virtual env"

commit 7363a7c5990cce0e540c5664f90855b1c4cd37a1
Merge: a529aea 57f312c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 20:30:16 2013 +0000

    Merge "Fix typo in IMAGE_META_HEADERS"

commit a529aea5ae2fae8bc8c99b4a2a8f213937f242cb
Merge: 6c364ee dbcc1b7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 20:17:04 2013 +0000

    Merge "Removes duplicate options registration in registry clients"

commit 6c364ee59fd293927a3d1df73f9fd1b444a56125
Merge: 1441546 249f800
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 18:53:14 2013 +0000

    Merge "Publish recent api changes as v2.2"

commit 1441546c9fe8c3a33b3527d632c14c7b280a5974
Merge: c6e06eb 5d6e1a9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 11:52:57 2013 +0000

    Merge "Prefetcher should perform data integrity check"

commit c6e06eb0b3594df59da84b79df867d9efbc394e9
Merge: 16a912e e094246
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 11:26:52 2013 +0000

    Merge "Fixes files with wrong bitmode"

commit 16a912ec38a5214a54d7b9bd6b732d3efa3cdb15
Merge: 10fdac6 8196381
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 11:24:22 2013 +0000

    Merge "Fix localisation string usage"

commit 71985de2968b693805031a7134922d738c3d720e
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Sat Aug 31 00:11:50 2013 +0800

    Convert non-English exception message when a store loading error
    
    In non-English environment when a store driver loading failed then a
    BackendException will be raised with a non-ascii message. So we need
    convert
    any coded exception message to unicode string for logging.
    
    This patch fixed a minor defect in
    https://review.openstack.org/#/c/37421/
    And the test case has be enhanced also.
    
    Fixes bug 1202098
    
    Related-Id: I9a58393b599aacc427cb4135988ecf5c3e90e455
    Change-Id: I1cdc71537fc1205e5fa4ff9744b441e5d88c1d04
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit 10fdac6d618f25bd564696e11cb5058c6e1221de
Merge: 3df62be ad6c535
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 10:00:27 2013 +0000

    Merge "Add unit test for migration 012"

commit 677d1b07753a8c5c309d3992aaa4a1c8976ef2e5
Author: Venkatesh Sampath <venkatesh.sampath@rackspace.com>
Date:   Wed Aug 21 15:22:32 2013 +0530

    add missing index for 'owner' column on images table.
    
    Fixes bug 1214830
    
    Change-Id: I13355cd53460188a5154aa3f50277c3e92335e28

commit 3df62be5123be3ccabd24d89218717f5e5c1e749
Merge: 6d8cdc9 1837423
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 06:11:20 2013 +0000

    Merge "Call _post_downgrade_### after downgrade migration is run"

commit 6d8cdc92b2cae0d4f89a82482a59c0dad53eb3ce
Merge: 08b8995 fe7198a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 06:01:54 2013 +0000

    Merge "Enable protected properties in gateway"

commit 08b89958e4bb6e0667482f9cad1d5da3394fd4aa
Merge: 013b459 262bdf6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 06:01:51 2013 +0000

    Merge "Property Protection Layer"

commit 013b459cbad8e424441c64842ea10f9b49246bd8
Merge: 6c6b127 e8440d1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 06:01:49 2013 +0000

    Merge "Rule parser for property protections"

commit 6c6b12725d763d93a6e317d79d66162df09e0382
Merge: df07b21 cc1839e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 06:01:39 2013 +0000

    Merge "Update schema descriptions to indicate readonly"

commit df07b21814e943bd832f01bba5396dbd4bacca87
Merge: e4665ad 437a283
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 5 05:57:12 2013 +0000

    Merge "Notify error not called on upload errors in V2"

commit e4665adc408477bebb2bfa659523396d850ff6a8
Merge: 75fe5f9 247ada2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 4 22:57:39 2013 +0000

    Merge "Introduced DB pooling for non blocking DB calls"

commit 249f800de13867af31590df557a715cabbc2e1d6
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Sep 4 14:55:08 2013 -0700

    Publish recent api changes as v2.2
    
    Throughout the Havana development cycle, we have added several
    features to the v2 api, without breaking backwards compatibility.
    So this change bumps up our minor version number.
    
    Change-Id: If0e5ffe117200fbfb967c8c95a63608f12dbba58

commit cc1839ecd2681f96f00e9154d4caa8dc61ae4859
Author: eddie-sheffield <eddie.sheffield@rackspace.com>
Date:   Wed Sep 4 11:00:02 2013 -0400

    Update schema descriptions to indicate readonly
    
    Longer term we may look into using the json hyper-schema readonly
    attribute, but for now this will allow the user to see up-front
    which properties are actually read-only and cannot be changed.
    
    Change-Id: I8c8b94732c219fe61caa584527921b65217bea30

commit 75fe5f96793341b24cd4f6183216dc30cf7f6e1e
Merge: 2687b67 844a228
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 4 18:12:37 2013 +0000

    Merge "Remove unused local vars"

commit fe7198a6ecf45edd8b5ca2030586c746f204fe3f
Author: iccha.sethi <iccha.sethi@rackspace.com>
Date:   Sat Aug 31 01:51:44 2013 +0000

    Enable protected properties in gateway
    
    Related to bp api-v2-property-protection
    
    Activate property protections if the config value is set.
    Added the corresponding functional and unit tests.
    
    Change-Id: If38604d812c34416b8369bf6f868a0f2509c2649

commit 262bdf68b45058fedffda614336d7e75a5b36d4a
Author: iccha.sethi <iccha.sethi@rackspace.com>
Date:   Thu Aug 22 17:10:20 2013 -0400

    Property Protection Layer
    
    This patch introduces the property protection layer and the tests
    associated with it
    
    Related to bp api-v2-property-protection
    
    Change-Id: Iaf2111bf07377ef6a4c89a621888077cc14be776

commit e8440d1ee8da2cbf4304bbbc0bf43ce78d7a6d1f
Author: iccha.sethi <iccha.sethi@rackspace.com>
Date:   Wed Aug 21 14:53:13 2013 -0400

    Rule parser for property protections
    
    This patch introduces the way protected properties
    will be configured and parsed.
    
    Related to bp api-v2-property-protection
    docImpact
    
    Change-Id: I3d24cacccf3f51b07a4090b8a5db1f2451090762

commit 2687b677bf97fb9e1209c37d37b27153397f65f2
Merge: beef9a4 f4cab3e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 4 15:30:24 2013 +0000

    Merge "Show traceback info if a functional test fails"

commit beef9a44260e780bdaea06647350fe2f6c7358b3
Merge: 85075f4 436c256
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 4 15:25:14 2013 +0000

    Merge "Clean up data when store receiving image occurs error"

commit 85075f4b116e485fa0bc9a9d28a6c1901bf7c703
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Tue Jul 30 23:05:10 2013 +0800

    Scrubber refactoring
    
    * Adding multiple locations image support.
    * Adding lock protection to prevent race condition between glance-api
    and glance-scrubber service.
    * Refactoring scrub queue code.
    
    Implement bp: glance-scrubber-refactoring
    docImpact
    
    Change-Id: I050ff212d73ace8e84dcd800245b608210d6b29a
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit 0e77554b73169082e6a895059bdee27e6041f6e7
Merge: 2cb68ac de22b64
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 3 17:48:34 2013 +0000

    Merge "test failure induced by reading system config file"

commit 57f312c566ad83884b3a9ed720b470204c01dbae
Author: Doron Chen <cdoron@il.ibm.com>
Date:   Tue Sep 3 11:43:40 2013 +0300

    Fix typo in IMAGE_META_HEADERS
    
    x-image-meta-deleted-at replaced with x-image-meta-deleted_at
    This prevents a problem when running the add_image method.
    
    The bug was entered as part of the following commit:
    c3e58bd943ccb4e1457914c3c2b5366bd0afee5a
    
    Closes-Bug:#1220067
    Change-Id: I6d1624a00e89721f5c9af969e191951fdcb2ee43

commit 8196381a4b73a1e0b98d7e43b625de0a695732d7
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Mon Sep 2 19:46:08 2013 +0200

    Fix localisation string usage
    
    The format string for localisation needs to be a fixed
    literal, otherwise translation tools do not work.
    
    Change-Id: I8e0e38df15ec61a0ccbfa41c3ccaed3a01d1d4d5

commit 437a283f24e9791f113665036e090967b8747bd2
Author: AmalaBasha <amala.alungal@RACKSPACE.COM>
Date:   Wed Aug 28 20:05:25 2013 +0530

    Notify error not called on upload errors in V2
    
    The 'upload' method in glance/api/v2/image_data.py catches a couple of
    exceptions, but does not send notifications for any of them. They should
    also be sending notifications as is being done in v1.
    
    Fixes: Bug #1217837
    Change-Id: Ie38307f514c1716dce31403d9ef57eae8290450d

commit e09424651e126489b3bdced1e3a7a7290d5642c2
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Thu Aug 22 11:45:58 2013 +0800

    Fixes files with wrong bitmode
    
    Some modules have bitmode 755. Changed to 644
    
    Change-Id: I1635abdd2665b463473b283cc0e15f057caf4195

commit 2cb68ac6d697e67d43cc0b8d3b7d0e4406538ed0
Merge: c525ce2 9e4232d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Sep 1 00:34:08 2013 +0000

    Merge "Fix Sphinx warning"

commit c525ce2fe72af828ea9a69869b22ccd77f8f27f3
Merge: 35fcfdd c8bbb7b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Sep 1 00:28:58 2013 +0000

    Merge "Remove unused import of oslo.config"

commit 844a228c3c42dac802a82510eb17fcfaccb0e1f8
Author: Wu Wenxiang <wu.wenxiang@99cloud.net>
Date:   Wed Aug 21 22:27:27 2013 +0800

    Remove unused local vars
    
    Remove unused local vars in test files to make code cleaner.
    
    Change-Id: If97fad2d6b85730ea1cebc477f5f092c1c17976d

commit 436c2569551b4c8cab04e1cb32591cd32ea67d16
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Tue Aug 20 21:40:29 2013 +0800

    Clean up data when store receiving image occurs error
    
    Clean up already received data from backend store to prevent potential
    leaking when driver receiving image occurs error such as
    ImageSizeLimitExceeded exception.
    
    Fixes bug: 1214276
    
    Change-Id: Ice1de4d1c61a62fff778acbbeb9bc27d03ed7ab4
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit 35fcfdda098c66b7254723b4ae2603e2be6d5293
Merge: 738b563 e3e4f4d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 29 18:47:12 2013 +0000

    Merge "Add a storage quota"

commit f4cab3e5ccd02ed33eba36bf97fafbe413412993
Author: Paul Bourke <pauldbourke@gmail.com>
Date:   Thu Aug 29 10:12:44 2013 +0000

    Show traceback info if a functional test fails
    
    Fixes bug 1218277
    
    Change-Id: I2d1cb7f5748dba203f72f2996c2228f7bfed7987

commit 738b5634d7e9f382b6637b80fb362cbb11780614
Merge: 1ed4fec 0a549f3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 29 03:51:24 2013 +0000

    Merge "Remove unused var DEFAULT_MAX_CACHE_SIZE"

commit e3e4f4d9277c22654ce0dd9a1a0f44a67661e695
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Wed Aug 21 20:08:45 2013 -1000

    Add a storage quota
    
    This patch adds a storage quota that is applied against the sum total
    of a users storage consumption against all configured storage systems.
    A single quota is applied to all users via the configuration option
    'total_storage_quota'.  Most of the patch is about enforcement so
    when a separate service for quota management emerges in OpenStack the
    per user value to enforce can be obtained from that service but the
    enforcement code will remain the same.
    
    blueprint glance-basic-quotas
    docImpact
    Change-Id: I251832f7372c70942be6f0c6aa12285145dd7c18

commit 1ed4feca1db1010f4d8ad0c7e794ca563b0dbe69
Merge: 637cb4d ed9e6c0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 29 01:47:56 2013 +0000

    Merge "Sync models with migrations"

commit 637cb4dfafcda880eea30401b23391f22cffd027
Merge: 67c8316 6d7d284
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 29 01:47:54 2013 +0000

    Merge "Fix up trivial License mismatches"

commit d02a50fad0bf3cbe933f9a9400aec6ef7844c7a7
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Tue Aug 27 22:16:45 2013 +0200

    Avoid redefinition of test
    
    test_add_member() is defined twice under the same
    name, however checking for different things. Rename
    the 2nd instance to _unauthorized to avoid overwriting
    the first implementation.
    
    The first check is actually duplicate to test_add_member_positive.
    So merging the first check with test_add_member_positive.
    
    Change-Id: Ifb029d8f34f9f4139557bb9b197492fb344a598e

commit 67c8316e941d9aa45a7b712f3c885a8641f8f850
Merge: 9151e6e 116335b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 28 15:39:39 2013 +0000

    Merge "Fix useless assertTrue"

commit 9151e6e9e193a29131830abb6cb94d304ff2ee50
Merge: 6735fbb d203d4d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 28 08:39:12 2013 +0000

    Merge "Implement image query by tag"

commit 116335b7321ae82bd5be769c526b4631959d7b2b
Author: Wu Wenxiang <wu.wenxiang@99cloud.net>
Date:   Wed Aug 21 22:11:32 2013 +0800

    Fix useless assertTrue
    
    In glance/tests/functional/test_scrubber.py,
    TestScrubber::test_scrubber_with_metadata_enc(), local var marker_uri
    is always not None, so self.assertTrue(marker_uri is not None) don't
    make sense. This patch init it with None.
    
    Change-Id: Id2fcffe6ff67b6fa59247d42ab15ffb228dd622f

commit fe897c0b79064ef374af8170e1ea8e7d6182081a
Author: Kui Shi <skuicloud@gmail.com>
Date:   Wed Aug 28 07:03:52 2013 +0800

    emit warning while running flake8 without virtual env
    
    run_tests.sh -N -p
    
    it will call the flake8 installed on your host to detect PEP8, and
    the flake8 plugin "OpenStack hacking" may not installed on your
    host, so this command may not detect the OpenStack Style Commandment
    supplied by hacking(e.g H202).
    
    run_tests.sh -p
    it will call the flake8 from virtual env, flake8 plugin "OpenStack
    hacking" installed in virtual env will be triggered.
    
    The result from "run_tests.sh -p" should be trusted, and jenkins uses
    virtual env to run flake8 too.
    
    When "-N" is enabled, emit warning to stderr to remind user.
    
    Bug #1215396
    
    Change-Id: Iac6be532b7b9bb911b745712712d1be363e8ff01

commit 6d7d284fd35e4ac1e860c8ea10881e2859ea82ef
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Tue Aug 27 22:49:45 2013 +0200

    Fix up trivial License mismatches
    
    This makes the Hacking licensing check succeed.
    
    Change-Id: Iba1446fa06fe466a05514d5df0e53d26dd9fc8e4

commit 247ada2d94e519411bc0c07dc5e54c8190f04f07
Author: sridevik <koushiksridevi8@gmail.com>
Date:   Mon Aug 26 05:23:34 2013 -0500

    Introduced DB pooling for non blocking DB calls
    
    The DbApi module is wrapped with the tpool wrapper if the configuration is
    enabled. use_tpool is disabled (False) by default
    
    Related to bp mysql-thread-pool
    
    Change-Id: Ie7274ac855549b96c581c3eb0bcf79f3c74be0ed

commit 6735fbb3f299eb6ff92510f5d5e31bcd3f9fe774
Merge: aa711d3 6a77498
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 26 21:52:05 2013 +0000

    Merge "Improve the error msg of v2 image_data.py"

commit aa711d3c3cb1716ea25984c3088442325311d107
Merge: 3166043 7aea4d8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 26 21:18:40 2013 +0000

    Merge "Use _pre_upgrade_### instead of _prerun_###"

commit 3166043945afa4d9fa492b0631997548607d9e2c
Merge: 06d6f4b e3b54dd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 26 21:16:46 2013 +0000

    Merge "Allow tests to run without installation"

commit 06d6f4b9bf92a999790817f407bf70d7e936e714
Merge: e705481 9ae9c09
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 26 19:57:46 2013 +0000

    Merge "Make size/checksum immutable for active images"

commit e7054811273aec89e6e40a5dd889c0df1f9576a7
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Tue Aug 13 15:11:49 2013 +0200

    Use latest Oslo's version
    
    The patch replaces current Oslo version with 1.2. The change is needed
    to pull in a fix released in that specific version, which fixes the
    issue #1175570. The fix we're interested in is giving priority to CLI
    arguments instead of config files. Without this, commands like the one
    below won't work.
    
        $ glance-manage --sql_connection=.... db_sync
    
    Oslo's release notes:
    http://docs.openstack.org/developer/oslo.config/#a3
    
    Closes-Bug: #1175570
    Change-Id: I4ea749cfaae0e18e035abe7b5d7e345dda7d476d

commit 6a77498a989747c8e8970c8f5ccbdb5c70b9d0be
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Sun Aug 4 15:54:41 2013 +0800

    Improve the error msg of v2 image_data.py
    
    Based on current implement, the error message of some upload
    failures is missing the image id. It looks like: 'Unable to
    upload duplicate image data for image: %s'.
    
    Fixes bug 1207616
    
    Change-Id: I608fb1ba84dde0e44a73e5e1bd3e850db49d84c4

commit 9e4232d76e1d19740dfe1daca5ecd9e7f2ff073b
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Mon Aug 26 10:30:19 2013 +0200

    Fix Sphinx warning
    
    Title underline was too short.
    
    Change-Id: I2915f9d3ad0b208286d447ef2375e51f51b7e35d

commit f5cef52995b997dcdf532faf437d68b578f97370
Merge: ef5d11d c3e58bd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 25 18:45:45 2013 +0000

    Merge "Add v1 API x-image-meta- header whitelist"

commit ef5d11d4d87bed1f2a5760ad5cc14045d89aa435
Merge: b2d5a38 63f7995
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 25 12:10:48 2013 +0000

    Merge "remove flake8 option in run_tests.sh"

commit 6bd098efe5c8a965a5a6927d06153a66c4a34871
Author: Wu Wenxiang <wu.wenxiang@99cloud.net>
Date:   Wed Aug 21 22:43:36 2013 +0800

    Remove unused import
    
    Remove unused import in tests.functional.store modules to make codes
    cleaner.
    
    Change-Id: I07a66d0ba7c0f0233d0d03310d83b33f0b92bbe9

commit de22b642f79b5af589ccd437d36b883a6a52c475
Author: Kui Shi <skuicloud@gmail.com>
Date:   Sat Aug 24 16:23:51 2013 +0800

    test failure induced by reading system config file
    
    run run_tests.sh or tox to test the glance code, it will get
    following failure:
    test_get_bind_addr_default_value
    test_get_path_non_exist
    
    Analysis
    --------
    The root cause is resided in "glance/tests/unit/api/test_cmd.py".
    In TestGlanceApiCmd.setUp, the sys.argv is overrided to ['glance-api'].
    Since sys.argv is "global" variable, and this test entry it run
    firstly by nosetests while running tests in "glance/tests/unit"(since
    nosetests search test items alphabetically), the other test entries
    will inherit the sys.argv value ['glance-api']. Finally the system
    config file "/etc/glance/glance-api.conf" is read in "setUp" via
    oslo.config.cfg:ConfigOpts.__call__ -> _pre_setup -> find_config_files.
    CONF.bind_port and CONF.bind_host is set to the value reading from
    system config file: /etc/glance/glance-api.conf.
    
    A simplied call backtrace:
    TestGlanceApiCmd.setUp -->  sys.argv = ['glance-api']
     ->JSONRequestDeserializerTest.setUp
      ->glance/common/config.py:parse_args
       ->oslo.config.cfg:ConfigOpts.__call__
        ->CONF.bind_port CONF.bind_host is set
    
    wsgi.get_bind_addr() will read the CONF.bind_port and CONF.bind_host
    to return value. if system config file is not read, CONF.bind_host
    is set to "0.0.0.0", CONF.bind_port is not set. wsgi.get_bind_addr()
    will return the expected value. This is the reason that individual
    test of test_get_bind_addr_default_value got passed, but failed while
    testing all.
    
    The failure of test_get_path_non_exist is induced by same reason.
    
    Test case should clear up the setting in tearDown(), especially the
    "global" setting, e.g. sys.argv.
    
    Solution
    --------
    The solution is simple:
    In class TestGlanceApiCmd, add a private variable to backup the
    sys.argv in setUp(), and restore it in tearDown().
    
    Test method
    -----------
    $ ./run_tests.sh
    
    $ tox -evenv -- nosetests \
    --tests=glance.tests.unit.common.test_config:TestPasteApp
    
    tox -evenv -- nosetests
    --tests=glance.tests.unit.common.test_wsgi:JSONRequestDeserializerTest
    
    Fixes Bug #1204186
    
    Change-Id: I2dac8e506fa794d1faa9509258936d78e2f981d8

commit b2d5a38cc8ea4472a94e860199952e9fc3d1e20f
Merge: d5f870e aca3ca0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 23 05:22:13 2013 +0000

    Merge "glance-replicator: enable logging exceptions into log file"

commit d5f870e92526b485fab3f90e128dc497accd4d67
Merge: f9ea0ac c7e9786
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 22 18:10:12 2013 +0000

    Merge "image-delete fires multiple queries to delete its child entries"

commit 5d6e1a91f9f39c994a493fb6607ce809b50fb42b
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Jun 27 16:50:40 2013 +0000

    Prefetcher should perform data integrity check
    
    When prefetching into cache we should verify the image data checksum.
    
    Fixes bug 882585.
    
    Change-Id: I01211894d0d76d69cbf92fe726fbed56326d950d

commit 9ae9c09e03d68338ac7ec342982489db3f5f54ab
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Aug 7 13:22:12 2013 +0000

    Make size/checksum immutable for active images
    
    Once an image becomes 'active' it should only be possible for an
    administrator (and not a regular user) to change the size and checksum
    values.
    
    Addresses bug 1209148.
    
    Change-Id: Ic65afbca4a4161dfa77ce0a296a1bd72d96902ca

commit 0a549f3771005f742d585b5a9fc4afbbc0366e63
Author: lawrancejing <lawrancejing@gmail.com>
Date:   Wed Aug 21 23:27:56 2013 -0700

    Remove unused var DEFAULT_MAX_CACHE_SIZE
    
    In file: glance/image_cache/__init__.py, DEFAULT_MAX_CACHE_SIZE
    is never used after declared, remove it and make glance code
    tidy and pleasing.
    
    Change-Id: I208f1dc63e2bc95bb6be94fdc88f9bfce069f67c

commit f9ea0ac3b23d0f7edc21df748d45866b64743c2a
Merge: 8052d25 07d06eb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 22 05:37:28 2013 +0000

    Merge "Remove glance CLI man page."

commit 8052d253121d9dcbdf3d1bd68346438c61b0c180
Merge: 723b998 d539856
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 22 05:29:52 2013 +0000

    Merge "Perform database migration snake walk test correctly"

commit 723b99827eaaae0a7c8dd7d684515933bb1992d6
Merge: 2e27d14 773b720
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 22 05:28:10 2013 +0000

    Merge "Make sure owner column doesn't get dropped during downgrade"

commit 2e27d14afa36bc6682fe40ea7163f8010f6c6453
Merge: b0f5f04 7faa1ff
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 22 05:21:36 2013 +0000

    Merge "redundant conditions in paginate-query"

commit d203d4d3be2905b2351de191a37c26b67d2cd68d
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Wed Aug 7 01:05:52 2013 +0800

    Implement image query by tag
    
    Sometimes, user want to query images by tag since it's an
    intuitive way to distinct different image. The REST API
    would be like: v2/images?tag=x86&tag=64bit
    
    docImpact
    Implement bp image-query-by-tag
    
    Change-Id: I42946fa838ed896823e17fd4c51995209d9d2ad3

commit c8bbb7b288efd6cb0802dda1a72d9b3498985c07
Author: lawrancejing <lawrancejing@gmail.com>
Date:   Thu Aug 22 00:03:53 2013 +0800

    Remove unused import of oslo.config
    
    Remove unused import in glance.cmd.cache*,
    and make glance code tidy and pleasing.
    
    Change-Id: Ie5d2cf5c1a52fda505a1dd4d5b01267285a10c00

commit b0f5f041dc74015878eca867533a1aa379491bc9
Merge: 38f7de7 830f27b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 21 10:10:55 2013 +0000

    Merge "Make disk and container formats configurable"

commit 38f7de71dd8cb49884df975d6ef9985708853290
Merge: e8d8c16 4009cf9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 20 12:37:21 2013 +0000

    Merge "Adding metadata checking to image location proxy layer"

commit cb2b0a42f8d7182645cd5220e6d9bb1d5707512f
Author: Elena Ezhova <eezhova@mirantis.com>
Date:   Mon Jul 22 16:16:05 2013 +0400

    Code dedup in glance/tests/unit/v1/test_registry_api.py
    
    Move duplicated fixture set-ups, requests and assertions to tests.utils.py
    
    bp glance-tests-code-duplication
    
    Change-Id: Ie0f13b5f5d5a242f24ac7cd6cc548ff09ebe6ba5

commit e8d8c162d32b8adf4f56b4b28715d4fc8ad6b177
Merge: 90f7637 4852744
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 20 06:17:50 2013 +0000

    Merge "Text formatting changes"

commit 90f76373fb98a362e9636c79a66b1f7d5b56bb30
Merge: 0573985 0c0388d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 20 05:06:54 2013 +0000

    Merge "Update .mailmap"

commit ad6c535314ba9770d90818213b0de339399a6e3d
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Wed Jul 31 17:45:03 2013 +0000

    Add unit test for migration 012
    
    This continues implementing unit tests for the migrations that are
    currently missing them
    
    Change-Id: I08b92532d1469ee03b976e2522e12a4540f0dae2

commit 18374238c5265968c68f17431dab52584b5f268a
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Mon Aug 19 17:04:22 2013 +0000

    Call _post_downgrade_### after downgrade migration is run
    
    Fixes bug 1195470
    
    Tests are currently only run after a upgrade during the database migration
    unit tests and never during a downgrade. This change calls an optional
    _post_downgrade_### method after running the downgrade migration to allow
    it to be tested as well.
    
    Change-Id: I592424b464b91c2be9e253402986e673ce33c8d0

commit 7aea4d8b21013d5ef6b14111b42c4bd101789ed1
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Mon Aug 19 16:58:09 2013 +0000

    Use _pre_upgrade_### instead of _prerun_###
    
    Other projects, including nova and oslo.db, use _pre_upgrade_### as the
    function to run before a DB migration test. This is to differentiate it
    from the downgrade tests.
    
    Change-Id: I0da30f7c5a1c76a7ff0e735c36b753ef7a624db9

commit d53985641a3db8b84772158259dadee7bbf5e067
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Thu Jul 25 02:21:03 2013 +0000

    Perform database migration snake walk test correctly
    
    Fixes bug 1204940
    
    The database migration snake walk test would not properly perform downgrades
    leaving that part of the test non-functional.
    
    Also, if downgrade was True, the test wouldn't downgrade all of the way to
    the first migration because of a fence post error.
    
    Change-Id: I44873fc9bb0b159c941a90ce19b74e1afba8b6a8

commit 7faa1ff14c6cc93962a2c389c15173456827698e
Author: AmalaBasha <amala.alungal@RACKSPACE.COM>
Date:   Fri Aug 16 14:53:50 2013 +0530

    redundant conditions in paginate-query
    
    For a list call on images, when a sort_key is applied, the query
    generated has redundant values for 'created_at' condition. This happens
    when the sort_key list has duplicate values.
    
    Fixes Bug #1212994
    
    Change-Id: Icd62c2886d9ab608418ba9b4dc25cd06a4146992

commit 55dcb9e7b19c5901a2aa264b27276094f2a2669f
Author: Alexander Gordeev <agordeev@mirantis.com>
Date:   Wed Jul 17 11:09:46 2013 +0400

    Refactor glance/tests/unit/v2/test_registry_client.py
    
    Remove code duplication from module
    
    Partially implements blueprint glance-tests-code-duplication
    
    Change-Id: Idf54d98d0982b7c64696056c87283eb92f1164b5

commit 3b71b2894ae1449c48cb975153bc04c78f4965ce
Author: Alexander Gordeev <agordeev@mirantis.com>
Date:   Wed Jul 17 12:25:40 2013 +0400

    Refactor glance/tests/unit/v1/test_registry_client.py
    
    Remove code duplication from module
    
    Partially implements blueprint glance-tests-code-duplication
    
    Change-Id: I85f5d7a45c65533ba49f2dfdefdfccfde221468b

commit 91a226cb1632636a59b7f742c3158f57ce14b550
Author: Alexander Gordeev <agordeev@mirantis.com>
Date:   Thu Jul 18 17:14:00 2013 +0400

    Improve test/utils.py
    
    Introduce new class into utils.py to keep glance api tests DRYer
    
    Partially implements blueprint glance-tests-code-duplication
    
    Change-Id: Ic77961fcc83806fd451afa1a0d230f09926ebfd9

commit 773b720b513130468ed615a968103c922d817577
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Thu Jul 25 02:18:49 2013 +0000

    Make sure owner column doesn't get dropped during downgrade
    
    Fixes bug 1204941
    
    The owner column was missing from the table schema. Because of limitations
    of sqlite and implementation details in SQLAlchemy-migrate, this would end
    up dropping the owner column during a downgrade when using sqlite.
    
    Change-Id: If8f7f16c9b6fb059f0fcfdf8967afd37f19864b6

commit c7e9786aa777eb6a44a9b9350da587546c347c7a
Author: Venkatesh Sampath <venkatesh.sampath@outlook.com>
Date:   Tue Jul 16 16:27:09 2013 +0530

    image-delete fires multiple queries to delete its child entries
    
    1. Changed individual query calls for soft-deleting the image's
       child entries to one db query call for all child entries of a
       given type.
    2. Added a fix to simple db's 'image_destroy' api to clear
       the location entries.
    
    Fixes bug 1201758
    
    Change-Id: Ib673de5460d59ea3af74553048ffcf74dccbdc36

commit aca3ca0e43c229924635186545adf2deaf79207c
Author: Yufang Zhang <yufang521247@gmail.com>
Date:   Mon Aug 19 12:18:54 2013 +0800

    glance-replicator: enable logging exceptions into log file
    
    bug 1213779
    
    Currently, glance-replicator provides option to enable logging
    information into a specified file. But exceptions are not logged
    into the log file when they are thrown.
    
    Reproduce steps:
    
    When setting a wrong source or target address, exceptions would be
    thrown, but not logged into log file.
    
    Change-Id: Ic2c59e04aa6099f3ede0c6b8579c31a3dfff895c

commit 830f27ba342ca0881e3677ac11c3d818962cba3e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 19 04:23:07 2013 +0000

    Make disk and container formats configurable
    
    * Add disk_formats config attribute
    * Add container_formats config attribute
    * Implement bp configurable-formats
    
    Change-Id: Ic52ffb46df9438c247ba063748cadd69b9c90bcd

commit 05739853efff1fb99a187eb64ca14687f4435ec6
Author: lawrancejing <lawrancejing@gmail.com>
Date:   Sat Aug 17 21:24:13 2013 +0800

    Add space in etc/glance-cache.conf
    
    Add space in "known_stores" block in etc/glance-cache.conf,
    and keep glance code tidy and pleasing.
    
    Change-Id: If112db41bfbce9f78013fe33229043f0f626f3f9

commit dbcc1b78ec12e86bc513924e3f3afa9f3b88e3b5
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Wed Jul 24 13:33:13 2013 +0800

    Removes duplicate options registration in registry clients
    
    Fixes bug #1204359
    
    Change-Id: I5b8bd9e4465d9fe70e9311474bc2b00d9afcf046

commit 9cd75d0b4accb632f44b98e9a457de5dd461317b
Merge: 63b6438 eb7c8e5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 16 14:29:53 2013 +0000

    Merge "Unit tests for scrubber"

commit 63f7995c07b16f05e07929f1335de1b87f38c1b9
Author: Kui Shi <skuicloud@gmail.com>
Date:   Fri Aug 16 06:53:46 2013 +0800

    remove flake8 option in run_tests.sh
    
    flake8 read [flake8] section of tox.ini as options.
    
    function run_flake8 in run_tests.sh should be kept simple,
    and tox.ini controls the behavior of flake8.
    
    Fixes Bug #1212988
    
    Change-Id: I35d434ccea1ca2f3ff93657e4ca6dde93bbbf29e

commit e3b54dd71d5a69720f2ee929f68e96ce8e2dfa56
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Wed Aug 14 15:10:55 2013 -1000

    Allow tests to run without installation
    
    This patch makes modifications to the way that programs which the various
    tests depend on are forked and executed.  This will allow the tests to be
    run without installing glance to a python installation (ie: python setup.py
    {develop/install} will not be needed).
    
    fixes bug: 1197800
    
    Change-Id: I9687cb7a5b22747d9cea0a1c24057383a8901476

commit 07d06ebfc42541ffb7beeed723f68171dc4b46f8
Author: Jakub Ruzicka <jruzicka@redhat.com>
Date:   Wed Aug 14 17:02:14 2013 +0200

    Remove glance CLI man page.
    
    glanceclient CLI man page is provided by glanceclient.
    
    Fixes bug 1212300
    
    Change-Id: I61f61b50cb74d71331fadb89659a3cee2b13a359

commit 63b64381ebb0bf50584e0cf467bb52e9a1b1fe4e
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Jun 26 15:47:53 2013 +0000

    Fix some logic in get_caching_iter
    
    Mismatched indentation meant that more chunks than
    expected could be yielded.
    
    Make both filesystem ChunkedFile and S3 ChunkedFile
    handle the case where the filepointer no longer exists.
    
    Added unit tests which reproduced the problem
    using both a filesystem and S3 ChunkedFile.
    
    Fixes bug 1194929.
    
    Change-Id: I0f70155e59f6bc754c88b5b9e96645459bfe770a

commit 4009cf90de8969e9c1e7077f766947dcf61e9fa9
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Tue Jul 16 16:20:07 2013 +0800

    Adding metadata checking to image location proxy layer
    
    Enable image locaton proxy checking metadata when the location changing.
    Implemented bp: location-proxy-metadata-checking
    
    Change-Id: If411a454cd2c3e277ea9840cc3d83ec5125bb372
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit 0c0388d48ee70ccb9553febc1c358f6ff27ef68f
Author: Yufang Zhang <yufang521247@gmail.com>
Date:   Tue Aug 13 23:04:28 2013 +0800

    Update .mailmap
    
    Change-Id: I5dc51c7aeb080945201376c42250502de601384a

commit 563c71c119b143a17146d2f1d241eadff8263d73
Merge: dca0b2a 38e8f68
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 12 21:38:45 2013 +0000

    Merge "Interpolate strings after calling _()"

commit dca0b2aff7db4fbd4bb70f0cfbb5cf616e5d1d2b
Merge: 8302c42 ec07f0b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 12 21:31:38 2013 +0000

    Merge "Handle None value properties in glance-replicator"

commit 8302c4264f3492b693c16aec8e55e2bb8d9c352b
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sat Apr 20 22:59:56 2013 -0700

    Migrate to PBR for setup and version code.
    
    Fixes bug 1179007
    
    Also, sync with global requirements because we can't do it in two steps.
    
    Change-Id: If1c687f874272b9d9569af9dd1e5cb4457308f5c

commit 19e32e6af666c3b8fc4bf24505144a845dccdf55
Merge: d5a9ad6 c1d7b59
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 8 22:09:32 2013 +0000

    Merge "Fixes Opt types in glance/notifier/notify_kombu.py"

commit 38e8f6863ff9b3bb7d5751abb50b704eb958a514
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Thu Aug 8 17:31:13 2013 +0000

    Interpolate strings after calling _()
    
    The original uninterpolated string is the key used to lookup translations,
    so it's necessary to interpolate strings *after* calling into gettext.
    Otherwise, the strings won't be translated correctly
    This will ensure the string gets looked up by gettext correctly
    
    Change-Id: I1a529bbc1e9ef6ee79502a66f68bc793d2e23b94

commit d5a9ad6dfd418c74af9da8620bc6980944769809
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Wed Jul 24 20:16:51 2013 +0000

    BaseException.message is deprecated since Python 2.6
    
    PEP 352 deprecated the message attribute of the BaseException class.
    Using the message attribute will result in warnings like this:
    
    DeprecationWarning: BaseException.message has been deprecated as of Python 2.6
    
    Using unicode(exc) is the suggested replacement.
    
    Change-Id: Ie322aaa69c025ae5bf39d00f7e3487fe2527545b

commit 3309715f643cc8931c6d140acea59f3c13501ea7
Merge: 6cc1dcd ee46119
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 8 09:24:03 2013 +0000

    Merge "Using unicode() convert non-English exception message"

commit 6cc1dcd39655c5cc08776dda6fd0b9036820f1c3
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Wed Aug 7 14:20:02 2013 +0800

    Raise jsonschema requirement
    
    Glance PATCH API need use new 'require' condition for schema to validate
    income requests.
    
    Raise jsonschema requirement to >=1.3.0,!=1.4.0.
    
    See bug #1202391 for details.
    
    Change-Id: I3b8054b25f2b3d9ed0c3dd1be320f7402ceb9635
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit 485274433f5f552d496d6496c573fd50ee4c842f
Author: Kun Huang <gareth@unitedstack.com>
Date:   Wed Jul 24 13:51:52 2013 +0800

    Text formatting changes
    
    These are some text fixes in document, scripts and functions,
    including variable usage, text aligning, adding new store class in
    document
    
    Change-Id: I98e226969d86698972870a7b3a042cb00c2206e9

commit ee461194fa163ce97e7758cda28d7af6e6773ae4
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Wed Jul 17 16:22:09 2013 +0800

    Using unicode() convert non-English exception message
    
    In non-English environment when the store driver loading failed, the
    BackendException will be raised with a non-ascii message. We need call
    unicode() to convert the message before using it.
    
    Fixes bug 1202098
    
    Change-Id: I9a58393b599aacc427cb4135988ecf5c3e90e455
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit 463f3223802b31049de4a2bea44366240e6fdad7
Merge: 766c842 5679a56
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 5 22:23:42 2013 +0000

    Merge "ambiguous column 'checksum' error when querying image-list(v2)."

commit 766c8429da1494ad54546c2657f788621edf6576
Merge: c56fa55 8d0753a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 5 19:55:01 2013 +0000

    Merge "Add unit test for migration 010"

commit 5679a56a7550c28ed62c0855ead0c9c9c7178c6b
Author: Venkatesh Sampath <venkatesh.sampath@outlook.com>
Date:   Fri Jul 26 19:04:52 2013 +0530

    ambiguous column 'checksum' error when querying image-list(v2).
    
    - removed ambiguity by prefixing the column with models.Image
    - based on the image_get_all() method logic, changed the
    filters.get(checksum) to filters.pop(checksum) to
    avoid multiple addition of same criteria in the where clause.
    - modified the functional db test to include this failing scenario.
    
    Fixes bug 1205330
    
    Change-Id: Ic2b5b9bed7c02865d66e2f92846dcc9c0e7e2f97

commit ec07f0b437bef428a101073610e47f6b2c10dc1a
Author: Yufang Zhang <yufang521247@gmail.com>
Date:   Mon Aug 5 18:28:30 2013 +0800

    Handle None value properties in glance-replicator
    
    bug 1208417
    
    In glance-replicator, all image properties in the master glance are
    synced to the slave. But there are circumstances(kernel_id or
    ramdisk_id, etc.) when image properties in the master are None.
    glance-relicator doesn't handle this issue, thus all such properties
    are trasnlated to the string 'None' in the slave glance, which is
    incorrect.
    
    This patch fixes this problem by add a check before post metadata to
    the slave glance. All None properties are translated to '' before
    posted to slave glance.
    
    Change-Id: I9b674db907f707ac4dce28c8a7e3d81fcce61193

commit c1d7b5929db0e66539e4ba3cdf91a41547fd7f49
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Tue Jul 16 14:45:37 2013 +0800

    Fixes Opt types in glance/notifier/notify_kombu.py
    
    Changed rabbit_retry_backoff and rabbit_retry_max_backoff to IntOpt.
    
    Fixes bug #1201697
    
    Change-Id: Ia1a74b6bb2873e59677a7fea6652a6c006f38175

commit c56fa55bb9a400a1cfc677b1ebf1be771da75734
Merge: 2f05e71 d1adad0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 2 21:58:50 2013 +0000

    Merge "Stub out dependency on subprocess in unit tests"

commit 2f05e71f565df9d1aac99bc172f4e10f2841060e
Merge: 4b12897 03bfc4e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 2 19:21:57 2013 +0000

    Merge "Turn off debug logging in sqlalchemy by default"

commit 4b12897356bca636547d790d70ae33cd982898c5
Merge: c92aa52 672e717
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 1 18:55:21 2013 +0000

    Merge "Don't rely on prog.Name for paste app"

commit 8d0753a278a3659a73b41114d24c5309e1f11ffa
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Tue Jul 30 20:32:38 2013 +0000

    Add unit test for migration 010
    
    This continues implementing unit tests for the migrations that are
    currently missing them
    
    Change-Id: I461f133c6dc5a9dcc775cc71571e1acfd746d9ee

commit ed9e6c0acb7682a901bc5ad35068b85eb3e422a1
Author: Jasakov Artem <ayasakov@mirantis.com>
Date:   Wed Jul 31 12:10:29 2013 +0400

    Sync models with migrations
    
    Models should be the same as the state in DB after migration
    blueprint db-sync-models-with-migrations
    
    Change-Id: Iea57866206776c14677dfa78e868143b6fb153a9

commit c92aa525760c467ccbd8d25445b9082f0a028337
Merge: 08113de 4b71309
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 30 23:11:31 2013 +0000

    Merge "Include pipeline option for using identity headers"

commit 08113deeee582b32c333ff0163891e89134f72a3
Merge: fb1ed5f 55cb5af
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 30 20:32:30 2013 +0000

    Merge "add doc/source/api in gitignore"

commit fb1ed5f45daa999733bdfbf1b586b328272ab105
Merge: d0314c0 53df2c0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 30 15:38:11 2013 +0000

    Merge "Fix stubs setup and exception message formatting"

commit d0314c09737ee43cafd09aec6ea490d7982e245e
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Jun 11 11:44:40 2013 -0700

    Rename requirements files to standard names.
    
    Change-Id: Icde92cdff054f8c1efb4a518ab7cf166a8eb791a

commit 5903555a8b3365e8f728ff15162ee271dd158160
Merge: 18e7882 fcaf7d4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 29 23:08:12 2013 +0000

    Merge "Use cross-platform 'ps' for test_multiprocessing"

commit 4b71309280cf1334fb3bbac7b4cf80894f0b32ec
Author: iccha.sethi <iccha.sethi@rackspace.com>
Date:   Tue Jul 23 14:29:20 2013 +0000

    Include pipeline option for using identity headers
    
    There have been patches in nova, glance client and glance
    registry to give the user the option of not reauthenticating
    in glance. Below are the related reviews. This patch
    provides pipeline options the users will want to use for the same.
    
    Nova: https://review.openstack.org/#/c/37070/
    Glanceclient: https://review.openstack.org/#/c/37062/
    Glance Registry: https://review.openstack.org/#/c/36563/
    
    Change-Id: I904f8bafb7e5abceac5723ed8504c672a00c5ec7

commit 18e7882646d08799762b8520715dcf43d20a1c17
Merge: 8a6271e 006a4e5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 29 15:39:53 2013 +0000

    Merge "Allow insecure=True to be set in swiftclient"

commit 8a6271eee52e354332a89027d03e6a1e192abb9c
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Fri Jul 19 15:24:04 2013 +0800

    Adding arguments pre-check for glance-replicator
    
    Based on current implement, glance-replicator will expose trace
    if there is no arguments specified or the server:port format is bad.
    This fix will add pre-check for those sub commands.
    
    Fix bug 1202513
    
    Change-Id: Ib8a90ce583cf938c9fdc0e8ad36af2ef8dfc976b

commit 0484ca23b4b12515b2be1e83fe241d45f0b28746
Merge: e9c9cf1 183bb1d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Jul 28 01:37:44 2013 +0000

    Merge "Adds help messages to mongodb_store_db and mongodb_store_uri"

commit c3e58bd943ccb4e1457914c3c2b5366bd0afee5a
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Fri Jul 26 15:55:47 2013 +0000

    Add v1 API x-image-meta- header whitelist
    
    Add a whitelist of allowed 'x-image-meta-xxx' style
    headers. Attempts to supply other, unexpected headers
    will return 400.
    
    This prevents cases such as 'x-image-meta-locations'
    being processed, which were not being handled correctly.
    
    Addresses bug 1205018.
    
    Change-Id: I771bb6ae2a4f9cbd7726f952c7a71da99162b490

commit e9c9cf1ae3b2399e65828c8a810fd8d1a87c0b24
Merge: 4527609 102576b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 26 09:28:56 2013 +0000

    Merge "Remove support for sqlalchemy-migrate < 0.7"

commit 452760953fc42e0e2f9e10f391fe897753bf4240
Merge: 3a879bf c2683ac
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 25 22:05:57 2013 +0000

    Merge "Verify if the RPC result is an instance of dict"

commit d1adad076102a4ca5809088e4146b9380fc9dc30
Author: Brian Elliott <bdelliott@gmail.com>
Date:   Fri Jul 19 00:08:37 2013 +0000

    Stub out dependency on subprocess in unit tests
    
    Stub out the sheepdog Store dependency on subprocess communication
    with collie.  This results in many unnecessary pipes being created
    on POSIX systems.
    
    For unit testing purposes, do not create the sheepdog store.  (There
    are no unit tests for this functionality anyway.)
    
    Change-Id: I54014a502891ae52bb567f3fae32e6ff0c74332a

commit 006a4e5e31a12d049c3d6308c3a2d73f57cd980f
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Thu Jul 25 11:53:49 2013 -0400

    Allow insecure=True to be set in swiftclient
    
    Currently when we instantiate a swiftclient.Connection we can't pass in
    the insecure keyword arg. This means environments which have self-signed
    certs might have trouble talking to auth/swift. This fixes that
    situation and allows SSL certs to be ignored.
    
    Change-Id: I9663ed333e93529beba4a0736d3b9207bd4f150d

commit 3a879bf3e259f24056f00e33be65b9e5df639768
Merge: 0f3f716 3cd819f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 25 14:20:38 2013 +0000

    Merge "Simulate image_locations table in simple/api.py"

commit c2683ac373de78d271b7065a55720a464aae561d
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Thu Jul 25 11:13:33 2013 +0200

    Verify if the RPC result is an instance of dict
    
    The RPC client is currently assuming that all values returned from the
    API are iterable. Since errors are always returned as dicts, this patch
    verifies whether the returned value is an instance of dict before
    checking for the existence of the _error key.
    
    Fixes bug: #1204668
    
    Change-Id: Ie953d7dd2d327334789d66f689a30ce5e36afba9

commit 183bb1d1b4e9c0a0c01abeeb0cd961f58086ee53
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Tue Jul 16 15:47:59 2013 +0800

    Adds help messages to mongodb_store_db and mongodb_store_uri
    
    Help messages are based on the webpages below:
    
    http://api.mongodb.org/python/current/api/pymongo/mongo_client.html#pymongo.mongo_client.MongoClient
    http://api.mongodb.org/python/current/api/gridfs/
    
    DocImpact
    
    Change-Id: Id95459b3eb2b50703e5793e3bf02c9ea1b142236

commit 102576b69f0764f987e00d35bd34c1228d9181ca
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Wed Jul 24 18:56:49 2013 +0000

    Remove support for sqlalchemy-migrate < 0.7
    
    The sqlalchemy-migrate dependency already requires >= 0.7, so supporting
    anything older is unnecessary
    
    Change-Id: I0cfd640f420b4fe2837b496f4ef3d3e260619b63

commit 672e717ff15e018418d685077182108b65370d68
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Jun 26 15:41:25 2013 -0700

    Don't rely on prog.Name for paste app
    
    Relying on the name of the program breaks packagers who need to move
    glance executables around to other locations on the file system.
    
    Fixes bug 1194987
    
    Change-Id: I7721c5181b17b1f34adc279c055dfff5d17b57e5

commit 0f3f716c5a415e5d52262f0d7a577aa13b114aef
Merge: a9c8bfd 3fa3891
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jul 24 16:26:10 2013 +0000

    Merge "Glance api to pass identity headers to registry v1"

commit 3cd819fa6eedf07851c71c9f21aeb41d50e29776
Author: amalaba <princessbasha@gmail.com>
Date:   Fri Jul 19 14:42:25 2013 +0530

    Simulate image_locations table in simple/api.py
    
    Currently the simple/api.py does not implement any 'image_locations'
    related actions as in sqlalchemy/api.py. Actions like image_create/
    image-update etc in simple/api.py does not look at making appropriate
    changes in the image_locations table as it does in sqlalchemy/api.py
    
    Change-Id: Ifae710d3d820225218ba72d7a16652b03b64a24f
    Fixes: Bug #1202985

commit a9c8bfd473ebcaab8a21fc7b637630678d9862ff
Merge: 0f669d5 7e84438
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jul 24 07:49:24 2013 +0000

    Merge "Fix cache delete-all-queued-images for xattr"

commit 03bfc4e64a73652e9cd8fa3427a3de67fccd56cb
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Mon Jul 15 16:14:08 2013 -0400

    Turn off debug logging in sqlalchemy by default
    
    This commit adds a new config option sqlalchemy_debug which is used
    for enabling debug messages from sqlalchemy. Previously, this logging
    was enabled whenever debug was enabled. The debug log level for
    sqlalchemy prints out all SQL queries and results which is way too
    verbose for most cases where just debug logging is useful. This
    change disables this previous behavior by defaulting the new option
    to false and decoupling it from the debug config option.
    
    DocImpact
    
    Change-Id: I298c40b71ed0b8772ff956f61f8d94217bce0e11

commit 0f669d500af85f1d9d93d0906c4197e4fb709e1f
Merge: c13692f 159a649
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 23 15:07:49 2013 +0000

    Merge "improving error handling in chunked upload"

commit 3fa3891595463259f467e31d1d635e8f96a8f9dd
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Wed Jul 10 18:45:40 2013 +0000

    Glance api to pass identity headers to registry v1
    
    This patch introduces the send_identity_headers
    config option that allows glance-api to pass auth identity
    headers when making calls to the registry v1.
    
    docImpact
    Fixes bug 1199990
    
    Change-Id: Ie5f07ed6dfeaa8428de4f79c4d40d182328e6ab4

commit c13692f27d21c8b1db5108545f3b23b2e226d486
Merge: 58fd5ed cc5a348
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 22 21:51:43 2013 +0000

    Merge "Fix list formatting in docs"

commit 58fd5ed58500d5a88e876ffb492e2aed358b7212
Merge: 6bc565b d6e51d9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 22 21:51:42 2013 +0000

    Merge "Fix doc formatting issue"

commit 6bc565b7fb9b1592f831dbca346c111b46b5c9af
Merge: 54ab0ce 9f9f01b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 22 21:50:18 2013 +0000

    Merge "Ignore files created by Sphinx build"

commit 54ab0ce0f4376554362af027e42a77b64dc805d8
Merge: 093d442 84bf7e0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 22 21:50:16 2013 +0000

    Merge "Remove references to clean arg from cache-manage"

commit 093d442681c29dd6f0c2c2d4d6bb191f7e325f94
Merge: ef22c4f 3904860
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 22 15:40:50 2013 +0000

    Merge "Handle client disconnect during image upload"

commit 55cb5af076a6f4687840e24ac70875beb905c55e
Author: Kun Huang <gareth@unitedstack.com>
Date:   Mon Jul 22 18:37:26 2013 +0800

    add doc/source/api in gitignore
    
    Some files are created after running 'python setup.py build_sphinx'.
    These should be ignored by git
    
    Change-Id: I89d671d84294169dac5aacf18800ab805605aa9f

commit ef22c4f7456dcd820c722f4e7135104444067ba1
Merge: ddd5e34 670b07e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 19 23:56:16 2013 +0000

    Merge "Use oslo.sphinx and remove local copy of doc theme"

commit fcaf7d4e624184458af2c370f7192eaedc93adc5
Author: Brian Elliott <bdelliott@gmail.com>
Date:   Fri Jul 19 17:33:42 2013 +0000

    Use cross-platform 'ps' for test_multiprocessing
    
    This fixes _get_children() on OS X.
    
    bug 1205367
    
    Change-Id: I296ea18dbd601f18fe7367b42bf5aecd9ccf9646

commit 53df2c0b528f85060da5075a4e209ec1bee9e0ac
Author: Brian Elliott <bdelliott@gmail.com>
Date:   Thu Jul 18 23:06:03 2013 +0000

    Fix stubs setup and exception message formatting
    
    Fixes time-dependent bug in test case stubs setup that could result
    in stubs being unset by GC.
    
    bug 1205091
    
    Change-Id: Ic0d97bd1f96e42631c1ba3e1eaf4cf74b36140b2

commit ddd5e347953e323213c6734691d33259775bbd04
Merge: c350cde 3726418
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 18 23:21:12 2013 +0000

    Merge "File system store can send metadata back with the location."

commit c350cde40d52d0146ea28bccb688a84ad170e815
Merge: adb454d 89222a3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 18 19:31:16 2013 +0000

    Merge "Notify does not occur on all image upload fails"

commit 3904860467d87c74c046974963070e029a89ba5e
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Thu Jun 27 11:38:00 2013 +0000

    Handle client disconnect during image upload
    
    If a user does a ^C during a chunked image upload, eventlet.wsgi.server
    will raise one of ValueError or IOError when trying to read the next
    chunk.
    
    Handle this common scenario by raising(logging) a HTTPBadRequest error rather
    than HTTPInternalServerError.
    
    Fixes bug 1196953
    
    Change-Id: Ic88b142a40c548141be4b40a15f94b71603814e9

commit 159a6491cd41843d856fbe06fc824c0a0230c88f
Author: Kun Huang <gareth@unitedstack.com>
Date:   Tue Jul 9 11:55:23 2013 +0800

    improving error handling in chunked upload
    
    Keep traceback of chunked upload in a variable and raise it after
    deleting orphaned data to avoid covering sys.exc_info().
    
    fixed bug #1185609
    fixed bug #1199125
    
    Change-Id: If489f42bb97a01519d13de47eeb5d180b31ba6a7

commit adb454dcf21ef8d05fc1317985d815eb52cdc8eb
Merge: d13493b fd9b4cd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jul 17 23:46:56 2013 +0000

    Merge "Fix 'glance-cache-manage list-cached' for xattr"

commit d13493be80be66b7ac98e08534b3c59334b75f41
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Thu May 23 13:21:34 2013 +0800

    Adding Cinder backend storage driver to Glance
    
    This change allows Glance drive Cinder as a block storage backend to
    store image data.
    Before this we already use swift as an object storage backend to save
    image.
    
    Currently the patch is a partial implementation, after Cinder expose
    'brick' library, 'host-volume-attaching' and 'multiple-attaching'
    enhancement ready, the store will support ADD/GET/DELETE interface
    finally.
    
    blueprint: glance-cinder-driver
    
    Change-Id: I4cdeccdb518972c0280e59c984ed6b001dafe243
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit 3726418603dc657b7b7adc8a8eaac0e0921b0526
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Fri Jul 12 09:21:09 2013 -1000

    File system store can send metadata back with the location.
    
    This patch allows the glance operator to associate metadata with
    the file system store.  The metadata will be returned to v2 users
    with each location that was created by the file system store.  This
    information can give clients context into how to consume the data.
    
    The new configuration option: file system_store_metadata_file is
    added.  This is a path to a JSON file.  The JSON document can
    contain lists, dicts and unicode values only.
    
    blueprint: direct-url-meta-data
    blueprint: multiple-image-locations
    docImpact
    Change-Id: I3f040374455feb876e970a1813099598301774b5

commit d6754568acdc9027d1fccb41fe3d6de8307291f7
Merge: 5670f14 6296320
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 16 16:46:27 2013 +0000

    Merge "removed unused variable 'registry_port'"

commit 5670f142d4fc6ac0b09dfd934c4a2da86b2f36fe
Author: Amala Basha <princessbasha@gmail.com>
Date:   Tue Jul 2 06:50:48 2013 -0500

    index checksum image property
    
    checksum image property will be indexed so that users can search for an
    image by specifying the checksum
    
    Change-Id: I31543afed31512f8f5f613640012bc7c1d7ea993
    Implements: blueprint index-using-checksum-image-property

commit 99f6ddab2475b2dd44a300579468af737b607b1d
Merge: c39cf15 b0c8bc3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 16 02:32:15 2013 +0000

    Merge "Adding a policy layer for locations APIs"

commit 629632032948faf63cbb67b2cbe19e4e72aa4b9b
Author: Hemanth Makkapati <hemanth.makkapati@mailtrust.com>
Date:   Mon Jul 15 16:38:01 2013 -0400

    removed unused variable 'registry_port'
    
    The unused variable 'registry_port' has been removed from function
    'test_cache_manage_delete_cached_images'
    
    Fixes bug 1201585
    
    Change-Id: Ib438989f2dd00952a1a1647c101269055088ddaa

commit c39cf15ec048488e41e1a75dabd0f8bdd0768e4b
Merge: f313395 de8eba0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 15 20:41:12 2013 +0000

    Merge "DB Driver for the Registry Service"

commit f3133951985a08e7ec0661cb161f78aca39fa9ce
Merge: 254aa30 b21fa03
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 15 19:39:40 2013 +0000

    Merge "Sync gettextutils from oslo"

commit 254aa3096a8747812bc637cfc364d8f178a99dbb
Merge: d3b324e bd2ca4f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 15 19:36:52 2013 +0000

    Merge "Fix 'glance-cache-manage -h' default interpolation"

commit d3b324e0b55e1d93012c1223da5f07d4d2b061f4
Merge: 8f01575 c283bd0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 15 18:38:29 2013 +0000

    Merge "Deleting image that is uploading leaves data"

commit de8eba091b97db906da76ce48b537fde7cbc3810
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Fri Jul 12 16:52:29 2013 +0200

    DB Driver for the Registry Service
    
    This patch adds a database driver that talks to a remote registry
    service, which talks directly to a database back-end. The registry
    service implements all the database API public functions that are
    actually used from outside the API.
    
    In order to test this patch correctly, it was necessary to add an
    auth_token to each context used in the base tests and update that token
    were needed.
    
    NOTE: This patch adds tests for the above said driver but, it doesn't
    add Visibility tests. The reason is that those tests are meant for
    actual database back-ends. Given the "proxy" nature of this driver and
    the fact that it doesn't do anything on the data returned by the remote
    registry service, it isn't worth adding those tests. However, this
    review does have support for DriverTests and implements each one of
    them.
    
    Implements blueprint registry-db-driver
    
    Change-Id: I60f8e25c406c8e62b343267ba00f23299b19d4e5

commit eb7c8e541a740395be473d5c9f8c174eeab7b3f5
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Fri Jul 12 09:34:46 2013 -1000

    Unit tests for scrubber
    
    This patch adds a place for unit tests for the scrubber. The test in
    it addresses the change made at:
    https://review.openstack.org/#/c/29405/
    
    addresses bug: 1195423
    blueprint: refactoring-better-faster-stronger-functional-tests
    
    Change-Id: I02da0847c3f93474f478c8740e4649280a02eae1

commit 84bf7e057a98255dd4e3f67d8a76bcfbf5b2c6a3
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Mon Jul 15 15:58:11 2013 +0000

    Remove references to clean arg from cache-manage
    
    The usage message for glance-cache-manage lists "clean" as an available
    command, but this functionality is part of a separate tool,
    glance-cache-cleaner.
    
    Remove any references to this to avoid confusion.
    
    DocImpact
    Fixes bug 1189451
    
    Change-Id: I2aba8164ab9ef0c3bef31870cb3771233a722d27

commit c283bd07725cfc0a3834ab46fd28f1da6d51bb19
Author: Jared Culp <jared.culp@rackspace.com>
Date:   Mon Jul 8 10:02:24 2013 -0400

    Deleting image that is uploading leaves data
    
    Need to clean up the backing store if an image is deleted in the middle of an upload.
    
    bug 1176177
    
    Change-Id: I77722fd0aaf5ea8a06b4303e2b0cb1ad2929b0f0

commit b0c8bc3c494449dc6146ff81dcb6bcc28ecd8362
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Fri Jul 5 13:13:57 2013 +0800

    Adding a policy layer for locations APIs
    
    Added a policy layer for the locations APIs of the domain model to
    enable the policy checks for image locations changing.
    
    Implements bp: locations-policy
    
    Change-Id: I702723f060f1cc717aca2d99e32d886666c165f8
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit 8f015752a214f6debfa0a76f28625305df5c16f8
Merge: c64b9e0 5884ca4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Jul 14 13:26:31 2013 +0000

    Merge "Adds missing error msg for HTTPNotFound exception"

commit c64b9e09be3ec85b97e2271590b51efbc048894f
Merge: 996baf8 1e40cf9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Jul 14 01:17:59 2013 +0000

    Merge "Add/remove/replace locations from an image"

commit 1e40cf967f671392d79f5368ad277a6a373d7040
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Mon Jul 1 21:35:35 2013 +0800

    Add/remove/replace locations from an image
    
    This patch modifies the PATCH /v2/images/{id} API call. Clients can add,
    remove and replace locations from the set of multiple locations
    associated with a given image ID in the following way:
    
    PATCH /images/1234
    [{"op": "add", "path": "/locations/-",
      "value": {"url": "scheme3://path3", "metadata": {}}}]
    PATCH /images/1234
    [{"op": "add", "path": "/locations/1",
      "value": {"url": "scheme4://path4", "metadata": {}}}]
    PATCH /images/1234
    [{"op": "remove", "path": "/locations/2"}]
    PATCH /images/1234
    [{"op": "replace", "path": "/locations", "value": []}]
    PATCH /images/5678
    [{"op": "replace", "path": "/locations",
      "value": [{"url": "scheme5://path5", "metadata": {}},
                {"url": "scheme6://path6", "metadata": {}}]}]
    
    Glance will check location correctness when client adding, and will
    remove the image content from the store when client remove a location.
    
    Implement bp: multiple-image-locations
    docimpact
    
    Change-Id: I845646fde22e18be27929b5ec70ef8041b6fa733
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit 996baf8f6199d649149c0d068e50ca3e84aecba0
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Fri Jul 5 12:19:18 2013 +0800

    Adding multiple locations support to image downloading
    
    Enable image domain object fetch data from multiple locations, allow API
    client consume image from multiple backend store.
    
    Implement bp: multiple-locations-downloading
    
    Change-Id: I512e2b517ac0222339d61c490d620fc414dd8e7a
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit 76e75ce0d60f7c41b9c7c79ebd528c587e639d17
Merge: de463e9 ba17ee9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 12 21:02:15 2013 +0000

    Merge "Make db properties functions consistent with the DB API"

commit de463e9ff8b89c4188a8af86a1509c4b0c430e67
Merge: cea0454 74e4fe2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 12 19:13:04 2013 +0000

    Merge "Allow storage drivers to add metadata to locations"

commit ba17ee92f4110309da305fc2a80941abc997871e
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Tue Jul 9 15:10:58 2013 +0200

    Make db properties functions consistent with the DB API
    
    Currently property related functions are not consistent with the
    database API. As for the create operation, the API returns an
    ImageProperty model instead of a dictionary and in the case of the
    delete operation, the function expects a property instance instead of a
    reference name.
    
    This patch makes both calls consistent by returning a dictionary when a
    property is created and receiving a property name instead of its
    instance when a property needs to be deleted.
    
    Fixes bug: #1199364
    Implements blueprint registry-db-driver
    
    Change-Id: Ibc7067cf712942610c7507f22f8895c2d531172a

commit cea0454df21c3914188e44d9d695eee4c8e23a74
Merge: daa572d 8852963
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 12 14:47:43 2013 +0000

    Merge "On deleting an image, its image_tags are not deleted."

commit 5884ca4825e0674d10f7c19ca5ddd353a31efe6d
Author: Aswad Rangnekar <aswad.rangnekar@nttdata.com>
Date:   Thu Jul 11 08:30:49 2013 -0700

    Adds missing error msg for HTTPNotFound exception
    
    Fixes bug 1199373
    
    Change-Id: Ie1e554bd192c90de420672e4b87c489b8ffffc85

commit 74e4fe25dc7c2fa9868d0b1f09a13d4cf3e8a57f
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Tue Jul 9 10:32:59 2013 -1000

    Allow storage drivers to add metadata to locations
    
    This patches allows a storage system to add metadata to a location.
    For example, if a location is a file:// URL the storage system may
    wish to add information about it like the following:
    {'FS': Gluster, 'mountpoint': '/usr/local/', 'namespace': 'abc-efg-xyz'}
    Such information can be useful to a client with access to the direct
    URL (often times the URL alone cannot encode enough information).
    
    With this change when new data is added to the store a dictionary
    is returned along with URL.  That dictionary is then stored in the
    DB with the URL.  It is up to each store to determine what is in this
    metadata dictionary.  Possible way to do so are with a configuration
    file.  This patch does not included storage systems (other than tests)
    that set this information.
    
    If the API service is configured with the follow options:
    
        show_multiple_locations = True
    
    then the location and the location information is returned with the
    image information in the field 'locations'.  locations is
    a list with the following format:
    
    {'url': '<url>', 'metadata': <a storage specific dict>}
    
    With this patch it will always be a list of one, but future patches
    relating to the blueprint multiple-image-locations will allow for more.
    
    blueprint: direct-url-meta-data
    blueprint: multiple-image-locations
    docimpact: show_multiple_locations
    
    Change-Id: Ia832b8a8366bb06bfbaa53871af39a6a10b5721d

commit daa572dd9ef631477eaf6a4bcc998f658525edd0
Merge: bcb8713 5e71b5e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 12 08:29:57 2013 +0000

    Merge "Fixes image-download error of v2"

commit bcb8713f7a767490b78e31c34b9be01391502b28
Merge: 9ac6c65 e099eb2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 12 01:33:17 2013 +0000

    Merge "Pin kombu and anyjson versions"

commit 9ac6c656fb69910717a2c0f41cfa54c1ad013be2
Merge: 67ec72d 30f75e3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 12 01:28:04 2013 +0000

    Merge "Sync install_venv_common from oslo"

commit 5e71b5e11f056fc082e61e0e3a4515fcf1b9948f
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Thu Jul 11 21:17:07 2013 +0800

    Fixes image-download error of v2
    
    When trying to retrieve a Glance image using the v2 api, user will
    get an error:
    
    'utf8' codec can't decode byte 0xcc in position 1217: invalid continuation byte
    
    This is because Glance client expects a response of type content-type:
    application/octet-stream but it's getting a Content-Type:
    
    text/html; charset=UTF-8 Transfer-Encoding: chunked
    
    The root cause is Glance will return the image data from cache if
    there is. However, in method _process_v2_request, the content type
    has never been configured. See:
    https://github.com/openstack/glance/blob/master/glance/api/middleware/cache.py#L162
    
    Fixes bug 1193310
    
    Change-Id: Icab5e28db63455358ab3919bd94c484411987e39

commit 67ec72dd3cdfd4657f6730aa308508e20d2224ea
Merge: e10c01a b0b5425
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 11 11:34:31 2013 +0000

    Merge "Adding store location proxy to domain"

commit 8852963a38b6771c7ed2f3b40a511c5a5b3eb317
Author: Venkatesh Sampath <venkatesh.sampath@outlook.com>
Date:   Tue Jul 2 16:22:41 2013 +0530

    On deleting an image, its image_tags are not deleted.
    
    When the image is deleted, the delete operation also marks all the images' tags for deletion.
    
    Fixes bug 1195346
    
    Change-Id: I9958079437840860264648a8b0ce2ec2ff7a30d6

commit e10c01a35b45845ef88970d7c4a4b4ccaef5dc9f
Merge: e6ac4cf 1f965ca
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 11 00:22:27 2013 +0000

    Merge "Make eventlet hub choice configurable."

commit b21fa039bde3b76ee664c739f18224d304d59c96
Author: John Warren <jswarren@us.ibm.com>
Date:   Wed Jul 10 19:48:12 2013 +0000

    Sync gettextutils from oslo
    
    Bring in the necessary code for handling Glance translations
    
    Partially implements bp user-locale-api
    
    Change-Id: I5bc88e018c915d177560bcd42bd5733675e59516

commit b0b542554e1af8e7da979a5f524f70966e01ec29
Author: Zhi Yan Liu <zhiyanl@cn.ibm.com>
Date:   Tue Jun 18 17:21:30 2013 +0800

    Adding store location proxy to domain
    
    Adding a proxy layer to image to take care of it's locations for the
    store:
    1. Image location correctness checking.
    2. Remove image data from the store when a location is removed from an
    image.
    
    Implement bp: multiple-image-locations
    
    Change-Id: Ifa8b19050b48d1099aa37e77d144d10e6587b99c
    Signed-off-by: Zhi Yan Liu <zhiyanl@cn.ibm.com>

commit e6ac4cf1c88efc780721cac3bb911e835f645e2e
Merge: 229e482 805ec52
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jul 10 10:54:42 2013 +0000

    Merge "Add custom RPC(Des|S)erializer to common/rpc.py"

commit 229e482241b9dced4e96b1da21482c37d2d3843b
Merge: 900fb2c 89e9043
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 9 20:24:44 2013 +0000

    Merge "Add location specific information to image locations db"

commit 900fb2c66c335af90d2b8f9b6cb3b8962d41e485
Merge: 85cbff0 9cd4070
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 9 18:52:21 2013 +0000

    Merge "use tenant:* as swift r/w acl"

commit 89222a30d5224be0775c526ca36c7e5cd106a2d3
Author: Jared Culp <jared.culp@rackspace.com>
Date:   Tue Jul 9 11:46:41 2013 -0400

    Notify does not occur on all image upload fails
    
    Some exceptions did not have notifications sent after exception is caught.
    
    Fixes bug #1177972
    
    Change-Id: I86ba420c924d01153d5afdfc732239d1934175f8

commit 89e9043fbaaa03b2c8c2fab5314e60bba60f1137
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Fri May 31 10:35:24 2013 -1000

    Add location specific information to image locations db
    
    This patch adds a column to the image_locations table.  The column
    will store location specific information.  As a location is added
    to an image there may be some meta data about that information that
    needs to be stored with it.  For example, if it is a file:// URL,
    information about the NFS server (host name, mount point) would be
    needed in order for the URL to be useful.
    
    blueprint: direct-url-meta-data
    blueprint: multiple-image-locations
    
    Change-Id: I6a96163abc8e4388e84cae2a8952f89d433210ff

commit 805ec52dca1d75f239a3e24fded75a97706b014b
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Mon Jun 17 11:46:28 2013 +0200

    Add custom RPC(Des|S)erializer to common/rpc.py
    
    We need a custom way to serialize / de-serialize some types in the rpc
    API. Some of this custom serializations are worth moving to Oslo and
    other aren't. Before going down that road, it is worth testing them and
    make them a bit more stable.
    
    This patch introduces a serializer and a de-serializer for Glance's RPC
    API.
    
    Implements blueprint registry-db-driver
    
    Change-Id: I70c429c65d67cbd7ba09176d5f8e4e8f27270c5b

commit 9cd407036ea932e7dd74a7f98e4b026f731eef3c
Author: Kun Huang <gareth@unitedstack.com>
Date:   Tue Jul 9 02:55:10 2013 +0800

    use tenant:* as swift r/w acl
    
    The related swift patch has been merged
    (https://review.openstack.org/#/c/22820/), so Glance here could support
    this multi tenant sharing feature.
    
    fixed bug #1155389
    
    Change-Id: I36dfc7bdae133149e38e8266666e70cc07490554

commit 85cbff043fd233477bb36363c79e2447ba1e35c1
Author: iccha.sethi <iccha.sethi@rackspace.com>
Date:   Mon Jul 8 18:10:09 2013 +0000

    Add image id to the logging message for upload
    
    Adding image id so the log message can be more explicit as to
    which image it is refering to for upload exception.
    
    Change-Id: I5615366b1a9b9e8a40592626d05a5608fca6c3c2

commit 7e844389c5adbb3d23505b3b52ced9a175b22d1a
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Tue Jul 2 18:21:17 2013 +0000

    Fix cache delete-all-queued-images for xattr
    
    Deleting all queued images was broken when using caching with the xattr
    driver, due to a missing get_cache_files function.
    
    The missing function can be satisfied by substituting the call to
    get_cache_files() with get_all_regular_files()
    
    Fixes bug 1197402
    
    Change-Id: Ia7f289e15615ef31865ebfd23902aa1ae1b05d66

commit ce7554590da335610805899afc7d7e99284e7136
Merge: 0da443f bc8e71a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 8 15:56:57 2013 +0000

    Merge "Use python module loading to run glance-manage"

commit 0da443f8fb7c34a7dc20964a6e584475d9b1ebd2
Merge: 8699b01 1757e7e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 8 14:41:13 2013 +0000

    Merge "Add Sheepdog store"

commit 8699b01bf6ee70249814cffa1d90e4f1a6475a45
Merge: 33dd278 baa4091
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 8 12:54:08 2013 +0000

    Merge "Fix stale process after unit tests complete"

commit 33dd27804869613267b2e2ee08d77b0bac3ba345
Merge: 2538660 dc5112f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Jul 7 23:47:43 2013 +0000

    Merge "Dont raise NotFound in simple db image_tag_get_all"

commit baa4091b144de72901f58753298522003fad6e22
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Sun Jul 7 15:59:52 2013 +0000

    Fix stale process after unit tests complete
    
    After running the unit tests (eg with tox -epy27) a stale 'nosetests'
    process was always left behind.  It left TCP ports open and held references on
    inodes. The latter caused a problem with some automated build systems.
    
    Rework the relevant test 'test_no_client_tracebacks' to be functionally
    the same, but clean up fully.
    
    Fixes bug 1198685.
    
    Change-Id: If9d3afa370dc2bd3c470b509d38c94cfb5844518

commit 30f75e31efd6f7321824ab0087ad67a404fed790
Author: Monty Taylor <mordred@inaugust.com>
Date:   Fri Jul 5 22:39:20 2013 -0400

    Sync install_venv_common from oslo
    
    Change-Id: Idd7fd1310b58e81ceb9ae06bb1e9710aee1f4a65

commit cc5a348de41ca265560e4d4f1082f29d4c97fc69
Author: Doug Hellmann <doug.hellmann@dreamhost.com>
Date:   Fri Jun 28 19:35:53 2013 -0400

    Fix list formatting in docs
    
    Fix the way the notification payload is documented
    so it uses proper rst syntax and doesn't produce a
    warning in the sphinx build.
    
    Change-Id: I0d2adf36c7f5262770f5a3bda05c9ddd21efc17d
    Signed-off-by: Doug Hellmann <doug.hellmann@dreamhost.com>

commit d6e51d9ab40ca9ae58825988516bd92d77791c45
Author: Doug Hellmann <doug.hellmann@dreamhost.com>
Date:   Fri Jun 28 19:29:57 2013 -0400

    Fix doc formatting issue
    
    Fix the underline length to remove a warning from
    the documentation build.
    
    Change-Id: Icc1569cbeaa6c964d608a254095f7a778ff0c74e
    Signed-off-by: Doug Hellmann <doug.hellmann@dreamhost.com>

commit 9f9f01bf88dc7402124d91da753f6cea0ad09b38
Author: Doug Hellmann <doug.hellmann@dreamhost.com>
Date:   Fri Jun 28 19:28:16 2013 -0400

    Ignore files created by Sphinx build
    
    Change-Id: I46f34d9320ce39977facff705c52d272a160220f
    Signed-off-by: Doug Hellmann <doug.hellmann@dreamhost.com>

commit 670b07eb56ee26a556af6b0ced4c23b691b9568d
Author: Doug Hellmann <doug.hellmann@dreamhost.com>
Date:   Fri Jun 28 19:27:45 2013 -0400

    Use oslo.sphinx and remove local copy of doc theme
    
    Use the new oslo.sphinx version of the OpenStack doc
    theme instead of copying it into this repo.
    
    blueprint oslo.sphinx
    
    Signed-off-by: Doug Hellmann <doug.hellmann@dreamhost.com>
    Change-Id: I0bd91f7bb43f97b99051fed65b75fc05d5149cc8

commit 2538660d79dc78b17a29f696e0248e8be8cc2c67
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Mon Jun 17 17:01:49 2013 -0700

    Refactor unsupported default store testing
    
    This change improves coverage while saving ~10 seconds per test run.
    
    Part of bp:faster-better-stronger-functional-tests
    
    Change-Id: Id4d68ccb223205f27bed0c1e9d3072b51310b979

commit 1757e7e0ae92772cde3114500261b8432266f8d1
Author: Liu Yuan <namei.unix@gmail.com>
Date:   Wed May 22 00:03:02 2013 +0800

    Add Sheepdog store
    
    Sheepdog is a distributed block storage. This patch enables Sheepdog cluster
    as a backend store for glance.
    
    Test:
    
    You can set up a simulated 3 node cluster on the local machine with
    following script:
    
     $ sudo apt-get install liburcu-dev
     $ git clone git://github.com/collie/sheepdog.git
     $ cd sheepdog
     $ ./autogen.sh; ./configure --disable-corosync
     $ make; sudo make install
     $ for i in 0 1 2; do sheep /tmp/store$i -n -c local -z $i -p 700$i;done
     $ collie cluster format
    
    Then change the default store in glance-api.conf as sheepdog
    
    blueprint: add-sheepdog-support
    
    Change-Id: I99907bbfc2e131146de9dd1a39f94a73cd2585e9

commit bd2ca4f982269e67d11473ba37de8d77436f625f
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Wed Jul 3 16:52:50 2013 +0000

    Fix 'glance-cache-manage -h' default interpolation
    
    Some options were showing up as %(default)s when running
    "glance-cache-manage -h".
    
    Fixes bug 1197472
    
    Change-Id: I1c7586cbc52445e3bdca28a71378f40ecb5b07a9

commit fd9b4cd43d5533dd8051cf68d1b27cf70cd2f3cd
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Tue Jul 2 18:21:17 2013 +0000

    Fix 'glance-cache-manage list-cached' for xattr
    
    The xattr driver for the caching middleware was returning it's
    last_modified/last_accessed times in iso8601 format rather than a
    timestamp.
    
    This was inconsistent with the sqlite driver and caused the
    glance-cache-manage command to fall over when using the xattr driver.
    
    Fixes bug 1197360
    
    Change-Id: Ie72dcd9f41f7a3b7405cda9fe28e1e468fcc1bef

commit dc5112f794c6da796cc2a64c61a159ab6a3af671
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue Jul 2 19:04:18 2013 -0400

    Dont raise NotFound in simple db image_tag_get_all
    
    This patch removes the check in simple db. This is so both simple db and
    sqlalchemy have the same behavior. We do not necessarily want to perform two
    queries to see if the image exists so an empty list of tags is returned.
    
    Fixes bug 1197057
    
    Change-Id: Ibae37198b3854aa5dbe0e8a643a3d4b8608666c5

commit 9daf38706f0b1f3131029f897c95ec973237455f
Merge: faff611 b412869
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 2 14:51:26 2013 +0000

    Merge "Updated documentation to include notifications introduced in Grizzly."

commit bc8e71acfc7b7794cc4c078c2717e226b05b9525
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sun Jun 30 16:51:18 2013 +0000

    Use python module loading to run glance-manage
    
    Executing glance-manage in a unittest context means that we need
    to install glance first, which breaks packaging workflow.
    
    Fixes bug 1196275.
    
    Change-Id: Idf0a332c2f2ffd3eb96d3623c32cf5383a0d9887

commit faff61161e3687634958ec291e57a53004c16c57
Merge: b977362 6838beb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Jun 29 16:56:53 2013 +0000

    Merge "Add a bit of description"

commit b97736211693eba0966e09b86421b76e0a71f846
Author: Ashwini Shukla <ashwini.shukla@rackspace.com>
Date:   Fri Jun 28 16:05:33 2013 +0000

    Removed unusued variables to clean the code.
    
    Change-Id: I96d2f84cab88490f04af98603fba58325fa391fe

commit 95adbb4c5c85b1900be350cdd84e24d6faf7e0b0
Merge: 44dc0be 1e1bcfd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jun 28 15:23:41 2013 +0000

    Merge "Fixes exposing trace during calling image create API"

commit 44dc0be219cdd4eea2a9e56db7c3c1bb595a23c4
Merge: b8a13ea 541419d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jun 28 14:12:16 2013 +0000

    Merge "Port slow, overly assertive v1 functional tests to integration tests"

commit b8a13ea80b7e7493fb8ec9aeedb67cb260969cf0
Merge: d530f8b 7d3cdc5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 27 20:43:29 2013 +0000

    Merge "Fix for unencrypted uris in scrubber queue files"

commit d530f8bf3f5b5c993a88dcddc2f960ea798bfeef
Merge: a880ab4 7d9a926
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 27 00:37:06 2013 +0000

    Merge "Don't run store tests without a store!"

commit 1e1bcfd505c2096537bb8c24f3cc98656a92032d
Author: Fei Long Wang <flwang@cn.ibm.com>
Date:   Thu May 30 11:26:28 2013 +0800

    Fixes exposing trace during calling image create API
    
    Now Glance will return trace instead of standard HTTP error
    during create image with bad location and nonempty body.
    The root cause is nonempty request body will make add image
    as synchronous action instead of queuing it. And then, the
    image upload will fail due to the bad location. As a result,
    user will run into the exception trace instead of friendly
    HTTP error.
    
    Based on current design, it's invalid to provide multiple
    image sources in one request. So this fix is adding an
    explicit check to make sure there is only one image source.
    
    Fixes bug: 1185055
    
    Change-Id: I204aa14fa35e50aeb29b6dc22bbf5bbc66a2fb42

commit a880ab4a1b86022e5b979a004e5e302862eaaf40
Merge: 29d936b 4d48f19
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 26 13:13:10 2013 +0000

    Merge "Import sql_connection option before using it."

commit 29d936b9b2e7eb2ef2ff6debb2045fbc01e9a48c
Merge: 52958e4 41cc89a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 26 12:51:28 2013 +0000

    Merge "Do not raise NEW exceptions"

commit 52958e4002504cef4df95dea4cc65a3c3f60f984
Merge: 9dd8a85 33fc21a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jun 24 21:08:25 2013 +0000

    Merge "Do not send traceback to clients by default"

commit e099eb2522d2a62a0f3df078b858e2e4f66ba2e4
Author: Doug Hellmann <doug.hellmann@dreamhost.com>
Date:   Mon Jun 24 12:15:52 2013 -0400

    Pin kombu and anyjson versions
    
    The minimum version of kombu in the requirements
    list has been updated to ensure that compatible
    kombu and msgpack libraries are used across all
    projects. That update also requires an update
    to anyjson.
    
    Addresses bug #1134575
    
    Change-Id: I1520af1315fe649f52ab62769164dc67f4396651
    Signed-off-by: Doug Hellmann <doug.hellmann@dreamhost.com>

commit 41cc89afa8ed7dda76eed5669ae1306a131bbbfc
Author: Sergey Vilgelm <svilgelm@mirantis.com>
Date:   Mon Jun 24 15:32:14 2013 +0400

    Do not raise NEW exceptions
    
    Raising NEW exception is bad practice, because we lose TraceBack.
    So all places like:
    
    except SomeException as e:
        raise e
    
    should be replaced by
    
    except SomeException:
        raise
    
    If we are doing some other actions before reraising we should
    store information about exception then do all actions and then
    reraise it. This is caused by eventlet bug. It lost information
    about exception if it switch threads.
    
    fixes bug 1191730
    
    Change-Id: I047e355607318bf9fa6208c2b174b7cc394297f0

commit 541419dfa0556c5b5e91033500e5ed2adf1291d1
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Thu May 23 23:59:50 2013 -0700

    Port slow, overly assertive v1 functional tests to integration tests
    
    This patch ports existing v1 api functional tests to a newly added group
    of integration tests. The new tests take about 1/8th of the time of the
    previous tests, thanks to not forking off api and registry server
    processes.
    
    One original functional test is preserved, to ensure that we are still
    testing the basic v1 functional wireup.
    
    Related to bp refactoring-better-faster-stronger-functional-tests
    
    Change-Id: Ifcc76b4bf4e484a52558538e5398cad882e48e4c

commit 6838beb9d750c5d2dfbb2f38cd16a7bb8d87d798
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Fri Jun 21 14:49:14 2013 +0200

    Add a bit of description
    
    Fixes Hacking warning:
    H701  Empty localization string
    
    Change-Id: I9528fee604f3d2a37286f7b8bf03f0dd94bfc290

commit b412869fa84dc9783253ff459ddfc184f32efdc3
Author: Brian Rosmaita <brian.rosmaita@rackspace.com>
Date:   Fri Jun 21 14:15:01 2013 +0000

    Updated documentation to include notifications introduced in Grizzly.
    
    Change-Id: I326bb7dff3c0d047a7ed66886619e176edf08800

commit 1f965cac884165ce11c7c81bfdb982e7735e11e9
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Jun 19 14:06:16 2013 -0700

    Make eventlet hub choice configurable.
    
    Some platforms do not support the 'poll' hub.
    
    Change-Id: Ibd6abe499c7f6fdd84f5626b7e8fcb756e45ed57

commit 7d9a9261d2eab08877f30cb286f512c2e1cbbe84
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Jun 19 14:01:57 2013 -0700

    Don't run store tests without a store!
    
    Store tests reuse a base test case which defines relevant test
    functions. However, the base test case should never run independently,
    only in a subclass, because it has no store to test.
    
    Somehow, this issue only occurs if you run tox -- --tests
    glance/tests/functional/store
    
    Change-Id: I5d8d26ba68d034fb8e94e5408a757d9869825285

commit 4d48f19a60bb263a821698e5c04e7b24ba71496c
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Jun 19 13:59:43 2013 -0700

    Import sql_connection option before using it.
    
    This change fixes issues that would arise when testing certain files on
    their own. Normal test runs were not affected due to serendipity in the
    implied import order.
    
    Change-Id: I9a85bf0112a9796482624e860efc2ec620aaf0f2

commit 7d3cdc51acaf093b0ce393ffd522e238c4eeb0e5
Author: John Lenihan <john.lenihan@hp.com>
Date:   Wed Jun 19 09:25:09 2013 +0000

    Fix for unencrypted uris in scrubber queue files
    
    The scrubber can write unencrypted uris in queue files in
    certain conditions. This fixes the problem by removing the
    lines which write the queue files when exceptions occur.
    
    Test included.
    
    Fixes bug 1180884
    
    Change-Id: If742a84cea1bd1f5abf99fb0e3cbd1e0c1623171

commit 9dd8a855713011827d8eb22e3a938b034cccba30
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue Jun 18 18:02:17 2013 -0400

    Fix incorrect assertion in test_create_pool
    
    Fixes bug 1192356
    
    Change-Id: I2596f9c0e5e3f6c97ca2f47e23ffdab6846c65bf

commit 33fc21a81526029d0c50ef82d744250ff1a99b42
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Mon Jun 17 16:12:59 2013 +0000

    Do not send traceback to clients by default
    
    eventlet.wsgi.server contains a "debug" param which is True by default.
    This sends tracebacks to the client on 500 errors, which is not
    desirable for security reasons.
    
    Set this to be False by default.
    
    Fixes bug 1192132
    
    Change-Id: Ib54fb79128c6922f7a38339c4256f0e4c81e1665

commit bf3d19f26ad12211870238e352a3b5f5f2fedad4
Merge: 56a94c6 0440938
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Jun 16 23:38:12 2013 +0000

    Merge "Replace openstack-common with oslo in HACKING.rst"

commit 56a94c6b6e9f9093bc5014f0f1fbe905ad12fb86
Merge: 500b86d 87c7337
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 13 21:44:46 2013 +0000

    Merge "Use Python 3.x compatible octal literals"

commit 500b86da0d60e5c897c1946508f6c2a3ef6761ce
Merge: 9da5ef2 c2d3f3c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 13 21:44:41 2013 +0000

    Merge "Add a policy layer for membership APIs"

commit 9da5ef241fe4a9ff21b204285d129bff1681156e
Merge: ca5425e c867fc7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 13 00:35:02 2013 +0000

    Merge "Remove explicit distribute depend."

commit 87c73378a00026e3c63091840c16969e8384f53b
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Sun Jun 9 10:48:56 2013 +0200

    Use Python 3.x compatible octal literals
    
    Python 3.x deprecated octal literals in the form
    0755. Use 0o755  instead which works at least
    with Python 2.6 and newer.
    
    Change-Id: I3474f601dab0e2e1fbed8ef6f7472e3e453b94fb

commit ca5425e8c599c49133f5307cfbfad0bb58998460
Merge: 9a8b461 519c0a6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 12 10:56:48 2013 +0000

    Merge "Remove routes collection mappings"

commit 9a8b46190aa0a4dd2b91b68230133520d9bc3ffe
Merge: c2ea898 8d23994
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 12 10:49:08 2013 +0000

    Merge "Prevent '500' error when admin uses private marker"

commit c2ea89887049c3feab15fbb6369a655c0ce14ffc
Merge: aae7252 fa45e3e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 12 09:37:32 2013 +0000

    Merge "Add missing Keystone settings to scrubber conf"

commit c867fc7e4464b0fd0359161c61ddc1a1382087e3
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Jun 11 11:30:07 2013 -0700

    Remove explicit distribute depend.
    
    Causes issues with the recent re-merge with setuptools. Advice from
    upstream is to stop doing explicit depends.
    
    Change-Id: Ie875bbaae191cd0719db76cc375cd97d5bf90de7

commit aae7252711fd99267e077e7842977a93d4a4e141
Merge: 6019f15 4df82eb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 11 15:19:37 2013 +0000

    Merge "Sql query optimization for image detail"

commit fa45e3ed51c39f7246ede8125b641e5586e786b0
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Tue Jun 11 10:45:39 2013 +0000

    Add missing Keystone settings to scrubber conf
    
    The provided conf file for glance-scrubber was missing the auth settings
    stanza required to make it work 'out of the box' in a Keystone environment
    such as Devstack.
    
    Also add the "Security Options" line just below for consistency with the
    other configs.
    
    Change-Id: I1182fd3a7a79c0f6aeb601d65c31e462fb3610bb

commit 6019f15b8a2c6d46b0b737e537389f0c88c69fdd
Merge: dee7885 a72b2d6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 11 00:27:08 2013 +0000

    Merge "python3: Introduce py33 to tox.ini"

commit dee78856aa69ca6ea03a3a1c327b4cee818d8542
Merge: 2c73455 d17e87f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jun 10 23:23:27 2013 +0000

    Merge "Pass configure_via_auth down to auth plugin"

commit 4df82ebd0566eba1acf3a9f891a9984cbddb9037
Author: iccha-sethi <iccha.sethi@rackspace.com>
Date:   Mon Jun 10 14:22:11 2013 +0000

    Sql query optimization for image detail
    
    Current the image detail call uses left outer joins
    for its queries, which makes it neglect the index on the
    images table. The approach used in this patch, splits up
    the querying into two parts and then does the join,
    so that we can make use of the index
    
    Change-Id: I65df0be5f156959c1e70ad9cb1a8b7eceebb4d8a

commit 8d23994688c59d78757873480b9213d19d85a34b
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Apr 25 14:02:53 2013 +0000

    Prevent '500' error when admin uses private marker
    
    A 500 error was being raised when an admin tried to use the
    id of a private image owned by another user as a marker.
    
    Do not return 500 in these cases.
    
    Also added appropriate test coverage.
    
    Fixes bug 1172719.
    
    Change-Id: If77d45c684dd7d4dda9eefd519fc3d36fc57e07a

commit 04409386e7c556191047e6fb6435ef960c4e5c2a
Author: Thomas Bechtold <thomasbechtold@jpberlin.de>
Date:   Mon Jun 10 13:47:45 2013 +0200

    Replace openstack-common with oslo in HACKING.rst
    
    Change-Id: I211d128dce385a173cac5fec9df413b813bc4626

commit 2c734559b39f0ce39f764801aaacaae431566e9f
Merge: 3905612 6163022
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jun 7 10:41:25 2013 +0000

    Merge "Patch changes Fedora 16 to 18 on install page."

commit 390561255ddf0ee862f47d9f9f93fa7123d84071
Merge: c043f30 cd7bbc3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jun 7 08:44:39 2013 +0000

    Merge "Prevent E500 when listing with null values"

commit 6163022e7cd61435cf2981d44a58f63c2a7b448c
Author: annegentle <anne@openstack.org>
Date:   Thu Jun 6 20:28:54 2013 -0500

    Patch changes Fedora 16 to 18 on install page.
    
    Change-Id: Ia38ae70cb64462460c3ee64a05cf19b6a819f54b

commit d17e87ff7fb5918c9576009e04cc3996bfd352ea
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Wed Jun 5 14:56:14 2013 -0400

    Pass configure_via_auth down to auth plugin
    
    Pass down the configure_via_auth value to the auth plugin to say whether or not
    it should look in the service catalog for the glance registry endpoint. This
    stops authentication by glance registry client from needlessly looking for an
    "image" service endpoint when the user may not have it in their service catalog.
    
    Fixes bug 1187888
    
    Change-Id: I1c4a726ff0d6a345a27446500135f4f27cea5e39

commit c043f30b979642ab3274460d8d90a561f52930ae
Merge: 0dc221b 1ebe0aa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 5 17:30:01 2013 +0000

    Merge "Remove unused dictionary from test_registry_api.py"

commit 0dc221b2aab6af97c2d7d79d1a11c9784d232820
Merge: 98dcfb4 43c336c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 5 03:05:14 2013 +0000

    Merge "Move sql_connection option into sqlalchemy package."

commit 43c336c403684dd1a9161ccc92e2bea5061205f9
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Sun May 26 11:02:53 2013 +0200

    Move sql_connection option into sqlalchemy package.
    
    Since we're in the process of adding new backends that don't use
    sql_connection, it makes sense to move that option into the sqlalchemy
    package. That's what this patch does.
    
    As for glance-manage, it now calls the add_cli_options directly from
    sqlalchemy's api module.
    
    This is part of the blueprint registry-db-driver
    
    Change-Id: I890a5f707fe18f397cbeaadbac1d693ead2fdc14

commit 1ebe0aa606a49202220d584ba790d90bcc63dc2c
Author: jare6412 <jared.culp@mailtrust.com>
Date:   Tue Jun 4 13:20:22 2013 -0400

    Remove unused dictionary from test_registry_api.py
    
    Deleted a dictionary that wasn't being used in test_get_index_filter_name.
    
    Change-Id: If353c595487f34457463f6aa83e560d68cfc4e90
    Fixes: bug #1187442

commit 519c0a6be124468d2158cd8e5f7f08f7dcd55125
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Fri May 31 14:20:40 2013 +0000

    Remove routes collection mappings
    
    When using the routes mapper's collection to map from URLs to
    python functions several additional URIs are created by
    default: 'new', 'format' and 'edit', eg this URI
    
    /v1/images/new
    
    was accessible and would return a '500'.
    
    /v1/images/detail.xxx
    
    was accessible and a 'GET' to it would create a file called 'detail.xxx'
    in the image cache directory (where 'xxx' is an arbitrary string).
    
    Similar resources for image memberships existed.
    
    Other collection URIs (for both the API and Registry) would return
    unexpected behaviour.
    
    Use explicit mappings rather than a 'collection' to remove
    the superfluous resources.
    
    Fixes bug 1185828.
    
    Change-Id: I2f451f0208d43cdc83dcf58a41ea31359b18fcf2

commit 98dcfb4b90791e656a9558d768694a27bc90e3b5
Author: sai krishna sripada <krishna1256@gmail.com>
Date:   Sun Jun 2 18:13:42 2013 +0530

    updated content_type in the exception where it is missing.
    
    Fixes bug 1184279
    
    Added missing content_type in HTTPConflict, while attempting to upload a duplicate image.
    
    Change-Id: I4dbef69b6f9e83d4b5090cc0bbfcb01611c05a37

commit a72b2d64b17c66833f74e529c032642eabdce81a
Author: Chuck Short <chuck.short@canonical.com>
Date:   Sat Jun 1 16:47:45 2013 -0500

    python3: Introduce py33 to tox.ini
    
    Introduce py33 to tox.ini to make testing with
    python3 easier.
    
    Change-Id: Iddb14c65c0bf44612bdf8e301e31ab71ea432f29
    Signed-off-by: Chuck Short <chuck.short@canonical.com>

commit 1797d833b8ca875fd0e503a7bf9f475dcd72d79a
Merge: 6eaa588 42de741
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 31 22:18:28 2013 +0000

    Merge "Add qpid-python to test-requires"

commit 6eaa588d63b00560c1f05cdad48a126de934abc8
Merge: b1a7aca db33d99
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 31 17:38:29 2013 +0000

    Merge "Encode headers and params"

commit b1a7aca43df0853ea2b5c0fd8b60273e4ad36ed8
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Fri May 31 17:37:14 2013 +0200

    Don't make functional tests inherit from IsolatedUnitTest
    
    There were some functional tests inheriting from IsolatedUnitTest which
    doesn't make sense and was causing some issues in newer developments
    since IsolatedUnitTest stubs some classes (like Registry's client).
    
    Fixes bug: #1186291
    
    Change-Id: Icafac9edf8b0cec6a96532c609923de2c4d8d6bb

commit 84d0d753b9fa63bd673e12a218e8237744fa6456
Merge: fdf81b2 aa749ed
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 31 08:03:44 2013 +0000

    Merge "Fix pydevd module import error"

commit c2d3f3c802110a53c29da5c2b44f2e754b7eb038
Author: James Li <yueli.m@gmail.com>
Date:   Wed May 15 19:05:48 2013 +0000

    Add a policy layer for membership APIs
    
    Added a policy layer for the membership APIs of the domain
    model.
    
    Added following policies for membership APIs:
    
    v1: 'get_members', 'delete_member' and 'modify_member'.
    
    v2: 'add_member', 'get_member', 'modify_member',
    'get_members' and 'delete_member'.
    
    Implements blueprint membership-policy
    
    Change-Id: I0d5782d1d9b7b8a563a689fcb192958ab3fea0f4

commit fdf81b2d1389b6d9360c8e5ea0ddd1884670955b
Merge: edba198 6bd7a9d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 29 14:44:42 2013 +0000

    Merge "Fix undefined variable in cache"

commit edba198412db0d3abb3db6a855576a6cf16dcf92
Merge: 6ed6018 9356ea6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 29 14:41:04 2013 +0000

    Merge "Import strutils from oslo, and convert to it."

commit 6ed6018510a58cc74a3952ed9638f0112c3f69bf
Merge: f572fbf f09c52c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 29 14:40:56 2013 +0000

    Merge "Sync oslo imports to the latest version."

commit cd7bbc30175e90661baa90fff02232013b49dd06
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed May 29 10:23:57 2013 +0000

    Prevent E500 when listing with null values
    
    An image may have NULL values for 'name', 'disk_format' and
    'container_format'.
    
    Various image list operations which used a marker could return
    an E500 because:
    
    * sqlalchemy db: an illegal statement would be formed
    * simple db: the sort function would error when it hit a null
    
    To prevent this we change the behaviour so that when a NULL
    is encountered we treat it as an emptry string ('') for the
    purposes of sorting. This is consistent with the behaviour
    for listing the db contents using 'sql order by'.
    
    It is safe to provide the default empty string in all cases
    since only string based 'sort_key' values can be NULL in the
    database, eg 'size' (not a string) cannot be NULL.
    
    Fixes bug 1183860.
    
    Change-Id: I2187c41a3fab8b5813ba3a5e0f3249ee5dd981ed

commit db33d99af2b16ae81f815c63a6aea851318a2b34
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Wed May 22 15:40:48 2013 +0200

    Encode headers and params
    
    BaseClient currently fails when non-ascii characters are passed in
    paramas and headers. This patch ensures those params are correctly
    encoded before the request is made.
    
    The patch adds strutils from oslo and updates gettextutils.
    
    Fixes bug: #1182824
    
    Change-Id: I813d745d76700c77f1871b151a76ff8b72ea92d4

commit f572fbf2de9e1ecbebbbb285a09ef491875be6a4
Merge: 02fc5ba be34808
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 29 11:02:14 2013 +0000

    Merge "Make passing user token to registry configurable"

commit aa749ed6f349cc8964442f54211e2e79922df78a
Author: AmalaBasha <princessbasha@gmail.com>
Date:   Mon May 27 17:18:57 2013 +0530

    Fix pydevd module import error
    
    Introduces a try-except block in 'setup_remote_pydev_debug' that will
    handle the pydevd module import error gracefully.
    
    Implements: blueprint pydevd-module-import
    Change-Id: Ia25b8ef21266ab52dc11c11e9db0bbfa8542f1b9

commit 02fc5ba589df74d4404fee6fd6dc897e06c7d886
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Mon May 27 16:08:42 2013 +0000

    Add documentation on reserving a Glance image
    
    This lets us refer to the fact that some optional headers are in fact
    required unless reserving an image.
    
    Fixes bug 1124224
    
    Change-Id: I5646d4dc130efecf991573b363eb1a665012b7df

commit 9356ea634d17120c31e4845d58d1043ec7ac6fe0
Author: Michael Still <mikal@stillhq.com>
Date:   Fri May 17 10:05:14 2013 +1000

    Import strutils from oslo, and convert to it.
    
    The only change of behaviour here (according to the former glance
    unit tests) is that 'T' now means True not False. I suspect that's
    ok.
    
    Change-Id: Icf98f913a3f78a1fe2f38a82a25a071c2da03739

commit f09c52c8b03d0a980c211fa15bb240bf36ae2d68
Author: Michael Still <mikal@stillhq.com>
Date:   Fri May 17 10:06:01 2013 +1000

    Sync oslo imports to the latest version.
    
    Change-Id: I36193d00930e5c82c46841b64650863c811b95a4

commit e549be82aca3081f1e9be62616fbdb220f1df198
Merge: b3c7c8e 8885c30
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun May 26 08:51:02 2013 +0000

    Merge "Prevent '500' error when using forbidden marker"

commit b3c7c8e649591674498c1a96962b5a5031d5c28b
Merge: dc87464 101f000
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun May 26 08:43:42 2013 +0000

    Merge "RBD store uses common utils for reading file chunks"

commit dc8746447d28084075d60368dbe169b9a8d1e782
Merge: 16069ae b892b81
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun May 26 08:43:39 2013 +0000

    Merge "Improve unit tests for glance.api.v1 module"

commit 16069ae35e1f1ef70c8b490d8985d3db7396eed2
Merge: 8a32fa8 8b31056
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun May 26 08:41:35 2013 +0000

    Merge "rbd: remove extra str() conversions and test with unicode"

commit 8a32fa8071b0035751a20c769c1b47132788a38b
Merge: f0d7829 ccf064a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun May 26 08:41:32 2013 +0000

    Merge "rbd: return image size when asked"

commit f0d782984f47f4598c9b326d9bc31a0512c0f41a
Merge: 22fdbcb d2c5406
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun May 26 08:35:59 2013 +0000

    Merge "Respond with 412 after upload if image was deleted."

commit 6bd7a9d57e0ce45911888becaf944b0c324efdf3
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Thu May 23 13:12:29 2013 +0000

    Fix undefined variable in cache
    
    A function to verify metadata in the cache middleware was falling over
    for GETs on images with a missing size.
    
    Fixes bug 1183049
    
    Change-Id: I2da75e5e5aca12d20a10cace2a3779e4041161b2

commit 22fdbcb644e16462e6bf9cf53b19d02a4881c6c8
Merge: 685382d a0209e8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 24 19:19:44 2013 +0000

    Merge "Add GLANCE_LOCALEDIR env variable"

commit be34808c7b4ad113cebd3c3a96a46a9e1cd551c7
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue May 21 11:49:59 2013 -0400

    Make passing user token to registry configurable
    
    This patch adds CONF.use_user_token as a config option. When true, glance will
    continue to use the user token when communicating with glance registry. When
    false, glance will read admin credentials from the config and use those to
    communicate with glance registry. Using admin credentials allow for
    reauthentication when tokens expire and prevents requests from silently failing.
    
    DocImpact
    Fixes bug 1182536
    
    Change-Id: Ia6b563677eb67d4069571c82b9dad3f025b6e9fb

commit 685382d3d809276aa096504e4854f5ed505d3ecc
Merge: 266bc4a 01c54d9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 23 23:15:43 2013 +0000

    Merge "Improve unit tests for glance.common package"

commit 266bc4a4a6853337bd22d3fd4a5c42970706b644
Merge: 8f37488 c827b21
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 23 10:36:49 2013 +0000

    Merge "Add unittests for image upload functionality in v1"

commit 8f374888b5d38d439a76983e910d1e2175a26f2a
Merge: a9cb0d4 d35e558
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 22 22:39:30 2013 +0000

    Merge "Remove gettext.install() from glance/__init__.py"

commit a9cb0d4bceda10ca1927422e001b267b7f7d15a6
Merge: 4c9a974 bd8cfcb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 22 22:39:24 2013 +0000

    Merge "Small change to 'is_public' documentation"

commit d2c5406a48d0f08f023fde508abc81f5d0cb25c5
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Fri May 10 12:15:15 2013 -0400

    Respond with 412 after upload if image was deleted.
    
    When updating the image after upload, we should return an
    HTTPPreconditionFailed instead of a 500 error if the image cannot
    be found.
    
    This will also provide more information to nova when this occurs
    during snapshotting.
    
    Fixes bug 1176174
    
    Change-Id: I270ee129470323dae3919ed0a8c335eae7c24061

commit c827b21646b915d34a6696860c7e23892317b2ca
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue May 7 17:17:30 2013 -0400

    Add unittests for image upload functionality in v1
    
    This patch adds unittests for the code that handles uploading image data to the
    image store in v1 of the api. upload_utils.py was created in order to make this
    area of code more testable and move upload logic out of the images api
    controller.
    
    Fixes bug 1177999
    
    Change-Id: I97f0fa052e65228abb50090af812c3ebec605744

commit 4c9a974c0364da3108a2528408ac99dfb748661a
Merge: 0cb6624 866cb84
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 22 11:01:30 2013 +0000

    Merge "Remove glance-control from the test suite"

commit 0cb662486b693b321155348bd15ee1686139f0c4
Merge: b901d92 ba701d6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 22 04:04:17 2013 +0000

    Merge "tests: remove unused methods from test_s3 and test_swift"

commit 866cb846f5310e1ad36181e64e7d59ba54d9fd40
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Fri May 3 10:50:42 2013 -1000

    Remove glance-control from the test suite
    
    This patch removes the use of glance-control from the test suite. Instead
    of forking out glance-control and letting it fork out the other programs,
    we will now fork out the other programs directly. The file which tested
    glance-control has also been removed. While we will still have
    glance-control as part of the distribution for a bit and thus it should
    still be tested, that test was doing so in a way that depended upon the
    forking behavior previously found in the test suite.
    
    This patch also requires the patch
    https://review.openstack.org/#/c/26076/ on which it is dependent. As a
    side effect it tests for the problem found in bug: 1068051
    
    Additionally, this fixes a race condition. Previously each functional
    test called cleanup() in tearDown(). Cleanup would open a pid file and
    send a SIGTERM to the processes (api, registry, scrubber). However,
    it did not wait for this process to die and get cleaned up. The signal
    handler in the processes is over ridden so the death is not instant.
    This leaves a chance for server from a previous test to be actively
    listening on a port when the next test starts.
    
    fixes bug: 1173415
    blueprint: refactoring-better-faster-stronger-functional-tests
    
    Change-Id: Iabdb6fdc13b5f1993590b5a801a0e89df1a544c7

commit 8885c30e3a27621a9d539e9e8d54b4ad451465c4
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Fri May 10 12:34:46 2013 +0000

    Prevent '500' error when using forbidden marker
    
    If an existing image id was used as a marker, but
    the user didn't have access to that image a '500'
    error occurred. Return '400' instead.
    
    Fixes bug 1178307.
    
    Change-Id: Ib632297d944a19e18694fff154307a3bc6d5b625

commit 01c54d96ab7b0fda61b3b81c56022f14a39e1916
Author: Tatyana Leontovich <tleontov@yahoo-inc.com>
Date:   Thu Mar 7 16:11:57 2013 +0200

    Improve unit tests for glance.common package
    
    Add tests for next modules:
    * glance.common.wsgi
    * glance.common.utils
    * glance.common.client
    * glance.common.config
    
    Fixes: bug #1152183
    Change-Id: Iedbdfb6af411170da10d078e48f5098f8d1c668b

commit b892b81a1eded1ccce524a5dbb77f9e694636a9e
Author: Tatyana Leontovich <tleontov@yahoo-inc.com>
Date:   Thu Mar 7 18:16:05 2013 +0200

    Improve unit tests for glance.api.v1 module
    
    Add test for glance.api.v1:
    * tests for glance.api.v1.filters.validator
    * tests for glance api add member method
    * tests for glance api replace member method
    * tests for glance api delete member method
    * tests for registry api image details method
    * tests for registry api image delete method
    * tests for registry api add/delete/update/get member methods
    
    Fixes: bug #1152230
    Change-Id: I79d06b2281ba0c9b8d10b9300fffe6cc3c69c4ee

commit b901d924bbd88e3463fbf3e0830d9308d9022f30
Merge: 00da175 3182d87
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon May 20 09:42:22 2013 +0000

    Merge "Improve unit tests for glance.common.auth module"

commit 8b31056d7c4ec05b75c0b06b6100409a7530cbb5
Author: Josh Durgin <josh.durgin@inktank.com>
Date:   Tue May 14 16:34:10 2013 -0700

    rbd: remove extra str() conversions and test with unicode
    
    librbd doesn't handle unicode, so strings passed to it must be plain
    ascii. Originally the rbd store did this before each call, but since
    3aea9320d20d0291c5b4b027a585370d8e658a95 it only needed to convert to
    ascii in StoreLocation and add(). Remove the extraneous calls to
    str(), and add a test that uses a unicode image_id and uri to make
    sure unicode isn't passed to librbd anywhere.
    
    Change-Id: Ib7656126e044775f516fa6665e28f6d474820665
    Signed-off-by: Josh Durgin <josh.durgin@inktank.com>

commit ccf064afa08eddeec710854a4afaeb5d865b98d7
Author: Josh Durgin <josh.durgin@inktank.com>
Date:   Mon May 13 19:14:29 2013 -0700

    rbd: return image size when asked
    
    Implement get_size(), and use it for the second part of the return
    value of get().
    
    Convert the old-style functional tests into tests using the store test
    base class. These test the store api directly, and are more up to date
    than the old functional tests that went through the api. The store tests
    base class already includes tests for get() and get_size().
    
    Fixes bug 1180565
    
    Change-Id: I85ca0a0ab3155d1a25607ba9dc210be5719bf85c
    Signed-off-by: Josh Durgin <josh.durgin@inktank.com>

commit 42de74116e956ff6922e9093940f97379c8f3aac
Author: Ben Nemec <bnemec@us.ibm.com>
Date:   Tue Mar 19 02:04:40 2013 +0000

    Add qpid-python to test-requires
    
    The qpid notification tests are not run if the qpid-python package
    is not installed.  This change adds it to the test-requires list
    and removes the check for it since it should always be present.
    
    Fixes bug 1173380
    
    Change-Id: I2763e320e6018fde196c903f515920ad33f28aa6

commit 00da1750d75543a6dcd43701b3f0b4879d6f3101
Merge: 2b43bc9 abbc535
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 15 16:05:10 2013 +0000

    Merge "Redirects requests from /v# to /v#/ with correct Location header"

commit 2b43bc93b32caefa22caa941ffbe1b0e0022464d
Merge: 51bbb69 34135e8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 14 22:12:51 2013 +0000

    Merge "Implement Registry's Client V2"

commit ba701d6f8b858531a8b4929ee9b51c6b97b3c46c
Author: Josh Durgin <josh.durgin@inktank.com>
Date:   Mon May 13 17:45:14 2013 -0700

    tests: remove unused methods from test_s3 and test_swift
    
    Both define get_default_store_specs(), but neither is referenced
    anywhere in the codebase.
    
    Change-Id: Ifcf8fb15b5131beb1789c6f0f30b0e9c292592dd
    Signed-off-by: Josh Durgin <josh.durgin@inktank.com>

commit 51bbb69699e39f9214e67b8b416c86bde7c8bb32
Merge: 252ef06 e16cffe
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon May 13 12:30:08 2013 +0000

    Merge "Add RBD support with the location option"

commit 34135e88d583800f26af87228fd5a5b45101d88c
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Tue May 7 10:42:27 2013 +0200

    Implement Registry's Client V2
    
    The patch implements Registry's v2 Client.
    
    Some notes:
    * The implementation uses __getattr__ to map method's calls to remote
      RPC methods.
    * The client supports both bulk and single calls.
    * Client is based on the base HTTPClient
    
    About Exceptions:
    * If raise_exc == True, the client will try to re-raise the remote
      exception. If the server raised an unknown exception, it will be
      re-raised as RPCException in the client side.
    
    Implements blueprint registry-api-v2
    
    Change-Id: I98757c2272c68301373c1a3af96c4d06cb63cc97

commit 101f000d3ca25761d75f626fe4379143ef5a6a70
Author: Chris Fattarsi <chris.fattarsi@pistoncloud.com>
Date:   Wed Apr 24 17:23:35 2013 -0700

    RBD store uses common utils for reading file chunks
    
    Prevents cases where the image_size passed to the RBD store is larger
    than the actual image_file which attempts to write 0 bytes of data
    causing image.write to hang indefinitely.
    
    Fixes LP Bug #1146830
    
    Change-Id: I56216437a212c0c802d2ed349d88b3bd0d3bb4d7

commit 252ef063e4fe874c5c2ddd23bbe71c8598828ff6
Merge: e470732 66b3e5e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 10 00:48:10 2013 +0000

    Merge "Use flake8/hacking instead of pep8."

commit e470732120bc3b4d6d4239ad30de7162c94a3e8f
Merge: 00cc32c bba2f5c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 9 22:18:20 2013 +0000

    Merge "Add documentation for query parameters"

commit abbc5353336001572290feb8d06d65094b83a7cf
Author: James Li <yueli.m@gmail.com>
Date:   Fri May 3 22:31:58 2013 +0000

    Redirects requests from /v# to /v#/ with correct Location header
    
    This is a continuous fix to bug #1166957
    
    VersionNegotiationFilter pops off the version string of PATH_INFO,
    the popped segment is pushed onto SCRIPT_NAME, which results in
    dual version strings (e.g. '/v1/v1/') in the 'Location' header
    of a redirect response. This may result in a further 404 error
    if the http client will automatically follow the returned
    redirect.
    
    Fix this problem by adding a private method which does not
    push the popped segment onto SCRIPT_NAME.
    
    Change-Id: Ie0c244af38534dde2058828fbff840a845cc7c90
    Fixes: bug #1175815

commit bba2f5c4d0bb66b38ac6906d61cb60e96d6199dd
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed May 8 13:42:47 2013 +0000

    Add documentation for query parameters
    
    Add documenation for 'marker', 'limit' and 'is_public' query
    paramters.
    
    Addresses bug 1177739.
    
    Change-Id: I429ec7a54c132a6eee64846932ff72b35acfbfb2

commit bd8cfcb247ded08f79c4269bfcf9171319bf5085
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed May 8 15:23:14 2013 +0000

    Small change to 'is_public' documentation
    
    Update the documentation for 'is_public' in authentication.rst
    to be more accurate.
    
    Addresses bug 1177732.
    
    Change-Id: I9889826d4019ff33d9be343e79324862d9fde8e9

commit 00cc32ccf6847ef649fbb9c1905f823c91903f44
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue May 7 13:22:10 2013 -0400

    Fix test_mismatched_X test data deletion check
    
    The assertion checking if data for an image is deleted correctly will
    always pass. This is because it was using only the name of the file instead of
    the absolute path.
    
    Fixes bug 1177818
    
    Change-Id: I8b99a4156ce72cb278c9c173a27253ab191dd451

commit a0209e8757ae744202f94598fc788196e7fbf37c
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Apr 10 12:12:03 2013 +0100

    Add GLANCE_LOCALEDIR env variable
    
    Part of fixing bug #995287
    
    Syncs these two commits from oslo-incubator:
    
      Support overriding oslo localedir too
      Add a gettextutils.install() helper function
    
    to get a new gettextutils.install() function which allows the default
    localedir to be overwritten via an environment variable.
    
    Note that gettextutils.install() must be called before any other glance
    modules are imported since some modules attempt to translate strings
    at import time (e.g. the help strings for config options in config.py).
    This is broken and inefficient, but fixing it involves adding something
    like spinx's l_() function and would be very invaisve.
    
    Also, note that calling gettextutils.install() in glance.cmd.__init__
    means that no program which uses a different translation domain should
    ever import any of the modules under glance.cmd.
    
    Change-Id: I86562b3a65d371673bb21f7179eecc7602bc0775

commit d35e558b9347761b31eb311173e57eabe0f2fa4c
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Apr 10 12:03:53 2013 +0100

    Remove gettext.install() from glance/__init__.py
    
    The gettext.install() function installs a builtin _() function which
    translates a string in the translation domain supplied to the install()
    function. If gettext.install() is called multiple times, it's the last
    call to the function which wins and the last supplied translation domain
    which is used e.g.
    
     >>> import os
     >>> os.environ['LANG'] = 'ja.UTF-8'
     >>> import gettext
     >>> gettext.install('keystone', unicode=1, localedir='/opt/stack/keystone/keystone/locale')
     >>> print _('Invalid syslog facility')
     無効な syslog ファシリティ
     >>> gettext.install('nova', unicode=1, localedir='/opt/stack/nova/nova/locale')
     >>> print _('Invalid syslog facility')
     Invalid syslog facility
    
    Usually this function is called early on in a toplevel script and we
    assume that no other code will call it and override the installed _().
    However, in Glance, we have taken a shortcut to avoid having to call it
    explicitly from each script and instead call it from glance/__init__.py.
    
    This shortcut would be perfectly fine if we were absolutely sure that
    glance modules would never be imported from another program. It's probably
    quite incorrect for a program to use glance code (indeed, if we wanted to
    support this, Glance code shouldn't use the default _() function) but
    nevertheless there are some corner cases where it happens. For example,
    the keystoneclient auth_token middleware tries to import cfg from
    gance.openstack.common and this in turn causes gettext.install('glance')
    to be called in other projects like glance or quantum.
    
    To avoid any doubt here, let's just rip out the shortcut and always
    call gettext.install() from the top-level script.
    
    However, there's a bit of an annoying detail here - by default,
    nosetests starts in the current directly and tries to import all modules
    it finds to look for tests. Without the _() builtin installed, importing
    some modules like glance.common.exception will fail.
    
    Since it only ever makes sense to load tests from the glance/tests dir,
    we can ask nose to do that by using the --tests argument via setup.cfg.
    
    Note, this means that if you previously did this:
    
      $> tox -- glance.tests.foo glance.tests.bar
    
    then you must now do this:
    
      $> tox -- --tests glance.tests.foo,glance.tests.bar
    
    Change-Id: If4125d6bcbde63df95de129ac5c83b4a6d6f130a

commit f72ed76ed86fc670f09ff5575b77b71bc9a8be73
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Mon Apr 22 16:50:55 2013 +0200

    Implement registry API v2
    
    This patch implements registry's API v2 based on the blueprint
    registry-api-v2.
    
    Major changes:
        * The new registry API is implemented using a small rpc protocol
          over http. Resources must be registered and the exposed methods
          will be automatically discovered (they must start with rpc_).
        * Registry's API now returns data as returned by the db-api. The
          idea behind this is to provide a db-like api that can be used as a
          db-driver leaving to glance-api the responsibility for cleaning
          up what will go out to the client.
    
    Minor changes:
        * Split unit/v1/test_api.py in 2 separate test files (for
            consistency with v2 unit)
        * Added test_registry to unit/v2/
    
    Implements blueprint registry-api-v2
    
    Change-Id: Ia9f6eb60f52bb093e807a8a89d4df89fb80c4336

commit e16cffe432ade6fc8d22d422c490bdea8506596f
Author: leseb <sebastien.han@enovance.com>
Date:   Mon May 6 18:41:19 2013 +0200

    Add RBD support with the location option
    
    Currently only 's3', 'swift', 'http' are supported
    with the --location option of glance client.
    
    Change-Id: I8300314cf246d7ad42c2353d4c122c4ff2b831f7
    Fixes: bug #1176994

commit 66b3e5ec839d7cf179bd1441fad9d74906e8db6a
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sat Apr 20 22:28:31 2013 -0700

    Use flake8/hacking instead of pep8.
    
    Change-Id: Ia99bc9116d7d8b558002b302cafe354d05d57f72

commit 926b6c9db09c55ce9ecca5929f4da8208f9a35f5
Merge: cc938e2 ff75ad4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 3 09:12:45 2013 +0000

    Merge "Fix functional test 'test_copy_from_swift'"

commit cc938e25f3babd8aa1299ae75cc5fa2cf24a00a0
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed May 1 15:41:53 2013 +0000

    Use RBAC policy to determine if context is admin.
    
    Fixes bug 1152716
    
    If the context roles do not match the configured admin_role,
    fall back to determining if admin via the "context_is_admin"
    RBAC policy rule (for consistency with the approach used by
    the other projects).
    
    Note this requires that the "context_is_admin" rule *must*
    be set in the policy.json if the out-of-the-box default rule
    is used (as this default is so open, the net effect of omitting
    the "context_is_admin" rule is for every request to acquire
    admin status).
    
    Change-Id: Ide2cf604b48f24bd759ce2d65091ff546cd9d22e

commit 2781f41fbd2b6a368e0bb561e113732fbe88561e
Merge: cd92b5e 9174753
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 1 21:34:50 2013 +0000

    Merge "Create package for registry's client"

commit cd92b5eed458c78f445f75a23950351a5ddf7d87
Merge: 4c55a8b 39477af
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 1 21:04:53 2013 +0000

    Merge "Redirects requests from /v# to /v#/"

commit 4c55a8babca44b8e0046c01321830aa7ecd4ac6b
Merge: 69faf22 039f3d8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 1 20:41:30 2013 +0000

    Merge "Convert scripts to entry points"

commit 9174753332296fb4cf8d715c149b398636954568
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Tue Apr 16 13:29:51 2013 +0200

    Create package for registry's client
    
    Currently, Registry's client doesn't have a version and It's being
    imported from glance.registry.(__init__|client).
    
    As part of the blueprint registry-api-v2 the registry's client will be
    modified. That for, it is necessary to keep backward compatibilities
    with older versions until the db-registry-driver is completed.
    
    This code might be removed / re-factored in the future once glance's api
    v1 will be migrated to use the db-registry-driver.
    
    Change-Id: I3f27cec5b6e5f857d7aa94731305629190ae642e

commit 69faf229e8c44addde7475944137f28fbbeebf44
Merge: 11b1706 acc2900
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 30 20:42:48 2013 +0000

    Merge "Expand HACKING with commit message guidelines"

commit 11b1706e83adbb01486c0529c1ea8f6e1e6916ed
Merge: 5f5c4d7 d700f24
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 30 20:42:45 2013 +0000

    Merge "Remove unused configure_db function"

commit 5f5c4d717718f2c8c8e9baf49cfbc8c069790301
Merge: 0a4f4af 2d492e0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 30 20:41:18 2013 +0000

    Merge "Don't raise HTTPForbidden on a multitenant environment"

commit 0a4f4aff6c0ef7b74492dab6a88a2f4e40a3a422
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Sat Apr 27 14:42:15 2013 +0200

    Compress response's content according to client's accepted encoding
    
    Currently Glance ignores the Accept-Encoding header and returns
    responses as they are regardless the client accepts gzip or other type
    of compression.
    
    This patch adds this capability to glance (by using a middleware)
    supporting just gzip for now.
    
    Important note:
        - The patch uses a lazy compression for Content-Type
        application/octet-stream but in order to do that, the
        content-length has to be unset which means that when an image is
        downloaded the content-length will be unknown to the client.
    
    Fixes bug: 1150380
    
    Change-Id: Ieb65837d4e3fe310f97d9666882ecc572b14956a

commit a9f9f137bb44bd5727854f416f8b0c7c3df81867
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Thu Apr 4 12:17:36 2013 +0200

    Call os.kill for each child instead of the process group
    
    The patch sets the process group id to its process id. Note that this
    change raises an OSError in Glance's tests because they are run under
    Popen and using glance-control, which changes children's session ids and
    other parameters. That for, setpgid is inside a try / except and falls
    back to 0.
    
    Fixes bug 1068051
    
    Change-Id: Ie9ed044e08053d0067396138de0bd124326aa1a5

commit 677eb3faab918e49b50c27f00ef3caf2b2f843d3
Merge: 3acd2a5 1e98e10
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 30 08:26:06 2013 +0000

    Merge "Gracefully handle qpid errors"

commit 3182d875ca4db49b9e01a58d809e2b0304a31fda
Author: Tatyana Leontovich <tleontov@yahoo-inc.com>
Date:   Thu Mar 7 13:29:18 2013 +0200

    Improve unit tests for glance.common.auth module
    
    Add additional case to the test glance.tests.unit.test.auth.required_creds,
    to verify that plugin created without required
    credential pieces raises an exception
    
    Fixes: bug #1152009
    Change-Id: I3fdd9224173bdb33a9bd2ab348e22675d735099f

commit 039f3d8a59c62d3ad14288ed1b6a97aab539731e
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Tue Apr 2 11:09:24 2013 -1000

    Convert scripts to entry points
    
    The executable programs used by Glance have historically been scripts
    in the ./bin directory.  This patch converts all of the scripts to
    entry_points.  This change makes these programs python modules.  Thus
    they can be imported and methods in them can be called just like any
    other module.  This will allow the tests to call into these programs
    directly instead of having to fork out a process.
    
    The conf.py file in the doc tree was causing a name collision with
    the python module cmd.  The glance/glance directory was being added
    to sys.path which made glance.cmd import with the name cmd.  This
    patch also fixes that problem.
    
    blueprint: refactoring-better-faster-stronger-functional-tests
    Change-Id: I67ae14b7403af31a5944befcd2ec27a690e81f15

commit ff75ad4dfb352a5362e53ce91125419998d861aa
Author: John Lenihan <john.lenihan@hp.com>
Date:   Fri Mar 22 11:28:10 2013 +0000

    Fix functional test 'test_copy_from_swift'
    
    This test fails if a real swift system is specified in a config file
    and passed to the tests via the GLANCE_TEST_SWIFT_CONF environment
    variable. The fix is to quote the creds in the uri and also to
    fix get_swift_uri() to handle uris of the form '@https://'.
    
    Fixes bug 1158404
    
    Change-Id: Ic091f77a83696e6413aea047e805ac11487aba39

commit d700f24203768211468d4879b5fa93a59fabf9e3
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Thu Apr 11 13:49:13 2013 +0200

    Remove unused configure_db function
    
    DB drivers currently implement a configure_db function that is supposed
    to be used for seting up the environment and getting an engine back from
    it. Since it is not being used anywhere in the code but tests, I removed
    it and modified tests in order to call both functions (setup_db_env and
    get_engine) where/ when needed.
    
    As pointed out in another bug, it is important to just call setup_db_env
    when instantiating the db_api in order to keep it lazy. AS for
    sqlalchemy get_engine will be called when a session is requested.
    
    Fixes bug 1167770
    
    Change-Id: I2ebeb5e8424a4857df21f7c2d5b33e8ae0100c6a

commit 2d492e04be9e386e402ddde248d9a55c8d04a2bb
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Sat Apr 27 12:37:13 2013 +0200

    Don't raise HTTPForbidden on a multitenant environment
    
    When getting public images in a multi-tenant environment, Swift raises
    HTTPForbidden for chuncked images.
    
    Based on swift documentation, rlistings directive turns listings on,
    which is the desired behavior in this case.
    
    Fixes bug 1170156
    
    Change-Id: I149f702d5b3ebae73b04deed4809939ab43c6adc

commit 3acd2a58d23ceada548349f7f8ba3342d6b444e4
Merge: f9add16 62068a3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Apr 27 01:38:53 2013 +0000

    Merge "Remove internal store references from migration 015"

commit f9add16f5690e9ed6b20577bddf3d674ac33534e
Merge: d415611 545cb15
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Apr 26 20:48:37 2013 +0000

    Merge "scrubber: dont print URI of image to be deleted"

commit acc290042973e99e2c4dff37adf1f87505cbb53f
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Fri Apr 26 15:27:09 2013 -0400

    Expand HACKING with commit message guidelines
    
    Add a 'Commit Messages' section to HACKING describing how a commit
    message should be formed.
    
    Change-Id: I49f7c3febf65db246a84b0314597615f8d0ba247

commit 39477afb0e8f6060c44975fe6a67393a506a9dbe
Author: James Li <yueli.m@gmail.com>
Date:   Fri Apr 12 02:01:18 2013 +0000

    Redirects requests from /v# to /v#/
    
    Added an APIMapper to catch routemaps when the url is ''
    because routes.Mapper returns an error if this is the case
    but we want a redirect
    
    Refer to the Nova code at:
    https://review.openstack.org/#/c/886/
    
    Change-Id: I74011d14a02a3bc8767fab559ada4c2d82dc5d6e
    Fixes: bug #1166957

commit d41561151c7bd4917a36382340d040ed843a794b
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Wed Apr 24 11:35:24 2013 -1000

    Functional tests use a clean cached db that is only created once.
    
    This eliminates the need for 'glance-manage db_sync' to be called
    once (and often twice) for every test.  db_sync is an expensive
    operation because it must walk through ever database migration.
    With this patch, the first time the db is created it is cached
    before it is used.  Instead of creating the db in future tests
    the cached file is copied.  An atexit() function is used to clean
    up the file when the tests are complete.
    
    fixes bug: 1172475
    blueprint: refactoring-better-faster-stronger-functional-tests
    
    Change-Id: I96e35c640256bf27ff17da0b5f558bda02906a07

commit d3c5a6cb01d04081f4eeb676988cfd4ab057407e
Author: John Lenihan <john.lenihan@hp.com>
Date:   Tue Apr 23 12:03:10 2013 +0000

    Fixes for mis-use of various exceptions
    
    Changes to various the way various exceptions are raised. They are
    all missing keyword args.
    
    Fixes bug 1172220
    
    Change-Id: I132d8a3b5b130b3a8e17fe49ba8800060325f811

commit e4d142ed6b7dc80572d3c293c9300b9ee1c6b2fe
Merge: 61981f6 1c5a4d2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Apr 24 09:48:32 2013 +0000

    Merge "Call monkey_patch before other modules are loaded"

commit 61981f6a4d3f7719e9749aed608b9968b935d30a
Merge: 4bc3e45 7d341de
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 23 18:07:06 2013 +0000

    Merge "Raise 404 while deleting a deleted image"

commit 545cb15ed0ca105b04b18534cb67e9593171005e
Author: Tom Hancock <tom.hancock@hp.com>
Date:   Tue Apr 23 11:32:06 2013 +0000

    scrubber: dont print URI of image to be deleted
    
    Print the ID not the URI of the image to to be scrubbed
    as the URI can contain credentials
    
    fixes bug lp# 1171851
    
    Change-Id: Ice2d3d25a23bae31380759b87b50228ba358dcf1

commit 4bc3e458943e4a0c142e98304561be2443c18630
Merge: c8b0aad 6335fdb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 23 08:11:52 2013 +0000

    Merge "Eliminate the race when selecting a port for tests."

commit c8b0aad7e6010e696420ed51af92acaef5a102a4
Merge: b56491f b1ac90f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 23 07:20:12 2013 +0000

    Merge "Add a policy handler to control copy-from functionality"

commit 6335fdb1d3efbbb6c3add7a2c31e279fc6e40ff3
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Tue Mar 19 14:27:09 2013 -1000

    Eliminate the race when selecting a port for tests.
    
    Functional tests currently select ports on which the various services
    will listen by opening a socket in the ephemeral port range, checking
    its port, closing the socket, and then sometime later starting the
    service and instructing it to use that port.  There are a few bugs that
    reference fragile tests.  In many of these case it is possible that
    another processes claimed the selected port in between the time it was
    first opened and closed and the time that the service actually used it.
    Because this is a known possibility, and because the tests fail
    infrequently resolving these bug becomes difficult.
    
    This patch eliminates the window in which another processes could claim
    the port.  The socket is opened in the test code but not closed. Then
    the service process (api or registry) is forked off where it inherits
    the open file descriptor.  A environment variable is used to tell the
    new wsgi process that it is a test process and should thus get its
    socket from the FD instead of creating a new socket.
    
    In the case where glance-control is used with the --respawn option this
    solution is not possible.  The problem is that the FD is only good once.
    I can pass from the test code, to glance-control, and to glance-{api,
    registry} but only 1 time.  If the service dies, and glance-control
    restarts it the FD will no longer be valid.  For this case the forked FD
    code is disabled.  However, the socket is still closed much later making
    the race condition even less likely.
    
    This fixes bug: 1047593
    It may fix some other "fragile test" bugs as well.
    
    Change-Id: I27313d144bc7bd2132a604dcc22916c80338abab

commit 7d341dec47743691c9fdfaa61428bce43e8f5d75
Author: iccha.sethi <iccha.sethi@rackspace.com>
Date:   Mon Apr 22 14:16:56 2013 +0000

    Raise 404 while deleting a deleted image
    
    Fixes bug 1171469
    
    Currently the glance v1 api raises a HTTPForbidden when a user tries
    to delete an already deleted image. It should be raising a HTTPNotFound.
    
    Change-Id: I79f83782739bf40f3baba293cbc17fe04ca020bb

commit b56491f39446e6ec83375e481d9119ce076c8957
Merge: 0a15b32 1e49329
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 22 21:56:56 2013 +0000

    Merge "Fix functional test 'test_scrubber_with_metadata_enc'"

commit 0a15b3269fb49126e571264d09f5808ca341e53f
Merge: cbf77c7 28b1129
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 22 21:10:59 2013 +0000

    Merge "Verify SSL certificates at boot time"

commit cbf77c748af8f5403a0f10000369f9089b3dba4b
Merge: bebe147 7155134
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 22 21:10:24 2013 +0000

    Merge "Add unit tests for glance.api.cached_images module"

commit bebe147d334333f5542424efee75a1a0cccc5782
Merge: cec1c2a 6780571
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 22 21:10:21 2013 +0000

    Merge "Fix Qpid test cases"

commit cec1c2ac822fa43c89840cfd84b7b0684400268d
Merge: 48ff178 cd00848
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 22 21:10:17 2013 +0000

    Merge "Fix the deletion of a pending_delete image."

commit 48ff17886f8c7c27f5e84ffa2677c74bc06bd87a
Merge: 351c495 6eaf42a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 22 21:04:20 2013 +0000

    Merge "Improve unit tests for glance.api.middleware.cache module"

commit 351c49509939fbc64babed80dfd5e1122a1215b5
Merge: 49f9789 ae0f904
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 22 20:11:27 2013 +0000

    Merge "Add GridFS store"

commit 49f9789830c99b8c226deffc0fc4dd1ac00027b1
Merge: 459e3e6 e6e02cd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 22 14:54:13 2013 +0000

    Merge "Fix test redifinitions"

commit e6e02cd147b3b22dc39344df48d3e40abf024240
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Mon Apr 22 02:39:00 2013 +0200

    Fix test redifinitions
    
    A few testcases had duplicate names, which caused
    the original test to be redefined and not executed
    anymore. Also one case was apparently entirely duplicate.
    Raises unit test coverage by two tests.
    
    Change-Id: Ibf3db93b7fee875877c1bac8797eb88fc9a99874

commit 459e3e647cad50393c25aae4b8286db522dc563c
Author: Davanum Srinivas <dims@linux.vnet.ibm.com>
Date:   Sun Apr 7 20:40:24 2013 -0400

    Sync with oslo-incubator copy of setup.py and version.py
    
    Keep up with the changes to the master copy
    
    Change-Id: I1cc2ca0e627f25a86b0adc6df9bb9d4a12a3cdcf

commit 1e98e108c057914a1e8b2ee2295c80db410b5ffa
Author: Ben Nemec <bnemec@us.ibm.com>
Date:   Thu Apr 4 19:32:03 2013 +0000

    Gracefully handle qpid errors
    
    If a qpid error occurs when Glance is sending notifications, the
    qpid connection may not be cleaned up properly.  This change catches
    qpid exceptions to allow proper error handling.
    
    Fixes bug 1164681
    
    Change-Id: Ica3ef54b958e4efe3932b90d721324e7860b1ea4

commit 67805719418ec5ae6afaae2e4ebd304ec93d4d7f
Author: Ben Nemec <bnemec@us.ibm.com>
Date:   Thu Apr 4 19:42:55 2013 +0000

    Fix Qpid test cases
    
    The Qpid notification test cases do not currently pass.
    By default they are skipped because qpid is not part of
    test-requires, so it isn't automatically installed.  This fix
    updates the test cases to work correctly, but does not add
    qpid to test-requires because I'm unsure what impacts that
    might have on other platforms.
    
    This is part of the fix for bug 1164681
    
    Change-Id: I40757b5de99559b4ff090e0d249f8624c2e2be10

commit 60431d8dc9df402fe0b542072f41ffdb77c75140
Author: OpenStack Jenkins <jenkins@openstack.org>
Date:   Wed Apr 17 00:02:03 2013 +0000

    Imported Translations from Transifex
    
    Change-Id: I90de38c969665f7b91afc323720754df1c3f320f

commit cd008483747ff6825131365efc60cd787c36c310
Author: James Li <yueli.m@gmail.com>
Date:   Thu Apr 11 23:01:45 2013 +0000

    Fix the deletion of a pending_delete image.
    
    Return '403 - Forbidden' when trying to delete
    a 'pending_delete' image, and does not change
    its status.
    
    Change-Id: Id5b8b31c19d0f9da8aba66b06d1b966e9c33a363
    Fixes: bug #1163020

commit 47935778b9ed11e800ddacfdf213f804155cba35
Author: OpenStack Jenkins <jenkins@openstack.org>
Date:   Mon Apr 15 00:02:00 2013 +0000

    Imported Translations from Transifex
    
    Change-Id: I0e6d8b23936fe89b1c56db29fbc347778b0eb3e9

commit a0e15faeb5b1c7ce76e637cf1fc5147ef2ae4769
Author: OpenStack Jenkins <jenkins@openstack.org>
Date:   Sun Apr 14 00:02:01 2013 +0000

    Imported Translations from Transifex
    
    Change-Id: I18d6557d11052b9e5078641ae5179acae58132e4

commit 4bf439070e76cb84753ecfc65d79c1c5d125a2e8
Merge: 50c2020 9449f90
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Apr 12 16:41:08 2013 +0000

    Merge "Make "private" functions that shouldn't be exported"

commit 1e493292d5a6e5c4cf8d1319f854deb7d14b573b
Author: John Lenihan <john.lenihan@hp.com>
Date:   Fri Mar 22 16:03:30 2013 +0000

    Fix functional test 'test_scrubber_with_metadata_enc'
    
    This test fails if a real swift system is specified in a config file
    and passed to the tests via the GLANCE_TEST_SWIFT_CONF environment
    variable. The fix is to allow location schemes of the form
    'swift+http' as well as 'swift+https'.
    
    Fixes bug 1158805
    
    Change-Id: I9fd3a9c02b31acc2a8313acd3b88124a17d0adfb

commit 9449f90d2185833281666d3b391059e783d8a7dc
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Fri Apr 12 11:04:53 2013 +0200

    Make "private" functions that shouldn't be exported
    
    Currently, the db_api defines some functions that are used for accessing
    images data but some of them are for internal use only. In an effort to
    improve consistency, I've made some of those functions - the ones that
    are not accessed outside the db_api - private by prepending their names
    with an "_".
    
    Most of this functions were defined within sqlalchemy and as such didn't
    required any change in the simple driver, others though, required a
    change in both drivers, i.e. get_session.
    
    This patch implements part of the blueprint registry-api-v2.
    
    NOTE: During the review, try to find functions that should be private
    and haven't been changed.
    
    Change-Id: I6342dc94ebf2a35d6bc9bd7698b81a94ffa13373

commit 50c20201230306d57d5d7c56712d2ab46995dc9a
Merge: 101e4d9 7ccbdcf
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Apr 11 16:35:58 2013 +0000

    Merge "Add placeholder migrations to allow backports"

commit 1c5a4d2bdcc00439b5e351d14f47deebdedcb001
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Thu Apr 4 11:15:15 2013 +0200

    Call monkey_patch before other modules are loaded
    
    This patch moves the monkey_patch call into the glance scripts that
    needs libs to be monkey_patched. This seems to be a good practice and
    has given good results for other projects as well.
    
    This change is needed  to avoid loading / initializing modules
    before other libs are patched. For example: logging module.
    
    Fixes bug 1163722
    
    Change-Id: Idee486851606d765fb11598967a4f7d56cf46c97

commit 101e4d9869cc0ff4ebd759c3d0d6085f77b9729a
Merge: e93b9f4 3e0f3d5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Apr 10 23:41:02 2013 +0000

    Merge "glance-manage should not require glance-registry.conf"

commit e93b9f4545ee94816b90a350bf0696e6cff80929
Merge: fe4d5fd 23fa48f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 9 21:16:30 2013 +0000

    Merge "Adding help text to the options that did not have it."

commit fe4d5fdfdbdaf418779f6dbedf1a13c53cec6dd3
Merge: 1bcea76 2095496
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 9 03:17:21 2013 +0000

    Merge "Small change to exception handling in swift store"

commit 23fa48fa7b86f0767ff4bde9095393a8dfa2e1f7
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Wed Apr 3 14:39:03 2013 -1000

    Adding help text to the options that did not have it.
    
    Many of the config options did not have help text set.  This patch
    adds text for those.
    
    patchset2 adds 5 skipped options
    
    patchset3 adds a missing underscore before the helptext bracket
    
    patchset4 fixes pep8 errors
    
    patchset5 notes the units (seconds) in sql_retry_interval, as noted
    by Flavio Percoco Premoli
    
    patchset6 fixes comments from Alex Meade
    
    Fixes bug: 1162449
    Change-Id: Ic75e499456e389df2ec527594bbcd54c0b464ee3

commit 6eaf42a11244fba096600e50ad927c6f34c09956
Author: Tatyana Leontovich <tleontov@yahoo-inc.com>
Date:   Thu Mar 7 14:06:26 2013 +0200

    Improve unit tests for glance.api.middleware.cache module
    
    Add tests for glance.api.middleware.cache module
    
    Fixes: bug #1152053
    Change-Id: I6e99c70b0d8ae20011b4ad9bea76d5e4e1dff921

commit 7ccbdcf19d025fdc3307df7abcbc542a99b7a4ca
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Mar 21 11:37:37 2013 +0000

    Add placeholder migrations to allow backports
    
    Inspired by the nova blueprint backportable-db-migrations,
    we reserve a range of migration slots to allow for idempotent
    and standalone migrations to be backported to stable/grizzly
    during the Havana release cycle.
    
    Nova have reserved 10 slots and the historical ratio of
    nova:glance migrations is circa 8:1. Hence the thought that
    a total of 3 placeholder slots should more than suffice for
    the Havana release cycle.
    
    Change-Id: I576be7520f960e4cb4dcc6928035595fab7e459f

commit ae0f90401cc7e6af15c8c8f1c2b48708d9d8b572
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Thu Feb 7 15:44:05 2013 +0100

    Add GridFS store
    
    This patch adds support for GridFS to glance. GridFS is 10gen's, mongodb
    based, distributed filesystem.
    
    The store requires 2 options in order to work correctly:
        * mongodb_store_uri
        * mongodb_store_db
    
    Note: mongodb was used in the parameters name's even though this store
    supports `gridfs://` schemas (not official) in order to keep consistency
    with mongodb's documentation and connection parameters.
    
    GridFS StoreLocations:
    
    This store implements gridfs locations with the form `gridfs://<IMAGE>`.
    Note that there's no connection information in those uris, which was
    consciously omitted for security reasons. Perhaps, it could be possible
    to make that information available by setting a configuration parameter
    that specifies so.
    
    Implements blueprint gridfs-store
    
    Change-Id: I38f361ac8421f0445dd37800c840441a46cf9fdf

commit 1bcea76bf26c18763c23ae3a2458d9eafa5fd6ab
Merge: f779a6a f1804c4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Apr 4 10:40:27 2013 +0000

    Merge "Remove internal store references from migration 017"

commit f779a6a51e5572afd64597dd9a49186f050a949e
Merge: 5879563 6ea699b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Apr 4 00:58:42 2013 +0000

    Merge "Functional tests display the logs of the services they started"

commit 3e0f3d502d9cd885091561ac5172a14fffe30fd3
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Mon Apr 1 08:42:57 2013 -1000

    glance-manage should not require glance-registry.conf
    
    In v2 the glance-registry service is no longer needed.  Thus
    it is possible that a setup would not include a configuration
    file for it at all.  Further it is possible that glance-api and
    glance-registry be run on different machines such that neither
    configuration file is available to the other.  Therefore glance-manage
    should be able to pull the information out of either configuration
    file provided that the overriding command line options:
    --sql_connection or --config-file are not used.  This patch makes
    it so glance-manage will first look in the glance-registry.conf file
    for db information (as this is the legacy behavior) and then in
    the glance-api.conf file if that file does not exist.
    
    Fixes bug: 1046576
    Change-Id: Ida68a5c03eb3d188b2b997296cd45730b968ef12

commit 58795635fbe9cd337ca36d6aa51f9a9557fefe5d
Merge: 5b83630 07eda70
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Apr 3 18:10:54 2013 +0000

    Merge "Invalid reference to self in functional test test_scrubber.py"

commit 28b112975358e17827a5e8ed869ca188fc82ee42
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Thu Mar 28 11:09:19 2013 -1000

    Verify SSL certificates at boot time
    
    When Glance is configured to run with SSL this patch will check
    that the certificate and key exist, are readable, and match each
    other at boot time.  If any of the above conditions fail an friendly
    error message is logged directing the operator at a solution.
    Previously the keys were not checked until a client connected.
    
    fixes bug: 1160529
    
    Change-Id: I16975608f9ae40ac5b84b3caa52ed5f8e22f296e

commit 5b83630b136f002cfa9a9b1d306adcaf88986aee
Merge: 6120518 d8e3f87
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Apr 3 15:22:38 2013 +0000

    Merge "Make is_public an argument rather than a filter."

commit 6120518cd35418117f0c6593d5b21ffeb0aa7708
Merge: fa7550e bd94054
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Apr 3 03:18:06 2013 +0000

    Merge "remove deprecated assert_unicode sqlalchemy attribute"

commit fa7550ebb74a0655c357d96e48b5ab553de40ff4
Merge: 0fc6972 f17f483
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Apr 3 03:17:29 2013 +0000

    Merge "Add 'set_image_location' policy option"

commit 07eda706f43c907b1d212a48c6b9514d83bbcdc1
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Tue Apr 2 13:57:53 2013 -1000

    Invalid reference to self in functional test test_scrubber.py
    
    In the test_scrubber.py the function wait_for_scrub() makes a
    reference to self even tho it is not a member of any class and
    has no such reference in its scope.  This patch makes that
    function a method in the test class so that it can assert the
    failure which it intends.
    
    fixes bug: 1163617
    
    Change-Id: I453c8097363dc2f7577fd807ffe8cbc613078258

commit d8e3f873e01280d49602ce87bed4d1e08ff07640
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Fri Mar 22 10:59:28 2013 -0700

    Make is_public an argument rather than a filter.
    
    There is disagreement between the v1 api and v2 api about what an
    'is_public' filter ought to mean. Version 1 uses 'is_public'
    to filter whether or not image.is_public == True or False. Version 2
    uses 'visibility' for this purpose. But in addition, it is theoretically
    possible that 'is_public' is a valid property filter in v2.
    
    With this change, v1 can pass is_public in as an argument to
    image_get_all. V2 will continue to pass is_public through filters.
    
    fixes bug: 1157988
    fixes bug: 1154760
    
    Change-Id: I716cb8b4f207f8526125ed360f5a24a6630c1e67

commit bd9405402a232eafe701fbd15b4740b7503ed27f
Author: Pádraig Brady <pbrady@redhat.com>
Date:   Tue Apr 2 14:34:54 2013 +0100

    remove deprecated assert_unicode sqlalchemy attribute
    
    Removing this enables use with sqlalchemy 0.8.0
    The deprecation is described upstream at:
    http://docs.sqlalchemy.org/en/latest/changelog/changelog_08.html#change-ad44af79c886d1bb283042deb64f9cbe
    
    Change-Id: Ia34b38245c6abe1ddb4162eee89459a7130deacb

commit 6ea699bb8431a63f53c4ad7425916d491d7d6517
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Mon Apr 1 10:24:12 2013 -1000

    Functional tests display the logs of the services they started
    
    Function tests fork out processes that run glance-{api,registry,etc}.
    These services are started with a conf file that directs logging
    to a different file.  Unfortunately that logged information is not
    recorded by the test frameworks that run these tests.  This change
    opens the log file and dumps it out to a logger created for that
    service.  In this way a developer can inspect the logs of all the
    services created by a failed tests using the test frameworks interface
    (like Jenkins web interface).
    
    Fixes bug: 1162933
    
    Change-Id: Ie699baaa376ca4ec848a8600f9fc5da6484b24f0

commit f17f4837e06f90d2132bcdf651eaf37ea2dba180
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Mon Mar 11 17:59:32 2013 +0000

    Add 'set_image_location' policy option
    
    Gives operators the option to prevent references to 'external' image data.
    
    Addresses bug 1153613.
    
    Change-Id: I68aac9039eed0f70ed3b893f5c51838a70d290ae

commit 0fc6972024d493c7887916757a849d51c3b0e33a
Merge: 49765d9 733d89d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 28 18:43:37 2013 +0000

    Merge "Pin SQLAlchemy to 0.7.x"

commit 49765d9b76cc1980b561b4f3c7f8a516b4b079e2
Merge: 73fdb30 91f538f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 28 18:29:34 2013 +0000

    Merge "Return 413 when image_size_cap exceeded"

commit 73fdb3050b17192a639047c806947fcf55a50340
Merge: 61a6657 40f477b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 28 18:04:04 2013 +0000

    Merge "Add image_size_cap documentation"

commit 61a6657b8cf2cd265257ed50f76ef804b020caae
Merge: cc6ce4a e9079d0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 28 18:04:00 2013 +0000

    Merge "Fallback to inferring image_members unique constraint name"

commit b1ac90f7914d91b25144cc4063fa994fb5019ee3
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Wed Mar 27 14:03:38 2013 -1000

    Add a policy handler to control copy-from functionality
    
    This patch adds the ability to set a policy handler to control what
    users can use the 'copy_from' feature in the v1 API.
    
    Fixes bug: 1153614
    
    Change-Id: Ie194979a2aa66c9327bf14d7a85ead6f773a6079

commit cc6ce4acbc2f72ab8d3ae62f8e7effc36fd54302
Merge: aed8282 ba7c059
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 27 23:23:19 2013 +0000

    Merge "Fix domain database initialization"

commit aed8282ab3161fe7fbb5b0d02a2930a5a503fc66
Merge: c804899 2ff8b96
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 27 22:55:02 2013 +0000

    Merge "Directly verifying that time and socket are monkey patched"

commit c804899b79db28c2aabf45bb7f7383d46649022f
Merge: 9cb43e0 0f2d8d4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 27 22:10:07 2013 +0000

    Merge "fixes use the fact that empty sequences are false"

commit e9079d0fd5b4219b7eeacc89090758bf78a81d4f
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Mar 27 12:17:28 2013 +0000

    Fallback to inferring image_members unique constraint name
    
    Fixes bug 1160114
    
    The initial version of the 022_image_member_index migration
    hardcoded the default naming convention for unqiue constraints
    used by PostgreSQL 9.2, which turns out to different to the
    convention used by PostgreSQL 8.4. This causes the CI to fail
    (non-voting) against RHEL.
    
    We resolve the issue by falling back to inferring the existing
    unique constraint name from the image_members indices.
    
    Change-Id: Iad6db033e63cdfd7a77db44bdeaed2284699b469

commit 9cb43e03dd7a17f7709d7e480e386e10aa1d806d
Merge: 334138d 19b82a0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 27 10:46:11 2013 +0000

    Merge "Standardize on newer except syntax"

commit 334138d7b59d49fe787f44500ae336a280ee44fd
Merge: 46fcf87 50d5436
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 27 01:25:04 2013 +0000

    Merge "Reformat openstack-common.conf"

commit 19b82a022cc58e702fe9061c3347cec471dc4da2
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Tue Mar 26 12:14:55 2013 +0000

    Standardize on newer except syntax
    
    We currently have a mix of 'except X, y:' and 'except X as y:' syntax.
    Standardize on the newer 'except as' form.
    
    This patch was generated automatically using:
    
    find * -type f -name 'glance-*' ! -name '*\.conf' ! -name '*\.ini' -o \
     -name '*\.py' | xargs 2to3 -f except | patch -p0
    
    Addresses bug 1160331.
    
    Change-Id: Ica8d1303973af64d0406457267ee75f608e869d0

commit 46fcf87ec63c698d06547bdec679f07b013cc3f1
Merge: 855162b 0a64744
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 25 21:43:01 2013 +0000

    Merge "Add tests for image visibility filter in db"

commit 2ff8b9627c9c9a48af0e12b65bbbe4325d5e804c
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Fri Mar 22 11:26:12 2013 -1000

    Directly verifying that time and socket are monkey patched
    
    This tests makes sure that thew wsgi object properly monkey patched
    two needed modules, socket and time.  In bug 988099 it was noted that
    the time module was not being monkey patched.  A test was added that
    unfortunately introduced a bug and a patch to revert it is here:
    https://review.openstack.org/#/c/25107/ in order to fix bug 1158247.
    This patch allows for test_server_monkey_patch.py to be removed
    without losing the verification of that functionality.
    
    Fixes bug 1158247
    Change-Id: I8da6b04d0cc0dae00ba52e5b7350a5e01a76cadb

commit 50d5436086f95e9f331dc985b7a733ae613667fe
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Mar 25 07:33:21 2013 +0000

    Reformat openstack-common.conf
    
    Use the new 'module' option in openstack-common.conf which is a
    multi-string option, allowing each module name to be placed on a
    separate line.
    
    This makes it much easier to review changes to the modules list.
    
    Change-Id: I218601a3720287071f05b9f2f624c1de4442d34f

commit ba7c059c9e0971ff7be6dd2f2fc3861140ae8011
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Fri Mar 22 15:14:11 2013 -0700

    Fix domain database initialization
    
    To fix bug 1089916, calls to db_api.configure_db() were changed to
    setup_db_env(). However, the gateway domain initialization didn't get
    the memo. This patch makes sure setup_db_env() is called in all the
    relevant places.
    
    Fixes bug 1131705.
    
    Change-Id: Ieec141192b8a5a045dadba6d70abaa25748b85b2

commit 0a647447a1526e3b5d20b8eef3b2107970be549d
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Fri Mar 22 11:04:36 2013 -0700

    Add tests for image visibility filter in db
    
    Some aspects of visibility filtering in the db api were not being
    tested. This patch adds tests to ensure visibility=public|private is
    working properly.
    
    Change-Id: I67a4b8e33fab6f4f8f1ed4b05b2b8cac10153105

commit 40f477bd6c9bd4b486df156db2f7bc70caa62419
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Fri Mar 22 11:40:46 2013 +0000

    Add image_size_cap documentation
    
    Add documentation for the 'image_size_cap' parameter.
    
    Addresses bug 1158723.
    
    Change-Id: If6d28a3837dc875b7c8e3e18dd5058eb07b40638

commit 91f538f53dc4434d7e0bc24a74d0aed4efb06899
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Fri Mar 22 11:19:06 2013 +0000

    Return 413 when image_size_cap exceeded
    
    HTTP Error 413 (Request entity too large) may be the most appropriate
    response when a request to upload an image whose size exceeds
    image_size_cap is made.
    
    Addresses bug 1158711.
    
    Change-Id: I4abcb3a8b57c080b5a1b512f9694b2d75a4e5e9d

commit 209549680dd3dcb78b6f6016b37867410cdc17cf
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Mar 21 14:45:59 2013 +0000

    Small change to exception handling in swift store
    
    Tweak the exception handling when deleting stale chunks from the swift
    backend so we don't need to use the sys module or stash the exception.
    
    Addresses bug 1158342.
    
    Change-Id: If83ad04e54e978a25a793fed394a384c15dc3b8a

commit f1804c443b1c8f825e1cf1d01a72de34cde63841
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Thu Mar 21 15:28:46 2013 -1000

    Remove internal store references from migration 017
    
    Migration 017 was accessing a object internal to the swift store driver
    and changing its behavior in order to do the migration. This worked but
    it made the assumption that the driver logic would not change without
    also changing the migration code.  This patch removes all dependencies on
    the swift driver from the migration code.  This patch is smilar to
    https://review.openstack.org/#/c/24552/.
    
    Fixes bug: 1155749
    Change-Id: Iffd800f62d61bf7608f7be5b23d76d702e6d4064

commit 855162b0b1fc62b60f0f350d3258334711e12aec
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Thu Mar 21 10:05:05 2013 +0100

    Check if creds are present and not None
    
    Currently, KeystoneStrategy checks whether the required credentials are
    present in the creds dict but it doesn't check whether they are valid or
    not.
    
    This patch checks whether the required creds are present and not None
    otherwise a MissingCredentials exception will be raised.
    
    Note: No need for checking parameters' values types since they'll be
    instances of basestring once set otherwise they'll be None.
    
    Fixes bug 1157765
    
    Change-Id: I664a604c3cbf2fca60a88c4d887cd9a4b678c8a5

commit a3c0a5fc2bc038155609829b1990afe93a603c07
Merge: c425cd5 b8bfc79
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 19 21:33:34 2013 +0000

    Merge "bump version to 2013.2"

commit c425cd5bfd97460c8ea8989d532d71c44d0b5b22
Merge: e4b78e9 3642ada
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 19 18:33:10 2013 +0000

    Merge "Delete swift segments when image_size_cap exceeded"

commit 3642adadeaa5241950614884cd6500917cfa25ab
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Mar 14 13:16:10 2013 +0000

    Delete swift segments when image_size_cap exceeded
    
    When an image which is being written to swift in segments exceeds the
    'image_size_cap' limit we should ensure that the now stale swift segments
    are deleted.
    
    Fixes bug 1154576.
    
    Change-Id: I08be04e63f6d55acc6b0350810350a4ccadab7be

commit b8bfc79c46d570e6eca0efb2be0527ce2074c931
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Tue Mar 19 10:10:31 2013 -0700

    bump version to 2013.2
    
    Change-Id: Ifbf5314e3a12fa7c55d81e363d4931d42e18e334

commit e4b78e94c789712bad350452aacb2c5c9021147a
Merge: 53c4f7c 8825d3a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 18 23:29:34 2013 +0000

    Merge "Don't print sql password in debug messages"

commit 8825d3ab3d2ca670bbfe48a8b5575cfdc4231092
Author: Tom Hancock <tom.hancock@hp.com>
Date:   Fri Mar 15 11:08:35 2013 +0000

    Don't print sql password in debug messages
    
    Fixes bug #1155603
    
    Change-Id: I78da6744a0c65211efc3c36593c300cbf685bcfc

commit 0f2d8d4d7c83829a1e78150cbe946068080f9631
Author: shu,xinxin <xinxin.shu@intel.com>
Date:   Fri Feb 16 03:25:45 2001 +0800

    fixes use the fact that empty sequences are false
    
    fixed bug #1133094
    
    Change-Id: Ie0514be1cb0ed6741f96334f7457da331f0eebc9

commit 53c4f7c34b6cbbe94bf47dc6ddfea04e9d857c28
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Wed Mar 6 16:54:23 2013 +0000

    Handle Swift 404 in scrubber
    
    If the image object happened to go missing from the backend, the _delete
    function was not catching this exception and caused the app to fall over
    constantly.
    
    Also:
    * Log the image id rather than uri in the case of UnsupportedBackend to
      avoid printing out credentials.
    
    * Refactor the 'wait for build servers' snippet into a function.
      Jason Kölker's note says the purpose is to wait up to 5 mins, checking
      every 15 seconds, though the code currently was only waiting 15 seconds.
      I have fixed this up as part of the move.
    
    Fixes bug #1152252
    
    Change-Id: Ifb74d7bc95b3245002291396ffabd8c5d729a1ac

commit 62068a3cf9d8803a22f80c0fad7044861d3e3399
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Fri Mar 15 09:41:26 2013 -1000

    Remove internal store references from migration 015
    
    Migration 015 was accessing a object internal to the swift store driver
    and changing its behavior in order to do the migration.  This worked but
    it made the assumption that the driver logic would not change without
    also changing the migration code.  These two should not be dependent
    upon each other.  This patch removes all dependencies on swift from the
    migration code.
    
    Fixes bug: 1025746
    Change-Id: Ic9559ae809b8784d0992cb5275d3911a725110c8

commit 975c5acbaa2aaa03e29d29aa8f67b2116bc5d346
Merge: 3ce8a04 1e607c9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 15 23:47:09 2013 +0000

    Merge "Fix rabbit_max_retry"

commit 3ce8a04dbdaa672de2fd92345796b1d5a0d5106d
Merge: 11c738b 1d456e5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 15 22:19:07 2013 +0000

    Merge "Fix scrubber and other utils to use log.setup()."

commit 733d89d7cfb3be874a23f97091c2dc8874a90a5d
Author: Dirk Mueller <dirk@dmllr.de>
Date:   Mon Mar 11 16:12:30 2013 +0100

    Pin SQLAlchemy to 0.7.x
    
    0.7.10 has been released and is compatible with 0.7.x. Instead
    of pinning to 0.7.9, simply pin to 0.7.x to avoid SQLAlchemy 0.8
    
    Also sync the 0.7.x requirements to 0.7.8 (to be in sync with other
    OpenStack core components)
    
    Fixes: Bug #1153983
    
    Change-Id: I6f47e7d27fcf0c7271bb2c91a4615ef0bb5e2643

commit 715513404b491b721dd0906d4c6f0ef7b1805294
Author: Tatyana Leontovich <tleontov@yahoo-inc.com>
Date:   Thu Mar 14 17:39:34 2013 +0200

    Add unit tests for glance.api.cached_images module
    
    Add positive unit tests for methods:
    * get_chached_images
    * delete_cached_images
    * get_queued_images
    * queue_image
    * delete_queued_image
    
    Fixes: bug #1155188
    Change-Id: I3fa6dc28a72e8c6e8402911931fb37e18cba7ea0

commit 11c738b72897490dd7602a1162125780115a10ca
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Thu Mar 14 18:10:27 2013 -0700

    Document the os options config for swift store
    
    Several configuration options were added to the swift store. These
    options help python-swiftclient and sometimes glance itself to determine
    which swift service to use if multiple services appear in a keystone
    catalog. This change adds documentation for the additional options.
    
    Last fix for bug 1037708
    
    Change-Id: Id06d263b73705b06295b730ff68460b22f117e63

commit 157cce770736de4671e99ab21e65e34c0ca8c3c1
Author: Therese McHale <therese.mchale@hp.com>
Date:   Mon Mar 4 17:42:10 2013 +0000

    Segmented images not deleted cleanly from swift.
    
    Ensure the manifest is deleted in addition to the image data segments.
    
    Fixes Bug #1144681
    
    Change-Id: I64dd07e6b7a1c4bcbb0a230ec3b7f4d365ec5ae8

commit e75764eee34915f8bc5b664ac18e47a556c9d3dd
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Mar 14 14:27:35 2013 +0000

    Do not return location in headers
    
    In some cases credentials were being leaked when downloading a cached
    v1 image.
    
    Fixes bug 1135541, CVE-2013-1840
    
    Change-Id: Ie4077470d31249c5bd654985fcef577f4f5cfc59

commit c4f97dfa6eba8893a0e50128f7d5c7b1ea8f6003
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Sat Mar 9 20:14:22 2013 +0000

    Fix uniqueness constraint on image_members table.
    
    Fixes bug #1098700.
    
    Previously, deleting then re-creating an image member failed with
    500 ServerError due to the registry service failing to commit
    the update to the image_members table.
    
    The problem arose because the declared uniqueness constraint on that
    table only spanned the image_id and member columns, but did not take
    into account that deleted rows are left in situ with the deleted_at
    and deleted columns set as appropriate. Hence the unique constraint
    was violated by the addition of the new row.
    
    We modify the uniqueness constraint via a migration script to take
    account of the deleted_at column also (NULL for live memberships).
    
    Note that the new ability to recreate an image membership cannot be
    be asserted in a functional test, as these tests are based on sqlite
    which does not support 'ALTER TABLE DROP CONSTRAINT'.
    
    Change-Id: I175801ba95ecd9295791bb12e9096f59efa19c02

commit f400a5423214d0d569bfc86bdc55a194b8acdba3
Merge: cee83b0 eff956b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 13 21:55:08 2013 +0000

    Merge "Declare index on ImageMember model"

commit cee83b07aef443b6d6013bbe4911053b1820c3b0
Merge: 0a8dd96 97de423
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 13 21:54:16 2013 +0000

    Merge "Fix check_003 method."

commit 0a8dd96f88170ca93f30e22a575e2a1190d8621c
Merge: fd5698e 43c0a7e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 13 21:54:08 2013 +0000

    Merge "Fix circular import in glance/db/sqlalchemy"

commit eff956b6c8e453b8371ac049c21bad792d27e7ac
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Mar 13 11:50:43 2013 -0700

    Declare index on ImageMember model
    
    This index was added in migration 008. However, it was not on the model,
    which meant any autocreated db would not have it.
    
    Fixes bug 1154777
    
    Change-Id: I34590ffebaf547be9a12e5a85216cda145d9e8db

commit fd5698e2e97eef598b3b99ea145c8a319b50ed05
Merge: 4548583 dd3f851
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 13 19:08:41 2013 +0000

    Merge "Log when image_size_cap has been exceeded"

commit 4548583c75321e6de2e0a6e51271a084c6fb0358
Merge: 359fd45 03c5a98
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 13 19:05:08 2013 +0000

    Merge "Insure that migration 6 retains deleted image property index."

commit 359fd457293c0c995d828892dca190a53abb3f49
Merge: 73b344f af832bf
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 13 19:05:03 2013 +0000

    Merge "Publish API version 2.1"

commit 73b344f1b189234b3dc6ff15fe96124f06d45377
Merge: 06feb84 a7effe6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 13 16:03:59 2013 +0000

    Merge "Honor metadata_encryption_key in glance domain"

commit dd3f8510e836a20e9cdcfc5d627a8a4094cf5ea7
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Mar 13 14:07:28 2013 +0000

    Log when image_size_cap has been exceeded
    
    Add a log entry when an attempt to upload an image whose size is greater
    than image_size_cap has been made.
    
    Addresses bug 1154606.
    
    Change-Id: I836cb2dad1c130c0df15d26a87229b60a6cc3033

commit 06feb8496b0009219e7a7dabcbc99c38499bf7e9
Merge: c9a7f2a 7fe636f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 13 11:58:23 2013 +0000

    Merge "Switch to final 1.1.0 oslo.config release"

commit c9a7f2a33e28cf4bfa302ddab3dfb2aa5bf1f6f2
Merge: e6d2348 9385135
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 13 06:16:35 2013 +0000

    Merge "Fix visibility on db image_member_find"

commit e6d234842745be34b5db16a94440431b3c05dd11
Merge: fa6fedb 39616b9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 13 01:48:31 2013 +0000

    Merge "Mark password options secret"

commit fa6fedb0e185890317bec28e84fda1cce756ad30
Merge: fed21d9 42325cb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 13 01:48:27 2013 +0000

    Merge "Fix up publicize_image unit test"

commit fed21d9db9134c2f2d58c4983d3995378b1d527b
Merge: 8d465e4 40c94e7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 13 01:07:51 2013 +0000

    Merge "Retain migration 12 indexes for table image_properties with sqlite."

commit af832bf75f46abe7f4a2c90e83480d0668858a10
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Mar 12 15:27:45 2013 -0700

    Publish API version 2.1
    
    Fixes bug 1154317.
    
    Change-Id: I1e044539952f649974c757183e9bb2551264850e

commit 1d456e546084b03cdfbf0166b850c9dcef60d42a
Author: James Li <yueli.m@gmail.com>
Date:   Mon Mar 11 03:40:27 2013 +0000

    Fix scrubber and other utils to use log.setup().
    
    scrubber and other utils call config.setup_logging(),
    which does not read the 'default_log_levels' config option.
    Fix this problem by calling log.setup(), just like what
    glance-api and glance-registry do.
    
    Per John Bresnahan's comment, made the change to check
    the existence of log conf file in oslo-incubator code.
    Refer to https://review.openstack.org/#/c/24230/
    
    Change-Id: I4a53d74c4cd8274a3174b246207a6ed76c5e31c6
    Fixes: bug #1153432

commit 7fe636f7810ccf171c34433fea56872c6cd9ec60
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Mar 12 16:28:22 2013 +0000

    Switch to final 1.1.0 oslo.config release
    
    Fixes bug #1128256
    
    oslo.config has now been released to PyPI in time for Grizzly RC1 so
    we can switch to using it directly.
    
    Change-Id: I655f831718ae5f4e25e941ee206fe195214a9a91

commit 39616b9404916ebfadc796bb2d74bffc837e1c67
Author: Michael J Fork <mjfork@us.ibm.com>
Date:   Tue Mar 12 13:54:07 2013 +0000

    Mark password options secret
    
    Mark password options secret in kombu and qpid notifiers.
    
    Fixes bug 1154096
    
    Change-Id: Ifa25ac791e2accce50eafb242f2466681f7ca457

commit 43c0a7ea5412eeb9ee0ec01715060081f0e2c87c
Author: Alessio Ababilov <aababilo@yahoo-inc.com>
Date:   Tue Mar 12 14:46:20 2013 +0200

    Fix circular import in glance/db/sqlalchemy
    
    Fix running test_migration solely.
    
    api.py depends on models.py that depends on api.py.
    Import statements in these files are such that api.py
    must be imported before models.py. That's why usually
    test_migrations doesn't fail when all tests are launched.
    However, thus test_migration depends on test running order
    making testing procedure unreliable, including parallel testing.
    
    Move glance.db.sqlalchemy.api import to the only place
    where it's required in models.py
    
    Change-Id: Ib20dde8edd3473595aac1ca8bbaa5a0d3116a697
    Fixes: bug #1154058

commit 42325cb91aeb17215a1704a43b5e1ea4db643bdd
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Mon Mar 11 16:58:52 2013 +0000

    Fix up publicize_image unit test
    
    The 'test_add_public_image_unauthorized' unit test wasn't checking
    the 'publicize_image' policy as expected.
    
    Replace it with new tests 'test_add_publicize_image_authorized' and
    'test_add_publicize_image_unauthorized' which perform the check as
    expected and verify both authorized and unauthorized code paths.
    
    Fixes bug 1153670.
    
    Change-Id: Ib095763a246df6aa16e1310f25b7a0d442229f1a

commit 1e607c9c3f34345af4bc18b0822606015ba36596
Author: Eric Windisch <eric@cloudscaling.com>
Date:   Fri Mar 8 23:46:36 2013 -0500

    Fix rabbit_max_retry
    
    First, the configvar is defined as a StrOpt. This means that the check
    against the integer retry_attempts will fail.
    
    Secondly, rabbit_max_retries is tested as a boolean before comparing
    against retry_attempts. With the value 0, this would be false and the
    setting rabbit_max_retries=0 would actually retry indefinitely, which is
    not the obvious behavior. This patch will make the default not to
    retry at all (which was the implied, but not actual, behavior)
    
    Fixes bug 1152866
    
    Change-Id: Ic39d708f0294fc5d919cb2a5d9fae532128ef17e

commit 9385135871ce61da88282fbd7775ca5a170a39af
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Thu Mar 7 21:03:36 2013 -0800

    Fix visibility on db image_member_find
    
    Before this change, image_member_find was not paying any attention to
    whether or not the requesting context was authorized to view the image
    memberships. With this change, image membership results are always
    limited to either images owned by the context tenant, or images shared
    with the context tenant.
    
    Fixes bug 1114821
    
    Change-Id: I9cabe218429e32c7e2db932ced141e056e10d1c5

commit 8d465e487ef1cac704d17fd822aacf18ab7fe02e
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Fri Mar 8 00:08:10 2013 -0800

    Fix calls to image_member_find in tests
    
    A few tests of image members in v2 were passing invalid arguments to
    image_member_find. This problem showed up in a later patch where
    image_member_find actually tries to make use of the context it was
    passed.
    
    Change-Id: I0611db9bf83ebf262e9d2a0ef33c805d23658f2a

commit e360117b4a80a1a1034feedf588a88a7350c701a
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Thu Mar 7 20:27:51 2013 -0800

    Characterize image_member_find
    
    Add tests to characterize the current (incorrect) behavior of
    image_member_find in the database drivers.
    
    Change-Id: I0fc3bb05dbc1376d3bd8e002306b402e960780cf

commit 40c94e7c3613fbe205d3e79beeac272aeb7b17ca
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Thu Mar 7 14:18:46 2013 -1000

    Retain migration 12 indexes for table image_properties with sqlite.
    
    The upgrade from migration 11 to 12 for sqlite fails to create the
    existing indexes when it recreates the image_properties table.
    
    Fixes bug: 1152386
    
    Change-Id: I2ceba3d9c5c45f40564af12fa48c4efba1467021

commit 03c5a98b22e33334264abbe5d0f394b33ac9f581
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Thu Mar 7 13:48:22 2013 -1000

    Insure that migration 6 retains deleted image property index.
    
    Migration 6 for sqlite deletes the entire table and then recreates it,
    however it fails to create the image_properties deleted index.
    
    Fixes bug: 1051123
    
    Change-Id: I4740ff1d5b9ec44067e6af7dd822329105222690

commit 97de423827336d500a487aec9a5f44e5e8aaa747
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Thu Mar 7 11:48:01 2013 -0500

    Fix check_003 method.
    
    This commit fixes the check on migration 003 in test_migrations.
    Previously, when this method was added it didn't check that the
    data in the type column previously in the images table was moved
    correctly into the image_properties table. This commit adds these
    data checks.
    
    Change-Id: Ia3906c8497218c8a3d2a13b0c99a6aa566977ed4

commit df7d9c71710b5e4dd687b2bb8665a759fd79c676
Merge: d6bad91 db8b10a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 7 18:51:38 2013 +0000

    Merge "Fix v2 data upload to swift"

commit d6bad9149312937159ae94d6008e25a48c004fa2
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Tue Feb 26 14:16:01 2013 -0800

    Ensure disk_ and container_format during upload
    
    This patch changes the image domain model so that the transition from
    'queued' to 'saving' or 'active' status cannot take place if the image's
    disk_format or container_format are not set.
    
    Fixes bug 1131994
    
    Change-Id: I454d9df736edd771f9d5d93eca4cd317116cc985

commit 1b2598ab0bc01d8501dd4e512aced49e5b598daa
Merge: 47362d7 8259245
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 6 21:29:26 2013 +0000

    Merge "Remove unused variable 'image_member_factory'"

commit a7effe6dc2b8915217675f48a887550b723c1036
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Mar 6 11:26:57 2013 -0800

    Honor metadata_encryption_key in glance domain
    
    Since v2 is not using the registry client, it was not properly
    encrypting image locations before storing them in the database. With
    this change, the db layer in the glance domain now uses the metadata
    encryption key as well.
    
    To make this work, the declaration of the metadata_encryption_key option
    had to move to glance.common.config to avoid circular module
    dependencies.
    
    Fixes bug 1128650
    
    Change-Id: I3bb5da92ffda7bfe1bc064d11da8ecd4e6d9ab1d

commit 47362d7ef4c502964aa4cf4d91b77e9b1ea71d9c
Merge: 2bb2f34 8acda7c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 6 17:03:15 2013 +0000

    Merge "Switch to oslo.config."

commit 2bb2f34ac88274289ffa3057c2d105e0bb55597d
Merge: 34caaed be4a90a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 6 15:33:38 2013 +0000

    Merge "Update acls in the domain model"

commit 34caaedca50a00f35682692f9a9daea5129d3b56
Merge: 876a743 cf29fe1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 6 15:07:28 2013 +0000

    Merge "Generate notification for cached v2 download"

commit db8b10a796be9e6e0951ad231b3f857a2486c5a4
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Mar 6 10:59:53 2013 +0000

    Fix v2 data upload to swift
    
    An upload of image data via the v2 api when using a swift backend would
    stacktrace with 'UnsupportedOperation: seek'.
    
    Wrap the data in a CooperativeReader to both 1) fix this issue and 2) reap
    the multi-threaded 'sheduling fairness' benefit of the CooperativeReader.
    
    Fix for bug 1147231.
    
    Change-Id: I604c67d2d6ecd77a12e11b2f641edb4095c4bb60

commit 8acda7c44ae565b568d20ea61373c74954be76d2
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Mar 5 22:26:49 2013 -0500

    Switch to oslo.config.
    
    The oslo-config package has been renamed. Switch to the new
    version. (should fix SmokeStack).
    
    Change-Id: I6744337008825498a2f0f5c74139661410968f50

commit 876a743d669a46bf37a8510271df15786b0c2b24
Merge: ffcf343 9a01d53
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 6 03:14:08 2013 +0000

    Merge "A test for concurrency when glance uses sleep."

commit be4a90a22fbb51998d34f0e247d14c70231d4184
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Fri Mar 1 09:27:49 2013 -0800

    Update acls in the domain model
    
    This change brings the domain model up to speed with the v1 stack by
    issuing calls to store.set_acls whenever
     - an image is saved into the database (and locations are set)
     - a member is added to an image (and locations are set)
    
    related blueprint glance-api-v2-image-sharing
    
    Change-Id: I45f10752f6c04646b65f86e44b59bdeea534f024

commit ffcf3431982a591041d642651f778b53e6db5735
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Thu Feb 28 14:48:42 2013 -0800

    Refactor leaky abstractions
    
    Prior to this change, it was common for a domain layer that was wrapping
    Image objects returned by methods to neglect to unwrap the objects on
    the way in to other methods.
    
    This change fixes that by making proxy base classes less leaky and
    inheriting from them in the various domain layers.
    
    Change-Id: I22866cdd800c4c95b43c92762ead3775cffeaa80

commit 8259245c4ae11dc13aaf6d82a7b6dd5ed48763a6
Author: Avinash Prasad <avinash.prasad@nttdata.com>
Date:   Tue Mar 5 05:56:36 2013 -0800

    Remove unused variable 'image_member_factory'
    
    Fixes LP: #1134465
    
    Change-Id: I99b7f4754646a93f2f6625c50f99585dd8b381ba

commit cf29fe19f0fc454d010f823929662c5a80f98f86
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Feb 28 13:44:20 2013 +0000

    Generate notification for cached v2 download
    
    Cached v2 image downloads were not generating notifications.
    For now use a 'size_checked_iter' to generate a
    notification.
    
    Fix for bug 1132755.
    
    Change-Id: Iec01efb93d7a1853973d355221d06fad9631afd7

commit 35977189780dd4a1e76c0f819b9a159026c67156
Merge: 0bfb8d2 fb4cb99
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 4 19:56:12 2013 +0000

    Merge "Update documentation to reflect API v2 image sharing"

commit 0bfb8d20229f40cf20c09b5b59a5f08921478c55
Merge: edbe8b8 663448e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 4 19:49:18 2013 +0000

    Merge "Add pre and check phases to test migration 006"

commit 9a01d5389ac3235279f75256815e23e49ebc0c6a
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Mon Mar 4 09:19:55 2013 -1000

    A test for concurrency when glance uses sleep.
    
    Bug 988099 showed that time.sleep was not being monkey patched
    resulting in no concurrency when a sleep was called.  This was
    fixed with change I24dfe818.  This commit provides a regression
    test to ensure that this behavior remains in place as glance is
    developed over time.
    
    Change-Id: Iafbfaa9fd672b5ffd1d19a43dee03dfbfc6d3a2d

commit edbe8b8fd9716332655a17530ccd46197ddd0f10
Merge: effda5d 8cc4b45
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 4 18:10:42 2013 +0000

    Merge "Cannot change locations on immutable images"

commit fb4cb999d07b6f5bab133d1d6156e24046933654
Author: Brian Rosmaita <brian.rosmaita@rackspace.com>
Date:   Mon Mar 4 15:38:42 2013 +0000

    Update documentation to reflect API v2 image sharing
    
    Related to bp glance-api-v2-image-sharing
    
    Change-Id: Ida2f530ef2c8474ec29f8870c2218c291a9e449c

commit effda5d66f7d084133fbe0b49d7ef6d0ca178e4a
Author: mathrock <nathanael.i.burton.work@gmail.com>
Date:   Sat Mar 2 14:20:08 2013 -0500

    v1 api image-list does not return shared images
    
    The addition of the status column on image_members for the v2 api broke
    backwards compatibility with the v1 api image members feature. This fix
    forces that member_status='all' is passed to all v1 api calls to ensure
    the v1 image members feature still works.
    
    Note: Any images shared prior to migration 016 will be marked as 'pending'
    yet will still be accessible via the v1 api since v1 has no notion of
    image 'member_status'. Additionally, any new images shared via the v1 api
    will follow the same behavior, being marked as 'pending'. In order for
    shared images to be used with v2 they will need to have a 'member_status'
    of 'accepted'.
    
    Change-Id: I0ab9397e3663c6e2af8a18838f56803e64d84595
    Fixes: bug #1132294
    DocImpact

commit 8cc4b45dbf02177f4f941912724173f080e6819d
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Thu Feb 28 16:19:51 2013 -0800

    Cannot change locations on immutable images
    
    This change extends immutability to the contents of image locations.
    
    Change-Id: I5bfe9b73733eb92e0d27bd0222f6ad1a89ce5d78

commit 37ef3c6875eb4fb4477ce372f6a82f917a4344ae
Merge: 28334fd 6a7ae17
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Mar 2 19:12:20 2013 +0000

    Merge "Test date with UTC instead of local timezone."

commit 28334fdede057fa3a6eb9d02f709ed057b3757d7
Merge: 222a00f a2a4bdd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Mar 2 19:10:01 2013 +0000

    Merge "Added better schemas for image members, revised tests."

commit 222a00fef9e85f4a2732f21d7fc0d11cd6b7dad5
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Feb 27 11:13:40 2013 -0800

    Update db layer to expose multiple image locations
    
    * The DB API now exposes a 'locations' image attribute rather than
      'location'. The new field is guaranteed to be a list of zero of
      more items
    * The v1 and v2 APIs only look for the first item in the list of
      locations.
    * Related to bp multiple-image-locations
    
    Change-Id: I830b383d8a8e50a01e461658fb9abe384de1a353

commit 6a7ae170e2e9c8e5d187b094d487c65a011cc02c
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Fri Mar 1 22:51:35 2013 -0500

    Test date with UTC instead of local timezone.
    
    iso_format test uses local timezone so it can fail at certain times
    of the day depending on which timezone the tests are run in.
    
    Fixes bug 1139131
    
    Change-Id: I8fe423d96c438b46a9307fe1ecf648707183ff1c

commit 4028e74ef4ef77656f017609d414704677cea4e0
Merge: 25c8d10 bb309a8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Mar 2 02:27:57 2013 +0000

    Merge "Add pre and check phases to test migration 005"

commit 25c8d10c445e1bf352da85280c05f0a8db7d3cdf
Merge: e8dd00e 456a8c8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Mar 2 02:27:53 2013 +0000

    Merge "Add pre and check phases to test migration 004"

commit e8dd00e4ac6802a0b9dfb8c8bdf91be20f98dfa2
Merge: 103b945 2b180a2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Mar 2 02:26:32 2013 +0000

    Merge "Add PostgreSQL support to test migrations."

commit 103b9459c2f16b1d09731eacb93fc3e08c3e187a
Merge: a9fdfa3 85e3b9f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Mar 2 00:38:09 2013 +0000

    Merge "Set status to 'active' after image is uploaded"

commit a9fdfa3eee586228e6b40d05e79423a47f022183
Merge: 4b705d7 471ed9a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Mar 2 00:36:35 2013 +0000

    Merge "Parse JSON Schema Draft 10 in v2 Image update"

commit a2a4bdd0607d87448c0c4a0e4c5bbe3f3025a10c
Author: Brian Rosmaita <brian.rosmaita@rackspace.com>
Date:   Thu Feb 28 22:54:37 2013 +0000

    Added better schemas for image members, revised tests.
    
    Related to bp glance-api-v2-image-sharing
    
    Change-Id: I01c7fdb78177aaee97f6e7836dea3326b57be33c

commit 663448e7cc75bef0277fab133064dd65ef017c19
Author: Mauro S. M. Rodrigues <maurosr@linux.vnet.ibm.com>
Date:   Fri Mar 1 08:53:02 2013 -0500

    Add pre and check phases to test migration 006
    
    Assure the column name changed and the data is accessible on it.
    
    Change-Id: I1befe31a2c37fd5a27833cf2d41dfb5a57190c39

commit 4b705d7ee7ac66c55e269a59e09acec43fbd343c
Merge: 1397a92 16d6ce3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 1 00:00:01 2013 +0000

    Merge "Fix response code for successful image upload."

commit 16d6ce3527703b39b5b5db371827fc9bfee2ee26
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Thu Feb 28 17:30:28 2013 -0500

    Fix response code for successful image upload.
    
    The API spec specifies the response code for a successful image
    upload is supposed to be 204. However, currently the response is
    201. This commit fixes this, and sets the response code to 204.
    
    Fixes bug 1136480
    
    Change-Id: I7ea3926c2dd86961f2dd9bc975b10799560ef20a

commit 1397a9232754ab36c0465dd9036b00b19f514af7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Feb 28 14:49:05 2013 -0800

    Remove unused imports
    
    Change-Id: I3e92e2a010dc9ab333e64d18337995d12ad55bc3

commit bb309a85e47e6f95bec64e6997118c110e0886c8
Author: Mauro S. M. Rodrigues <maurosr@linux.vnet.ibm.com>
Date:   Wed Feb 27 10:28:05 2013 -0500

    Add pre and check phases to test migration 005
    
    Migration 005 changes size collumn from integer to BigInteger. This checks if
    everything goes fine in the migration.
    
    Change-Id: Ia4f12e3d43d7fcc31dc999bc1ad5dcd0610df597

commit 456a8c83e14df18a94af7089742139c9b6a3dab9
Author: Mauro S. M. Rodrigues <maurosr@linux.vnet.ibm.com>
Date:   Tue Feb 26 23:49:18 2013 -0500

    Add pre and check phases to test migration 004
    
    Assure that the new column is included and with the right size and no data is
    missed during the process.
    
    Change-Id: I836e9ab5ec8219f2056d755585a9e58facd23901

commit 26570df8c71522e40fa5ca84accd05d046751176
Merge: a09e1e2 7090732
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 28 19:37:49 2013 +0000

    Merge "Enable support for MySQL with test migrations."

commit a09e1e23d6d4ca076a76e2f9f2ebedf3313d2dc0
Merge: 0ba7a71 7804a6e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 28 19:36:18 2013 +0000

    Merge "monkey_patch the time module for eventlet"

commit 0ba7a710de361a2e93d745d2aac420475e908888
Merge: 8f76eda be0e320
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 28 17:22:48 2013 +0000

    Merge "Add check for image_locations table"

commit 2b180a2b6d9bf79383465ff23408a49ab15edfc0
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Tue Feb 19 10:05:19 2013 -0500

    Add PostgreSQL support to test migrations.
    
    This commit adds support for running the migrations tests
    with a PostgreSQL backend.
    
    Migration 012 was changed because PostgreSQL's constraint
    drop uses a different name to identify the foreign key
    to be removed. The migration now handles it properly for
    both postgres and mysql.
    
    Change-Id: Ie8850608fc5f4bccda57a0b12c3b4adc8d1f61d0

commit 70907328eab7a9ff8696be853cdac41ec6f753cc
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Thu Feb 14 12:43:58 2013 -0500

    Enable support for MySQL with test migrations.
    
    This commit makes the necessary changes to enable the migrations
    tests to pass with both mysql and sqlite. However the proper mysql
    database still needs to be created beforehand for the tests to run
    with mysql.
    
    The sqlalchemy alter() method breaks on sqlite when mysql is enabled
    for other databases. So for sqlite testing the alter() calls are now
    done manually.
    
    This also adds the MySQL-python module to the test-requires list
    so that it will get installed for CI and the virtualenv used for
    unit tests.
    
    Change-Id: Ic72476b8e6a910c25747641ef1882639019b433e

commit 8f76eda330387a5c6568a488a2689d4e0624ed5c
Merge: e0aa3f8 69a0d3f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 27 01:30:12 2013 +0000

    Merge "Add migration 021 set_engine_mysql_innodb"

commit 85e3b9f16089ca9834415109c9d87b6f8cbeced9
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Fri Feb 22 15:58:24 2013 -0800

    Set status to 'active' after image is uploaded
    
    Fixes bug 1034787
    
    The recent change I made to image_data and the domain model caused this
    bug to regress. This change adds assertions to the functional tests in
    the hopes of preventing future regressions.
    
    Change-Id: I02f9a5c51f54c0c778e032500079aa13ab073e3e

commit e0aa3f807945849c77bf5fcb28b5f92243b0bd3c
Author: Brian Rosmaita <brian.rosmaita@rackspace.com>
Date:   Tue Feb 26 20:55:58 2013 +0000

    Removed controversial common image property 'os_libosinfo_shortid'
    
    Change-Id: I3a0247b5547d5735aeb0bcbd3e9b4a74ea85208f

commit 471ed9ad383c03e54f95348357b2ef6d7cf7a1f9
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Feb 26 11:41:02 2013 -0800

    Parse JSON Schema Draft 10 in v2 Image update
    
    * Add new content type to PATCH /v2/images/<id> to represent support of
      JSON Schema Draft 10: application/openstack-images-v2.1-json-patch
    * Remain backwards-compatibile with existing content type
      that supports Draft 4: application/openstack-images-v2.0-json-patch
    * Fixes bug 1102476
    
    Change-Id: Iff4e8753a71457ad5a828553fcb0791b0f1c0445

commit 89d8441d12344c3fa91c717ade12feb5484c55f2
Merge: d24e608 7bdc4eb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Feb 26 19:04:06 2013 +0000

    Merge "Redact location from notifications"

commit d24e6085bb9fdd01763115e850b75db7aff8afcc
Merge: abb581c 5e1b199
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Feb 26 16:53:23 2013 +0000

    Merge "Fix broken JSON schemas in v2 tests"

commit 7bdc4eb94a0df6c6edca73bc2c47c05efb22e025
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Tue Feb 19 12:52:38 2013 +0000

    Redact location from notifications
    
    Redact the value of 'location' in notifications since it may contain
    credentials.
    
    Fix for bug 1125130.
    
    Change-Id: Ic0baee259ac46479f8992eca2b02c307fcaf70ac

commit 5e1b199a0fa843c1ebd765c9205b9281b03763e0
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Feb 25 10:27:50 2013 -0800

    Fix broken JSON schemas in v2 tests
    
    * The required attribute is not allowed in draft 4 of JSON schema
    * The dependency on jsonschema can be relaxed back to all versions
    
    Change-Id: Id0767cfe2fe46d73999563896f851ffb01aa9489

commit 69a0d3f532cd702ff4a1097916755c2706c5359b
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Fri Feb 22 15:44:06 2013 -0500

    Add migration 021 set_engine_mysql_innodb
    
    Change: I1536c9276bc807aac26849e37556b465e8b5c9eb which added
    migration 018 neglected to set the mysql engine to InnoDB
    when it added the image_locations table. This commit adds a
    new migration to set the image_locations table to the InnoDB
    engine.
    
    Change-Id: I935065d8e1929d5df075cc5c7de81793b1dd73a1

commit abb581c71b6f959a3526d3c2b157b6646f2c4132
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Wed Feb 6 14:53:28 2013 -0500

    Refactor data migration tests
    
    This commit adds a more general framework for testing data
    transitions at any db migration. Based on the test migration
    framework in nova.
    
    This commit also updates the existing individual migration
    tests to use the new framework.
    
    Change-Id: I917cfefe266a98f6c63613ac071af2dd676d67a1

commit 57c4c780eb8ce3bc3f0e1f38870103bd419b6702
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Fri Feb 22 13:28:18 2013 -0500

    Fix migration 016 for sqlite.
    
    Sqlite doesn't support dropping a column from a table. The
    downgrade path for migration 016 performed this. So this commit adds the
    sql file to perform the downgrade manually.
    
    Change-Id: I6aae263c3aab03a383c47fd29c46f0cc9b857549

commit c48d59690c231f9f2362844df55ece7fe720a8fa
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Mon Feb 25 10:37:01 2013 -0500

    Pin jsonschema version below 1.0.0.
    
    The latest jsonschema version breaks the unit tests. This commit pins
    the version to be less than the latest release.
    
    Fixes bug 1132840
    
    Change-Id: Ib4db4782f995cee179445ca11d2b6a7f13a6b457

commit be0e3204d86bd26eca791cea1e02946461f42331
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Fri Feb 22 14:34:47 2013 -0500

    Add check for image_locations table
    
    This commit adds a check for the image_locations table to the
    _assert_tables method in TestGlanceManage. When migration 018
    was added in change: I1536c9276bc807aac26849e37556b465e8b5c9eb
    a new image locations table was created, but didn't update the
    functional tests to check that it had been created.
    
    Change-Id: If76702f623e201505c62d05e245003e3783d8574

commit aa01e82fe1bf652348510d6ae580505b5bd77c3a
Merge: a257a7e 42ae9da
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Feb 23 20:09:02 2013 +0000

    Merge "Avoid using logging in signal handlers"

commit a257a7ec5814d77dbe77d52fb7d4c3c0a38c45ea
Merge: 1c83f8a 781e8fa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Feb 23 20:04:44 2013 +0000

    Merge "Update openstack.common"

commit 1c83f8aaae70ffa0e483a411ce3e8ba75f4159a5
Merge: 75bad23 d99f1b4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Feb 23 02:11:49 2013 +0000

    Merge "Remove unnecessary logging from migration 019"

commit 75bad23e244689d8983a6b454335659fd770602f
Merge: 19aecaf 8e9da71
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Feb 23 02:11:47 2013 +0000

    Merge "Fix migration 015 downgrade with sqlite."

commit 19aecaf5de2cd1808d0d8aca8a3b01b92937ce5d
Merge: 253fb52 5338e4a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Feb 23 00:38:34 2013 +0000

    Merge "Use more-specific value for X-Object-Manifest header."

commit 42ae9dae931e2afebf916d82b39cc3481b300718
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Fri Feb 22 14:59:02 2013 -0800

    Avoid using logging in signal handlers
    
    Fixes bug 1029727
    
    It is possible for logging to cause problems during signal handlers.
    Fortunately, the logging we have in signal handlers is minimal and does
    not add enough value to try to keep through workarounds.
    
    Change-Id: I80708874c9740c906e5a49e0d9c1b45174470a85

commit 7804a6ea60500646533e4089997e3ef540400c83
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Feb 22 14:29:28 2013 -0800

    monkey_patch the time module for eventlet
    
    Fixes bug 988099
    
    Change-Id: I24dfe81863484ed07b77ab20f9d8ab7746e977df

commit 253fb523969207398bca4e1905da29f2687c8ce5
Merge: 5947246 dbecc93
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Feb 22 19:44:38 2013 +0000

    Merge "Remove compat cfg wrapper"

commit 5947246353b5c5a2cb4195140263d69f8fdc300a
Merge: 6a91505 fe0c2d2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Feb 22 19:40:25 2013 +0000

    Merge "Document db_auto_create in default config files"

commit dbecc93705dd0ecb05e5189f34d89ee19000aafc
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Fri Feb 22 16:59:40 2013 +0000

    Remove compat cfg wrapper
    
    This wrapper was there to allow oslo-config changes through the gate
    while keystoneclient hadn't been updated.
    
    Change-Id: I3d48673af58ae379e8e4d2c7fb4b4d81f3ed67dd

commit d99f1b4a10d4c2c918a939a4671583411a3df466
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Fri Feb 22 11:08:04 2013 -0500

    Remove unnecessary logging from migration 019
    
    Migration 019 included debug logging for every sqlalchemy call
    that was run. This commit removes all of the logging and makes it
    consistent with the other migrations.
    
    Change-Id: I914f4f4458eacbb3bcabac092bbe166ce9069a5f

commit 8e9da7101165dbb9d60ac5ad434d2d5b0f2849fd
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Fri Feb 22 11:03:15 2013 -0500

    Fix migration 015 downgrade with sqlite.
    
    This adds a list() call around the select sqlalchemy to pull
    the list of locations that start with swift. The list() call
    forces the select query to finish, before we try to update the
    database.
    
    Change-Id: I63f2e184a49e8bbd7115dd59d644506ea4069558

commit fe0c2d2a1de060efb650d72cd7e1280f32ec80d1
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Thu Feb 21 17:59:51 2013 +0000

    Document db_auto_create in default config files
    
    Change-Id: I933952b672254b32928762e0a4beba2b2b107810

commit 781e8fa6d6eb579ebe52d649e6f484115495940a
Author: Doug Hellmann <doug.hellmann@dreamhost.com>
Date:   Tue Feb 19 07:10:35 2013 -0500

    Update openstack.common
    
    Change-Id: I4515f504dd114de51c37655aa1e5bcaf1eef33e7
    Signed-off-by: Doug Hellmann <doug.hellmann@dreamhost.com>

commit 6a91505175c76f51f4c0cd1ef46f81e23ef9b4d0
Merge: ce8dadf 780a1c7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 21 20:45:22 2013 +0000

    Merge "Update oslo-config version."

commit ce8dadf4baee624c52f40828a0d7df57f6265778
Merge: 8527687 b0b380f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 21 18:54:10 2013 +0000

    Merge "Add migration 20 - drop images.location"

commit 8527687cb56be22f3722bc670a9e142ef908371b
Merge: a12e81d fd9d069
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 21 18:53:43 2013 +0000

    Merge "Add migration 19 - move image location data"

commit a12e81d5b40a725168b1012b22a72f3fa873fe97
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Fri Dec 14 10:00:10 2012 -0800

    Extend the domain model to v2 image data
    
    This completes blueprint glance-domain-logic-layer
    
    Change-Id: I5d0e9f54cfc745f484a8db8f29f64caeb832ec98

commit 8e43e39025ecd1d1612b951a220888e341b753e6
Merge: 927088b ac1c9ac
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 21 03:54:07 2013 +0000

    Merge "Filter images by status and add visibility shared"

commit b0b380fb709f6977c18cbb4b1b277cf7cb04c1eb
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jan 29 13:45:22 2013 -0800

    Add migration 20 - drop images.location
    
    The image location data has been migrated out of this column, so it
    is no longer useful. This migration simply drops it.
    
    Related to bp multiple-image-locations
    
    Change-Id: I5985c7ef41fceeb3d23063c7e9e76b3b9271ffa2

commit fd9d069a6e474651a9ca4a47a3c32c8a998b28a8
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jan 29 13:43:32 2013 -0800

    Add migration 19 - move image location data
    
    Migration 19 moves image location data from images.location to
    the new image_locations table. The sqlalchemy db driver has been
    updated to look at this new table, but the complexity of multiple
    locations is not yet exposed to the reset of the system.
    
    Related to bp multiple-image-locations
    
    Change-Id: I6c4c684f522d9b41b9930e7f79a4e6fb3e3f5c39

commit 927088be19e199e6454426e2c6c14f3e895e8648
Merge: d706143 b1da386
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 20 20:52:06 2013 +0000

    Merge "Sync latest install_venv_common.py"

commit ac1c9ace1e57fb2ca76b78f2ba964ff3686449dd
Author: isethi <iccha.sethi@rackspace.com>
Date:   Sun Feb 10 21:55:50 2013 +0000

    Filter images by status and add visibility shared
    
    This patch allows the user to filter images by status.
    Whenever a user does an image list, the following are displayed:
    (1) public images
    (2) images owned by the user
    (3) images whom the user is a member of and has set status to accepted
    The user can change the status in (3) and also choose to display
    the images the user has been requested to be a member of,
    rejected to be a member of, or all images irrespective of the status
    set by user
    
    If visibility filter can be shared, public or private. Where shared
    filter displays images which the user is a member of. This can be
    used in conjunction with member_status
    
    Related to bp glance-api-v2-image-sharing
    
    Change-Id: I052c0947f9ad17ef1b14af0ad0f51b886afd0d7a

commit 780a1c7b039ac065dc0d64998741c65796e0dcee
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed Feb 20 15:44:59 2013 -0500

    Update oslo-config version.
    
    Update the oslo-config version in pip-requires that includes a fix that
    breaks oslo.config imports.
    
    Change-Id: Iea037215b1f89beb9480968077f1517285f2f071

commit b1da386afb23694521fb65b1ba15c09835d997b8
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Wed Feb 20 14:11:26 2013 -0500

    Sync latest install_venv_common.py
    
    Syncs:
    
    c78b2ab Avoid using cfg in install_venv_common
    
    So that people don't need oslo-config installed to run install_venv
    
    Fixes bug 1130853
    
    Change-Id: I9dfc8d8417455ff22a0d0e911c762983952c75ee

commit d70614378177b15767ca473e57878d4afba4a33c
Author: Brian Rosmaita <brian.rosmaita@rackspace.com>
Date:   Fri Feb 8 21:18:43 2013 +0000

    Adding new common image properties
    
    Revised schema and glance sphinx docs, renamed 'os_arch' to
    'architecture' for backwards compatibility, renamed 'os_shortid'
    to 'os_libosinfo_shortid'.
    
    Partially implements blueprint glance-common-image-properties
    
    Change-Id: I23d8ba82015f1f53bff65b4fa08463d905eeadd8

commit 7bccd3782524a09aaacf68348dfeeebfc3b89f18
Merge: 095102e 9855237
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 20 02:57:15 2013 +0000

    Merge "Use oslo-config-2013.1b3"

commit 095102e5dc8052efdaaa089434dc20e9fb9a0fe0
Merge: 530737f 60be713
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Feb 19 21:49:09 2013 +0000

    Merge "Create connection for each qpid notification."

commit 98552376f372ed809081b118f33eb31046443b38
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Sun Feb 10 18:46:40 2013 -0500

    Use oslo-config-2013.1b3
    
    The cfg API is now available via the oslo-config library, so switch to
    it and remove the copied-and-pasted version.
    
    Add the 2013.1b3 tarball to tools/pip-requires - this will be changed
    to 'oslo-config>=2013.1' when oslo-config is published to pypi. This
    will happen in time for grizzly final.
    
    Remove the 'deps = pep8==1.3.3' from tox.ini as it means all the other
    deps get installed with easy_install which can't install oslo-config
    from the URL.
    
    Retain dummy cfg.py file until keystoneclient middleware has been
    updated (I18c450174277c8e2d15ed93879da6cd92074c27a).
    
    Change-Id: I4815aeb8a9341a31a250e920157f15ee15cfc5bc

commit 530737fb17e0cf429d970869847a0fff9be2deb8
Merge: 7b36ac5 9db0f05
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Feb 19 07:11:43 2013 +0000

    Merge "Add an update option to run_tests.sh"

commit 7b36ac5de2d313e1800c15586a1ebfa36d45d1cc
Merge: b036070 fcf0dca
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Feb 19 07:09:02 2013 +0000

    Merge "Use install_venv_common.py from oslo."

commit b0360709bd80df9756a41089ac0c6a4eb19109df
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jan 29 12:22:29 2013 -0800

    Add migration 18 - create the image_locations table
    
    This migration simply creates the new image_locations table. It does
    not yet use the table for anything.
    
    Related to bp multiple-image-locations
    
    Change-Id: I1536c9276bc807aac26849e37556b465e8b5c9eb

commit 60be7133544afa5e63c0b742d31b9998688530b6
Author: Russell Bryant <rbryant@redhat.com>
Date:   Fri Feb 15 17:50:02 2013 -0500

    Create connection for each qpid notification.
    
    Previously the qpid notifier created a connection to the qpid broker
    when the notifier was initialized and reused that for each notification.
    This is broken when API workers are used.  Instead, just create a new
    connection on demand when a notification gets sent out.
    
    Fix bug 1100317.
    
    Change-Id: I7a17e5e4bd8efd771ff8cd0e1d04107a79789763

commit f071f5a80f6eb0adef1a7af3e6d10db1428a3c36
Merge: 61d3171 fad36d8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Feb 18 05:51:26 2013 +0000

    Merge "Add migration to quote encrypted image location urls"

commit 61d31716e6fbda9002adbd01d8f3c12861c428ee
Merge: 0e3f62e 9c24bea
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Feb 18 04:34:30 2013 +0000

    Merge "Allowing member to set status of image membership"

commit 0e3f62e4207ad6ce1e3cb33c787a8c33e4e26460
Merge: 2791d10 a2b9bed
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Feb 18 04:31:53 2013 +0000

    Merge "Updates OpenStack LLC with OpenStack Foundation"

commit fad36d8ef79e52d8bf67c89bde876911990abf8f
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Thu Jan 10 12:24:02 2013 -0500

    Add migration to quote encrypted image location urls
    
    Migration 015_quote_swift_credentials.py failed to take into account
    encrypted location values. This patch adds a similar migration
    that if the value is encrypted then:
    1. Decrypts the value
    2. Quotes the url string
    3. Encrypts the value
    4. Inserts back into DB
    
    fixes bug 1081043
    
    Change-Id: Iadfe5f5082b3932307eef8e76571e36c6ff9fce7

commit a2b9bed75d9dd02562bc611cebdcc4744d61603a
Author: annegentle <anne@openstack.org>
Date:   Thu Jan 3 10:26:06 2013 -0600

    Updates OpenStack LLC with OpenStack Foundation
    
    Patchset addresses reviewer's comments, rebase against master,
    and follows new guidance from Foundation:
    http://wiki.openstack.org/Documentation/Copyright
    
    Change-Id: I94367461505778973528eb8835d991f4fb796dab

commit 9c24bead99a18fe399119693da1b7ddca1b3cc63
Author: isethi <iccha.sethi@rackspace.com>
Date:   Sat Feb 9 03:26:42 2013 +0000

    Allowing member to set status of image membership
    
    Only the owner of an image can add members to the image.
    By default the status of the image member is requested.
    The member can change the status of the image membership
    to accepted or rejected. This is done to prevent spamming
    the user's image list. A member cannot see the other members
    of the image.
    
    Related to bp glance-api-v2-image-sharing
    
    Change-Id: I0d0deba4b0df52b2f8d105b779fb7de746229d3a

commit 2791d10c3add50243a2040210f4f498e20ecb266
Merge: ea5b2b0 b4b126d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Feb 16 20:25:43 2013 +0000

    Merge "Add status column to image_members"

commit ea5b2b028507478252085fe1826d39195c85a9f2
Merge: 19be6cc 44ceb21
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Feb 16 02:16:45 2013 +0000

    Merge "Adding image members in glance v2 api"

commit 19be6ccc439d355e46402fb2cfe1f7c8474948f2
Merge: 54b9870 75dd3fb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Feb 16 00:17:40 2013 +0000

    Merge "Updated_at not being passed to db in image create"

commit 54b9870a9ff9b0f0da955ddf4d52ff8d9b70ccbd
Merge: 440613a 31cae6a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Feb 16 00:17:37 2013 +0000

    Merge "Fix issues with migration 012"

commit 440613a070a1caf5f7d32a9783e36586bdd147e7
Merge: df01d01 b584b83
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Feb 16 00:17:32 2013 +0000

    Merge "Add migration.py based on the one in nova."

commit 9db0f051bd47d9ea8a9ff070a92494da678827a1
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Fri Feb 15 15:52:41 2013 -0500

    Add an update option to run_tests.sh
    
    This commit adds an update option to run_tests.sh. This option
    is used to rerun install_venv.py on an already installed venv.
    This will then just update out of date packages with pip.
    
    Change-Id: I808f019de688387b14bc7a43eea4e45b05948e6b

commit fcf0dca7b40152dede9ba6bb8c7be518463e93b0
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Mon Jan 28 12:27:24 2013 -0500

    Use install_venv_common.py from oslo.
    
    This syncs install_venv_common.py from oslo and reworks the
    tools/install_venv.py script to use the new library.
    
    Change-Id: I47b1526c2c81cc1e6b3223dabbf6b5ad674252a7

commit b4b126d41c4de71794ed3b601d511e15c9718af9
Author: isethi <iccha.sethi@rackspace.com>
Date:   Mon Jan 28 22:17:07 2013 +0000

    Add status column to image_members
    
    Related to bp glance-api-v2-image-sharing
    
    Change-Id: Id8896f9dcb717ab8a466829b3b1cd9fde4b67a36

commit df01d0108f041b76a5b54072cb94acbfd1405d2b
Merge: 115a0ca cb664f9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 14 22:43:52 2013 +0000

    Merge "Update .coveragerc"

commit 44ceb213906291de8604d1cabb8892030ab9c9a3
Author: isethi <iccha.sethi@rackspace.com>
Date:   Mon Feb 4 16:43:30 2013 +0000

    Adding image members in glance v2 api
    
    Adding image members to glance v2 api. A user can create image member,
    list image members and delete image member for a given image.
    Also adds the necessary authorization.
    
    Related to bp glance-api-v2-image-sharing
    
    Change-Id: Ifc0607d693f7b0218ebd7fc4824a64e9eba995b3

commit 31cae6ac4025b408e5a8117f526ebb36be8dfc06
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Wed Feb 6 09:56:01 2013 -0500

    Fix issues with migration 012
    
    This commit fixes 3 issues with migration 012:
    
    First for the sqlite downgrade case the schema was being updated
    before the data, which made it impossible to be applied. This
    reverses the order of those calls correcting the issue.
    
    Second, when the generate_uuid method was moved to one synced
    from oslo the import was never updated in migration 012 which
    was using generate_uuid(). This commit updates the imports and
    uses of generate_uuid() to use the method in oslo.
    
    Thirdly, this patch fixed the downgrade path to work for an image
    table with more than one row.
    
    Change-Id: Ib0d3d67e924748863dfdf8eb9e3257ec108ecf68

commit b584b83830d633aad024841b8bc5396d1da4224c
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Tue Feb 5 15:43:41 2013 -0500

    Add migration.py based on the one in nova.
    
    This adds a migration.py file for setup and migration commands
    similar to the file in nova. This was needed for porting the
    new test migration framework.
    
    Change-Id: Ic4d3a5e471b5fb8ee38b22b97df2e99b9fb649a1

commit 115a0ca0fd4bf449d9bb4302090a1388721fd9c3
Merge: 8ae5688 6b706f1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 14 08:00:08 2013 +0000

    Merge "Fix version issue during nosetests run"

commit 8ae56887cb856555547ef3bbb7e98b49181132bc
Merge: e7cba65 a754aec
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 14 07:26:40 2013 +0000

    Merge "Add LazyPluggable utility from nova."

commit e7cba65be8b948b1bfe714c663fa918a4a5996d2
Merge: b54f412 07e18c6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 14 03:45:22 2013 +0000

    Merge "Replace nose plugin with testtools details."

commit b54f4123bf767252c03274d886e02150f0cf7af4
Merge: 3413ef1 3d4a77d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 14 00:19:37 2013 +0000

    Merge "Sample config and doc for the show_image_direct_url option."

commit 3413ef1b55b36757fe46090d9be78e9c0059cc4b
Merge: f44d33e 68d71ea
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 13 22:58:19 2013 +0000

    Merge "Add _FATAL_EXCEPTION_FORMAT_ERRORS global."

commit f44d33e810c0dae688bc61a23740570f3fe4712d
Merge: f42678e c857149
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 13 22:35:54 2013 +0000

    Merge "Adding finer notifications."

commit f42678e572049ff46d6ad7ed5611eca0cf95cc9e
Merge: c21f8a4 0756cf1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 13 22:35:49 2013 +0000

    Merge "Clean dangling image fragments in filesystem store"

commit 75dd3fb001cbd17d61e6295463124f9f3f7feef7
Author: iccha-sethi <iccha.sethi@rackspace.com>
Date:   Wed Feb 13 20:57:01 2013 +0000

    Updated_at not being passed to db in image create
    
    This results in fragile tests in which updated_at and
    created_at are not equal
    
    Fixes bug 1123515
    
    Change-Id: Ibc29fef092d4d09473abb8818bea53658afcd5bf

commit c21f8a42766a126779cec8ba9c72e7b8216a7067
Merge: 1233968 86c7314
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 13 16:17:34 2013 +0000

    Merge "Fix moker typo in test_notifier"

commit 12339682268093772ac8a03448c0e2ebfa93b12a
Merge: aed6370 9518b9d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 13 15:47:39 2013 +0000

    Merge "Adding database layer for image members domain model"

commit aed637027f8f5206be7306575dd5a2a07099de12
Merge: 2cae664 286dd79
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 13 06:32:45 2013 +0000

    Merge "Image Member Domain Model"

commit 2cae66427f5ab6aa35f3ab654bb2a8f381fa5a36
Merge: 0058dcb 68010c2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 13 06:32:10 2013 +0000

    Merge "Convert some prints to addDetails calls."

commit 0058dcbc213e72e1aef23e4737b9fea95bc01d52
Merge: c21d5b1 9f4fb2c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 13 00:34:29 2013 +0000

    Merge "Avoid dangling partial image on size/checksum mismatch"

commit c21d5b1b5593550076eb4a3a58b8d3b9c3b06373
Merge: dd6ff0e 93cd456
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Feb 12 23:46:13 2013 +0000

    Merge "Additional image member information"

commit 86c73141a859c80265f3fbf835b15f7b6e964136
Author: Alessio Ababilov <aababilo@yahoo-inc.com>
Date:   Tue Feb 12 14:23:33 2013 +0200

    Fix moker typo in test_notifier
    
    test_notifier.TestQpidNotifier are usually skipped, so
    that typo was not detected while running unit tests.
    
    Change-Id: I1998b8e72c20170a8a2b234f2c19ec1e990ed43e

commit 0756cf10252df868c6470771cbc9c7aeb081c062
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Jan 25 13:18:58 2013 +0000

    Clean dangling image fragments in filesystem store
    
    Fixes bug LP 1104924
    
    Previously when a PUT or POST of image content was terminated
    prematurely by the client, the partially saved image file was
    left behind in the data directory.
    
    Change-Id: Id601816735e4138cd7623dad4d90be67448292c8

commit 3d4a77d4dde746a1f6ead1b473e07dc8d904a673
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Tue Feb 5 15:25:03 2013 -1000

    Sample config and doc for the show_image_direct_url option.
    
    This patch adds a sample configuration option to the
    glance-api.conf sample and it explains how to use the option.
    
    Change-Id: I1cc82a2cae0bbfc650ab7294ff08740bb868e4ff

commit dd6ff0e53d95da54f612afb44f229ef195f2a30f
Merge: dee3e8f cb272bb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Feb 12 05:22:08 2013 +0000

    Merge "Encrypt scrubber marker files"

commit dee3e8f14a2244ac19740bb261a89f0039587993
Merge: fc20487 5674da9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Feb 12 05:21:17 2013 +0000

    Merge "Update HACKING.rst per recent changes"

commit fc20487d261a134d9155eb19d13a0e2fb312472c
Merge: c9f493e 8e92106
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Feb 11 20:02:25 2013 +0000

    Merge "Rearrange db tests in prep for testr."

commit 9f4fb2cda684b6ea257b2eec8eab738ecbe06c72
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Feb 11 18:43:18 2013 +0000

    Avoid dangling partial image on size/checksum mismatch
    
    Fixes bug 1122299
    
    Previously, when the supplied image size or checksum didn't match
    the calculated values, partial image image data was left dangling
    in the backend store.
    
    Now, we clean up when the mismatch is detected.
    
    Change-Id: I916d78ef3b2065e87df31ec4fb405915417d68aa

commit 6b706f1afc445fd69922c47d663478f3306b7d7f
Author: Davanum Srinivas <dims@linux.vnet.ibm.com>
Date:   Thu Feb 7 21:55:02 2013 -0500

    Fix version issue during nosetests run
    
    Pick up the latest files from oslo
    
    Fixes LP# 1118845
    
    Change-Id: I1c9a19508fc18f18936624fa233d3fdc6d31e43f

commit 9518b9d63bf4c300afe6c38ecf54ed7e899fe909
Author: isethi <iccha.sethi@rackspace.com>
Date:   Mon Feb 4 16:13:07 2013 +0000

    Adding database layer for image members domain model
    
    Adding the database layer image members domain model.
    For a given image, a user can get a list of image members,
    delete image member, and get a specific image.
    
    Related to bp glance-api-v2-image-sharing
    
    Change-Id: I71a0c0d3c828cba231a75d0b7888bad932de41e5

commit 286dd791a5dc6bc085a33f658c7bbd8a92da2fb5
Author: isethi <iccha.sethi@rackspace.com>
Date:   Mon Feb 4 14:54:39 2013 +0000

    Image Member Domain Model
    
    This commit is the first layer of image member domain model.
    The can_share feature from v1 of glance api will not be
    ported to glance v2 api.
    
    Related to bp glance-api-v2-image-sharing
    
    Change-Id: Ibfb790d438efb0f5b29b4786c02f1155962150c5

commit 93cd45667527c4b6921fd2149b51e02bcc5d0804
Author: isethi <iccha.sethi@rackspace.com>
Date:   Mon Feb 4 02:36:18 2013 +0000

    Additional image member information
    
    Return the created_at and updated_at values for image member.
    
    Related to bp glance-api-v2-image-sharing
    
    Change-Id: I50f514c8680d1299d41c107c993e7ee2b0d7a185

commit c9f493e1e684c23590979b216c13d882a70b35b9
Merge: f2b53cf ee43d01
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Feb 9 02:45:13 2013 +0000

    Merge "Mark password config options with secret"

commit f2b53cfed18b92c82cc332ffbef28efe90dd8eea
Merge: 9266f8e dd28e13
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Feb 9 00:46:46 2013 +0000

    Merge "Add to multi-tenant swift store documentation"

commit 9266f8e692ac728c1539198112469358ec507d2a
Merge: c55273d c454e24
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 7 21:30:23 2013 +0000

    Merge "Quote action strings before passing to registry"

commit c857149c1834c7e83c171c22f6a8a1da334aa1b2
Author: Andrew Melton <andrew.melton@rackspace.com>
Date:   Wed Feb 6 14:50:54 2013 -0500

    Adding finer notifications.
    
    This commit adds notifications which offer a finer view of what's going on
        inside Glance.
    
    New Info Notifications (v1, v2)
    image.create: Emitted when the image is first saved/reserved.
    image.prepare: Emitted right before Glance begins uploading to it's store.
    image.activate: Emitted when an image's status is set to active.
    
    New Error Notifiactions (v2)
    image.upload: Emitted on StorageFull or StorageWriteDenied exceptions to
                      mimic v1
    
    Partially implements: bp:glance-notifications-deux
    
    Change-Id: I2a4a48f6b57ab4739472f22eb42f9307266e6072

commit a754aec88616dd3a00287a6f67717ad2156c3a53
Author: Matthew Treinish <treinish@linux.vnet.ibm.com>
Date:   Tue Feb 5 15:44:22 2013 -0500

    Add LazyPluggable utility from nova.
    
    This commit merges in the LazyPluggable utility
    from nova in to glance.common.utils. This is required
    for the new test_migrations framework.
    
    Change-Id: Ic9520db3f11f13e1a83882101980fcaaacc73729

commit cb664f9f466b6636e93a5f86609bc2613267c30d
Author: Alessio Ababilov <aababilov@griddynamics.com>
Date:   Wed Feb 6 16:47:06 2013 +0200

    Update .coveragerc
    
    Set up proper source and omit options.
    
    Change-Id: Ie55c8216def942116ab71c408ef09b14c3a0d7dd
    Implements: blueprint update-coveragerc

commit c55273d09603cdc9f46b35de8bffa4997a44d5ae
Author: James Morgan <james.morgan@rackspace.com>
Date:   Tue Feb 5 17:08:01 2013 +0000

    Removed unnecessary code.
    
    Change-Id: I1e8cb44e02d2e43194c6e2e5f77a4b1842e67ea2

commit 5338e4a1b714622bb9fb3a957055c7800dba02bf
Author: Samuel Merritt <sam@swiftstack.com>
Date:   Mon Feb 4 17:38:57 2013 -0800

    Use more-specific value for X-Object-Manifest header.
    
    When uploading a large image to Swift, the segments are named
    glance/<imageid>-<segmentnumber>. However, the value of
    X-Object-Manifest is only glance/<imageid> without the trailing
    dash. This can lead to odd behavior when there are other objects that
    start with <imageid>, but are not actually segments of the image.
    
    For example, in bug 1112653, a user was using python-swiftclient to
    delete an old, segmented image with id 10. However, they also had an
    image with id 100b2316-9187-48d8-b327-dded22d1dc71-00001, and since
    "10" is a prefix of "100b2316-9187-48d8-b327-dded22d1dc71-00001",
    swiftclient thought that the second image was just another segment of
    image 10 and deleted it.
    
    Further, had someone issued a GET request for /glance/10, the
    resulting response would have contained the bytes from 10's segments
    *plus* the bytes from 100b2316-9187-48d8-b327-dded22d1dc71-00001,
    which is definitely not the right behavior.
    
    Obviously, this change doesn't go back and fix up old
    manifests. However, it should help prevent this problem from
    recurring.
    
    Change-Id: I37577fde7751ad76ce543bc59eb7ee8de2187ac3

commit 802af0fe04fc11bbdba3b186b08cd73d792eacfc
Author: Michael J Fork <mjfork@us.ibm.com>
Date:   Thu Jan 31 18:22:38 2013 +0000

    Allow description fields to be translated in schema
    
    The description fields for the schema elements were hard coded
    english strings but are intended for end user consumption and
    should be translation enabled.
    
    bug 1115495
    Change-Id: Ic3b16af75a41a186640762d0c7af787f1bf49ad0

commit ee43d01f390db27bbce75d0b09182367b4e33c12
Author: Michael J Fork <mjfork@us.ibm.com>
Date:   Mon Feb 4 15:35:49 2013 +0000

    Mark password config options with secret
    
    Config object supports masking values when writing out if the secret
    flag is set on the option definition.  This change flags all glance
    options containing a password.
    
    Change-Id: Id8428fbd5c0090840c8e9adf86badb794cf9fd66

commit 5674da98b1ce854e6589c03be5c5f911537b4688
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Mon Feb 4 10:20:41 2013 +0800

    Update HACKING.rst per recent changes
    
    Added "is not" usage with examples
    Fixed "not in" usage description
    * https://review.openstack.org/#/c/20877/
    
    Change-Id: I89fbc62a8b31bc7ef750cc1e80f73b9c1e366fd3

commit cb272bbfc9fd837652b65c39fb2505074612df95
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Fri Feb 1 12:03:38 2013 +0000

    Encrypt scrubber marker files
    
    Files written to scrubber_datadir can contain credentials in plain text.
    
    Update schedule_delayed_delete_from_backend to make use of
    metadata_encryption_key to encrypt the uri before writing it out.
    
    Fixes LP Bug #1112586
    
    Change-Id: I03ff36f6b57f58a5e5de28bf8d48e7ce0216e5b3

commit c454e24bf417338193eb13a4a1e925dd139934ca
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Thu Jan 31 16:18:16 2013 -0800

    Quote action strings before passing to registry
    
    If an id contains a space it needs to be quoted when making a
    request to registry.
    
    Fixes bug 1111948
    
    Change-Id: Ic2250cdcf58d439f344d42e2f59577884343cd19

commit 7feecf19eaeeaf19b68b2b4001e28759f8852788
Merge: 199d139 94969ae
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 31 16:59:30 2013 +0000

    Merge "Pull in tarball version fix from oslo."

commit 199d139ee1c5c8633b1989895c8860f9135921ce
Merge: 73ffec0 d7be5c1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 31 16:02:58 2013 +0000

    Merge "Fixes 'not in' operator usage"

commit d7be5c1982893d2a43b6554add42240ab040e0d1
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Thu Jan 31 14:18:12 2013 +0800

    Fixes 'not in' operator usage
    
    Fixes bug #1111254
    
    Change-Id: I297829049213732217332a969aa107525ac13600

commit 73ffec07266ab4d5386c0b4f4fa73855734c26be
Merge: a4e89f1 35be498
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 31 14:53:06 2013 +0000

    Merge "Prints list-cached dates in isoformat"

commit dd28e13a5c18d4ad30a21b6b44635b9dfdb20f1c
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Jan 30 17:30:13 2013 +0000

    Add to multi-tenant swift store documentation
    
    Make the usage of the 'swift_store_admin_tenants' parameter
    a little clearer.
    
    Fixes bug 1110597.
    
    Change-Id: Ibcfe5d74b89e35ac65d442ebfa6f75b0f8519af4

commit a4e89f1a43296df4794462372fd4544bf25e7493
Merge: dfbdd5f 8291e3c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 31 14:23:49 2013 +0000

    Merge "Fix kwargs in xattr BadDriverConfiguration exc."

commit dfbdd5f4577760df48bcf6661f99bc8311020029
Merge: 7ea5be5 6d90682
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 31 04:01:43 2013 +0000

    Merge "Fail sensibly if swiftclient absent in test"

commit 07e18c680255a38364bdcc4f24598564091b1ce2
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sat Jan 5 21:08:49 2013 -0500

    Replace nose plugin with testtools details.
    
    Because of the testtools support for capture of arbitrary data, we no longer
    need a custom in-tree nose plugin.
    
    Part of blueprint grizzly-testtools
    
    Change-Id: Idcd388aeee2809f43e68905c85d45d4429e3e67f

commit 68010c2a152bf97eb8410c1550ec012caf9712df
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sun Jan 6 03:01:26 2013 -0500

    Convert some prints to addDetails calls.
    
    If instead of using print, we use testtools details, we can capture the data
    sensibly in the subunit output stream. That way, we can make good display
    decisions about the data to be shown in the HTML reports as needed.
    
    Part of blueprint grizzly-testtools
    
    Change-Id: I125b0bf60591ec3c854aa757b370a1c3573a40d2

commit 8e92106c259375f9751cd477c7af891296331a41
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sun Jan 6 02:35:09 2013 -0500

    Rearrange db tests in prep for testr.
    
    The way discover does test discovery will find any classes that subclass
    the unittest base class. This means that db.base was getting picked up as
    a set of tests that need to be run, which is bogus, as it's intended to just
    be a base class.
    
    Split it up a little bit differently to make it work as intended when
    python test discovery is run outside of how nose things of things.
    
    Part of blueprint grizzly-testtools
    
    Change-Id: Iede92452d0c48224a1f80288c2bf2693224dc56f

commit 7ea5be5952eed1d72656a58a7f486b6a14f85f23
Author: Monty Taylor <mordred@inaugust.com>
Date:   Thu Jan 31 10:50:36 2013 +1100

    Stop using detailed-errors plugin for nose.
    
    Because of the move to testtools, the detailed-errors plugin is not only no
    longer useful, it actually causes problems, as it fails to process the
    error information sent up by testtools.
    
    Part of blueprint grizzly-testtools
    
    Change-Id: I0c8ff489fa92bb4cf7dcd06dd73f14701c013608

commit f84c488274d41d4b2b670cbbe82f7d01d83c0ee1
Merge: 2fdd1df 445ae7c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 30 22:32:51 2013 +0000

    Merge "Initialize CONF properly in store func tests"

commit 68d71ea2eaec86eef7303df95787975882ff4fb7
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Jan 30 10:44:47 2013 -0500

    Add _FATAL_EXCEPTION_FORMAT_ERRORS global.
    
    Add a new global variable to control when exception format errors
    are fatal. The Glance functional/unit test now make use of this
    to ensure exceptions are correctly formatted when testing.
    
    Change-Id: I720336e10345a0e33937c7241c37f548d6f87ea2

commit 8291e3cf1b73def24ca64c3f84d0deae419f7ff5
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Jan 30 10:43:26 2013 -0500

    Fix kwargs in xattr BadDriverConfiguration exc.
    
    Updates an exception in the xattr image_cache driver so that
    it uses the correct kwargs for message formatting.
    
    Change-Id: I045de0fcd0237ed2702cf13d911d5b14ea86f45b

commit 2fdd1df173699cefd215b6637f30bfc6efca3155
Merge: e962731 1b54093
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 29 21:13:10 2013 +0000

    Merge "Ensure swift_store_admin_tenants ACLs are set"

commit 35be498112cfc52cc95d2ed811fbc5427407902b
Author: Flaper Fesp <flaper87@gmail.com>
Date:   Mon Jan 21 11:00:58 2013 +0100

    Prints list-cached dates in isoformat
    
    Converts dates printed by list-cached to a human readable format
    (isoformat). It now checks whether the image last_access time is == 0.0
    and prints "Not Accessed Yet" if so.
    
    * Updates openstack.common.timeutils
    * Fixes bug 1102334
    
    Change-Id: I46f023471ec87fdf74c18f33309279a2f39a4e2a

commit 6d90682019cdb14253e3610a19ab823fa85b9944
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jan 29 08:58:35 2013 -0800

    Fail sensibly if swiftclient absent in test
    
    Change-Id: Ie44940ede03b6b3d5cff0214dec5d63645fbb584

commit 445ae7cbce0b69ea345e5fba9bf4a31452b74c2e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jan 29 08:58:08 2013 -0800

    Initialize CONF properly in store func tests
    
    Change-Id: I49b42cc3da15d0966e34a57cfae0bbed79927c7a

commit 1b5409341099c869607d02e874d0476b4c959c42
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Tue Jan 29 16:46:46 2013 +0000

    Ensure swift_store_admin_tenants ACLs are set
    
    When using the V1 api ensure that admin tenant ACLs are set
    correctly on the relevant swift container.
    
    Fixes bug 1109089.
    
    Change-Id: I275e8aa7d2f02859c0d9ddbf373a0ae51e81e53d

commit e96273112b5b5da58d970796b7cfce04c5030a89
Author: Dan Prince <dprince@redhat.com>
Date:   Sat Jan 12 15:29:56 2013 -0500

    Remove Swift location/password from messages.
    
    Updates several exceptions and log messages in the Swift backend
    so that they don't include Swift location URI's which may contain
    passwords when used in Swift single tenant mode.
    
    Fixes LP Bug #1098962.
    
    Change-Id: I458de58563343347d5c976fe1ad084cc7e3280eb

commit 1c01cf1c430e1af7240fe56cf43812f4bccd0b88
Author: Leam <leam.hall@mailtrust.com>
Date:   Fri Jan 25 16:46:16 2013 -0500

    Removed unnecessary code
    
    Modified glance/registry/client.py.
    Replaced image_metadata.keys() with image_metadata
    
    Change-Id: I1e80ec476a8a23d9935ec9d111d652781cad320c

commit 71668fd383651c728d8697a36d40a707946f4c18
Author: Andrew Tranquada <andrew.tranquada@rackspace.com>
Date:   Thu Jan 24 20:18:58 2013 +0000

    Removed unncessary code
    
    no need to call .keys()
    if fixture_key not in reads more cleanly
    
    Change-Id: I27108fb7c1b71cb7a328a35d82d79a9da4786171

commit 2517f1e540892a72fa88852fbbb982ff012d234f
Merge: 2bd2513 c5d7ea9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jan 25 01:27:07 2013 +0000

    Merge "Make v2 image tags test not load system policy"

commit 2bd2513fb4bf65e06fcfc32ab842bd3a3e108f3e
Merge: 4552b7e 5e672de
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jan 25 01:27:02 2013 +0000

    Merge "Update glance config files with log defaults"

commit 4552b7eccb50cd29f2a3d4fe2e7a8b25310cebf9
Merge: ce06d84 4a5883e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 24 21:30:11 2013 +0000

    Merge "Log exception details."

commit ce06d849f4872afd94a9541c3e98dc070cf2bf87
Merge: 1c04ac0 79efac4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 24 21:17:48 2013 +0000

    Merge "Sync latest cfg and log from oslo-incubator"

commit 94969ae8a17bc7b96a30b1064c6f9f4c6c845c62
Author: Monty Taylor <mordred@inaugust.com>
Date:   Fri Jan 25 08:16:13 2013 +1100

    Pull in tarball version fix from oslo.
    
    Fixes bug 1103473.
    
    Change-Id: I6ba67c2a8a0b7f3d488dc294882ef9f2c925bbf5

commit 1c04ac0ad0b1077d9d0eb2fd16b0c73a0124afe5
Author: Chris Allnutt <chris.allnutt@rackspace.com>
Date:   Thu Jan 24 19:57:26 2013 +0000

    Updated image loop to not use an enumerator
    
    *  We are not using the enumerator in the loop. So this has been rewritten to not use it.
    
    Change-Id: I18cab2556190e8ce5c202c5f5e7b8e6b3dfe8f59

commit 4a5883eb249ea019dcf9bd004872f159504f7f47
Author: jola-mirecka <jola.mirecka@hp.com>
Date:   Wed Jan 23 16:29:44 2013 +0000

    Log exception details.
    
    When there is an error while initializing the backing store,
    log entrires are now displaying more details specifying
    the reason of failure.
    
    Also instead of normal info message, log entries display
    warnings in this case.
    
    Fixes: bug #1103073
    Change-Id: Icb7cc3c27325cfb0e4d62f466d28ecf9995d91ac

commit c5e04950a05a307dcce4cff5c635e99ad25fa9ea
Merge: 21cf2cf 1c1efe1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 23 22:37:04 2013 +0000

    Merge "Revert "Avoid testtools 0.9.25""

commit 21cf2cf39513d3f56a7e448e033f04de3a9fdc9f
Author: Chuck Short <chuck.short@canonical.com>
Date:   Mon Jan 21 19:37:38 2013 -0600

    Update version code from oslo
    
    Pull in a versioning fix from openstack-common, fixes
    python setup.py sdist versioning.
    
    Change-Id: I9ffab5c2b37190b4c7daad5e92da40d773c99b4f
    Signed-off-by: Chuck Short <chuck.short@canonical.com>

commit 1c1efe12f9d8a3aee20705794f5349ad8f8056cc
Author: Robert Collins <rbtcollins@hp.com>
Date:   Tue Jan 22 09:05:00 2013 +1300

    Revert "Avoid testtools 0.9.25"
    
    This reverts commit acae86293f7b0bba8fe105779f6f75df3af9ec51.
    Testtools upstream is fixed.
    
    Change-Id: Idc5f51bef76e31d627a80c742f5587d51e373d22

commit acae86293f7b0bba8fe105779f6f75df3af9ec51
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Mon Jan 21 17:06:16 2013 +0000

    Avoid testtools 0.9.25
    
    Fixes bug 1102400
    
    testtools 0.9.25 introduces a new dependency on the 'extras' package, but
    it does so in a way to prevents itself from being installed without the
    'extras' package already installed.
    
    Work around the problem for now by avoiding the problematic release.
    
    Change-Id: If8aa3925c744fad88f6f2715b5e779d0c258524c

commit 5e672def89aa1e236d8dca230d441a29a6808759
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Jan 21 14:41:50 2013 +0000

    Update glance config files with log defaults
    
    The default for the verbose config option is False and the sample config
    file should reflect that.
    
    Also, comment out the defaults of the config options so that it is clear
    that the sample file is showing the default in the code rather than
    overriding it.
    
    Change-Id: I3913ea54465658d93dc56e014dfe5d911b0541d6

commit 79efac44b408dc37cb932c3f68dd231700d02d91
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Jan 21 14:30:53 2013 +0000

    Sync latest cfg and log from oslo-incubator
    
    Changes include:
    
      c5984ba Move logging config options into the log module
      751c35b Verbose should not enable debug level logging
      edcdd25 Improve millisecond logging
      a8973c5 Revert "Support lookup of value using "group.key""
    
    The most significant of these changes is defaulting to the WARNING log
    level which was discussed on openstack-dev:
    
      http://lists.openstack.org/pipermail/openstack-dev/2013-January/004223.html
    
    This is behaviour already documented in doc/source/configuring.rst at
    least.
    
    Fixes bug #989269
    
    DocImpact
    
    Change-Id: I8ed9107193a811f50ecfd9b34e99e933774405ab

commit c5d7ea90eef8c6925ae5998ec8e93e8f09bbfde5
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Jan 21 15:40:40 2013 +0000

    Make v2 image tags test not load system policy
    
    Since commit 74a8601, I'm seeing this test attempting to load
    /etc/glance/policy.conf.
    
    Switch to using IsolatedUnitTest which copies the policy into a
    temp dir.
    
    Change-Id: Ibd84ed753de5abf91ee597918ba56130ddd0550e

commit 43f8697696a2d370d5b5f0594f948024aea55fda
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sat Jan 5 21:18:17 2013 -0500

    Replace custom tearDown with fixtures and cleanup.
    
    testtools.addCleanup is a more resilient way to perform cleanup activities,
    as it will continue to clean things up even if there are unforseen problems.
    
    Specifically, replace custom management of tempdirs with fixtures.TempDir
    and replace tearDown methods that can be easily replaced with calls to
    addCleanup in the setUp method. There are at least two temp dir creations that
    did not have a corresponding cleanup in this patch, which is another reason
    for using useFixture(fixtures.TempDir) instead of calls to mkdtemp.
    
    Part of blueprint grizzly-testtools.
    
    Change-Id: I4eb548010612bd5a8d30e8e2304fa66d3d5ffb7c

commit 3de221b9db3aba685cc6b7bfa1dad5c3312e1ce4
Merge: 5c8a3c1 1aaacf9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 16 21:43:25 2013 +0000

    Merge "Update version code from oslo."

commit 5c8a3c1e619f982254ae35af6baf1ec73f782639
Merge: 4f9bd42 1522be7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 16 21:09:04 2013 +0000

    Merge "Relax version constraint on Webob-1.0.8"

commit 4f9bd427e27caffab303c7251bc02654d2ceb6ee
Merge: 8f795f5 8726801
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 16 19:16:29 2013 +0000

    Merge "Stub out find_file... fix policy.json test issue."

commit 8f795f5176e8adefd7ed780a73965774fb4a3aae
Merge: b3cf405 b5e60b7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 15 19:15:40 2013 +0000

    Merge "Use testtools for unittest base class."

commit b3cf405b6126586c6d55d868fae0e73a9c8eb014
Merge: 2d9b3f1 8b1c02a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jan 14 23:32:57 2013 +0000

    Merge "Update v1/images DELETE so it returns empty body."

commit 1aaacf9c63f3a0b8da25712fcbc35407d466e03f
Author: Monty Taylor <mordred@inaugust.com>
Date:   Fri Jan 11 08:37:35 2013 -0800

    Update version code from oslo.
    
    Change-Id: Ibe96c6783203dc01d231c5ba990159a089ee27ba

commit b5e60b7e78d3a5c4d82fe2808d60cd3759053d10
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Dec 24 18:04:23 2012 -0600

    Use testtools for unittest base class.
    
    While doing this, remove some of the nose-isms, which don't play nicely.
    
    Part of blueprint grizzly-testtools
    
    Change-Id: I9ea398b25195ad5f9c5db876c3dbb49ef4a5ee99

commit 2d9b3f142c23d13a2df1b3c532937eaaac3fec32
Merge: 26a1398 cf97f6f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Jan 12 01:00:57 2013 +0000

    Merge "Add import for filesystem_store_datadir config."

commit 8726801d89dbaa116810318ea226a4693a68a8ca
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Jan 11 14:18:30 2013 -0500

    Stub out find_file... fix policy.json test issue.
    
    Updates test_policy.py so that we stub out find_file
    which is used to find the *default* policy file. This
    fixes an issue in the test_policy_file_default_not_found
    test where it *may* fail when executed on a machine with
    Glance package(s) installed (thus created a file in /etc/glance/
    that isn't readable by the test user).
    
    Fixes LP Bug #1098687.
    
    Change-Id: If2912d40608ffb07f457454fdc6ebc56c62f6eaf

commit 26a13983b8cc3b0276b1115057585126443f0a02
Author: Toan Nguyen <toan.nguyen@rackspace.com>
Date:   Fri Jan 11 14:44:42 2013 -0500

    Remove unused declaration in images.py
    
    Change-Id: Ief73484594f7fe0d80ffeb64b494f1691716418b

commit cf97f6f1aa417af7399dc82e3b0ce0cf6ee16dc7
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Jan 11 13:04:38 2013 -0500

    Add import for filesystem_store_datadir config.
    
    Adds a missing CONF import for the filesystem_store_datadir.
    This is required in order to make the policy tests (test_policy.py)
    run as a stand alone suite.
    
    Fixes: NoSuchOptError: no such option: filesystem_store_datadir
    
    Fixes LP Bug #1098670.
    
    Change-Id: If8f9db3962b070e7841e4e3ef531dda4645624b7

commit 8b1c02a078107e0419e16ac521b8d369a8b5b3e9
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Jan 11 12:18:34 2013 -0500

    Update v1/images DELETE so it returns empty body.
    
    Fixes an issue in the v1/images controller where a delete
    response would contain a 'null' string instead of an empty
    request body.
    
    Fixes LP Bug #1098651.
    
    Change-Id: I1a6610fe92e3a7f1221ca6f3e5f9e2c5e6130fbe

commit 1522be7765c470bbd969f3dce005ff41291f8862
Author: Sascha Peilicke <saschpe@suse.de>
Date:   Thu Dec 13 14:35:45 2012 +0100

    Relax version constraint on Webob-1.0.8
    
    And set it to WebOb 1.2 or later instead. This is consistend with requirements
    in other projects.
    
    Change-Id: I3f6c2a632d933b31baa781e367eaf615cb7b8ee9

commit a1a4862ecb12c421e77506042d7b4cc8ff891d23
Merge: f792daf a336e59
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jan 11 02:29:58 2013 +0000

    Merge "Update common openstack code from oslo-incubator"

commit f792daf2cf5f51afa739882e66ee9a5a3eb48724
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Jan 9 16:30:01 2013 -0800

    Set content-length despite webob
    
    Webob has a tendency to wipe out the content-length we set on responses.
    This causes eventlet to use chunked transfer encoding. By changing the
    order of operations, however, we can trigger eventlet to use the simpler
    and more informative Content-Length header.
    
    Change-Id: I0ed27c9e668a538bc0fc29cb6e9127dfb7fd8c78

commit c8e6d90ee6c5cf75cc4318f69faa0d160184f375
Merge: c236ab3 74a8601
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 9 23:24:11 2013 +0000

    Merge "Modify the v2 image tags to use domain model"

commit a336e59b44fb7914fb6e9e51cb276b70cac22dbe
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jan 8 14:41:26 2013 -0800

    Update common openstack code from oslo-incubator
    
    * Update to oslo-incubator commit b17b268a269c4989d76267db5c2d49d4c20bd51d.
    * Update usage of 'deferred_version_string' to 'cached_version_string'
    * Add context values 'user' and 'tenant' for context-logging
    * Remove prefixes that resolve to '%prog' in --version CLI output
    
    Change-Id: I24d9a24ad1a6e9379008ea719c9cbd22899111f9

commit 74a8601916ca1cfd1e6c1778c607614f916b728d
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Fri Dec 14 14:32:57 2012 -0800

    Modify the v2 image tags to use domain model
    
    A small patch to extend the work of porting v2 controllers to the new
    domain model.
    
    Part of implementing bp:glance-domain-logic-layer
    
    Change-Id: I4fa4105f3862822a4bec869b3b72c5751160f9d3

commit c236ab3d6e785fb9c253f3521af8b13fb2f55063
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jan 8 13:16:29 2013 -0800

    Fix broken link in docs to controllingservers
    
    Fixes bug 1095528
    
    Change-Id: I369619e622d6fa4ab64132cf5b1d7e7097587100

commit 284f12cf162eb88b06f73ce11935b650545ae973
Merge: 48cf125 01c6bcd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jan 4 01:33:34 2013 +0000

    Merge "Adding a means for a glance worker to connect back to a pydevd debugger."

commit 48cf1256a26d4758803fd775533ba7f367c5dafe
Merge: 76855c9 73c7982
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 3 14:45:52 2013 +0000

    Merge "Use imported exception for update_store_acls"

commit 76855c9bcdeb0e5cbe38f83a221e441c36e738c5
Merge: 6dabbf7 d349033
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 2 23:17:33 2013 +0000

    Merge "Port to argparse based cfg"

commit 01c6bcd9e436831d130964c1d7e5d5922bf5ecea
Author: John Bresnahan <jbresnah@redhat.com>
Date:   Sat Dec 29 05:54:56 2012 -1000

    Adding a means for a glance worker to connect back to a pydevd debugger.
    
    That patch allows a developer to remotely run a pydev debugger and a
    glance worker process connect back to it.  Two configuration options
    have been added:
        pydev_worker_debug_host <host>. Default is None
        pydev_worker_debug_port <port>. Default is 5678
    The behavior is enabled if pydev_worker_debug_host is not None.  If
    a pydev connection fails to be esstablished an exception is raised.
    
    This patch will allow remote debugging as well as more seemless
    debugging environments with IDEs like pycharm.
    
    Change-Id: I7d3f60e373632b256f0e914f18204ce223a3486e

commit 6dabbf726c85a42b663fe80d4742bb041f8bc785
Merge: 8a9fb3f cb54b00
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 2 19:51:51 2013 +0000

    Merge "Set Content-MD5 after calling webob.Response._app_iter__set."

commit 8a9fb3ff44686dcdc17f282621caf10bb2505cc1
Merge: f958b1e ce85c38
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 2 19:49:33 2013 +0000

    Merge "Fix import order nits"

commit 73c7982c9c2085cb6b24ddcf937b1193e98d5c72
Author: isethi <iccha.sethi@rackspace.com>
Date:   Thu Dec 27 17:41:21 2012 +0000

    Use imported exception for update_store_acls
    
    update_store_acls uses unimported exception HTTPBadRequest. This patch
    changes it to use in the right scope.
    
    Fixes bug 1080991
    
    Change-Id: I82b6488a9b67a27f46f492d0d08a41cd4b7f40c3

commit ce85c38158057710d88c9416bdba7685d3288582
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Mon Dec 31 22:06:29 2012 +0800

    Fix import order nits
    
    Change-Id: I972c463131ba688ab9352590eb53f5b1822ac943

commit f958b1eeaa58f0c4090185348d70632f81902e9c
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Dec 20 15:33:56 2012 +0000

    Verify size in addition to checksum of uploaded image
    
    Fixes bug 1092584
    
    Previously only the supplied checksum was verified against the actual
    checksum calculated by the backend store, with the image being killed
    on mismatch.
    
    Now we also similarly verify the supplied image size, if provided.
    
    Change-Id: I87fa3ff77715111f1095f3ebe64cd699776ec27e

commit 0e9111ca59ee5e487f23f5db91c6f8c33036410b
Author: Therese McHale <therese.mchale@hp.com>
Date:   Thu Dec 13 13:34:19 2012 +0000

    Use one wsgi app, one dbengine worker.
    
    Return to using one wsgi application but use one database engine
    per worker process.
    
    Fixes Bug #1089916
    
    Change-Id: Iea4b1b925208317c3c6ee3c9461b6723f3168405

commit 19b8b4b73b4ec02525196cff2a46095eb0e38580
Merge: 6d27925 26efa7c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Dec 18 21:22:57 2012 +0000

    Merge "Log error on failure to load paste deploy app."

commit cb54b00873e1c72c481d30fc8aef5e8c51d5e964
Author: Sascha Peilicke <saschpe@suse.de>
Date:   Wed Dec 12 11:36:14 2012 +0100

    Set Content-MD5 after calling webob.Response._app_iter__set.
    
    Discussed upstream at https://github.com/Pylons/webob/issues/86
    
    Fixes bug 1083155
    
    Change-Id: I75c634880e7abaacdcd416c27391e9fdc4874049

commit 6d279251c841b90660f92a553b2a95544e59b328
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Nov 14 11:55:58 2012 -0800

    Modify the v2 image controller to use domain model
    
    This change brings in the domain model and uses it in the images
    controller with a mind to cleaning up the controller as much as
    possible. The controller test changes are focused on different fixture
    setup and assertion format, rather than changes in behavior.
    
    Part of implementing bp:glance-domain-logic-layer
    
    Change-Id: I9c5858cb5a5ad01caf5d8283b5342e3098ac96ac

commit 76ab82e1eaab9936deca4e6363dcd92c3c9957ff
Merge: cb4ca60 a12f09f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Dec 17 23:05:52 2012 +0000

    Merge "Add registry_client_timeout parameter"

commit cb4ca60b44f2a54e6c7302c7ef26bad15bdaa7a0
Merge: beb1536 88b89b1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Dec 17 21:45:21 2012 +0000

    Merge "Allow running testsuite as root user."

commit 26efa7cd7c4b3462e64ca9d0d65ac4a6bb9f9175
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Dec 17 16:00:48 2012 +0000

    Log error on failure to load paste deploy app.
    
    Fixes bug 1091294
    
    Avoids possible silent failure of service launch when say a
    dependency such as keystone is missing (but required by the
    configured paste_deploy flavor).
    
    Change-Id: I9a63d24bcf0a93277829d24073268210d2c063d3

commit beb15361b65733b2e72a25f9466b46bdda84be2d
Merge: 7259f93 4b768a4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Dec 15 00:14:06 2012 +0000

    Merge "Configure endpoint_type and service_type for swift"

commit 7259f930a85fab66cea77afde179f555f010b312
Merge: 9c817a9 3b4dac3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Dec 14 23:33:16 2012 +0000

    Merge "Refactor multi-tenant swift store."

commit 4b768a4a847a0f5c857f4fe3f3bca720da9b3949
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Fri Dec 7 17:03:30 2012 -0800

    Configure endpoint_type and service_type for swift
    
    The swift store offers limited customization for picking out which swift
    endpoint to use for image storage. This patch adds service_type and
    endpoint_type customization, and extends these options to the
    multi-tenant configuration. Also, the multi-tenant configuration now
    honors the region configuration.
    
    Fixes #1037708
    
    Change-Id: I38054a2a681dbf05373870f6addcb9ddae7ed12e

commit 3b4dac38c487a8ecc1332f28ba13ca2459551aa7
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Dec 5 17:13:42 2012 -0800

    Refactor multi-tenant swift store.
    
    This patch attempts to provide a separation between the multi-tenant and
    single-tenant use cases of glance.store.swift
    
    Change-Id: I317855bc84c96f5541db1ffd86dc151a4a15a123

commit a12f09fa96e3798afdf340b4f3215b0b25b1db27
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Dec 12 13:25:20 2012 +0000

    Add registry_client_timeout parameter
    
    Add a "registry_client_timeout" parameter which specifies the
    time, in seconds, that an API server will wait for a registry
    request to complete.
    
    This prevents API clients hanging indefinitely in the event
    that the registry becomes unresponsive.
    
    Addresses LP bug 1089391.
    
    Change-Id: Ib27b6eecdcb65cbe644c156a0ca5cd0d0b4638dd

commit 9c817a90069b094c01dfae9663e5ee2962c0ff4b
Author: Sascha Peilicke <saschpe@suse.de>
Date:   Wed Dec 12 14:01:49 2012 +0100

    Use io.BufferedIOBase.read() instead of io.BytesIO.getvalue().
    
    (Newer) WebOb returns different different objects in Request._body_file__get,
    i.e. a io.BytesIO if either the HTTP method is PUT or POST or a
    Content-Length header is set. Otherwise it returns a io.BufferedReader.
    
        https://github.com/Pylons/webob/blob/master/webob/request.py#L264 vs
        https://github.com/Pylons/webob/blob/master/webob/request.py#L278
    
    Unfortunately, both Objects have different sets of methods, i.e. only
    io.Bytes has getvalue(). However, both objects inherit from
    io.BufferedIOBase, thus read() is available on both.
    
    Change-Id: I4a99fef0e6acbf67d9e86ff884f48f5a1cb1bc78

commit d3490339dfc9cde51ea1d0cf7b2f39f5bf180d42
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Nov 26 11:51:20 2012 +0000

    Port to argparse based cfg
    
    Sync the following changes from oslo-incubator:
    
      479f19c Add deprecated --logdir common opt
      27b2ff4 Add deprecated --logfile common opt.
      9b81289 Allow nova and others to override some logging defaults
      3557d84 Fix ListOpt to trim whitespace
      01ab910 Fix set_default() with boolean CLI options
      af18eaa Improve cfg's argparse sub-parsers support
      f21e1d9 Fix regression with cfg CLI arguments
      ceb4aa7 Fix broken --help with CommonConfigOpts
      5e9503b Hide the GroupAttr conf and group attributes
      b6d24bb updating sphinx documentation
      403509e Don't reference argparse._StoreAction
      e17deb8 Fix minor coding style issue
      0c29e1d Remove ConfigCliParser class
      5b9cb41 Add support for positional arguments
      dbc72a6 Use stock argparse behaviour for optional args
      768a147 Use stock argparse --usage behaviour
      ac180b9 Use stock argparse --version behaviour
      0787e38 Remove add_option() method
      5afead0 Completely remove cfg's disable_interspersed_args()
      5f564b2 argparse support for cfg
      d7b6397 Add a missing comma in a docstring.
      aca1805 cfg: fix required if option has a dash
    
    Changing glance-manage to use argparse sub-parsers does result in an
    incompatible change. This no longer works:
    
      $> glance-manage db_sync --config-file=...
    
    because --config-file is interpreted as an argument to the db_sync
    command rather than a global argument. Instead you now have to do:
    
      $> glance-manage --config-file=... db_sync
    
    The incompatibility is unfortunate, but the new behaviour is pretty
    standard.
    
    Change-Id: Ifd43fe6bea4abd7f85ea75e5ae65678b679acd8d

commit 7324ffd4c54fef9e5363d1a8a3432ac51d2fbf29
Author: Sascha Peilicke <saschpe@suse.de>
Date:   Mon Dec 10 19:20:26 2012 +0100

    wsgi.Middleware forward-compatibility with webob 1.2b1 or later
    
    Response.request is None by default
    (http://docs.webob.org/en/latest/news.html#b1), but is used in the
    CacheFilter WSGI middleware.
    
    Fixes bug 1045179
    
    Change-Id: I28f5ca92fe517f4f56af934799db32650e079ba7

commit 88b89b12aac0bf762dbc5479c7180aaf2ea784ab
Author: Sascha Peilicke <saschpe@suse.de>
Date:   Mon Dec 10 19:46:12 2012 +0100

    Allow running testsuite as root user.
    
    Some tests don't make sense when running as root.
    
    Change-Id: Ic7ee60a1bfda121277e9746728931af8b5d6d481

commit 3968b7cc8bfa8cb8118e63944363ca0b3057e95c
Author: Attila Fazekas <afazekas@redhat.com>
Date:   Fri Nov 30 23:49:52 2012 +0100

    Allow newer boto library versions
    
    Change the boto dependency specification in pip-requires to just 'boto'
    without version restriction, as it was before the build issue.
    
    Change-Id: Iff484f1e40fe103879ff11a611c0691486288be6

commit 399bfece8c9355c1c5bc154db642a83f0b66ad36
Merge: a1c066c 5c1c5e8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Dec 4 14:59:51 2012 +0000

    Merge "Rewrite S3 functional tests"

commit a1c066ce521f0bba227a662180a4045e61a59602
Merge: 8b0b9f3 308b832
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Dec 3 23:37:20 2012 +0000

    Merge "Add domain proxies that stop unauthorized actions"

commit 8b0b9f36f73ef4a0169b73fe08cd9d9af838c089
Merge: 27f57c6 8eca4fd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 30 05:45:08 2012 +0000

    Merge "Fixed image not getting deleted from cache."

commit 27f57c6a6bd35743f81bb57949fe78fdec2f6ecd
Merge: 5da19fa 1af85e2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 29 21:28:32 2012 +0000

    Merge "Add domain proxies that do policy.enforce checks"

commit 5da19fac2dc9c42737df96322aed51d1d45ff773
Merge: e1203a3 cae7672
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 29 19:48:45 2012 +0000

    Merge "Updates keystone middleware classname in docs."

commit e1203a351c0b1c5b878d0fc524dec214cb31235c
Merge: 78aec1c 0f26049
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 29 19:34:51 2012 +0000

    Merge "v2 API image upload set image status to active"

commit 78aec1c8f15d99694bac4e6552d3b354ab00fde9
Merge: 6a4ea12 561bec9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 29 19:34:30 2012 +0000

    Merge "Add store test coverage for the get_size method"

commit 6a4ea12c7df5759b0ec83dce82fa68adcdda6fb4
Merge: 8c839ee 3c54e05
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 29 19:29:58 2012 +0000

    Merge "Implement get_size filesystem store method"

commit 8eca4fd08b5c4071f66dedc44bf2ea54f17a1828
Author: Unmesh Gurjar <unmesh.gurjar@nttdata.com>
Date:   Mon Nov 26 03:14:00 2012 -0800

    Fixed image not getting deleted from cache.
    
    When an image is being added to cache and a DELETE request for same
    image arrives, the image remains in the 'cache' directory forever.
    Also, admin user is able to download such image. Cleaned up the
    deleted image from cache to resolve the issue permanently.
    
    Fixes LP: #1083070
    
    Change-Id: Id2b11d21b8ccecb1037eb6341ffd24a3c2e1833c

commit cae7672332b1d0a8557ca3e8e0d6518484027cc1
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Nov 28 16:10:26 2012 -0500

    Updates keystone middleware classname in docs.
    
    Change-Id: If6a5b74c2fe7855b28aaded7b93228dbd0de9845

commit 8c839ee2c99a6d18d764d1ffad4d7d8866bcae7b
Merge: d130128 a3a87e4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 28 20:23:10 2012 +0000

    Merge "Use auth_token middleware from python-keystoneclient."

commit 0f2604947f121a6ae69e6f8f8a1e48d8a7d45e7a
Author: Unmesh Gurjar <unmesh.gurjar@nttdata.com>
Date:   Tue Nov 27 04:02:00 2012 -0800

    v2 API image upload set image status to active
    
    For v2 API, updated the image status to 'active' after the image
    data is uploaded.
    
    Fixes LP: #1034787.
    
    Change-Id: Ia689b841c36ce203e9f2858b79160a2d16154f52

commit d130128dccd5faef676ee70620cf340675253218
Merge: 2e0734e 4f660f2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 28 05:52:00 2012 +0000

    Merge "Fixed deleted image being downloadable by admin."

commit a3a87e49f20938fcbe25392644b31604116c6712
Author: Yaguang Tang <heut2008@gmail.com>
Date:   Tue Nov 27 22:08:58 2012 +0800

    Use auth_token middleware from python-keystoneclient.
    
    auth_token middleware has been moved from keystone to python-keystoneclient,
    so add python-keystoneclient dependency.
    
    Change-Id: Ic4122d575b26277f68a4336c27f12a67fbdbbd20

commit 2e0734e077aeb2adfd2d1b6b9687eca00983e52d
Merge: ebcb484 3d532de
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 27 21:08:50 2012 +0000

    Merge "Use 'notifications' as default notification queue name"

commit 308b832eb18fc65eec4c02c01363455853184be2
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Nov 14 11:51:48 2012 -0800

    Add domain proxies that stop unauthorized actions
    
    This patch introduces domain objects that handle context-based
    authorization checks. With this approach, we can eventually remove
    ownership checks from the database apis.
    
    Part of implementing bp:glance-domain-logic-layer
    
    Change-Id: I30c7444220013f17dab6479f1b00f1598ab424d0

commit 1af85e279f121a5b110a9ebabc56469064e8d6aa
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Nov 14 11:42:02 2012 -0800

    Add domain proxies that do policy.enforce checks
    
    This patch introduces domain objects that handle all the policy.enforce
    checks. In this way, eventually the controller will not have to keep
    track of enforcing authorization policies.
    
    Part of implementing bp:glance-domain-logic-layer
    
    Change-Id: Ide724f5b246e50fbdb8ee7617359e1aa97bdb2ee

commit ebcb484fea7cf5cd3f02162315681e6b3be4fa00
Merge: 7165adf 39357a1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 27 16:03:06 2012 +0000

    Merge "Unused variables removed"

commit 3d532de2fa03d0f9f3e60fe5ebf36c8dada1026f
Author: Julien Danjou <julien@danjou.info>
Date:   Tue Nov 27 15:35:17 2012 +0100

    Use 'notifications' as default notification queue name
    
    All OpenStack projects uses `notifications' as topic by default, except
    Glance, let's fix that.
    
    This fixes bug #1083648
    
    Change-Id: I973164f35a9466eb543656546d3110c6430170ef
    Signed-off-by: Julien Danjou <julien@danjou.info>

commit 39357a1c757c2bc2a37a7283fc9c53c2044f9be0
Author: shrutiranade38 <shrutiranade38@gmail.com>
Date:   Tue Nov 27 15:36:31 2012 +0530

    Unused variables removed
    
    Variables api_port and registry_port were unused and hence removed.
    
    Change-Id: I65aa64a79fcd30e61f4448ec4a24285e83273620

commit 4f660f23c0f0c92bfef5fee163529c5a8f628875
Author: Unmesh Gurjar <unmesh.gurjar@nttdata.com>
Date:   Thu Nov 22 04:26:11 2012 -0800

    Fixed deleted image being downloadable by admin.
    
    Raised NotFound exception for deleted image, so that a 404 gets
    returned for download.
    
    Fixes LP: #1081941
    
    Change-Id: Ia82927719b6f7d20f8467eca12e8c91424e0f438

commit 5c1c5e89fe8a288af951c75d1f54e84ef7965b9d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Nov 25 17:13:30 2012 -0500

    Rewrite S3 functional tests
    
    rewrite s3 store functional test coverage using new style of
    direct python library calls rather than indirectly testing through
    the v1 API.
    
    Change-Id: Iab8e4034ebb0a2a7812497bdca3aa32d4a0b41bf

commit 561bec95d0e104f635110bb2e8d4c695cfe6bc39
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Nov 25 18:59:50 2012 -0500

    Add store test coverage for the get_size method
    
    This ensures the existing get_size methods return integers
    rather than strings.
    
    Change-Id: Iaad49005e68f052f3b7243fef1f56478afb1abba

commit 3c54e058d1d0e509591f94600e425f96defd338f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Nov 25 18:57:42 2012 -0500

    Implement get_size filesystem store method
    
    Change-Id: Ic8bc48c432ebc771f8f4a9274e1cbe8e69c0de5c

commit 7165adf16316d62c09925b81b4a84ff1feded61b
Merge: 4a1f5c7 b47138c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 26 22:01:53 2012 +0000

    Merge "Fixed Typo"

commit 4a1f5c7440aada258ab9e703e78bc405752a5aad
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Nov 14 11:40:45 2012 -0800

    Add an image repo proxy that handles notifications
    
    This patch hides image notifications inside the the domain layer. This
    way, eventually the controller won't have to keep track of
    notifications.
    
    Part of implementing bp:glance-domain-logic-layer
    
    Change-Id: Ie763a50ea416cae66b8015162dcdb5232a4e0a1d

commit b47138c7f73827ac8bbf3bdbcf6137292262d18a
Author: Anita Kuno <akuno@lavabit.com>
Date:   Mon Nov 26 12:00:01 2012 -0500

    Fixed Typo
    
    use of word "container" when word "disk" was required
    Fixes: bug #1082404
    
    Change-Id: I78e784d5e721a8cf0f39c6029310d1e3587c0142

commit 2857f1426a912862fbc5ae4ca5e7ef228ddfeb34
Merge: 9db02ae 9a2f309
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 26 16:44:38 2012 +0000

    Merge "Return size as int from store get call"

commit 9db02aed53b3706acab044b93128a24ce9bc6686
Merge: 45f41ff b8b3aa4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 26 16:35:02 2012 +0000

    Merge "Add pep8 ignore options to run_tests.sh"

commit 9a2f30964d190bdc0899492a621b69515c6e81fd
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Nov 25 18:37:14 2012 -0500

    Return size as int from store get call
    
    The size value needs to be comparable as integers, which
    a string won't give us. This returns size as an integer
    from a call to the 'get' method of our known stores.
    
    Change-Id: I08ff9c673735eeb5943745ae4a27d6e241101230

commit 45f41ffc9baa3688fc2bb4c80da308a1aecd941d
Author: daisy-ycguo <daisy.ycguo@gmail.com>
Date:   Wed Nov 21 15:40:26 2012 +0800

    Wrap log messages with _()
    
    Bug 1075088
    
    There are a few log messages without _(), but a lot messages with _().
    Wrap these log messages with _() in order to make the code consistent.
    
    Change-Id: I8f3c66c23c7e42d7b4ede11c26d5f9c96c39be73

commit b8b3aa407e638d38e0a871e8e3ee88fbb61de8c9
Author: Dan Prince <dprince@redhat.com>
Date:   Sun Nov 25 21:22:10 2012 -0500

    Add pep8 ignore options to run_tests.sh
    
    Updates run_tests.sh so it uses the same pep8 ignore options
    we do for tox. This fixes a slew of pep8 errors that will occur
    with recent pep8 releases using Glance.
    
    Change-Id: I0a9bb237f75eb307ee433cc6b1c5f78cd71dd02e

commit 0e5542ac4c24472b793d7b0cf8bbb223fd99b031
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Nov 25 18:33:31 2012 -0500

    Fix typo uudiutils -> uuidutils
    
    Change-Id: I5e259f02a0db09ccdc45b04fdeda2d6d428ab304

commit e6ae6e428c77cf425892eebe44acf0ef07197c43
Merge: 3f23852 e71fbcd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Nov 25 20:16:46 2012 +0000

    Merge "Add an image proxy to handle stored image data"

commit 3f23852bd76ae5e898369db5e19b798d7513dee5
Merge: 26b9f29 5daed10
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 21 17:19:54 2012 +0000

    Merge "Make cooperative reader always support read()"

commit 26b9f2922a307f3749704a4ed8cffe2048aa9514
Merge: a386310 5018ebf
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 21 17:18:26 2012 +0000

    Merge "Allow for not running pep8."

commit 5daed10fc3c7a0bbf55c8e7407ceea2c86135f95
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Tue Nov 20 12:41:48 2012 -0800

    Make cooperative reader always support read()
    
    glance.common.utils.CooperativeReader provides eventlet-friendly
    cooperation on top of backends that support either read() or __iter__().
    However, in the case of backends that only support __iter__(), such as
    images returned by store.get(...), read() is not defined. This patch
    adds read() in all cases.
    
    Fixes bug 1057322.
    
    Change-Id: I67d9b3e4d93fbefd7eeaf7cfc947ab635fe09534

commit e71fbcdc706c860f6a83e0c484df79d282dce4d7
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Nov 14 11:39:38 2012 -0800

    Add an image proxy to handle stored image data
    
    When you delete an image, it should delete (or submit a delayed delete
    for) the data in the store.
    
    Part of implementing bp:glance-domain-logic-layer
    
    Change-Id: I1ef4d6915a5fed02316b6945c99599511ea0392b

commit a3863105e3f1f84eb93e68ea61be9d8a777211f2
Merge: 8f7903d 3bc2652
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 20 00:55:59 2012 +0000

    Merge "Refactor where store drivers are initialized"

commit 8f7903d7a37183d76771fd87c7d6c5e189feedc5
Merge: f3118e9 b46563e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 20 00:48:26 2012 +0000

    Merge "Add an image repo to encapsulate db api access"

commit 5018ebfdc9df6b4e6dc443a24ff23983e70eb125
Author: Joshua Harlow <harlowja@yahoo-inc.com>
Date:   Mon Nov 19 15:26:54 2012 -0800

    Allow for not running pep8.
    
    Its not always wanted to run pep8 so we should have
    a flag that can be used to disable it so that people
    who do not want to run it can accomplish this.
    
    Fixes: bug 1080907
    
    Change-Id: I7f9dedbc7eca8421e0acf58e478c105f8b8de0c9

commit 3bc265281fd7cdaa9656f5c4c5f9325c4d1a37e1
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Nov 16 14:27:00 2012 -0800

    Refactor where store drivers are initialized
    
    The call to create_stores was happening in the v1 and v2 API
    controllers. This moves that call and the verification that
    the default_store exists into the necessary binaries.
    
    Fixes bug 1039727.
    
    Change-Id: I36542fd9b1d536d6266898766317abe110bb71a2

commit f3118e922f002d96315c874c2a1687996feb501f
Merge: 454a346 0ee5e7e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 19 19:04:26 2012 +0000

    Merge "Remove unused imports"

commit 454a346b5a533f4ebe8904f1a4d4ce925b9d13e2
Merge: 9890bcd d576f89
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 19 19:03:57 2012 +0000

    Merge "Audit error logging"

commit 9890bcdb724d0842152aeeba6982bc7c979dfdea
Merge: 5acfb0c e063993
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 19 14:07:57 2012 +0000

    Merge "Stop logging all registry client exceptions"

commit d576f897bcf4877a478ced10af05e3c79455e02a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Nov 16 16:23:34 2012 -0800

    Audit error logging
    
    Reduce log level from error to info/debug in several cases
    where users do something silly. The operator of Glance
    does not need to be alerted with an ERROR log in these
    cases.
    
    Fixes bug 1079211.
    
    Change-Id: I09d86c8727530cf58f22446493ef9c4789d5d6cb

commit e063993246704caea9d19ea9cc975921dcdff78a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Nov 16 15:51:54 2012 -0800

    Stop logging all registry client exceptions
    
    Not all exceptions need to be logged as ERROR in the glance-api
    log when - for instance, a user asking for an image that does not
    exist doesn't mean an ERROR actually occurred. This logs the exception
    name at INFO level. An ERROR won't be logged at all, even in
    the case of a 500-level response from glance-registry. An operator
    would be alerted with an ERROR log in the glance-registry log in that
    case.
    
    Fixes bug 1079211.
    
    Change-Id: Ie2bba3105f8d9f3de97bc50132fb046baf710a90

commit 0ee5e7e8486edddc32b9df8cfa77478266f40b5c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Nov 16 12:04:12 2012 -0800

    Remove unused imports
    
    Change-Id: Ie5c4e7258a857d73c852897c7eef99bd1d062182

commit 5acfb0cb69d4ce9db4f0207c114262ea40cc374c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Nov 16 10:39:03 2012 -0800

    Add note about urlencoding the sql_connection config opt
    
    Fixes bug 1075676.
    
    Change-Id: Ib4149277b6ec060350a3a01496e3b01c26c19181

commit b46563eda7d2f1ca00e43aa33235df9a572039a3
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Nov 14 11:37:47 2012 -0800

    Add an image repo to encapsulate db api access
    
    This patch adds glance.db.ImageRepo which provides a Repository-like
    abstraction over image persistence. In the process of testing, a few
    additional changes to the simple and sqlalchemy db apis were needed.
    
    Partially implements bp:glance-domain-logic-layer
    
    Change-Id: Ie35e427aa8fc7f3bece8d4d383afde4cc02b2096

commit 6d57df0eda1459436d8302ed96387a9ed3af5692
Merge: 58d35dd 43ba08d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 15 19:09:51 2012 +0000

    Merge "Add an image domain model and related helpers."

commit 58d35dd5073e921c4e44f7c34a128f2dba45792b
Merge: 588abd9 4c86cf4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 15 01:39:33 2012 +0000

    Merge "Fix simple db image_get to look like sqlalchemy"

commit 588abd9162dc3a40a6a6c41beb31dccdc9405480
Merge: f76d884 1758e86
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 14 21:49:53 2012 +0000

    Merge "Return 403 on images you can see but can't modify"

commit f76d88455e362ee8ea99cd41d1399a1fb0b29f55
Merge: 517739f 3aea932
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 14 21:12:25 2012 +0000

    Merge "Ensure strings passed to librbd are not unicode"

commit 43ba08d8aa38a7c0cd44e3ff90b73d6c0e33a63d
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Wed Nov 14 11:35:23 2012 -0800

    Add an image domain model and related helpers.
    
    This patch is the first in a series refactoring the logic around image
    manipulation. In this patch, we add a domain module that has Images and
    ways of constructing them. In anticipation of proxy classes added in
    subsequent patches, we also define some base classes to make proxying
    simpler.
    
    Partially implements bp:glance-domain-logic-layer
    
    Change-Id: Ie72f2f86cfcbd15e41c32deed3626290f2bf0e6b

commit 4c86cf4b6517880b1c59d477612e061ec151ac95
Author: Nikhil Komawar <nikhil.komawar@rackspace.com>
Date:   Wed Nov 14 19:32:07 2012 +0000

    Fix simple db image_get to look like sqlalchemy
    
    image_get in simple db was repeating logic that exists in helper
    is_image_visible method. Also, sqlalchemy implements the same way, so
    now this method behaves in both dbs.
    
    Fixes bug 1077256
    
    Change-Id: I5285027a24157750d7c322990aa4074e2b1087c7

commit 517739f9f187c5a99dbf615277ebdda78f17cdb2
Merge: bb92fc7 7c6f9de
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 14 03:22:12 2012 +0000

    Merge "Code cleanup: remove ImageAddResult class."

commit bb92fc701d5eba9e66f0909d376ced1b3f47631b
Merge: d635c41 a26f361
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 14 03:18:57 2012 +0000

    Merge "Use generate_uuid from openstack common."

commit 1758e866602be17f3f96a8621f8496999ca8ac9b
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Tue Nov 13 16:30:37 2012 -0800

    Return 403 on images you can see but can't modify
    
    Visible images return 404 (Not Found) when you try to modify them and
    are not allowed. This patch changes this return to 403 Forbidden which
    more accurately reflects the situation, in light of the fact that we are
    not trying to hide the existence of the image in this case.
    
    Fixes bug 1078520
    
    Change-Id: I70e6e273aeaef51dad40cf001308d3a817bdced5

commit d635c418ed22f5888adac67a4245dfcd1e3629ec
Author: Nikhil Komawar <nikhil.komawar@rackspace.com>
Date:   Fri Nov 9 13:34:39 2012 -0500

    Fixes is_image_visible to not use deleted key
    
    The 'is_image_visible' method is looking for deleted members while
    they are already being filtered in the query. Registry while validating
    all the members gets a KeyError as the key deleted does not exist.
    
    Fixes Bug: 1077106
    
    Change-Id: Ia53b6be3b2f740357df86e6c7a6a257a990c3aab

commit 2bd8ee5cde5b16619bbb7be582a6fec194d38deb
Merge: cfd26c9 bf397e3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 13 15:36:08 2012 +0000

    Merge "Lowering certain log lines from error to info"

commit 3aea9320d20d0291c5b4b027a585370d8e658a95
Author: Josh Durgin <josh.durgin@inktank.com>
Date:   Fri Nov 9 09:28:19 2012 -0800

    Ensure strings passed to librbd are not unicode
    
    librbd rejects unicode by throwing an exception. If the location uri
    was unicode, this would result in deletes failing. Convert all rbd
    StoreLocation properties to ascii strings to avoid this problem.
    
    Fixes bug #1075580
    Signed-off-by: Josh Durgin <josh.durgin@inktank.com>
    
    Change-Id: I445902bb1b72b8c814585f1481e6bf9e758b4e07

commit cfd26c93a2b3c2bcf2cf262ce28a77006cef8caa
Merge: 45d8d1d 4ce79ab
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 12 21:59:46 2012 +0000

    Merge "Update uuidutils from openstack common"

commit 45d8d1dbc99ca3d46fc14edf3e544ce07ded27af
Merge: 6e99270 9669067
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 12 21:01:50 2012 +0000

    Merge "Prevent infinite respawn of child processes"

commit a26f3613ba6c4ece0304a0f3b53fa2c9a481ae0b
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Sun Nov 11 22:43:08 2012 -0500

    Use generate_uuid from openstack common.
    
    Change-Id: Ie1b55df2301b5ca276571117386a0625e039adc2

commit 4ce79abbe4824b9eca4b10462c57d0dd2df9729d
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Mon Nov 12 15:38:43 2012 -0500

    Update uuidutils from openstack common
    
    Change-Id: I9f4928ca818859bf2f25543b2fb3819ab5211482

commit 7c6f9de765b973663fa51a1902e9ba9b406b05ac
Author: Tim Daly, Jr <timjr@yahoo-inc.com>
Date:   Mon Nov 12 18:57:36 2012 +0000

    Code cleanup: remove ImageAddResult class.
    
    Remove the unused ImageAddResult class and fix the misleading comments
    implying that it was used.
    
    I did rewrite the code to use ImageAddResult, but I don't think it was
    an improvement.  I think tuples are perfect for simply grouping things
    to return them together.
    
    Change-Id: Iabf0022b1a95e25a8111dbc38f7be4be3f5e6f59

commit bf397e3c12f528f9ad537921f698dd66f6b6f031
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Nov 9 14:11:26 2012 -0800

    Lowering certain log lines from error to info
    
    Several log statements were logging as ERROR that do not necessarily
    represent an ERROR having occurred. The offending statements have
    been lowered to INFO.
    
    Change-Id: I511ef7230c610b59d6e9121a557bbc266fbf658c

commit 9669067e91ceffcd462f9177d1e2c446dfb347ea
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Nov 9 13:40:35 2012 -0800

    Prevent infinite respawn of child processes
    
    Rather than looking for an exit code of 2 to prevent child processes
    from respawning, we look for any non-zero status.
    
    Fixes bug 1074132.
    Fixes bug 1065197.
    
    Change-Id: I74ac13737d8a9b8710a8268eb1d67fbe5e75d491

commit 6e99270283e1d514c682ed957b57852b8adff5f4
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Nov 9 12:58:04 2012 -0500

    Make run_tests.sh run pep8 checks on bin.
    
    This updates the pep8 checks in our run_tests.sh script
    so that we are scanning the bin directory.
    
    Change-Id: I0ad51b7747edbcb0dbcfb72f92a43dd8f2efc768

commit 4039f3aa3ca9615314c29a2d15cb0e1edf7bfb51
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Nov 9 12:56:25 2012 -0500

    Make tox.ini run pep8 checks on bin.
    
    This updates the pep8 checks in our tox.ini file so that we are
    also scanning the bin directory.
    
    Change-Id: I2c0520c1239fcbda6b5b70f2d20709b96b94a4c5

commit 859fd1c40906f66ccaedf791717c6c49ca97cff1
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Nov 9 12:55:56 2012 -0500

    Pep8 fixes to bin/glance* scripts.
    
    Change-Id: I92a4f39cfbf961e1cc507748178d67813dc06399

commit db829782be3198bc4c3e4e9e448cfbaa859da46d
Merge: b591304 4c80ec1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 9 04:35:10 2012 +0000

    Merge "Unit test remaining glance-replicator methods."

commit b591304b8980d8aca8fa6cda9ea1621aca000c88
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Thu Nov 8 10:56:07 2012 -0800

    Ensure authorization before deleting from store
    
    This fixes bug 1076506.
    
    Change-Id: I3794c14fe523a9a27e943d73dd0248489d2b91f6

commit cf655deadd7d5483b32ad0a8b40c71ccca44b543
Merge: 6cd87ae 9dae32d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 7 23:36:23 2012 +0000

    Merge "Use openstack common timeutils in simple db api"

commit 6cd87ae407904970cad7a0f50e48859c612da64a
Merge: 6ab0992 231de61
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 7 23:36:08 2012 +0000

    Merge "Port uuidutils to Glance"

commit 231de615b20ff50298ce8105e8ebc0c40f54d4be
Author: Zhiteng Huang <zhiteng.huang@intel.com>
Date:   Wed Nov 7 12:00:00 2012 +0800

    Port uuidutils to Glance
    
    Recently openstack.common had a new module to handle uuid, this patch
    port that into Glance.
    
    Change-Id: I9a25de546f2519c327f9ae4645f9fe33a91fced8

commit 6ab0992e5472ae3f9bef0d2ced41030655d9d2bc
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Wed Nov 7 09:59:56 2012 -0500

    Delete from store after registry delete.
    
    Because we rely on the registry to determine authorization in the glance
    v1 api, we must attempt a registry delete before deleting an image from
    the image store.
    
    This patch includes the test for the bug, which was posted separately
    on the bug.
    
    Fixes bug 1065187.
    
    Change-Id: I1a06b7c7421524066c684539e2f3516c4ed2c475

commit 4c80ec1931dce9f8a6e082ca48e6b6b7944e05b0
Author: Michael Still <mikal@stillhq.com>
Date:   Tue Oct 30 11:36:03 2012 +0100

    Unit test remaining glance-replicator methods.
    
    Command line methods are not yet tested, but this covers pretty much
    everything else.
    
    Change-Id: I236dd8ba022ab0f9548bfe823458e99d221b2ab9

commit 9dae32d60fc285d03fdb5586e3368d229485fdb4
Author: Mark J. Washenberger <mark.washenberger@markwash.net>
Date:   Tue Nov 6 20:26:54 2012 -0800

    Use openstack common timeutils in simple db api
    
    This patch switches out all direct use of datetime in the simple db api,
    fixing bug 1075843.
    
    Change-Id: Icbbaa9215588fc9bbe2b83fa156025acef6d9457

commit 6b2300fb0c01820b7e45ba2806c1f2468394bd50
Author: Michael Still <mikal@stillhq.com>
Date:   Sat Oct 27 12:46:10 2012 +1100

    Unit test replication_dump.
    
    Extend unit test coverage to glance-replicator's replication_dump
    method.
    
    Change-Id: I91928c2f73e5394782652af58ab4790b1ecc6844

commit cdc40f6623278bd13399c3a32abdf3f948465823
Merge: 22a004d c0b87ce
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 31 22:02:14 2012 +0000

    Merge "DRY up image fetch code in v2 API"

commit 22a004da17199fecce110e73fff1c7f9ba460f31
Author: Sean Dague <sdague@linux.vnet.ibm.com>
Date:   Wed Oct 31 09:25:10 2012 -0400

    pin sqlalchemy to the 0.7 series
    
    sqlalchemy 0.8 beta has hit mirrors, and changes dependencies, thus
    breaking jenkins. This pins it to 0.7 series until all the projects
    agree to move forward to 0.8.
    
    Fixes bug #1073569
    
    Change-Id: I7b13ef48730e6499442a4a2a9d28b59e0121acf0

commit adbad3a0e67ca0e27e3f203ba63a7e50255097ef
Merge: 1144379 57b8817
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 30 18:53:12 2012 +0000

    Merge "Return HTTP 404 for deleted images in v2"

commit 11443791d393486b5fc50d8deea704d255c5f862
Merge: 0e84ae9 ca0e6c0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 30 18:52:53 2012 +0000

    Merge "Return 403 when admin deletes a deleted image"

commit 0e84ae9caa22a872b7bbbc02d93a4dc553de2206
Merge: abaaa66 950e700
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 30 18:01:15 2012 +0000

    Merge "Fixes deletion of invalid image member"

commit c0b87ce3282f98dadb09a5f68ef3905a73fa55fa
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Oct 30 08:57:04 2012 -0700

    DRY up image fetch code in v2 API
    
    Change-Id: Ic6aaaf8fd671a96d72c1fb081f982024610ab334

commit abaaa664d9e5e292b5882ce4772889bdc2d3cfc0
Merge: 0dc333a 6825358
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 30 15:51:27 2012 +0000

    Merge "Pull in a versioning fix from openstack-common."

commit ca0e6c09ab81f8941f7657f28682a74d5154bcba
Author: Unmesh Gurjar <unmesh.gurjar@nttdata.com>
Date:   Tue Oct 23 03:34:31 2012 -0700

    Return 403 when admin deletes a deleted image
    
    1. Returned a 403 Forbidden error when an admin user tries to delete a deleted
    image.
    2. Added unit test coverage.
    
    Fixes LP: #1060944
    
    Change-Id: I1a5c4ca18e2e70d8a614b3132bfcea1f56c5f59c

commit 0dc333a472ef36f62b6e68cb6c355eba55ae2d8d
Merge: 910852a a88b8d8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Oct 26 19:21:15 2012 +0000

    Merge "implements selecting version in db sync"

commit 68253587f0d5a5b5f0dde63dd6036c7977e4f3d6
Author: Monty Taylor <mordred@inaugust.com>
Date:   Fri Oct 26 11:09:16 2012 -0400

    Pull in a versioning fix from openstack-common.
    
    Fixes bug 1059634. Related to I6cff4ee7f6c1dc970397b66fd2d15fa22b0a63a3
    
    Change-Id: I4c8daa8bf4a57849bd8d1e512a388d982f79b7d5

commit 950e700b4fe69f001b228d11c8014ebbdfa7b10b
Author: Unmesh Gurjar <unmesh.gurjar@nttdata.com>
Date:   Tue Oct 9 03:06:00 2012 -0700

    Fixes deletion of invalid image member
    
    This fixes the 500 error on deleting an invalid/non-member tenant of an image.
    
    Fixes LP: #1060868
    
    Change-Id: I5a2dc56690d7525127be1a8843004d075a3fe5bb

commit 57b8817bb699628c60636479f2cfb36b7d2a7bca
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Thu Oct 25 19:46:10 2012 +0000

    Return HTTP 404 for deleted images in v2
    
    For admin contexts, the db api will return deleted images. This patch
    manually checks for deleted images in the v2 controller code to treat
    these cases as if the images didn't exist.
    
    Fixes bug 1071446
    
    Change-Id: I33075f94e9d560a279085e2afd18c8052f57d60b

commit 910852a23751c84381064e257bf62966901e344e
Author: Michael Still <mikal@stillhq.com>
Date:   Thu Oct 18 11:43:16 2012 -0700

    Update common to 18 October 2012.
    
    Update glance's cache of openstack-common code to commit
    9a8c1d7e1a537e6580be2be1630baefc910de1de. policy.py updates will be
    merged separately.
    
    Change-Id: I954c6d27c3f5967f2f1c00e9023333a13c87c247

commit a1c9364e1d66d1517d72389d83b31b9b17695119
Merge: 11fd794 1916600
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 25 17:56:46 2012 +0000

    Merge "add command "status" to "glance-control""

commit a88b8d8dcbbdfc1ddcda29bbffbaa44fd149b93a
Author: Sathish Nagappan <sathish.nagappan@nebula.com>
Date:   Thu Oct 4 02:27:20 2012 -0700

    implements selecting version in db sync
    
    Fixes Bug #993284
    
    db_sync compares the current version with the specified version
    and upgrades or downgrades accordingly.
    
    Change-Id: If0e0608ac04c264df7964f8cf6a46e9b156eee49

commit 11fd794f7ec802d20fa68b4fcd2f91a7c4348f6a
Merge: cd54927 62a1b28
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 25 03:04:56 2012 +0000

    Merge "Disallow admin updating deleted images in v2 api"

commit cd549278d19512a31eb0e9292957d23f6ae1b5d9
Merge: 54607f7 f49bc42
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 25 01:44:36 2012 +0000

    Merge "SSL functional tests always omitted"

commit 1916600d5c12043f00362ab3da54d0ef83c8ea3c
Author: Sathish Nagappan <sathish.nagappan@nebula.com>
Date:   Thu Oct 11 20:45:46 2012 -0700

    add command "status" to "glance-control"
    
    fixes Bug #955457
    
    The status command displays whether or not a service is running.
    
    Change-Id: Ib4be08a182465d94f33d6ec64d0c089ddc411e3f

commit 62a1b286070d0f9bfc5cb069b30a1cecb8b03a65
Author: isethi <iccha.sethi@rackspace.com>
Date:   Tue Oct 23 22:19:23 2012 +0000

    Disallow admin updating deleted images in v2 api
    
    Returns a 403 Forbidden error when an admin user tries to update a
    deleted image in v2 api.
    
    Fixes bug 1069940
    
    Change-Id: Icfc599320564524e69bc7c77f1c3d668631786f5

commit 54607f764df4c35efa7c12cfcfbb488b833f2427
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Fri Oct 5 21:01:01 2012 +0000

    Clean up is_public filtering in image_get_all
    
    Prior to this patch, is_public filtering was applied in a
    counterintuitive and potentially dangerous manner. In particular,
    is_public=True would return images where is_public=False. Also, in a
    variety of cases (that weren't exposed in the http api) users could list
    private images that they do not own. This patch fixes those problems by
    making is_public filtering work the same as any other filter and adding
    separate visibility restrictions that always apply to list queries. To
    preserve the existing behavior of the v1 api where admins by default do
    not see all private images, admin contexts are deescalated to normal
    contexts in certain situations.
    
    With this change, pep8 ignores E712 because it is normal to use
    "column == True" in sqlalchemy.
    
    Fixes bug 1060481.
    Fixes bug 1061331.
    
    Change-Id: I086bd9273e337ebe184902b6f12bc8c9a7fc5867

commit 8fdc05aa7df14481ae8ccfe0673081229b2debc3
Merge: ce1a0d1 1e49c85
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 23 22:20:23 2012 +0000

    Merge "Merge in update openstack-common policy code"

commit ce1a0d19044fe8faa0de719129772aac96d2c4d9
Merge: 9abf2bf d032ad5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 23 20:54:32 2012 +0000

    Merge "Fix scrubber not scrubbing with swift backend"

commit 1e49c857db2995f4d70c3eff51b4273441b6eb00
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Tue Oct 23 13:57:03 2012 -0500

    Merge in update openstack-common policy code
    
    Updates Glance-specific policy glue code to eliminate deprecated
    openstack-common policy interfaces.  Also cleans up policy code
    to allow for returning fine-grained policy values.
    
    Change-Id: I2951a0de3751bd2ec868e7a661070fed624e4af2

commit 9abf2bfb1352de33f08f9334e9bcd06807e39d38
Merge: ecbda1d baf4026
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 23 18:42:29 2012 +0000

    Merge "Change useexisting to extend_existing to fix deprecation warnings."

commit ecbda1d5ac2604812f4e0c4e47b3ac73eec29d86
Merge: 76421a7 9045e8a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 23 17:17:56 2012 +0000

    Merge "Add OpenStack trove classifier for PyPI"

commit 76421a770d487923c415b965f41164e812b650a0
Merge: 3e532bb 6d05744
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 23 16:49:32 2012 +0000

    Merge "Add support for multiple db test classes"

commit f49bc4215a92eb124b3774246f3000ff6356b492
Author: Tom Hancock <tom.hancock@hp.com>
Date:   Mon Oct 8 14:11:45 2012 +0000

    SSL functional tests always omitted
    
    Fixes LP bug #1063829
    
    This change fixes the path to the cert and key files for
    SSL tests such that the tests aren't always skipped.
    In addition, it fixes up the existing tests to complete.
    
    Change-Id: I4705a568918b29a877151ebfed43200ef4e993f7

commit d032ad5d412d4bb77f9bfb7c7fca424399f80c42
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Tue Sep 25 12:43:35 2012 +0100

    Fix scrubber not scrubbing with swift backend
    
    It seems the fix for bug #1052537 was incomplete, as I have found
    glance-scrubber is still not completing it's work when run against a
    swift backend.
    
    With more investigation it seems the proper way to execute a
    starmap/imap is to consume it within a loop. This can be replicated by
    taking the simple web crawler example from http://eventlet.net/doc/ and
    removing the for loop from around the imap call.
    
    Also:
    * Add new test to check this failure against Swift (respects the
      GLANCE_TEST_SWIFT_CONF environment variable).
    
    Fixes bug 1056127
    
    Change-Id: I2d289666b99f3216a6d424dbbacbd2d10899263d

commit 3e532bb746314bb843c092f3f69b38c8e5cc9d5b
Merge: cd8f81e b075e90
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 23 04:10:57 2012 +0000

    Merge "Add noseopts and replace noseargs where needed to run_test.sh"

commit 9045e8a2ed8dcb835395766f02da4ecce8c82c69
Author: Doug Hellmann <doug.hellmann@dreamhost.com>
Date:   Mon Oct 22 18:27:14 2012 -0400

    Add OpenStack trove classifier for PyPI
    
    Add trove classifier to have glance listed among the
    other OpenStack-related projets on PyPI.
    
    Change-Id: I2324430e54dc8057286c4e926a7f5d8691cc13fc
    Signed-off-by: Doug Hellmann <doug.hellmann@dreamhost.com>

commit cd8f81e568cd7c345874ec5e3598bcdfbb5605d4
Merge: 24a6aed 6eb5448
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 22 18:33:01 2012 +0000

    Merge "Disallow updating deleted images."

commit 6eb54489fb4f82285bd6e29efca09333eee93516
Author: Unmesh Gurjar <unmesh.gurjar@nttdata.com>
Date:   Mon Oct 22 07:38:33 2012 -0700

    Disallow updating deleted images.
    
    1. Return a 403 Forbidden error when an admin user tries to update a deleted
    image.
    2. Also added unit test coverage.
    
    Fixes LP: #1060930
    
    Change-Id: I8290c8c9f1bcbbfbff7d54f141bdcfa1c40aab6f

commit 24a6aed5baab342fc5a034109f700837d0d615a5
Author: Michael Still <mikal@stillhq.com>
Date:   Sat Oct 13 10:41:37 2012 +1100

    Unit test replication_size.
    
    Continuing to improve the unit test coverage of glance replicator.
    
    Change-Id: I1ac5b6b2afe896b93a59526850dc617cce97eb64

commit b075e90c8df094929601d73d05b446fbaff6fa69
Author: Gerardo Porras <gporras@yahoo-inc.com>
Date:   Wed Oct 17 16:00:48 2012 -0700

    Add noseopts and replace noseargs where needed to run_test.sh
    
    Add of noseopts to the run_tests script so users can be
    able to run tests adding extra options to be passed to
    nosetests.
    This option is currently in keystone but not in glance.
    Fixes bug 1065758
    
    Change-Id: I7c78749adb90b126da5bd9580da6bfd7c9e1bf54

commit e56102614fb9ca09bcd04bf786c28a594139acb8
Merge: 0f79b8e a9dd12e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 18 19:49:20 2012 +0000

    Merge "Fix fragile respawn storm test"

commit 0f79b8ef6e05e2071da795fd1f524f6bdb8e858d
Merge: 1a20651 04b0ed7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 18 19:48:49 2012 +0000

    Merge "Fix glance filesystem store race condition"

commit 1a20651030b21b74cfa182c79710587b65c1d3e3
Author: Rainya Mosher <rainya.mosher@rackspace.com>
Date:   Tue Oct 16 14:25:41 2012 -0700

    Setup the pep8 config to check bin/glance-control
    
    Fixes bug 1067518.
    
    Change-Id: I01abbf9571f303b5d20739312300a2f6b9d5a7b7

commit baf402652b578ade15263c5c9357797cf04ec824
Author: David Ripton <dripton@redhat.com>
Date:   Mon Oct 8 15:24:45 2012 -0400

    Change useexisting to extend_existing to fix deprecation warnings.
    
    This squelches a deprecation warning during installation.
    
    We're already using extend_existing in other places, so I don't
    think this causes any new version compatibility issues.
    
    Fixes bug 925609.  (Already marked fixed, but this hits more cases.)
    
    Includes some merges with a whitespace-cleanup fix.
    
    Change-Id: Ia166e9184ed3e13753c5669a1006a3711738319a

commit 6e43a9691bc2d69bca6a4e355a46718e8222f5e7
Merge: fd8e6cf c4b7220
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 15 00:53:58 2012 +0000

    Merge "Call setup_s3 before checking for disabled state."

commit a9dd12edfef35edef59f9479cf538de6746824d9
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Sat Oct 13 23:47:02 2012 +0000

    Fix fragile respawn storm test
    
    This test was fragile in part because it was using an awkward and
    imprecise shell command to find the glance api worker processes. This
    change modifies the query to specifically target the children of the api
    process under test.
    
    Fixes bug 1049408
    
    Change-Id: Ia67dd42c3f3f6970075d046d9fc8623c736ae4a6

commit 04b0ed7ae4966259aa1967dc7e5ebb093be583c8
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Sun Oct 14 00:03:26 2012 +0000

    Fix glance filesystem store race condition
    
    Fixes bug 1066416
    
    Change-Id: I94c57b79efa251c5e11643e13052a549ab487dae

commit 6d05744f2a6452fde56941cebc7cd7fc00eba53e
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Wed Oct 10 05:16:19 2012 +0000

    Add support for multiple db test classes
    
    Change-Id: I346c29a8b156fd3ccd6f388f337b4291d3c0d12c

commit fd8e6cf371f4f60bd62ef51aedabb06eee39ad81
Merge: 3758b19 6c6863b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Oct 13 03:12:01 2012 +0000

    Merge "Don't parse commandline in filesystem tests"

commit 3758b19ca2076ded184d32ef0d3ae8332eb73979
Merge: bc7d6c5 61f3e20
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Oct 13 02:54:27 2012 +0000

    Merge "change the default sql connection timeout to 60s"

commit bc7d6c5c7dea662ea726519ebc8215d10ec02a36
Merge: 99ebf10 d1f8e8b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Oct 13 02:17:59 2012 +0000

    Merge "Add insecure option to registry https client"

commit 99ebf103d4c549a71e084aa5de207a6dcf956c41
Merge: 74bdd39 cb64f58
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Oct 12 21:58:56 2012 +0000

    Merge "Clean up pep8 E128 violations"

commit 74bdd39488d655903853a1e2d02c9cf27863ccfe
Merge: 251bd84 4cec17b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Oct 12 12:25:14 2012 +0000

    Merge "Correct conversion of properties in headers"

commit 251bd84e641721cf15fb8cb94d0167aa5a8c30ef
Merge: 0d6e51a 4c30b26
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Oct 12 03:25:56 2012 +0000

    Merge "Add test for v2 image visibility"

commit 0d6e51a8da0edaacbf29dc0abbf7339a3d59c9d8
Merge: ddc26ef b86e1c3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Oct 12 03:25:24 2012 +0000

    Merge "Add test for v1 image visibility"

commit ddc26ef60b22d9d22bc77eabb5315f9adc158739
Merge: d1ecf8c 7c48c11
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Oct 12 03:24:51 2012 +0000

    Merge "FakeAuth not always admin"

commit d1ecf8cadebb6aa4e94ace12cb23b5ec93cc1d21
Merge: 298b8d8 b8ff132
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 10 20:56:28 2012 +0000

    Merge "Add GLANCE_TEST_TMP_DIR environment var for tests."

commit 298b8d8150e35b1b847d2901415bc30f5ade1c56
Merge: f4ceb04 bcafbd2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 10 19:55:46 2012 +0000

    Merge "Multiprocess respawn functional test fix"

commit 6c6863bea9e8014e5f5036be106a2a08c6f7d553
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Wed Oct 10 16:31:01 2012 +0000

    Don't parse commandline in filesystem tests
    
    This fixes another instance of bug 1056420.
    
    Change-Id: I50d80aa6fcbb50044c623f680a13356d8eeac475

commit f4ceb0444c308b9fde8fbb1f8cee9e5861a53cbd
Author: Michael Still <mikal@stillhq.com>
Date:   Sun Sep 30 21:10:01 2012 +1000

    Improve test coverage for replicator's REST client.
    
    Change-Id: I63d9c589b7604ef24801f7b3eb0ce0e4fb5d7ec2

commit 4cec17bc86f33b0968e57e551d60c305d7d2cd41
Author: Michael Still <mikal@stillhq.com>
Date:   Sun Oct 7 23:45:55 2012 +1100

    Correct conversion of properties in headers
    
    Resolves bug 1063217. Started life as part of
    I63d9c589b7604ef24801f7b3eb0ce0e4fb5d7ec2.
    
    Change-Id: I91611fdfeaf57320e65669f4e8d75f984ede4523

commit 4c30b2625bff0aaa014cb4f0357b82df075d3c66
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Mon Oct 8 19:41:14 2012 +0000

    Add test for v2 image visibility
    
    These tests just characterize the existing behavior in order to
    protect us from unintentional changes.
    
    Change-Id: If7826eec62b8f5f8d6ab6d8aec3d6c0f8f00681d

commit 61f3e208711c4f38bd38076d2af5cc96c4aa23aa
Author: Pádraig Brady <pbrady@redhat.com>
Date:   Wed Sep 26 16:51:01 2012 +0100

    change the default sql connection timeout to 60s
    
    Previously the check was done only for 10s.
    This was seen to fail when booting a heavily loaded system.
    This change also aligns more closely with
    the larger timeout used in nova.
    
    Fixes bug: 1056976
    Change-Id: I9c1ca9ff97a79a96d2a8230ed1aa08c17ae4b8fa

commit b86e1c3218170d61034b3ff62ab08a3db03f1093
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Fri Oct 5 22:13:19 2012 +0000

    Add test for v1 image visibility
    
    These tests just characterize the existing behavior in order to protect
    us from unintentional changes. To support the tests, the
    FakeAuthMiddleware was changed to take a tenant 'none' to mean the
    context should have tenant = None.
    
    Change-Id: I4f0d771a6c45dedc7b1a0d2a735dbf4fb8cc1322

commit 7c48c113c6f3ed783edb16701748041e5ad921f1
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Sun Oct 7 02:12:52 2012 +0000

    FakeAuth not always admin
    
    The FakeAuthMiddleware was defaulting to admin=True for request
    contexts. This creates a situation where it is impossible to test
    non-admin requests in some situations.
    
    Change-Id: I949f708efed9f07a43b8506870c5b38fce4b3752

commit b8ff132629a0aab88432a8421626d69f04a82071
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Oct 9 07:17:19 2012 -0400

    Add GLANCE_TEST_TMP_DIR environment var for tests.
    
    Adds an optional environement variable called GLANCE_TEST_TMP_DIR
    which can be used to control the base temp directory used when
    running Glance tests. If unset the default is still '/tmp'.
    
    Change-Id: I70e11cedf4b9e89963413623d1ea3c17b8b80326

commit c4b72204361497831384caad0582482b3dbb9559
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Oct 9 07:14:41 2012 -0400

    Call setup_s3 before checking for disabled state.
    
    Updates the Glance TestS3 suite so that it calls setup_s3
    first to ensure that self.disabled is set to False before we
    test for it.
    
    Fixes LP Bug #1064319.
    
    Change-Id: I66d279eb216160c175339aa1750c6868817290d9

commit d1f8e8b009e22836a32c9e4930a89eba891293c7
Author: Tom Hancock <tom.hancock@hp.com>
Date:   Mon Oct 8 13:14:24 2012 +0000

    Add insecure option to registry https client
    
    This fixes LP bug #1063793.
    
    This adds a new API config option registry_client_insecure
    (default false) which optionally allows not to specify a ca
    file for registry connections from the API server.
    The default is false so existing behaviour is
    unchanged unless this option is specified.
    Adding this option makes the registry symmetric wrt the API
    with which you can connect using clients with --insecure
    
    Change-Id: I4fa462cd68afaf14f7d7de6c572980a41c0849d6

commit cb64f58b991ff5a958cce9d904c7096cce095393
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Thu Sep 20 14:06:57 2012 +0800

    Clean up pep8 E128 violations
    
    Fixed E128 errors
    All ignores are to be removed in the next sequence of patches
    
    Change-Id: I3ccff7df8c382f83ae6aa9aa6a7f16324c3aec75

commit 46d38734ec179298624144cbbffe8e357ecc2c14
Merge: eed7baf 4e4092e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 8 17:12:01 2012 +0000

    Merge "Remove unnecessary set_acl calls"

commit eed7baf6df64ef2707bb553b470ac9ca9deca48f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Sep 21 21:18:51 2012 -0700

    Rename non-public method in sqlalchemy db driver
    
    The can_show_deleted method is only used internally
    to the sqlalchemy db api, so rather than make it seem
    like part of the public api, prefix it with an underscore.
    
    Change-Id: I0b78c8073471d96f8897f7bec2e2e04d152f0416

commit 277f075d91bb945f01c09be3f40a919924f724b4
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Sep 21 14:24:07 2012 -0700

    Add image_member_update to simple db api
    
    The simple db api didn't have an image_member_update method. This
    patch implements that missing method. Additionally, this has a
    functional test to ensure image_member_update exists and works
    as expected.
    
    Related to bp glance-simple-db-parity
    
    Change-Id: Iabd310ee55047d625b804b96b537c3c0350e3466

commit bcafbd2da2a9b8c361cd154925958f940e8cbce2
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Oct 4 14:52:59 2012 +0000

    Multiprocess respawn functional test fix
    
    In 'test_interrupt_avoids_respawn_storm' the environment variable
    'USER' was being used to determine if the glance-api processes had been
    spawned correctly. This method doesn't work when running in a fakeroot
    environment.  Switch to use the current UID instead which works in
    both cases.
    
    Fix for bug 1061637.
    
    Change-Id: I79e36ef02ed2adb1c951222d105d7302f4190f84

commit 52a1a554c536efc2cf6e8e8f08a5e7b5855bb588
Merge: 7e14fc3 d03e762
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 2 21:21:52 2012 +0000

    Merge "image_member_* db functions return dicts"

commit 7e14fc3cb6bf32cb8ede8733508bdf9aa2ab48a6
Merge: 00c3815 17e3256
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 2 01:54:31 2012 +0000

    Merge "Remove notifications on error"

commit 00c3815a346255a9ac9cf922453aad873393ebac
Merge: c05dd1c ca09a6c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 2 01:38:04 2012 +0000

    Merge "Alter image_member_[update|delete] to use member id"

commit 4e4092e73aba8e1f594db333c9e423992fa47ef1
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Mon Oct 1 20:51:26 2012 +0000

    Remove unnecessary set_acl calls
    
    Some calls to store set_acl are made in the v2 api that are not
    necessary. In some cases these calls are generating unnecessary database
    traffic.
    
    Change-Id: Idd0ada4d36821a699df51c4f628409f03c470301

commit c05dd1c819fb0701cc15ababd6e9f5f68a61e4c5
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Thu Sep 20 11:34:38 2012 +0800

    Clean up pep8 E127 violations
    
    Fixed E127 errors.
    All ignores are to be removed in the next sequence of patches.
    
    Change-Id: I56839ebe63dbccbb830dfed8923892c7c0837d7e

commit c5a1635a6b77a877a7c17b2c7636a4e056c75493
Merge: 0d50342 e12ecf2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 28 21:30:10 2012 +0000

    Merge "Remove extraneous db method image_property_update"

commit 0d503425edd6d565ca8364fc7358a1e11ceee708
Merge: d0622d9 45bb94a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 28 20:29:33 2012 +0000

    Merge "Replace README with links to better docs"

commit d0622d9e22586d6a0bd9d15607dfc308570e42fb
Merge: 7fd1f65 f733b28
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 27 22:06:41 2012 +0000

    Merge "Add test for db api method image_member_create"

commit 7fd1f65c3705c8cc65e7bc5a236a961ee5e894ab
Merge: a289e3a 442e7cf
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 27 20:05:20 2012 +0000

    Merge "Remove unused animation module"

commit a289e3a2ffbbc201a2ddde931876d246b7879092
Merge: 35ba3e0 265b878
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 27 19:32:22 2012 +0000

    Merge "Add test for image_tag_set_all"

commit 17e32560daccd9280a38d4cbdb6470a4be02e93f
Author: Julien Danjou <julien@danjou.info>
Date:   Tue Sep 18 12:09:17 2012 +0200

    Remove notifications on error
    
    If an error occured due to a request from a user, don't send any
    notifications.
    
    This implements part of blueprint glance-notifications-deux
    
    Change-Id: Ic87006889669b1cbff66dd1506da95175897a1dc
    Signed-off-by: Julien Danjou <julien@danjou.info>

commit 35ba3e080b06dc7ba254489db8f45fe585510175
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Sep 25 22:13:56 2012 +0100

    Change type of rabbit_durable_queues to boolean.
    
    Fixes bug 1056465
    
    The rabbit_durable_queues config option should be of type boolean
    instead of string, otherwise it does not have the expected effect on
    the durability of rabbitmq exchanges and queues.
    
    Change-Id: I9b3dc7d763b109c1bf10f78ebe725d71ed10791a

commit ef641597dbfc0fcb856c143b213be493ab44cc65
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Tue Sep 25 19:57:10 2012 +0000

    Pass empty args to test config parser.
    
    This fixes bug 1056420, which allows users to pass nosetests options
    through run_tests.sh again.
    
    Change-Id: I03e84488a24e2552b61aa0cab842d8325e8e856f

commit 4279c65d12a37ae8bacdf1e0832a1b943f88c36c
Merge: 1257da9 5443a09
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 25 18:00:23 2012 +0000

    Merge "Clean up pep8 E125 violations"

commit 1257da9b53a4b3b2e5c91e8388a715f6221ffca2
Merge: 6874f77 305a9c1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 25 17:47:01 2012 +0000

    Merge "Clean up pep8 E124 violations"

commit 6874f77ebf2929a0a70477d4a314bdea11c3c614
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Sep 24 13:56:17 2012 -0700

    Document api deployment configuration
    
    This documents how to disable the v1 and v2 APIs. It also makes a note
    about sql configuration on the glance-api node when the v2 API is
    enabled.
    
    Fixes bug 1054168
    
    Change-Id: I4faa29f1b05d8831347febc261f7e47e49dfa09a

commit 9f526dc3157eda4792a38b8f293c9d2a71f927d6
Merge: 6a885dc c2f1314
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 24 17:33:24 2012 +0000

    Merge "Ensure workers set to 0 for all functional tests"

commit 6a885dcc9c1f3fae39660f1284a2bc3a4808315f
Merge: 8a8b011 665fc99
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 24 17:02:12 2012 +0000

    Merge "Add functional tests for the HTTP store"

commit 5443a0989a9e16fcc98bea3811676580bcc029f4
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Wed Sep 19 17:22:26 2012 +0800

    Clean up pep8 E125 violations
    
    Fixed E125 errors
    E125 is ignored because of false alarms
    All ignores are to be removed in the next sequence of patches
    
    Change-Id: I7fe526a9382f6ce2c29557505b21a6d7eaaca3f3

commit 305a9c12b5494fdb35fbcb9609879acacdf1a920
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Wed Sep 19 17:01:13 2012 +0800

    Clean up pep8 E124 violations
    
    Fixed E124 errors
    All other ignores are to be removed in the next sequence of patches
    
    Change-Id: Ic96ebf5dff645dfdc47478beeb6965d6ad266243

commit c2f1314bb82c2d2f26298e15c5f0697423fb7269
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Sat Sep 22 21:52:45 2012 +0100

    Ensure workers set to 0 for all functional tests
    
    Fixes bug 1054388
    
    Clear up a couple of cases where a functional test fired up a
    wsgi.Server without explicitly setting the workers config option
    to zero.
    
    Change-Id: I5e2e8fe3c5d6e0c017d27074d35fd79b7dd7d79d

commit 8a8b01174c39440862e24f662be9a48997da75b1
Merge: 0cd4a4e eafed25
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 21 21:56:27 2012 +0000

    Merge "Add rabbit_durable_queues config option."

commit d03e762720a40aa9ca6ea0e574ba878f0c69d7a1
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Sep 20 21:31:47 2012 -0700

    image_member_* db functions return dicts
    
    The image_member_* functions now return dictionaries when responding
    to public function calls. The 'deleted' and 'delted_at' properties are
    no longer returned from the API layer as they are implementation
    details of the sqlalchemy API.
    
    Related to bp glance-simple-db-parity
    
    Change-Id: Ib42ab48535e34f84ca33af107c1a7fa99fb1c74d

commit ca09a6cf6600ca92084689c2b6ebf6d66a768811
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Sep 20 21:05:14 2012 -0700

    Alter image_member_[update|delete] to use member id
    
    Rather than expect a full sqlalchemy object, the
    image_member_delete and image_member_update functions
    now expect a member id.
    
    Change-Id: I0114ac81e3b805c4bcb471ba57f2d7259eef3afe

commit f733b289e63843fd0bc62bc49c6612bc814776cb
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Sep 20 20:35:24 2012 -0700

    Add test for db api method image_member_create
    
    Related to bp glance-simple-db-parity
    
    Change-Id: I96352bd0716c283e110f57935201316ef21209dc

commit 265b8787a1d2059e44a8d5c07c4c21d8ee03752e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Sep 20 20:23:00 2012 -0700

    Add test for image_tag_set_all
    
    The sqlalchemy driver required a change to preserve the ordering
    of the tag list.
    
    Related to bp glance-simple-db-parity
    
    Change-Id: I59dcf2ac0b9a464888fc250cbdc83276a3eb02a8

commit eafed25ba64f5fd8af97bcbe8e9f12a1fe4f7c9f
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Sep 21 15:32:49 2012 +0000

    Add rabbit_durable_queues config option.
    
    Fixes bug 1054183
    
    Avoid AMQPChannelException: (406, "PRECONDITION_FAILED...") failures
    due to a mismatch between the durability of rabbitmq exchange/queue
    declared by glance and ceilometer.
    
    Change-Id: I4e25986a1f503782e701aa1168c4eb231ff25d06

commit 0cd4a4ecced2aa9bbd6277e222cd31710e72525f
Merge: 3580a48 76c3620
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 21 17:12:47 2012 +0000

    Merge "Drop Glance Client"

commit 3580a4887e39fc9ba66b6795f17723f05415943f
Merge: 8f4dcb3 9f9f22c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 21 16:24:00 2012 +0000

    Merge "Clean up pep8 E122, E123 violations"

commit 8f4dcb324bdce6a3c058233376bb7d586321d135
Merge: d33ebaf ba3d372
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 21 16:08:03 2012 +0000

    Merge "Clean up pep8 E121 violations"

commit e12ecf2dc1a77b5b9b8350b3c902f66b3e16d430
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Sep 20 20:26:42 2012 -0700

    Remove extraneous db method image_property_update
    
    The image_property_update method was being used internally to
    the sqlalchemy db driver and duplicated functionality offered
    by the equivalent private method _image_property_update.
    
    Change-Id: Id01abd363ecd80a9b1c16626177157d4e0d77385

commit d33ebafb0927a0a339c8578ddf9b31b493a4370e
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Sep 20 20:57:54 2012 +0100

    Update docs with modified workers default value.
    
    The default value for the worker config option is now 1,
    as opposed to 0.
    
    Change-Id: I49f05b31415b3c641abe582f915fc9ead63e84ff

commit 45bb94a25a150dd02ada78c9fdf5264362a266e2
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Sep 14 16:18:14 2012 -0700

    Replace README with links to better docs
    
    Change-Id: I6f797948aa7019d5f070d5d3a90167d0184aa576

commit 442e7cff77a416861a52f75372baba2bf0ffdbc5
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Sep 14 16:14:30 2012 -0700

    Remove unused animation module
    
    Now that the glance client lives elsewhere, the animation
    module is not used by anything.
    
    Change-Id: I15761611148f36fcfcc6117a5770dc669a23cf85

commit 76c3620c7effb15be577450c276db1e394c2de3e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Sep 7 17:21:34 2012 -0700

    Drop Glance Client
    
    * Completely drop the legacy Glance client tool
    * bin/glance is gone
    * glance/client.py is gone
    * Drop relevant tests
    
    Implements bp separate-client
    
    Change-Id: Ifcb0bd9bb537e0243aeb5daf466f46868d522986

commit 3f1b5e768117866ed5c55c26d3c0e81e83ca46ce
Merge: 091bbdf 72f5452
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 20 14:39:28 2012 +0000

    Merge "Enable multi-processing by default."

commit 091bbdf98680657ce6363a387e22dfbf88ed99b4
Merge: 31338e4 8f42dac
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 20 07:45:42 2012 +0000

    Merge "Ensure glance-api application is "greened""

commit 72f54521e4ed66b5e165bde75b13dc7b28fae5d1
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Sep 19 13:06:43 2012 +0100

    Enable multi-processing by default.
    
    In realistic production environments, multi-processing is likely
    to be enabled.
    
    A default setting of one worker would allow the multi-processing
    codepath to be followed by default, without changing the number
    of processes actually servicing API requests (i.e. the single
    parent process will just wait on the child).
    
    For most functional tests, we continue to explicitly configure
    zero workers, so as to avoid spawning twice as many glance-api
    processes during a test run.
    
    Change-Id: I1c327805f8fb975a3175e9a8b40aeddd21d5ef91

commit 31338e4ac7d0b39d0c5b9f67fd1133f23b83b925
Merge: 923b901 1182871
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 19 15:23:28 2012 +0000

    Merge "Fix scrubber start & not scrubbing when not daemon"

commit 8f42dacecd713970c31d59a81fe1f9056e28196c
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Sep 19 11:37:28 2012 +0100

    Ensure glance-api application is "greened"
    
    Fixes bug 1052640
    
    Avoid unresponsiveness during long-lived I/O-bound operations by
    ensuring that the standard socket libraries are monkey-patched in
    all code-paths.
    
    Change-Id: If672c26f2b462d1abcfc86e20256957f73f98fde

commit 9f9f22cd80209a38f1596184c39f58f301af89f4
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Wed Sep 19 16:41:51 2012 +0800

    Clean up pep8 E122, E123 violations
    
    Fixed E122, E123 errors.
    All other ignores are to be removed in the next sequence of patches.
    
    Change-Id: I4b3edd9d1b2804ea7de255136da01b19f32abe1c

commit ba3d3728d15a6777fee1f65e819562db107694be
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Wed Sep 19 14:52:38 2012 +0800

    Clean up pep8 E121 violations
    
    Fixed E121 errors.
    All other ignores are to be removed in the next sequence of patches.
    
    Change-Id: I5d3f490a1bfbe1945a23a7fc1f38d818c0650ff7

commit 923b901f8588b4db4a732b01f338ffaa799f3913
Merge: 1eb942d f071f07
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 18 20:41:36 2012 +0000

    Merge "Clean up pep8 E502, E711 violations"

commit 1eb942df4c7573f1503fd75c38545c1b549441ea
Merge: 140f528 047a6f8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 18 19:59:59 2012 +0000

    Merge "Add unit tests for size_checked_iter"

commit 140f528a7e9da3e14bbbcf31c111e6cd4882b9a5
Merge: c8f67f1 dd9dc36
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 18 19:47:48 2012 +0000

    Merge "Don't WARN if trying to add a scheme which exists."

commit c8f67f12be3e56b053782a42162d9d73b3cd28ac
Merge: 5ec2fd6 39b233d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 18 19:40:49 2012 +0000

    Merge "Expand cache middleware unit tests"

commit 5ec2fd69a07d5515be026dde02049bd7cf3047d0
Merge: e77ba45 6d743b3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 18 19:13:59 2012 +0000

    Merge "Generalize remote image functional test"

commit 1182871ddde43ff8721599d7cb22b211e09e0108
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Tue Sep 18 12:40:40 2012 +0100

    Fix scrubber start & not scrubbing when not daemon
    
    1) Scrubber not starting
    When the scrubber is run from the command line or via cron, it would try
    to call it's app object which resulted in a TypeError.
    
    2) Scrubber not scrubbing
    In the same usage scenario as above, the delete jobs added to the
    starmap are never started.  A slight delay is enough to start these.
    
    Also add a functional test designed to excercise the scrubber when run
    in "regular mode", which covers both these cases.  I've run the test
    successfully with 1000 images, which should be enough to prove the
    sleep(0.1) does the trick.
    
    Fixes bug 1052537.
    
    Change-Id: If29704d8a425194085b59b7dfd265ffaef16302c

commit f071f07795ee06116f2465c420f7fbf7950acc90
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Tue Sep 18 10:02:59 2012 +0800

    Clean up pep8 E502, E711 violations
    
    Updated pep8 version requirement to 1.3.3.
    Fixed E502 and E711 errors.
    E711 is ignored because of sqlalchemy statements.
    All ignores are to be removed in the next sequence of patches.
    
    Change-Id: I27155166a60be14521d958e1cc7c06ebcc90f1fd

commit e77ba45638919f670579eb101eaa409ceafe0168
Merge: 185b84e b7055ee
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 18 00:13:14 2012 +0000

    Merge "Add filesystem store driver to new func testing"

commit 39b233d3bdfd1b611db8f2e6f9ac44e0ba78e924
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Sep 14 16:11:56 2012 -0700

    Expand cache middleware unit tests
    
    This adds some unit tests to exercise the image cache
    middleware. Two new functions were also created in the
    cache middleware itself to make it more testable.
    
    Change-Id: Iea67119622461f1e8116b2a6913f94ca4eb22607

commit 185b84ed994a90785819d03efbac2749700c5488
Author: Russell Bryant <rbryant@redhat.com>
Date:   Fri Sep 14 15:08:11 2012 -0400

    Change qpid_heartbeat default.
    
    The default value of qpid_heartbeat of 5 seconds is unnecessarily
    aggressive.  Change it to 60 seconds to reduce the possibility of
    getting disconnected from qpidd under normal circumstances.
    
    Fix bug 1050661.
    
    Change-Id: I9525e74f96314c2c9183d6b10cf503936c81f589

commit dd9dc366557c0eccc6e2166f5ebea1d8271cf75c
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Sep 13 22:48:58 2012 -0400

    Don't WARN if trying to add a scheme which exists.
    
    Updates the register_scheme_map function in store/location.py so that
    it registers new scheme maps only if they don't already exist.
    Also, removes the warning message that was previously logged if
    a duplicate entry was found. Since both Glance v1 and v2 controllers
    attempt to register scheme's this seems reasonable and shouldn't cause
    any problems with how things work.
    
    This fixes an issue where Glance API logs always had warning messages
    stating it was 'Overwriting scheme' information even though everything
    is configured correctly.
    
    Fixes LP Bug #1050711.
    
    Change-Id: Ief539187f9c64a3b2de6d431b1e2ffc9e07e5c90

commit 047a6f838a25ff83909b876dc07817967eaf7884
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Sep 13 16:56:49 2012 -0700

    Add unit tests for size_checked_iter
    
    Change-Id: I3822d093571b02b2bb9a7d0b7d6cb4c1a0b9e812

commit 665fc991c03add29915da65dc8af77c8f501ceaf
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Sep 13 08:07:37 2012 -0700

    Add functional tests for the HTTP store
    
    This spins up a local HTTP server on an arbitrary port that returns
    a specific set of image data. The store tests then make the necessary
    HTTP request to said server.
    
    Change-Id: I8bdebd3d61073fb909728127083831704fc1dd29

commit 6d743b3e1314e4c6dbbf9aa1bf60e42936f4809f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Sep 12 16:11:47 2012 -0700

    Generalize remote image functional test
    
    All backends should be able to read any arbitrary image from
    a supported backend. This pulls out swifts test_get_remote_image
    test so it can be used by the filesystem tests. In its place is
    a new store-specific test helper called stash_image - this should
    be implemented for each store test to help store aritrary image
    data.
    
    Change-Id: I05317216f21bb52ad1fea107c6192bf9a9f9cae3

commit b7055ee6739d8c938943bea00f82c07826ffe13a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Sep 12 15:30:03 2012 -0700

    Add filesystem store driver to new func testing
    
    This also fixes bug 1050098. In order to match the existing functional
    store test, the filesystem backend needed to be returning the actual
    image size.
    
    Change-Id: If202a52a6d303ca2d07fd3abb7f9ac7fe009690e

commit 173d8214637c3db1225e42a9f7908eb4430f96b1
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Tue Sep 11 22:59:52 2012 +0000

    Add region configuration for swift
    
    Addresses bug 1050034
    
    Change-Id: Ib83f5dbb2c1fbeacd741e0cb92b619e67b2243c7

commit 7e3ecc251756537df518d26de7cbdcc1e5078b71
Merge: 1574b2b 05f1e1a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 13 17:22:49 2012 +0000

    Merge "Separate glance cache client from main client"

commit 1574b2bb89bb9c7e8edceba90f27167336593971
Merge: 8f54bf7 576500e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 12 23:23:27 2012 +0000

    Merge "Rewrite Swift store functional tests"

commit 8f54bf7f44927ac50938e74b14d9894fc965979d
Merge: 8566185 2bd72f8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 12 22:05:17 2012 +0000

    Merge "Update openstack-common log and setup code"

commit 85661858f8d4284a79e230ab453f231c502dfc05
Merge: 9792317 9ef4288
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 12 21:05:02 2012 +0000

    Merge "Update v2.0 API version to CURRENT"

commit 2bd72f88e340497815eea6e63b7d11b79d59463e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Sep 11 21:05:08 2012 -0700

    Update openstack-common log and setup code
    
    Pull in changes up to commit 95cd3a7fad2d0335c65394379c35a798df9d25b4
    
    Change-Id: I628f15aa6367ab2af7912f1b5324055a0fc3c20a

commit 9ef42887d6083f1a74fee202e7749a297d6b6aa1
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Sep 11 16:07:01 2012 -0700

    Update v2.0 API version to CURRENT
    
    The v2.0 API is stable, so we need to communicate this fact to the
    consumers of Glance. This updates the status of the v2.0 version
    entity in responses from / and those that result in a 300 Multiple
    Choices status code from 'EXPERIMENTAL' to 'CURRENT.'
    
    Change-Id: I9e4514025904d7be2e947c6d14ccb90b6b066f8c

commit 97923179b300444d5c238cc6ef3c935d8ac84023
Author: Thierry Carrez <thierry@openstack.org>
Date:   Wed Sep 12 00:07:00 2012 +0200

    Set new version to open Grizzly development
    
    Set version to 2013.1 on master to open Grizzly development.
    
    Change-Id: Iab3d2fd0c3844504ad545774374d89a32e5ac11c

commit aaf36cbe29a24c476e91ed9b20584d7081a95ff8
Merge: 539c7bc 4de8670
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 11 21:26:41 2012 +0000

    Merge "Add s3_store_bucket_url_format config option"

commit 539c7bc32038e86a3a54b87e6e1ef46bd1429635
Merge: 254a8e6 69389a6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 11 19:46:32 2012 +0000

    Merge "Fallback to a temp pid file in glance-control"

commit 4de8670bcbb4e977f1d550bcf470926bbd77803f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Sep 10 21:21:51 2012 -0700

    Add s3_store_bucket_url_format config option
    
    Swift's implementation of the S3 interface doesn't support subdomain
    access to containers. It requires that the bucket be prepended to the
    request path. The option 's3_store_bucket_url_format' can be set to
    either 'path' or 'subdomain' (default) to control how boto forms
    the bucket url.
    
    Fixes bug 997658
    
    Change-Id: Ia6e1e7356eef7ac2267f7738e2f4a7c70dc12eeb

commit 254a8e664d4eb09c0f104d0cffdd14b217eddb78
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Sep 10 16:28:04 2012 -0700

    Ensure status of 'queued' image updated on delete
    
    Images in 'queued' status (and those without a location attribute)
    were not being updated with a status of 'deleted' when a DELETE
    action was taken on them through both the v1 and v2 APIs. This
    patch ensures that both APIs correctly update the images.
    
    Fixes bug 1048851.
    
    Change-Id: I9604d4ce5d59066fb108625df0fa114cc044d604

commit 69389a644205fa193be6b80fcb149dd940b2e3e0
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Sep 10 19:03:30 2012 +0000

    Fallback to a temp pid file in glance-control
    
    Fixes bug 1046593.
    
    Previously if the pid file was not writeable by the current user
    then glance-control bombs out, *after* spawning the required service
    but *without* caching the process ID anywhere.
    
    Now we fall back to a temporary file, so that at least user can supply
    that file to the corresponding glance-contol stop command.
    
    Change-Id: I6c1daf36221f731fdb5a8bb59d3f91a595337af8

commit 05f1e1a8c4589fef41f2e53fe59e790bd9936d88
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Sep 7 17:38:27 2012 -0700

    Separate glance cache client from main client
    
    This is relocating the necessary functionality for the glance
    cache management tool into a new client class.
    
    Related to bp separate-client
    
    Change-Id: Ib89db1245aca5032a8d93876e07c562cb1fb5d4d

commit 576500eddc6c8f2d5c17fb2b6dbf266555a553fc
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Sep 3 20:46:09 2012 -0700

    Rewrite Swift store functional tests
    
    The existing functional tests for the Swift store depend on
    spinning up a full system. We really just want to test that
    our store interface is good, so this patch adds tests for
    just that.
    
    Prevent swift store from prepending 'http[s]://' to auth url
    if it is already there. This should be broken into a different patch.
    
    Running the tests works the same way, just define a local config
    with the necessary swift_* options. Set the GLANCE_TEST_SWIFT_CONF
    environment variable to the location of that config.
    
    The old full-stack tests have been removed.
    
    Change-Id: I506993ce44354950534443c2101f8417a2a918e0

commit 3bfd7bd56c1a8ebc8aff1218c52ac13b66cabb9f
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Wed Sep 5 13:55:46 2012 -0400

    Raise bad request early if image metadata is invalid
    
    Image data is currently uploaded into the backend store even if it is a bad
    request. This patch add value validation in the deserializer so we don't set bad
    data. It also does a full validation of the image metadata to make sure
    everything that is needed for an image upload is set correctly before the upload
    can occur.
    
    There were currently some relevant tests that had incorrect names causing them
    to not run. These have been fixed and modified.
    
    Fixes bug 1035982
    
    Change-Id: I6f3ef83ba7b3de3cb885fad9737fef1a03d9222c

commit 45198f4a0cfbadd013a1aa99515256d2e0a2dfcb
Merge: 15702c4 c008cef
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 20:15:05 2012 +0000

    Merge "Return actual unicode instead of escape sequences in v2."

commit 15702c4069bd2019c2d78a5f6adcafd12b276bd4
Merge: f0bd856 3684d8d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 19:58:10 2012 +0000

    Merge "Handle multi-process SIGHUP correctly"

commit c008cef084c6362277e88569831ac09d81837327
Author: Eddie Sheffield <eddie.sheffield@rackspace.com>
Date:   Thu Sep 6 17:13:21 2012 -0400

    Return actual unicode instead of escape sequences in v2.
    
    Ensured that when images are serialized to json unicode characters
    are preserved as-is rather than being translated to ASCII escape
    sequences.
    
    Fixes bug 1045455
    
    Change-Id: Ica6dc222bb8c8049cba7049720442d4c5bbb7d32

commit f0bd85670c1b9d6d72e177ca2ec4bb6deed34d7e
Merge: 8e17990 41c1641
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 14:00:14 2012 +0000

    Merge "Asynchronously copy from external image source"

commit 3684d8d42a1f7f972a91763f5a85465c575ebbd8
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Fri Sep 7 10:52:26 2012 +0000

    Handle multi-process SIGHUP correctly
    
    Child processes were returning to the main while loop
    and spawning a next generation of processes. Instead
    they should exit cleanly.
    
    Fix for bug 1042823.
    
    Change-Id: I8c0d150640c78487b43279a44d0d6d3ac3e386cc

commit 8e179904069d37608389f40a386609fb03bfaf43
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Sep 5 16:37:30 2012 -0700

    Remove extraneous whitespace in config files
    
    One can not simply remove the hash mark in front of a commented-out
    config option if there is a space following it. This patch removes
    that extraneous whitespace.
    
    Change-Id: Id084eef34a9e894de3f67b2919d55879cd9a715e

commit 09dc108007f6343eebc9f1e867dc1a09a4565936
Merge: 3970063 1cfb025
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 23:31:18 2012 +0000

    Merge "Remove db auto-creation magic from glance-manage"

commit 1cfb025d73d3d347e6f6465fcb249c41aef90572
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 28 13:03:07 2012 -0700

    Remove db auto-creation magic from glance-manage
    
    This removes the reliance of glance-manage db_sync on configure_db
    calling register_models.
    
    Fixes bug 1042925
    
    Change-Id: Id93283905256247bdd2663b799d41a7925804542

commit 39700637e3862cc1c30de0dc245f2caed2692982
Author: isethi <iccha.sethi@rackspace.com>
Date:   Fri Aug 31 17:53:32 2012 +0000

    Makes deployed APIs configurable
    
    Uses config options enable_v1_api and enable_v2_api
    to control which APIs have been deployed.
    (Thanks markwash for all the help)
    
    Fixes bug 1043497
    
    Change-Id: I42dc1d88f94e61b9550c5f114ffc1abad25be7ff

commit 41c164139cab619d0a3e0d97b80037f85eb541ad
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Sep 5 14:33:47 2012 +0000

    Asynchronously copy from external image source
    
    Fixes bug 1008874, bug 1046433.
    
    Avoid tieing up dispatch thread for large copy-from images,
    instead initiate copy asynchronously.
    
    The response status is not set to 202 Accepted as per standard
    RESTful idiom, as a non-error response code change requires
    an API version bump.
    
    Instead, the incomplete nature of the image registration is
    reflected in the image status.
    
    Change-Id: I06692422490de0a7d93f63bbd0ffb9c6435a0d2b

commit 3d4e962dac2a307f3f6f9c98fc85fe51a55f4367
Merge: c5eece3 c82ae99
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 18:49:59 2012 +0000

    Merge "Exception Handling for image upload in v2"

commit c5eece3b978040b7cd6bea0a1faade8c36a52c56
Merge: ac8cfb6 b020b7e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 18:20:45 2012 +0000

    Merge "Remove bad error message in glance-cache-manage"

commit ac8cfb6976ccff7aac80ba12cbb072aa9516bcbd
Merge: 3a96fc9 7037fc8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 18:19:35 2012 +0000

    Merge "Call do_start correctly in glance-control reload"

commit 3a96fc954e406b8565ad0490908cd74b9e736c29
Merge: d5b2a21 2f6526b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 18:19:00 2012 +0000

    Merge "Sort UUID lists in test_image_get_all_owned"

commit d5b2a21ca1817a25d36c1abd4b89486998e2db3d
Merge: 4234d4b 95e00c9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 18:17:11 2012 +0000

    Merge "Fix cache not handling backend failures"

commit 4234d4b2adb83c4680bdbf9c707d579e8746dbdf
Merge: cc9910b eede5f3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 18:11:52 2012 +0000

    Merge "Sync some misc changes from openstack-common"

commit 2f6526b10cc7b15f7cb76b94cad3c47ff5ebd000
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Sep 5 16:44:58 2012 +0100

    Sort UUID lists in test_image_get_all_owned
    
    Ensure UUID list comparison is order-independent, to avoid spurious
    failure from the test_image_get_all_owned test case.
    
    Change-Id: I78743a65978b2f1c10adb66b7128c9f438393796

commit 7037fc818b3df6d657581b8ae84e7cc68562ef42
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Aug 30 16:50:59 2012 -0700

    Call do_start correctly in glance-control reload
    
    * Rename test_respawn functional test module to test_bin_glance_control
    * Add 'reload' and 'reload_server' calls to functional test helpers
    
    Fixes bug 1044119
    
    Change-Id: Ide63fdb9f78cd4d6a1cdb7b9f37a10694a7dddd3

commit eede5f32e50fdfb05d8376d9d9d4653805f61a45
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Sep 5 11:28:53 2012 +0100

    Sync some misc changes from openstack-common
    
    Syncs the following from stable/folsom:
    
     5a56539 Allow non-string items in the creds dict.
     769ec65 Don't trap then re-raise ImportError.
     202b8b7 Fix spelling typos
     6a22ea4 Remove unused imports
     01b4f31 Support for marshalling datetime while preserving microseconds.
    
    Change-Id: I31aba154fb1743b771ca9c1d4befa5ee563ca20c

commit cc9910b50f6153b46546a94549cefa75c28d6aa8
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Sep 5 11:27:58 2012 +0100

    Sync latest cfg changes from openstack-common
    
    Syncs the following changes from stable/folsom:
    
     4dc2043 cfg: clean up None value handling
     513bd3a Allow set_default and set_override to use None
     0a36c92 Tilde expansion for --config-file and --config-dir
     038d597 Add import_opt() method to ConfigOpts
    
    Change-Id: I615cdbd6dc7c3ec0218252c202f24c2a2d3aa387

commit d7041f500bbe03e07f38ad42f4d16325b96be45b
Merge: d702576 ec1a9f8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 06:11:38 2012 +0000

    Merge "Add kernel/ramdisk_id, instance_uuid to v2 schema"

commit d70257623a7fe3d4f2261d5fe5195bbc0992bf4c
Merge: fcaf251 c59f0ab
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 06:01:36 2012 +0000

    Merge "Encode headers in v1 API to utf-8"

commit fcaf251f6de34a47dc03cbe4a6cecb0285107e58
Merge: 2a79e6e 112fc71
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 22:24:31 2012 +0000

    Merge "Instantiate wsgi app for each worker"

commit c82ae99bcb5f7d413887cf9a0a197a9fba683c73
Author: isethi <iccha.sethi@rackspace.com>
Date:   Mon Aug 20 16:10:03 2012 +0000

    Exception Handling for image upload in v2
    
    Adds logging and exception handling for image data controller
    in glance v2
    
    Fixes bug 1037979
    
    Change-Id: Ieba0b9766d7c205e361a3d9a9618300af815beb5

commit 2a79e6e1763c335d3b1fc174992c44c4333db787
Merge: b73a1ad 3917fdf
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 20:19:44 2012 +0000

    Merge "Add missing columns to migration 14"

commit b73a1ad494bbcd9c43c60fed0778f4acbf11bd78
Merge: de76fbf 4f36fba
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 18:48:55 2012 +0000

    Merge "WARN and use defaults when no policy file is found"

commit de76fbf0357f81d9a5a31d64d5c355e1f4fdd135
Merge: 1d91a4d 6388bfa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 18:05:26 2012 +0000

    Merge "Adds registry logging"

commit 95e00c9247d5c56c1184d788ca8c1f9b165a25ba
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Mon Sep 3 11:17:54 2012 +0100

    Fix cache not handling backend failures
    
    1) caching_iter doesn't handle backend exceptions:
    
    caching_iter assumes any exception that occurs is the result of being
    unable to cache.  Hence the IOError raised from size_checked_iter, which
    indicates a problem with the backend, means the caching_iter will
    continuing trying to serve non-existent data.  The exception was not
    been re-raised in this case, making wsgi keep the connection open and
    clients stuck forever waiting for more data.
    
    Raising a GlanceException in size_checked_iter rather than an IOError
    allows caching_iter to distinguish between a problem fetching data, and
    a problem writing to the cache.
    
    2) Checksum verification happens after cache commit rather than before:
    
    This block was outside the context manager block which meant the
    GlanceException was not caught by open_for_write and the rollback didn't
    happen.  This resulted in an error been logged, but the bad image still
    placed in and subsequently served from the cache.
    
    Also:
    
    * Fix test_gate_caching_iter_bad_checksum - the loop to consume the
      iterator in was in a subroutine that never got called.
    
    * Move test_gate_caching_iter_(good|bad)_checksum into
      ImageCacheTestCase to excercise both the sql and xattr drivers.
    
    * Remove invalid registry_host/registry_port params from
      TestImageCacheXattr/TestImageCacheSqlite setup which caused a failure
      when testing the file on it's own using nosetests.
    
    Fixes bug 1045792
    
    Change-Id: I8aedec347e7f50566c44c5b6c6db424573c5ebaf

commit 112fc71ba453c2f43ce5ccb91108a504bcd6b5b6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Aug 18 16:50:15 2012 -0400

    Instantiate wsgi app for each worker
    
    A single WSGI app, and therefore a single sqlalchemy engine (mysql
    connection), was being used across all API workers. This patch
    instantiates the WSGI app once per worker rather than up front to
    give a separate database connection to each worker.
    
    Fixes bug 1036193
    
    Change-Id: I2cbb61fd88a6ec4fb03fa84196ba0a380b3842d0

commit 1d91a4dc2b74d224ea12947d672aa66a576d9d9a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Aug 30 14:38:34 2012 -0700

    Require 'status' in simple db image_create
    
    Since the sqlalchemy driver requires that 'status' be set in an
    image_create call, this makes the simple driver follow suit.
    
    Related to bp glance-simple-db-parity.
    
    Change-Id: I0b6809e467fa8aecfefcd7017cd198ca0691a236

commit b7b2a0997bccd0b0135cdc10bca338bc6dcee7fb
Merge: ded91c8 a95ec3d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 02:49:52 2012 +0000

    Merge "Always call stop_servers() after having started them in tests"

commit ded91c829b90f560d0bfbdc526cb480a67110283
Merge: 5b9fc72 c4f7816
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 02:40:58 2012 +0000

    Merge "Fix LP bug #1044462 cfg items need secret=True"

commit 5b9fc72226ecdab50bf36c67622689fd23cb1b87
Merge: 7ca319d 1f3ae60
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 00:13:16 2012 +0000

    Merge "Limit simple db image_create to known image attrs"

commit 7ca319dd9f11600fb54aeb8ba84d2f3a136f9b09
Merge: 9701878 97915a7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 00:12:47 2012 +0000

    Merge "Raise Duplicate on image_create with duplicate id"

commit 970187873ec708f6a064689b5e2300023f140298
Merge: 1d6a10e af6b8a6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 00:03:46 2012 +0000

    Merge "Expand image_create db test"

commit 1d6a10e3e0cfadd516698d183f2069b077d6f63c
Merge: 2a3c185 a0288ab
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 00:01:49 2012 +0000

    Merge "Add test for nonexistent image in db layer"

commit 2a3c185d1efbf1ab68c7c4347dacaa5158830032
Merge: a31caab abcff5b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 00:00:32 2012 +0000

    Merge "Catch pruner exception when no images are cached"

commit a31caab7718fce412e61f7072598abbd7f15090d
Merge: afcd07b e7d6210
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 3 21:23:15 2012 +0000

    Merge "Document how to deploy cachemanage middleware"

commit afcd07b69a95f28ebb336e40a606ca0ad3493ee5
Merge: e24d460 48bb44b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 3 21:11:47 2012 +0000

    Merge "Drop glance client + keystone config docs"

commit e24d460308a8cac280f823f21c7c827b9cbfa1db
Merge: af32f24 d43666b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 3 21:11:09 2012 +0000

    Merge "Delete image from backend store on delete."

commit af32f24857dd3b0354f90393f7367c4cf938a329
Merge: 9736d29 9c94a72
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 3 21:10:52 2012 +0000

    Merge "Use PATCH instead of PUT for v2 image modification"

commit 48bb44b9aa52058bc8e97febc2a0fafa5d53624c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 29 08:55:20 2012 -0700

    Drop glance client + keystone config docs
    
    The blurb about configuring glance client doesn't belong in the
    server project documentation. This removes it.
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: I3932e1af382813bf069f4920218dd60cd04790f5

commit 9c94a72c14ccd94df0c6239c2bfe70337d693b39
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Mon Aug 27 06:42:33 2012 +0000

    Use PATCH instead of PUT for v2 image modification
    
    With the previous partial put syntax in the v2 api, it was not possible
    to delete image properties. This patch provides a more expressive syntax
    in the form of the HTTP PATCH verb. This implementation depends on the
    `application/openstack-images-v2.0-json-patch` content-type which is
    intended to be a compatible subset of application/json-patch.
    
    Addresses bug 1039821.
    
    Change-Id: I510ab397f9b8b5bd1deec0fb25855e305e7ec86e

commit d43666bce77bdc67146c23663b8a21746d7d41ce
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Mon Aug 27 14:00:59 2012 -0400

    Delete image from backend store on delete.
    
    Two things have been done for this patch, schedule_delete_from_backend has
    been split into two functions: safe_delete_from_backend and
    schedule_delayed_delete_from_backend. If the API is not configured for
    depalyed delete safe_delete_from_backend is called, which immidiately
    deletes the image from the backend store and status set to deleted.
    Likewise, if the API is configured for delayed delete,
    schedule_delayed_delete_from_backend will be called which writes out a new
    file in the scrubber_datadir named with the image id and containing the
    backend uri and delete time. The image's status is then set to pending_delete
    and the scrubber will then delete the image at the appropriate time.
    The other main change is pulling the status updates out of the backend delete
    functions. In this case they are done in the API after each respective type
    of delete. All other changes were around testing and dependancy injection,
    specifically the ability to inject a fake StoreAPI.
    
    Fixes bug 1039897
    
    Change-Id: I8a13b8c302b13ba219b1edcc128d02481ed7666e

commit e7d6210e70c35c0a163b455a2b1b6f81f6fc5dd6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Aug 30 11:00:38 2012 -0700

    Document how to deploy cachemanage middleware
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: If72a82222ebf33b08bbceba2d780bddfe7b7aad0

commit 9736d299a4f8e2270b5da6261cfb7a86f67ec885
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Aug 30 10:50:39 2012 -0700

    Clean up comments in paste files
    
    * Reduce comments in paste files to just what is necessary
    * Add a 'cachemanage' pipeline to complete our set of paste
      deploy flavors in glance-api-paste.ini
    * Add a sample [paste_deploy] section to both glance-api and
      glance-registry configs
    
    Related to bp glance-folsom-docs-cleanup.
    
    Change-Id: I0208b12f6861b48e52260b25802c47ebf6316b9a

commit 4f36fba9969e77d01f3e296d946e6e11f1d0e82f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 29 14:34:10 2012 -0700

    WARN and use defaults when no policy file is found
    
    Rather than refuse to start, it's nicer to use a sane set of default
    policies when no policy file is found.
    
    Fixes bug 1043482
    
    Change-Id: I849737c61c0266952d931395fbc2ad3745c46f6e

commit c59f0ab00590dec21af6f92aacdb0b73793c58db
Author: Vincent Untz <vuntz@suse.com>
Date:   Tue Aug 21 17:17:22 2012 +0200

    Encode headers in v1 API to utf-8
    
    We're getting data from the registry via JSON, which means the values
    are of the unicode type. We want to output utf-8, otherwise this won't
    work if we use glance through mod_wsgi.
    
    Fix bug 1042078.
    
    Change-Id: Iadb215003db57ab25d9919341e6aba195835531c

commit c4f781632069a0554f1595f65dacfc85081dff96
Author: Tom Hancock <tom.hancock@hp.com>
Date:   Fri Aug 31 16:10:45 2012 +0000

    Fix LP bug #1044462 cfg items need secret=True
    
    Redact sensitive log information such as
    sql_connection
    metadata_encryption_key
    admin_password
    admin_user
    admin_tenant
    when cfg item summaries are printed in logs
    
    Change-Id: I74cfeae4b8bdbd405fbc4baca763a62f4470b154

commit a95ec3d893b3c3ced4489a40ca4d8144ae65e310
Author: Vincent Untz <vuntz@suse.com>
Date:   Mon Sep 3 08:45:57 2012 +0200

    Always call stop_servers() after having started them in tests
    
    Several functional tests were not stopping the servers.
    
    Fix bug 1043416.
    
    Change-Id: I362e116089e6baa3e8f9ab16be1d6c54dbf957da

commit 3be563029a45e74e18286a6e327734543497a5bf
Merge: e0fdcb0 3b7b43f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Sep 1 08:19:30 2012 +0000

    Merge "Log level for BaseContextMiddleware should be warn"

commit e0fdcb0619eb7ec5785e9f42fd5d2237872773ca
Merge: a5411d2 80c099e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Sep 1 07:16:45 2012 +0000

    Merge "Adds notifications for images v2"

commit 6388bfacb6a063e020eaa2813f6188d883aed5c3
Author: Brian Rosmaita <brian.rosmaita@rackspace.com>
Date:   Tue Aug 28 16:46:55 2012 +0000

    Adds registry logging
    
    The registry API currently only logs the sqlalchemy debug output. Added
    log messages at the API level.
    
    Fixes bug 1041238
    
    Change-Id: I90f015ad26cd67a449dfa0fa0697f94d493644bf

commit a5411d240508ddc06660562d55924cd4264e3d07
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Thu Aug 30 23:52:45 2012 +0000

    Filter out deleted image properties in v2 api
    
    Fixes bug 1044127
    
    Change-Id: Ibc35f51d7f80986639c7a62b6325762e6a2b7bfb

commit 1f3ae60f9262265975ac829c673ca8173eef8e88
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Aug 30 14:07:11 2012 -0700

    Limit simple db image_create to known image attrs
    
    Ensure image_create requests are limited to a list of known
    image attributes.
    
    Related to bp glance-simple-db-parity.
    
    Change-Id: I8314f31dcf87c87ee3bba89334be33dc4a1555b2

commit 97915a72e09c7f88171b6cc96e8c8cf3a58a906a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 27 16:12:56 2012 -0700

    Raise Duplicate on image_create with duplicate id
    
    The simple db would allow a user to create new images using IDs
    that belonged to existing images. This patch corrects that behavior
    and adds a test.
    
    Related to bp glance-simple-db-parity.
    
    Change-Id: I42a036f81e61413e789d87100f58b45b8cc75d38

commit af6b8a677aef25cab40ec24427dbf5f081616c08
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 27 16:03:39 2012 -0700

    Expand image_create db test
    
    Ensure the test that checks for default values when calling
    image_create is expecting the right things. The simple db driver
    needed some love to get it to pass the thicker test.
    
    Related to bp glance-simple-db-parity
    
    Change-Id: I80f0ee55ff5ec18e544b91bed218e8c6e3b06a84

commit a0288ab538c641825c490807b64d12b6b9871c51
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 27 15:47:42 2012 -0700

    Add test for nonexistent image in db layer
    
    Related to bp glance-simple-db-parity.
    
    Change-Id: I1fcfa80089937e9dec9d637f2227561febb43183

commit c8d408f23486804fc7b4e592e2c1727330abc831
Merge: f79d9de 991e4bd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 21:01:57 2012 +0000

    Merge "Tweak doc page titles"

commit f79d9dec28164f5fa3395619cd5f79954af98bb9
Merge: 2ca54d8 17ae9b2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 21:01:48 2012 +0000

    Merge "Drop architecture doc page"

commit 2ca54d81e2e8022dcc6bae39d87f62481d43486b
Merge: 02765fb cfa2915
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 21:01:24 2012 +0000

    Merge "Add link to notifications docs on index"

commit 02765fbf47956aba84d6e81ba1a20da549c4b21e
Merge: 3b1e1a1 34d6335
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 21:01:00 2012 +0000

    Merge "Remove repeated image-sharing docs"

commit 3b1e1a1d055a4d689435f9b0958b546ae8261c24
Merge: b06ac31 7a0d2eb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 21:00:36 2012 +0000

    Merge "Tidy up API docs"

commit b06ac3118413f4657f5e363f86e6fcb2ecb9e21a
Merge: 6275a28 b719704
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 20:53:31 2012 +0000

    Merge "Move authtoken config out of paste"

commit abcff5b5f5b2b89bf788f6e5447a85c320e5a26c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 29 21:17:46 2012 -0700

    Catch pruner exception when no images are cached
    
    This handles a situation where the pruner would raise an exception when
    the image_cache_max_size was set lower than the size of the last image.
    
    Fixes bug 1039854
    
    Change-Id: I4a6c164e9f821f1250314974f829f058fbd02863

commit b020b7e041da5a8c3d52d6c116253c9fcf1b5c79
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 29 17:32:34 2012 -0700

    Remove bad error message in glance-cache-manage
    
    The error message covering unauthorized requests implies that the
    caller hasn't set the appropriate authentication values. What
    is more likely is that the values are set but the user just
    doesn't have permission to use the tool.
    
    Change-Id: I95f4c1b6fc650b6bf8c11a4e343e1b54c14310f9

commit 6275a28abe729e04e44ad51ff79e9e3d92c7f997
Merge: 4c038b0 e97fa4b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 29 23:36:15 2012 +0000

    Merge "Raise Forbidden exception in image_get"

commit 3917fdf3b0c69019303522109d96b9c3d9ff19e2
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 28 18:50:06 2012 -0700

    Add missing columns to migration 14
    
    This adds created_at, updated_at, and deleted_at to database
    migration 14.
    
    Background Info!
    
    If a new database is created at version 14, it doesn't run any
    migrations scripts. It lets sqlalchemy create the database from a
    set of sqlalchemy models.
    
    When an existing database is upgraded to version 14, it will use
    the migration script. What's important to note is that this is
    currently impossible due to bug 1042925.
    
    While it is typically bad practice to alter a migration script, this
    is a special case as nobody could have used it. What this patch does
    is complete the migration script in preparation for a future patch
    down the road to fix the bug referenced above.
    
    Fixes bug 1043041
    
    Change-Id: I6dc2afa735fb2f82df71d58b10c1e1530fce2f89

commit 80c099e0b41b3f2f9684b06f1f4eee8e2776969e
Author: isethi <iccha.sethi@rackspace.com>
Date:   Wed Aug 22 16:44:13 2012 +0000

    Adds notifications for images v2
    
    The v2 API didnt generate any notifications. It should
    send same as those that v1 API has
    
    Fixes bug 1038552
    
    Change-Id: Ieab82937822ad907493d4b538fd75e571416bf16

commit b7197041fec50d485b2f0947e2a268cb497a9230
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 29 12:22:13 2012 -0700

    Move authtoken config out of paste
    
    Since we can now configure Keystone's auth_token middleware using
    our own config files, we should ship our example config to show
    how this is done. This moves the auth_* variables out of
    glance-api-paste.ini and glance-registry-paste.ini into
    glance-api.conf and glance-registry.conf.
    
    Fixes bug 1043490
    
    Change-Id: Ibdaf8b2ef0f55e5e892fbd1b994dceb323f07c7b

commit ec1a9f8988686dafc768338fc69cbf99c4f82860
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 29 09:31:38 2012 -0700

    Add kernel/ramdisk_id, instance_uuid to v2 schema
    
    Nova depends on a few properties to be able to interact with
    images in Glance effectively. The three added in this patch
    are kernel_id, ramdisk_id and instance_uuid. These properties
    are just being added to the default v2 schema, so they can
    be overwritten if a consumer decides they need to.
    
    Fixes bug 1039818
    
    Change-Id: I5cfd5f0b5c8d1d526d56d99de738f9271aa641c1

commit 991e4bd8def597c1b806ca3afa5a3eb62116e5c0
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 27 10:16:39 2012 -0700

    Tweak doc page titles
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: Ifc4d8371c0752997258e19e7b149ae88ec3413b0

commit 17ae9b28467ecc05df93b28faa12971b209843bd
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 27 10:08:36 2012 -0700

    Drop architecture doc page
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: If4d187e5c96e337f0df0134a101ad1bac061dc80

commit cfa2915f953fc08f2858d0f93dc326f284a194bf
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Aug 23 12:13:24 2012 -0700

    Add link to notifications docs on index
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: Ib0c65fe2bf724199e13107325175541be85bfb29

commit 34d6335672f137d82c1c8465dbfc14bcb878fc4e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 22 20:00:14 2012 -0700

    Remove repeated image-sharing docs
    
    * Drop image sharing blurb from authentication docs.
    * Link to authentication page from api page
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: Idac46a78f79fac0c673f6a9b91c1f44df7b705b4

commit 7a0d2eb6cdf48d446174412e7791333c9ca1bca8
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 22 19:55:27 2012 -0700

    Tidy up API docs
    
    * Add bit about images api vs glance
    * Explain how to send auth token
    * Prepend '/v1' to example URIs
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: I2c3b568e463f62033268573f50f2d8a74d053965

commit 3b7b43f8ff8a9860bcc24ad89c0f03df26fb7205
Author: isethi <iccha.sethi@rackspace.com>
Date:   Wed Aug 29 14:42:09 2012 +0000

    Log level for BaseContextMiddleware should be warn
    
    The current log level is error for BaseContextMiddleware.
    It is toned down to warn in this patch.
    
    Fixes bug 1043374
    
    Change-Id: I468183b374f06b0afad3d559fdb2c09ac0663105

commit 4c038b0d85ebe0a0bc793b8bab1f44dd48eb0166
Merge: 24c0728 c068c7f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 29 00:35:25 2012 +0000

    Merge "Add 'bytes' to image size rejection message"

commit 24c072881a939739df100b77040e892391aba0db
Merge: f57fc69 f8467bf
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 23:58:31 2012 +0000

    Merge "HTTPBadRequest in v2 on malformed JSON request body."

commit f57fc69b1be5a0da3e377aa4f5f8efc1132d7b96
Merge: 8513883 37d1c1d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 23:58:19 2012 +0000

    Merge "Remove partial image data when filesystem is full"

commit 8513883892b6933b27abd7ee0b5e0524030f0cd5
Merge: c88e07f 87033d0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 22:53:42 2012 +0000

    Merge "Rename glance api docs to something more concise"

commit c88e07ff7a5069bf8aced847e8236f5510776af2
Merge: 5d6b75d 37dc071
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 22:53:27 2012 +0000

    Merge "Drop deprecated client docs"

commit 5d6b75dde4e4541e64a4f8714bb831d1b93b0d60
Merge: 0f2e8bf 087046b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 22:52:54 2012 +0000

    Merge "Clean up policies docs page"

commit 0f2e8bf4c5160579bf5ce0d6ca044c69aa73944a
Merge: 59eb870 07b72c3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 22:52:22 2012 +0000

    Merge "Fixes issue with non string header values in glance client"

commit 59eb870cbd6da5d0532046797b4aa4a42d2f48e1
Merge: 926823c d912a5d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 22:44:15 2012 +0000

    Merge "Activation notification for glance v1 api"

commit e97fa4bd4f7584c2d0b8d976c770dbe5705ce962
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 27 15:42:49 2012 -0700

    Raise Forbidden exception in image_get
    
    The simple db driver now raises 'exception.Forbidden' when a caller
    tries to access an image that is not owned by the provided context.
    The list of images returned by image_get_all will also be filtered
    to match what the sqlalchemy driver is expected to return.
    
    Related to bp glance-simple-db-parity.
    
    Change-Id: Idb2b85252d5ad33194d3bd8b5d8a9bc368968bd0

commit 926823c14caeca66e5fa89c99bcea0fdd54bf7c5
Merge: cfb9709 11a9a48
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 06:39:44 2012 +0000

    Merge "Remove autodoc and useless index docs"

commit cfb9709a255132f14afbd64a0d0af1a86b6a7236
Merge: 9c4c810 dc6ef98
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 27 16:50:04 2012 +0000

    Merge "Typo fix in glance: existant => existent"

commit 9c4c8102735dc246d3e2daade4d48a723c45e402
Merge: 8e9fcba dcca6cd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 24 23:42:52 2012 +0000

    Merge "PEP8 fix in conf.py"

commit 8e9fcbaa7802f6f714fcb1a8544a9cb506cb3ec9
Merge: 717cb2b 5d206b4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 24 23:00:11 2012 +0000

    Merge "Correctly re-raise exception on bad v1 checksum"

commit 717cb2bdfdcd6dcd1c8e2b23a3600059fa9ed674
Merge: eb8c956 309a441
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 24 22:57:24 2012 +0000

    Merge "Add nosehtmloutput as a test dependency."

commit d912a5df135eb383d91277682090dfd065c8de91
Author: isethi <iccha.sethi@rackspace.com>
Date:   Thu Aug 23 17:48:58 2012 +0000

    Activation notification for glance v1 api
    
    Sends notification after activation of image in glance
    v1 api
    
    Fixes bug 1038190
    
    Change-Id: Ic535ce37cd9df652b94b0ed152b5b87dcec28ecf

commit eb8c956753fb7b3c6d016a79d4a9297075f4229d
Author: Clark Boylan <clark.boylan@gmail.com>
Date:   Wed Aug 22 17:04:23 2012 -0700

    Add glance/versioninfo to MANIFEST.in.
    
    Fixes bug #1040734
    
    Adding glance/versioninfo to MANIFEST.in adds the versioninfo file to
    sdist packages. Adding this file to sdist packages allows versioning to
    work properly when installing from an sdist package.
    
    Change-Id: I7c9d2843e428fb0da1ffb461410c75a25a6e51d0

commit f8467bfcef0795153fa7b6488bf866b6628669af
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Thu Aug 23 11:10:28 2012 -0400

    HTTPBadRequest in v2 on malformed JSON request body.
    
    Fixes bug 1039901
    
    Change-Id: I79ff2059f8f4de60cc92f8cf89cd80be74529e3c

commit dcca6cd96c46bff0695e3e5b28782f7d3038d39f
Author: Ray Chen <oldsharp@163.com>
Date:   Thu Aug 23 12:24:09 2012 +0800

    PEP8 fix in conf.py
    
    Fix PEP8 issues in doc/source/conf.py.
    
    Change-Id: Ia35ad77af3c74ffd4c67bc6eef662b038937fdad

commit dc6ef98a4b8f9cc2bd379e4e6583ceb5dec50b89
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Thu Aug 23 03:31:36 2012 +0000

    Typo fix in glance: existant => existent
    
    Impact:
    * Test function names
    * Test strings and comments
    * Comment in glance/registry/api/v1/members.py
    
    Change-Id: I8cec84c4934c08905e7f8758dec3622a5261b153

commit 87033d04d5cd0149b2ae5fbd5d4067d22e9f1784
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 22 19:20:12 2012 -0700

    Rename glance api docs to something more concise
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: Ic2206b9a3233d9b9d0617a253749d2021d14ac20

commit 37dc071dcd8e5c9546e165cb2138475ae39cc294
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 22 19:17:46 2012 -0700

    Drop deprecated client docs
    
    Link out to the necessary python-glanceclient resources rather than
    maintain docs on legacy usage.
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: I769cd21b900df353e7eee3d675989b1ad32f8edf

commit 087046b4e6723a6dc701c6fe6c120f9491fedbd8
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 22 19:03:24 2012 -0700

    Clean up policies docs page
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: I65cd8e9e34ce25cbf0b45900fc73df1ffb03c7ef

commit 11a9a4847c8544c0d0860bc3a38c8dbed7d38478
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 22 18:45:44 2012 -0700

    Remove autodoc and useless index docs
    
    * Remove autodoc sphinx extension
    * Ignore auto-generated 'api' docs
    * Prevent the corresponding 'api' index from being created
    * Prevent an empty 'index' page from getting generated
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: I82c9389f884ea4af853f1215731c051d1fb596e8

commit 66c10d434aa3163a46828e581970be521405d9e3
Merge: 32584be 6089423
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 23 00:27:37 2012 +0000

    Merge "Add DB Management docs"

commit 309a441e0126fd7365fb2e40e2763fc33bd72220
Author: Clark Boylan <clark.boylan@gmail.com>
Date:   Tue Aug 21 14:12:39 2012 -0700

    Add nosehtmloutput as a test dependency.
    
    Adding nosehtmloutput as a test dependency allows nose to output its
    results to an html file. This will be used by Jenkins to save logs on
    a different server.
    
    Change-Id: I811f56c37218301c4c5bd25bae92a4b5b74537de

commit 37d1c1d83ca7b6cc811c9fbf9e7012d54bc271bb
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 22 09:12:15 2012 -0700

    Remove partial image data when filesystem is full
    
    When an image is uploaded that fills up the local filesystem, attempt
    to delete the created file. This only applies to the 'filesystem'
    store driver.
    
    Fixes bug 1019421
    
    Change-Id: Ie12d736f3efb29b0862fef2899a1d2c142def38e

commit c068c7f217036263d3d56b0410f34f259303aa10
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 22 08:39:54 2012 -0700

    Add 'bytes' to image size rejection message
    
    Change-Id: I943c5acb8693decf618d6796e027381431db578f

commit 32584bed6c9acdf21c1cfb07bea222c840259491
Merge: 2b4a7b7 75339f4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 21 23:09:51 2012 +0000

    Merge "Add policy check for downloading image."

commit 2b4a7b73d91bb9111c3babe2033059c0fce43e66
Merge: a6de4de bcb7729
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 21 20:55:24 2012 +0000

    Merge "Add back necessary import."

commit 75339f4712314c65fe0f0ddc3bcec691a725bc99
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Mon Aug 20 10:44:13 2012 -0400

    Add policy check for downloading image.
    
    This patch adds a policy, 'download_image', to be enforced when image data is
    retrieved. It also does some basic refactoring of how policies are enforced.
    
    Fixes bug 1038086
    
    Change-Id: Idd844b615d362eae3197e106067c29dba8e3eeda

commit a6de4de65b01df6851fd573260fbbd8bbe53431f
Author: Dan Prince <dprince@redhat.com>
Date:   Mon Aug 20 21:29:44 2012 -0400

    Convert limiting_iter to LimitingReader.
    
    Glance commit 3c69df5aa707b4216ef7001dbe28fa0a5912493c added a new
    limiting_iter function in utils which we use to limit reads to
    image data being uploaded. This simple generator doesn't work
    with image backends like the Swift store which require a 'read'
    method.
    
    This patch swaps out the simple limiting_iter function for a
    LimitingReader class which supports both 'read' and __iter__
    functions.
    
    Fixes LP Bug #1039212 which cause the exception below when used
    with the previous code:
    
    AttributeError: 'CooperativeReader' object has no attribute 'read'
    
    Change-Id: I87d9a30f7afe0207386d621050312374ced161d5

commit 3c69df5aa707b4216ef7001dbe28fa0a5912493c
Merge: 840edd2 3a80eee
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 20 17:38:08 2012 +0000

    Merge "Make max image size upload configurable"

commit 840edd20a2fc68669abc48bd6dacd12fb9d7b64c
Merge: ce403ba 743d3b2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 20 17:38:06 2012 +0000

    Merge "Fix auth cred opts for glance-cache-manage"

commit ce403bab09f352e5e210771894f0b4c76f122348
Merge: 56b80d7 2e9a467
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 20 16:27:16 2012 +0000

    Merge "Set proper auth middleware option for anon. access"

commit bcb77294bb9ef4e4755ad364707621e98ef6cabe
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Mon Aug 20 12:07:39 2012 -0400

    Add back necessary import.
    
    Unit tests are failing because an import of glance/common/config.py was removed.
    When it is imported it registers a few common cfg opts that otherwise would not
    be registered. If this doesn't happen then unittests will fail since they expect
    those opts.
    
    Change-Id: Ib90c0af3d935243fd0aa8487131305f6843c1330

commit 56b80d763d06f74bb7cf44a29cfd4af960c7a99c
Author: isethi <iccha.sethi@rackspace.com>
Date:   Mon Aug 13 21:49:58 2012 +0000

    Adds glance registry req id to glance api logging
    
    Fixes bug 1036409
    
    Change-Id: Ifadfa74ba4b8de854d248c4c72e5c195e8bdc4ed

commit 3a80eee8eedcee01e106cc9e217b5075b1057892
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Aug 19 10:49:59 2012 -0400

    Make max image size upload configurable
    
    Add conf option image_size_cap to represent what the internal
    IMAGE_SIZE_CAP constant used to cover in the v1 API. The default
    is reduced to 1 TB from 50 PB.
    
    Thoroughly test this on image create and update through the v1 API.
    
    Fixes bug 1038994
    
    Change-Id: Ie0985b62228f8b28c005a8847049d7b68d9b959a

commit 5d206b4c6b44eda74a1f8cc81f533b8139703f70
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Aug 19 10:14:24 2012 -0400

    Correctly re-raise exception on bad v1 checksum
    
    The exception re-raise during v1 image upload operation was
    failing due to some weirdness in _safe_kill. This patches over
    the problem by explicitly re-raising the caught exception object
    after doing the necessary teardown.
    
    Fixes bug 1036470
    
    Change-Id: I0929bb3b2ac88f0b80f47eb61e642fe1fee35218

commit 564c11e677dae2ca69aca5b1c5331f66f58725d5
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Aug 17 15:01:51 2012 -0400

    Return httplib.HTTPResponse from fake reg conn
    
    Fixes bug 1038219
    
    Change-Id: Ib7e205398c532007d189cdde3ab850b721f06a2a

commit edb2bf14416adb09bade58d8dec87ce0436c545c
Merge: 5eb7ac1 881e107
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 17 19:14:40 2012 +0000

    Merge "multi_tenant: Fix 'context' is not defined error"

commit 608942342795b8f96ba9543bc7fae34b26cb10fc
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Aug 17 12:12:16 2012 -0400

    Add DB Management docs
    
    Fixes bug 909064
    
    Change-Id: Ifd477b345dfb03efe8e8e5befa03a0cb2a3c3ce8

commit 743d3b230b03dced102122c24db2ccecbc8b0218
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Aug 17 11:01:45 2012 -0400

    Fix auth cred opts for glance-cache-manage
    
    The glance-cache-manage binary now supports the same auth env
    variables and flags as python-glanceclient. The old flag formats
    are still supported (but not documented) to support backwards-
    compatibility.
    
    Fixes bug 1038112
    
    Change-Id: If9f15d030e3167f5c81ea275c0005c854cd94a40

commit 5eb7ac1d2e9164d79b30da5b4db93caae632baf1
Merge: aea4f44 d13cbcd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 17 14:14:44 2012 +0000

    Merge "Validate uuid-ness in v2 image entity"

commit aea4f4416b7bc34b9bd27955cd1ccc99af6b09ad
Author: RongzeZhu <zrzhit@gmail.com>
Date:   Thu Aug 16 22:16:56 2012 +0800

    Remove unused imports
    
    Fixes bug #1037592
    
    Change-Id: I3365d028ab67931517d2f94cc4b7e3752fbdb869

commit 2e9a467dc822aa1175dc08b5ea12d363b9a04ffe
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Aug 16 17:07:43 2012 -0400

    Set proper auth middleware option for anon. access
    
    Fixes bug 1037793
    
    Change-Id: I89c05b5004f6a93608c0e23302f04b95b9018c29

commit 881e107e809e9ada5a734b9e0777375beb7233fe
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Aug 16 15:40:59 2012 -0400

    multi_tenant: Fix 'context' is not defined error
    
    Corrects the variable name 'context' to be 'self.context' in the
    configure_add method of the swift store. We changed/moved this code
    late during the review process of the multi_tenant swift feature
    and obviously didn't add a functional/unit test on the new location
    which now causes this exception to get thrown:
    
        NameError: global name 'context' is not defined
    
    This patch also includes a new glance function test to startup
    the Glance API in multi-tenant mode. The test_multi_tenant_mode
    test will fail with the previous swift store implementation.
    
    Fixes LP Bug #1037745
    
    Change-Id: I7681ad704b169c5fe815adf2fe704e5d18ea8e83

commit d13cbcd6d85a0dd67d88143686f8c83791ee79ff
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Aug 16 15:07:14 2012 -0400

    Validate uuid-ness in v2 image entity
    
    The image entity was allowing any string value to pass through in
    an image create operation. We should limit it strictly to UUID-like
    values.
    
    Fixes bug 1037725
    
    Change-Id: I3f28d3f2dc5c0f63322efe250051874d7975ec1f

commit c6b460837d53012f45e6089ac963d17ffd7b53b9
Merge: e818792 12f3487
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 16 17:25:49 2012 +0000

    Merge "Fix build_sphinx setup.py command."

commit e818792d7624d7fd242d2e7d415b9293cc4a8f4c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Aug 16 00:05:45 2012 -0400

    v2 Images API returns 201 on image data upload
    
    Fixes bug 1037391
    
    Change-Id: I93607874b932de658cc301a6f9bc53c83af66383

commit 07b72c388289c8e89b4dd2dd342a7f8147c438aa
Author: Alessandro Pilotti <ap@pilotti.it>
Date:   Fri Aug 10 18:01:48 2012 +0300

    Fixes issue with non string header values in glance client
    
    Fixes bug 1032798
    
    By using Glance client on Windows the following exception is raised:
    
    TypeError: sequence item 0: expected string, long found
    
    Details on how to reproduce the error are available in the bug description
    
    Change-Id: Ib4528702b11aabdf939c6358f92ad7ff9c3ff20d

commit c698cdc200e22a72cabba9917f2594b7a9d73263
Merge: 09b3e49 27c1c5a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 15 23:20:12 2012 +0000

    Merge "Raise 400 error on POST/PUTs missing request bodies."

commit 09b3e497b6af7adfa2e73778dea57118deb541aa
Merge: e7073d0 85d8d7a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 15 23:20:11 2012 +0000

    Merge "Updates Image attribute updated_at"

commit 12f34873c1a3727db8f09e608233f4052c111f64
Author: Clark Boylan <clark.boylan@gmail.com>
Date:   Tue Aug 14 17:48:29 2012 -0700

    Fix build_sphinx setup.py command.
    
    The DB migrate manage script needed to be wrapped in an if statement
    so that the autodocumentation did not barf on it. Additionally add a
    copyright header while we were editing the file.
    
    Change-Id: I0a37036d304790b52dde7fb68d37a6c99204b596

commit 85d8d7af5808a98bbae7b010595e08752d0c9bd0
Author: isethi <iccha.sethi@rackspace.com>
Date:   Wed Aug 15 20:20:24 2012 +0000

    Updates Image attribute updated_at
    
    When the image properties are updated, the image attribute updated_at
    should be updated as well.
    
    Fixes bug 1036507
    
    Change-Id: I889eab92e8f182633ab6e462cac1ff7ab0cb1223

commit e7073d028aa4c5221dba16b3d48a43189067fed9
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Wed Aug 15 12:27:00 2012 -0400

    Add policy enforcment for v2 api.
    
    This patch adds policy checks in the images controller for all actions that need
    to be enforced. It also fixed an issue with unit tests where the v1 unitests
    were testing less than they should be. This was due to the default policy being
    overridden in the test and causing a forbidden to be raised whenever policys
    were changed, regardless of the policy rule added.
    
    Fixes bug 1036846
    
    Change-Id: Ib351d8c1e13164d02b02685c808b30045f7850ea

commit 27c1c5a50a1acb92be8a159a2ddf306b17072a9d
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Wed Aug 15 13:51:44 2012 -0400

    Raise 400 error on POST/PUTs missing request bodies.
    
    Fixes bug 1034972
    
    Change-Id: I1847972c83353452381c0ee5eee2eb75f51d1dbc

commit 2580d3b0f5c0a8069b40ce2f54481c6e82656232
Merge: c189324 fb2260b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 15 10:29:40 2012 +0000

    Merge "Return 201 on v2 image create"

commit c189324735191b76ec1d21b77d76f25c78e3829c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 14 14:12:53 2012 -0400

    Mark bin/glance as deprecated
    
    * Add a WARNING to the usage of bin/glance
    * Print a WARNING line to stderr when bin/glance is called
    * Raise a UserWarning on 'import glance.client'
    * Implements bp glance-deprecate-client
    
    Change-Id: Iabce7569d28c5dc73b5e1ceb55e4e4f2fc47727b

commit fb2260bdc6bace65d895b6eef24d224cf865c4ce
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 13 22:47:44 2012 -0700

    Return 201 on v2 image create
    
    Fixes bug 1036501
    
    Change-Id: Iccaeb14f0ceb85fe8e0f3aedd2ad7a4ceaead6e2

commit 3d93ca6655425617dfea293b67a3489a470bb91a
Merge: 9631283 2bed42c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 13 19:34:48 2012 +0000

    Merge "Ignore duplicate tags in v2 API"

commit 963128349209539ff22ec4431d82f1322e7e3723
Merge: 42ebabb 3557b97
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 13 04:48:29 2012 +0000

    Merge "Expose 'protected' image attribute in v2 API"

commit 42ebabbca7044d6a329c752676b67ed2923447b5
Merge: 60576a5 014d3f9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 13 00:53:11 2012 +0000

    Merge "Move to tag-based versioning."

commit 2bed42cd3c42cc19e3d5c6d16fe69fa94f627447
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Aug 12 14:30:20 2012 -0700

    Ignore duplicate tags in v2 API
    
    * Creating/updating an image with duplicate tags should result in
      only a single instance of that tag being added
    * Attempting to explicitly tag an image with a duplicate tag
      should result in no tags being added
    * Fixes bug 1035961
    
    Change-Id: Ie16091f046de98914aea1a1a6777773ddc95c615

commit 3557b97c82a9f66133147bd87a3416740214bacc
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Aug 12 11:35:08 2012 -0700

    Expose 'protected' image attribute in v2 API
    
    If protected is true, an image will not be deletable.
    
    Related to bp api-2
    
    Change-Id: I169f435d4cb8d66baf3f8c1ca3b869083b24c841

commit 014d3f9ee378a0c621c2ad1fad4c7338349b98ff
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sat Jul 7 16:10:17 2012 -0500

    Move to tag-based versioning.
    
    * Update to latest openstack-common setup code
    * Add openstack-common version module
    
    Change-Id: Id6876b55554c358fbd29e7ef8377f42a72a98301

commit 60576a5baedf910af16b26e0eedb4e487d308166
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Aug 11 15:39:46 2012 -0700

    Update restrictions on allowed v2 image properties
    
    The list of allowed and readonly image attributes has gotten out of
    date, so this change updates those lists. This change also adds a
    similar check to ensure certain special properties names are reserved as
    they would conflict with existing database properties that are either
    not presently exposed or exposed under a different name.
    
    Change-Id: I56d6c938dd6a5353e15b3e5ef913fae5b4629d52

commit 9b98df52fe295b448eb5950c24722a45c0c60407
Merge: 57dd669 2fb37ab
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 12 05:23:57 2012 +0000

    Merge "Reveal v2 API as v2.0 in versions response"

commit 57dd669ef0aadca26b43142142db2fbb29a9d4d2
Merge: 1ed7517 c4f7545
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 12 03:51:13 2012 +0000

    Merge "Sync with latest version of openstack.common.notifier"

commit 1ed75179b81e3cd547505194199c5d1d9c9c86e2
Merge: 71ef074 f3d8c40
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 12 03:44:24 2012 +0000

    Merge "Add min_ram and min_disk to v2 images schema"

commit 71ef0749d629821ac7ed4219b93e332d9b6961d5
Merge: 9054dfb 98cf6a4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 12 03:43:35 2012 +0000

    Merge "Update rbd store to allow copy-on-write clones"

commit 9054dfb563bb4f076c4905f7c94d8e5924f3fe7c
Merge: 65e2308 92b17a0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 12 03:40:39 2012 +0000

    Merge "Filter out None values from v2 API image entity"

commit 65e230813bc87bbea64273ae5d07f9152d110cad
Merge: bbf3eea 119be86
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 12 02:40:27 2012 +0000

    Merge "Make swift_store_admin_tenants a ListOpt."

commit 2fb37ab925224076f70e147334dcd3a4db29f166
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Aug 11 16:13:55 2012 -0700

    Reveal v2 API as v2.0 in versions response
    
    * Report v2.0 API compatibility, not v2
    * Allow users to specify '/v2' or '/v2.0' in their request URI
    
    Related to bp api-2
    
    Change-Id: Ia8d41902a2171aad8f06d3ac329a3e3c097cdc90

commit f3d8c40b6255cf962c4b42b9c306562d7d7de586
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Aug 11 15:16:21 2012 -0700

    Add min_ram and min_disk to v2 images schema
    
    The min_ram and min_disk image attributes are stored in the db, so
    we need to expose them as core image attributes to preserve
    backwards-compatibility with the v1 Images API.
    
    Related to bp api-2
    
    Change-Id: If2afa1f171aa6c4f07052225592d216f7e09ca90

commit 92b17a0d100d2d739c0f73eb58e87fd749fc71a8
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Aug 10 14:59:56 2012 -0700

    Filter out None values from v2 API image entity
    
    Prevent core image attributes with None values from being returned
    to v2 API clients. Most attribute schemas are of type 'string' and
    returning None is invalid.
    
    Fixes bug 1034790
    
    Change-Id: I2885cabf14307e46ff711bdabfcd3ff3253e6628

commit bbf3eeaa83ce39a97b02872df0a033d291fd9fba
Merge: 20719bc a9f4d69
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Aug 11 21:03:26 2012 +0000

    Merge "Refactor v2 images resource unit tests"

commit 20719bcf5220d3d2c051bc88a4c980892356a663
Merge: 7c22d0d 5d259b1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Aug 11 17:58:49 2012 +0000

    Merge "Sync with latest version of openstack.common.log"

commit 7c22d0d548eb3867f60afb884758c8132f8d7111
Merge: a23617e d3a9f50
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Aug 11 17:58:48 2012 +0000

    Merge "Sync with latest version of openstack.common.timeutils"

commit a9f4d69ba6a9cc55074347c0ea17dae6a2b75a8f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Aug 10 15:54:25 2012 -0700

    Refactor v2 images resource unit tests
    
    * Add _fixture() helper method for generating image fixtures
    * Simplify some tests that were asserting things they didnt need to
    * Remove unused glance.common.exception import
    
    Change-Id: I5eec5430df2ca0867b21fcfda0586ef5273061f3

commit a23617e7abd3a5c8d6cb58b64543de9e5bfa1ea1
Merge: 54cf135 e268e91
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Aug 11 17:44:11 2012 +0000

    Merge "Sync with latest version of openstack.common.importutils"

commit 54cf135061ae780e3923c995beb17caa8f90ae13
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Aug 10 10:43:26 2012 -0700

    Use container_format and disk_format as-is in v2
    
    Rather than force a painful migration to type and format, use
    container_format and disk_format as they are in the v1 API for v2
    since there isn't a clear path to an interoperable alternative.
    
    Related to bp api-2
    
    Change-Id: If8161390abf17961885e5c02e38d635b287aeca4

commit 119be8609412a0a87ae6d2de9b783c2adb347be7
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Aug 10 16:54:49 2012 -0400

    Make swift_store_admin_tenants a ListOpt.
    
    The swift_store_admin_tenants config option should have never
    been a boolean opt. Actually using the config in this state will
    cause glance-api to fail to startup.
    
    Fixes LP Bug #1035471.
    
    Change-Id: Ie800f6ee7cf1b8d863d5e8e8ac41e8ed36f345f1

commit f6840263de8dff0cbfc57b9543780ece4fae5d5a
Merge: 6c75aa9 c794afa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 10 20:15:55 2012 +0000

    Merge "Sync with latest version of openstack.common.cfg"

commit 98cf6a443d49c7b6e787deb55ea66454ed96e7dc
Author: Josh Durgin <josh.durgin@inktank.com>
Date:   Fri Aug 10 04:55:13 2012 -0700

    Update rbd store to allow copy-on-write clones
    
    This is in preparation for cinder blueprint
    efficient-volumes-from-images. If the same rbd cluster is used by
    glance and cinder, a new volume can be created as a copy-on-write
    clone by the ceph cluster rather than downloading all the data from
    glance.
    
    Since bp api-v2-store-access is implemented, make the location for the
    rbd store more specific, so cinder can check that it's accessing the
    same backend as glance. fsid is a unique identifier for a Ceph cluster.
    
    Within a cluster, the full specification of an rbd image includes
    pool, image name, and optionally snapshot. Creating a copy-on-write
    clone is only possible in rbd on a protected snapshot, so after
    uploading an image to rbd, create a snapshot and protect
    it. Protection means it can't be deleted until it is unprotected, so
    you can't accidentally render any clones unusable by removing their
    parent. Add a new exception, InUseByStore, to handle a snapshot or
    image that's still protected or otherwise in use.
    
    More details can be found at
    http://ceph.com/docs/master/dev/rbd-layering/.
    
    For backwards compatibility, only use these new features if they are
    supported by the installed librados and librbd python bindings. Otherwise
    fallback to the previous location specifier which only includes image
    id, since cloning won't work anyway.
    
    Since the location parsing is now a bit more complicated, add unit
    tests for it.
    
    Change-Id: I9711702276d966f88284fae44f9531b992cdd06f

commit 6c75aa97d46b4d770386e916abbfe627416e1908
Merge: da9a8d5 4ba5870
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 10 19:03:30 2012 +0000

    Merge "Call stop_servers() in direct_url func tests"

commit da9a8d5d6571ea2c1a5179e2af425c931d5a092e
Merge: 99d5173 d9ec683
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 10 18:37:40 2012 +0000

    Merge "Fix a couple i18n issues in glance/common/auth.py."

commit 4ba5870fd4143c2cf4ff8028791f2cb294c7c76e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Aug 10 11:01:40 2012 -0700

    Call stop_servers() in direct_url func tests
    
    The recently-added direct_url tests aren't spinning down their
    api servers. This was causing arbitrary failures when running
    tests in jenkins and smokestack.
    
    Change-Id: I06293fdec8449c15fe993653157c327c8a7e8418

commit 99d5173afe55ad08c855c48e4e839d18ab3592e8
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 8 13:49:40 2012 -0700

    Drop unfinshed parts of v2 API
    
    The v2 API will be implemented over time as the spec develops. We
    shouldn't implement anything that we aren't 100% behind. This drops
    all of the things that we aren't in love with:
    * Drop access records and related schemas
    * Drop owner attribute from image
    
    Related to bp api-2
    
    Change-Id: Ieef2c141282e7018d56e79aee8f20af0542af25b

commit d9ec68379354b0f5479a924bc1230b61e381e8a2
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Aug 10 09:14:55 2012 -0400

    Fix a couple i18n issues in glance/common/auth.py.
    
    Change-Id: I6944bb46fbd6784b7e9b84d05d453b56bf62d21c

commit c4f75459307d0a970c2d1e0cfde9b2bbe4acb1b5
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Fri Aug 10 12:10:55 2012 +0100

    Sync with latest version of openstack.common.notifier
    
    Changes since last sync:
    
     - Add multiple-driver support to the notifier api.
     - fix bug lp:1019348,update openstack-common to support pep8 1.3.
     - Fix missing gettextutils in several modules.
     - Fix line length for pep8 compliance after cloning into other projects
     - Switch common files to using jsonutils.
    
    Also add notifier and local to openstack-common.conf since we appear
    to have forgotten to add them when they were imported.
    
    Change-Id: If2cea51761ae14d188861518c567abdf0d8a0649

commit 5d259b1bab85c2842388da8b79d7593dd4ddcedd
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Fri Aug 10 12:13:28 2012 +0100

    Sync with latest version of openstack.common.log
    
    Changes since last sync:
    
     - Install a qualified except hook.
     - Remove code to clear basicConfig root log handlers
     - don't throw exceptions if %(color)s tag is used
     - fix bug lp:1019348,update openstack-common to support pep8 1.3.
     - Fix missing gettextutils in several modules.
     - Switch common files to using jsonutils.
    
    Change-Id: I430caf24526e571688c78f3cdd9f9453f5d525c4

commit d3a9f506087ced00af13e280138883b24022be00
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Fri Aug 10 12:07:29 2012 +0100

    Sync with latest version of openstack.common.timeutils
    
    Changes since last since:
    
     - Remove unused imports
     - Fix utcnow_ts to return UTC timestamp
     - Add nova time util functions to timeutils
     - Replace datetime.utcnow with timeutils.utcnow
    
    Change-Id: Ic98bfc9655edad8f7319daafede192534f68a1a5

commit e268e91e7a3312be2287a6c498fb9e1f5a79b561
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Fri Aug 10 12:01:54 2012 +0100

    Sync with latest version of openstack.common.importutils
    
    Changes since last sync:
    
     - Improve exception from importutils.import_class().
     - Merge "add import_object_ns function"
     - Update common code to support pep 1.3. bug 1014216
     - add import_object_ns function
    
    Change-Id: Ibaa60f50af255ec77a3f0c93213f8a9f446eeb0d

commit c794afa95c566cd97c9f5d6fa9d4670cfa18cd9f
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Fri Aug 10 12:01:28 2012 +0100

    Sync with latest version of openstack.common.cfg
    
    Changes since last sync:
    
     - Modifies _is_opt_registered fcn to check for duplicate opts
     - cfg: Fix typo in documentation
     - Update common code to support pep 1.3. bug 1014216
     - Use 'is not None' instead of '!= None'
     - Add support to include config aliases
     - allow empty config values
    
    Change-Id: Ibe31c90a71e58bdea2f947a039f2c2dce2749c14

commit ae6e288072f833b11c557747d354c6e5ba71a439
Author: Nikhil Komawar <nikhil.komawar@rackspace.com>
Date:   Sun Aug 5 10:24:16 2012 -0500

    Allows exposing image location based on config
    
    It would be good to allow exposing image location to trusted clients,
    say Nova. Thus, eventually helping for internal deployments. This merge
    prop enables us to set a config value which will let us either expose
    the image location or not expose it.
    
    Edits from markwash:
     * unit test refactoring
     * should not return direct_url as None, that would violate the schema
       which requires direct_url to, when present, be a string
    
    implements bp api-v2-store-access
    
    Change-Id: I69da3b4ce3fc9261cbf448e797e48affa56281ef

commit 19334f0f8d0d2e8bcc086ef27e44c0a6a80bd9d6
Author: Brian Elliott <brian.elliott@rackspace.com>
Date:   Sun Jul 22 14:39:08 2012 -0500

    Do not cache images that fail checksum verfication
    
    On an image GET, recalculate the image checksum as the image
    data is streamed to the client.  Verify that the checksum matches
    the original checksum calculated when the image was added to Glance.
    If checksum validation fails, purge the image from the cache.
    
    This type of situation could occur if the backend image store
    is malfunctioning.
    
    bug 1028496
    
    Change-Id: I9f38bac8360016bb12b5edaad87c50939a538cc0

commit e200f6fe2412edd564759a5a98709c704348fc6f
Author: Sulochan Acharya <sulochan.acharya@rackspace.co.uk>
Date:   Thu Aug 2 11:58:50 2012 -0500

    Omit deleted properties on image-list by property
    
    If a user updates an image property with purge-props, it is marked
    as deleted. However, the query to filter by custom property ignores
    this, and returns match even for records with deleted set. This patch
    introduces a small change by inserting deleted=False in the query to
    ignore those deleted properties.
    
    Also, some changes in simpledb is introduced to handle user defined
    properties in the correct format.
    
    - Inserts deleted=False on properties filter query. Fixes bug 1025697.
    - Updates simpledb to handle user defined property in correct format.
    
    Change-Id: I435751ef6fc7ba0537e573fac54c34b81098271b

commit a7b15a9df18547a541588ed2d6488789323c7687
Merge: 006254c 7335088
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 8 01:22:56 2012 +0000

    Merge "Handle images which exist but can't be seen."

commit 006254c5050176c9b569007f6ef7203e6067215d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Aug 3 10:56:06 2012 -0700

    Allow server-side validation of client ssl certs
    
    This adds a 'ca_file' config option that points to a local
    CA cert that will be used to verify certs provided by
    connecting clients. The 'ca_file' option is only used if the
    server is already properly configured to to use SSL - that
    means having a valid 'cert_file' and 'key_file'. If no 'ca_file'
    is provided, the behavior will remain the same - the server
    will still provide its cert to clients, but it will ignore
    certs sent back from those clients.
    
    Fixes bug 1032451
    
    Change-Id: Ie48646b0fc5398ba7cda2fb627b820f533482e00

commit 7335088d896442e961c07e71bbb67ffd98f1f87a
Author: Michael Still <mikal@stillhq.com>
Date:   Sun Jul 29 10:05:45 2012 +1000

    Handle images which exist but can't be seen.
    
    If the master and the slave glance have different permissions, you
    can end up with a 409 exception at upload. For example:
    
     - the image is visible to the replication user on the master
     - the image is present on the slave, but not visible to the
       replication user
    
    The replicator checks for the existance of the image by doing a HEAD
    on http://server:port/v1/images/uuid and gets a 404 back. It therefore
    decides the image doesn't exist and that it should be replicated. It
    does a POST for that URL, and gets a 409 back saying that UUID is
    already in use.
    
    Resolves bug 1030396.
    
    Change-Id: Id5fdb7977692593fd6c2e203f0440d4aa5339d92

commit 4ac0f4f0a49390d730e97861b546942ad1e3a485
Merge: 4940aed 616d2f9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 3 23:04:08 2012 +0000

    Merge "Adds proper response checking to HTTP Store."

commit 4940aed558f1159c5e0580ec7e18ab008098fb4a
Merge: 3e108e5 5cf0c9b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 3 20:13:51 2012 +0000

    Merge "Store context in local thread store for logging."

commit 3e108e53e517c3c8f9c926eadf1ef1809ccb01af
Merge: ab8bc2a 751ac81
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 3 18:53:56 2012 +0000

    Merge "fix the qpid_heartbeat option so that it's effective"

commit ab8bc2ab3b39f4975692e58ecff73fe607c3d2f4
Merge: 0d35dba efb30dd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 3 18:15:50 2012 +0000

    Merge "Make TCP_KEEPIDLE configurable"

commit 0d35dbaf780d28220224339d5c30795a30fa3948
Merge: e6c25de a30887a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 3 00:01:10 2012 +0000

    Merge "^c shouldn't leave incomplete images in cache"

commit e6c25dedcb46bd76318ba10a14a0353599b93066
Merge: f285804 6eeba44
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 23:42:31 2012 +0000

    Merge "Use function registration for policy checks"

commit f2858042a2ca619485a3815971dac68cd300dfef
Merge: 577511c b3da56c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 23:27:47 2012 +0000

    Merge "Add a missing header strip opportunity."

commit 577511c99bd43ad3c9a3b00ff2e5691e86f7b781
Merge: bab5aa1 e6b50bd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 23:03:43 2012 +0000

    Merge "Add links to image access schema"

commit 616d2f9a65f7995298153cdf8a1e94bb62912ebe
Author: Gabriel Hurley <gabriel@strikeawe.com>
Date:   Wed Aug 1 17:40:30 2012 -0700

    Adds proper response checking to HTTP Store.
    
    The HTTP Store now handles the following cases:
    
      * Redirects are resolved (infinite redirect chains are prevented).
      * 4xx and 5xx status codes result in a proper exception instead
        of trying to continue with the image.
    
    Fixes bug 1009248.
    
    Change-Id: Ibc44413d630bf35e0c396adc430c39f4295030fd

commit 6eeba442326eca05754d33c4a3fcd21623d3c11b
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Aug 2 13:46:29 2012 -0500

    Use function registration for policy checks
    
    The original policy framework allowed new policy checks to be created
    through inheritance.  This is somewhat clunky and unnecessary in
    Python.  This change refactors policy.py to allow new policy checks
    to be registered using an @register() decorator.  One consequence is
    that HttpBrain is deprecated.
    
    Care has been taken to ensure backwards compatibility; deprecation
    warnings will be emitted for uses of HttpBrain or the inheritance-
    based checks.
    
    (Pull-up from openstack-common.)
    
    Change-Id: Ib11f4581d187d037d2081515d70e325425d68760

commit bab5aa1d6afb977a7a029282d646ed8fa2324419
Merge: 4c4f627 8a4f377
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 18:38:57 2012 +0000

    Merge "Add swift_store_admin_tenants option."

commit 4c4f62751b5893b3d6acfe424a34d1195d9a1198
Merge: d240373 480743a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 18:37:58 2012 +0000

    Merge "Update v1/v2 images APIs to set store ACLs."

commit 751ac81defe61d4cc8fb5e86dc96f76bdee6f398
Author: Pádraig Brady <pbrady@redhat.com>
Date:   Thu Aug 2 18:27:54 2012 +0100

    fix the qpid_heartbeat option so that it's effective
    
    The 'hearbeat' typo caused this setting to be ineffective.
    
    Fixes bug: 1032314
    Change-Id: Ia2cdb7185e8ec92ca6e587678a688d23a5ac0221

commit e6b50bdbbd9d397e05811fb6b7899141860a39b9
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Thu Aug 2 00:11:25 2012 +0000

    Add links to image access schema
    
    /v2/schemas/image/access was missing links, both as properties and link
    descriptor objects, although /v2/images/<id>/access was returning them
    in responses. This change adds the link properties to the schema
    response.
    
    Addresses bp api-v2-links
    
    Change-Id: I68e576dadbbe37d4d33d2238ea0e4c798a4a667b

commit a30887aa3b7a220a1f722e94fa69201e5878e766
Author: Tom Hancock <tom.hancock@hp.com>
Date:   Wed Aug 1 15:58:46 2012 +0000

    ^c shouldn't leave incomplete images in cache
    
    Fixes LP bug 1031842
    
    Use a finally clause for the xattr and sqlite
    image cache implementations of open_for_write()
    such that if the commit() or rollback() aren't
    called and the image remains in the incomplete
    dir that it is moved to the invalid dir
    
    Change-Id: Id9a0ac56a8ae9fd03af9ccc4989c9b304c95bdde

commit d240373db87dbcde9ffbcdcc563bb227a0a083c3
Merge: 1801f3e 9200160
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 15:52:38 2012 +0000

    Merge "Reject rather than ignore forbidden updates"

commit 1801f3e6123c221063ea30e8d0257ef5f2b35f6e
Merge: e990195 6cc2300
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 05:36:16 2012 +0000

    Merge "Use event.listen() instead of deprecated listeners kwarg."

commit e99019551636c6328d0420692d0062269651a828
Merge: 786e892 e7919a2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 04:26:13 2012 +0000

    Merge "Process umask shouldn't allow world-readable files"

commit 786e892be584b899eb3d5bd17f97ff729fbc0b82
Merge: da8e367 14468d0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 04:02:32 2012 +0000

    Merge changes I70bc8f8b,I45752741
    
    * changes:
      Raise HTTPBadRequest when schema validation fails
      Expose 'status' on v2 image entities

commit da8e3677f6553012f19761e34215d7e56a5dbcdf
Merge: b4ae20c ac50784
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 04:00:19 2012 +0000

    Merge "URLs to glance need to be absolute."

commit b4ae20c8eee32d192b0ee29318eed4c2a23cb04c
Merge: 36903c6 4d50b67
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 03:44:23 2012 +0000

    Merge "uuid is a silly name for a var"

commit 36903c695afe64693d80146edb6bf175231e9b6a
Merge: e557c0e 53b5125
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 03:38:37 2012 +0000

    Merge "Support master and slave having different tokens."

commit 4d50b67b1d67b91612ccf9d70ddb61d7c11afd2b
Author: Michael Still <mikal@stillhq.com>
Date:   Thu Aug 2 09:48:50 2012 +1000

    uuid is a silly name for a var
    
    Given its also the name of an import.
    
    Change-Id: Ib19e69eb9a1047f735ff649a05b400642e8ec29e

commit 53b5125b2451ed7d80d4138076a1c47c8eabbffe
Author: Michael Still <mikal@stillhq.com>
Date:   Fri Jul 27 15:04:40 2012 +1000

    Support master and slave having different tokens.
    
    This came up recently for a user -- their regions have separate
    keystone instances, and therefore don't share auth tokens. So, in
    some cases we need to pass in two tokens instead of one.
    
    Resolves bug 1029758.
    
    Change-Id: Iad241ff3583a62297d89ee15cbd3d58417e5fedf

commit b3da56c7489446281f3749b3df81090692982a7e
Author: Michael Still <mikal@stillhq.com>
Date:   Thu Aug 2 10:45:42 2012 +1000

    Add a missing header strip opportunity.
    
    As well as adding some more logging to make this easier to debug in
    the wild.
    
    Change-Id: I8ec765b6f066569a7483f01201d4907ad1794291

commit ac507843970dd097bca7f7cc7b9871302ca32140
Author: Michael Still <mikal@stillhq.com>
Date:   Thu Aug 2 10:32:58 2012 +1000

    URLs to glance need to be absolute.
    
    Otherwise the apache SSL frontend that many users deploy will get
    confused and return a HTTP error.
    
    Change-Id: Ie8ae560810a5e5419e4d4aacae17e1e301ed4126

commit e557c0ef3ef94ebf6469491563d660f2ad14d419
Author: Michael Still <mikal@stillhq.com>
Date:   Thu Aug 2 09:55:41 2012 +1000

    Use with for file IO.
    
    Use with for file IO, instead of keeping track of state myself.
    
    Change-Id: Ifc1a49fa51d3e7da08da32fb0966f2637089b58a

commit 5aec05ca812f970152d3929cc07e21ba16f1cc01
Merge: eeedad3 db33171
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 1 23:49:50 2012 +0000

    Merge "Move optional dependencies from pip-requires to test-requires"

commit 8a4f3773ac0b3e66643dd8af964399e48da47202
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Aug 1 13:42:47 2012 -0400

    Add swift_store_admin_tenants option.
    
    Add a swift storage option to configure a default list of admin
    tenant IDs which will be granted write access on any swift
    images.
    
    This setting might be useful when a user choose not to use a global
    swift admin role when managing glance images. This might also
    be useful when implementing delayed delete for glance swift
    multi-tenant.
    
    Partially implements blueprint: swift-tenant-specific-storage.
    
    Change-Id: Id65e1c8d114c9551b99f6a18c527ba26aefd341f

commit 480743a2d7e1dc7be066e2fbffd3063ca4fc6a9f
Author: Dan Prince <dprince@redhat.com>
Date:   Sun Jul 1 21:18:28 2012 -0400

    Update v1/v2 images APIs to set store ACLs.
    
    Updates the images controllers so they call set_acls on
    the backend store when adding/updating images and members.
    
    Made some changes to the v2 API unit/functional tests to
    use real locations instead of just UUIDs so the tests work
    with the new set_acls call.
    
    Partially implements blueprint: swift-tenant-specific-storage.
    
    Change-Id: Ib249acfe440f4b75bc9edd7b73fe10127b8333b1

commit 6cc23005d042901e01bfee4deeb6367879012d22
Author: Josh Kearney <josh@jk0.org>
Date:   Wed Aug 1 12:05:42 2012 -0500

    Use event.listen() instead of deprecated listeners kwarg.
    
    The listeners kwarg is deprecated in SQLAlchemy 0.7.0. Since 0.7.3 is
    the minimum required version of SQLAlchemy, use the new event.listen()
    API instead.
    
    Fixes bug 1031405.
    
    Change-Id: Ibbfe46d065575b1954a47b3a28c61151dfb1e06e

commit 5cf0c9b4eb354a9a4e0d115510946c732f4006fa
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Wed Aug 1 00:32:30 2012 -0400

    Store context in local thread store for logging.
    
    This also fixes the logging of request ids for every request.
    
    Fixes bug 1031596
    
    Change-Id: Ifd0217c99402316214efaf1fe8533c60c2277257

commit e7919a2642f6e6180f30732394e7b0dc97868c6a
Author: Tom Hancock <tom.hancock@hp.com>
Date:   Wed Aug 1 14:15:01 2012 +0000

    Process umask shouldn't allow world-readable files
    
    This ensures that image cache files and file-backed
    images are not world-readable.
    
    Fix LP bug 1031796
    
    Change-Id: I85a26b4e645e7cb32e17164e47fad62f4c44976a

commit efb30dd6405aa1af1b6f22296bf026b20878c526
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Aug 1 14:25:30 2012 +0000

    Make TCP_KEEPIDLE configurable
    
    Addresses LP bug #1031794.
    
    Change-Id: I9a3a6a23b1bcec5229b15234512e04cc47c3ffd9

commit 92001604be2e7353ca77197f85abac6c2997caab
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Aug 1 10:23:23 2012 +0000

    Reject rather than ignore forbidden updates
    
    Return HTTPForbidden when an attempt is made to update
    an attribute which is either read-only or only settable
    by an Admin user. Previously a success (200) was returned
    for these cases.
    
    Related to bp api-2.
    
    Change-Id: I1aff6975a968a00bf133face606cc35280835a4f

commit 14468d07f6a1f2cb283afc90154aecf2b4c10893
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Fri Jul 27 12:10:27 2012 +0000

    Raise HTTPBadRequest when schema validation fails
    
    Raise HTTPBadRequest when request schema validation fails rather than
    InvalidObject. This prevents a 500 Internal Server Error.
    
    Related to bp api-2.
    
    Change-Id: I70bc8f8b8fbb0f95d9563e9eb08d7e0a47111198

commit fb496437f25c54fe756ba9aae4af19dd7a112e50
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Aug 1 12:05:23 2012 +0000

    Expose 'status' on v2 image entities
    
    Added 'status' read-only attribute to v2 schema/serialization.
    Updated the schema and added unit tests as appropriate.
    
    Related to bp api-2.
    
    Change-Id: I457527413d4ccca813a45ac03e66a90071f0af76

commit eeedad333398c6c869214ddccfbb36719ca56429
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jul 30 20:13:16 2012 -0700

    Simplify image and access_record responses
    
    This removes the container around individual image and access_record
    entities in GET /images/<ID> and GET /images/<ID>/access/<TENANT>.
    Response bodies used to look like '{"image": {...}}', while now they
    look like '{...}'.
    
    Fix bug 1031185
    
    Change-Id: I1eacee2d877f5dde3612b3d4006d4caf489f49e1

commit c901c6a0500543ba21e51fbc26b6c0ec8e2f26dd
Merge: 55a3b3c ff83d4f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 31 23:14:41 2012 +0000

    Merge "Add in missing image collection schema link."

commit db33171ead3a4e6d9e5f880d53c375611d441805
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Jul 31 15:47:39 2012 -0400

    Move optional dependencies from pip-requires to test-requires
    
    python-sendfile and python-xattr are both optional library
    dependencies in Glance now. Some systems, like Windows, do not
    have these libraries and so we should move them from pip-requires
    to test-requires. AFAIK, the pip-requires is what is used to
    build the Windows installer.
    
    Fixes LP 1031396
    
    Change-Id: Ib47244e51ae03991e6171ab8d47238d955743567

commit 55a3b3cf51df1cd203c642fc1cb1cbc0dcb7bfa5
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Tue Jul 31 20:59:09 2012 +0000

    Fix dead link to image access collection schema
    
    Related to bp api-v2-links. The image access records list object
    contains a link to /v2/schemas/image/accesses, but that link returns
    nothing yet. This change adds the schema that the link should return and
    wires up the router to return it.
    
    Change-Id: I4303070f016a72fa1cd778d83423fa9a9f77897b

commit ff83d4fcc23f2b54086a24d7a6466a86e89e31b9
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Tue Jul 31 20:24:27 2012 +0000

    Add in missing image collection schema link.
    
    Related to bp api-v2-links. The schema link for GET /v2/images was
    missing, although its target /v2/schemas/images was present. This change
    adds in the link and updates tests.
    
    Change-Id: Ida6931147d6e4fba1bb02c0be9e755fb1751b986

commit 83a108c1b0522716c48ead33cdc94141a38faac8
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jul 31 10:50:48 2012 -0700

    Drop static API v2 responses
    
    It's not helpful to tell users to discover our services but not build
    anything into the API that actually *is* discoverable (other than
    JSON schemas). This drops GET /v2 and GET /v2/schemas.
    
    Related to bp api-2
    
    Change-Id: Iea49adaa418a3e2495c0713700633785bc21d103

commit d8a582fb86b9c76797a7de3672d8d0d7c6278131
Merge: c12fbd1 bd132ee
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 31 17:27:58 2012 +0000

    Merge "Include dates in detailed image output."

commit c12fbd1432e6c59f0796026475365ee8443e2196
Merge: 8126d90 8c91268
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 31 17:09:50 2012 +0000

    Merge "Update image caching middleware for v2 URIs"

commit 8126d90aee8756195e98eae649ead6d940a2e200
Merge: 72d943e 1f68b21
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 31 04:44:38 2012 +0000

    Merge "Adds set_acls function for swift store."

commit bd132eebeac221729fd90def39d962f1956bdff2
Author: Michael Still <mikal@stillhq.com>
Date:   Mon Jul 30 17:28:11 2012 +1000

    Include dates in detailed image output.
    
    This adds date display to the output of commands such as "glance
    show". This is helpful for admins trying to decide if an image can
    be removed from disk safely or not. Resolves bug 1030742.
    
    Change-Id: Ic52120558f89359f1bbfac47f75ff0aa4e916434

commit 72d943e9615318b82a52b97979ebe17f0c7d5a1e
Merge: 9227e55 5112f58
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 30 19:06:16 2012 +0000

    Merge "Ensure Content-Type is JSON-like where necessary"

commit 9227e55ba2337c93ff4c680fc58c28eb01913e38
Merge: 8eaf178 7956c2b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 30 18:55:44 2012 +0000

    Merge "Dont show stack trace on command line for service error."

commit 8c912685eba97502d036a3a4d7f202b8398c24ca
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jul 17 11:45:34 2012 -0700

    Update image caching middleware for v2 URIs
    
    Refactor the image caching middleware to support v2 URI image data GET
    and image DELETE requests.
    
    Implements bp api-v2-image-caching
    
    Change-Id: Id89f1df473ddc46ef4992715a9ecd3246b87d442

commit 5112f58f7fd14c97cc4144faf66e2be0a4d386e6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jul 29 22:38:27 2012 -0700

    Ensure Content-Type is JSON-like where necessary
    
    Several API calls were returning text/html as the content-type, when
    the body was actually encoded as JSON. This ensures the places where
    that was happening set content-type to 'application/json'.
    
    Fixes bug 1030730
    
    Change-Id: Iae9ed9ca798186a0663bdee1988f3acee6906db5

commit 8eaf178174e2daa60348f817fd844231e2cac5bd
Merge: fb7a6ca 94b9adc
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 27 22:21:58 2012 +0000

    Merge "Set deleted_at field when image members and properties are deleted."

commit fb7a6ca2778688ee55bf88b4684469f2e3d55025
Merge: 51faf28 b64d2ea
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 27 21:09:13 2012 +0000

    Merge "Honor '--insecure' commandline flag also for keystone authentication"

commit 51faf289453053489cc350aa363ffde3290df16b
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Fri Jul 27 13:42:30 2012 -0400

    Have non-empty image properties in image.delete payload.
    
    This patch uses the image data that is present before the image is actually
    deleted as the image.delete notification payload data.
    
    Fixes bug 1028081
    
    Change-Id: Ia1dbdbdf84a4dbaabca8395f9539e58936589563

commit 1284b30c93862ff7685db4021c2a87a0a0c7e672
Merge: b263ad2 1090dbe
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 26 19:58:15 2012 +0000

    Merge "Add Content-MD5 header to V2 API image download"

commit b263ad23475f67375a0a1672a28f8004d0a74387
Merge: 6668a61 687604b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 26 18:02:24 2012 +0000

    Merge "Make functional tests listen on 127.0.0.1."

commit 1090dbecfa74e97b48bb974834186860c501f7da
Author: Lars Gellrich <lars.gellrich@hp.com>
Date:   Thu Jul 26 15:41:44 2012 +0000

    Add Content-MD5 header to V2 API image download
    
    If an image is downloaded via the V2 API and its checksum is known
    (not None), assign the checksum to the Content-MD5 header.
    
    Related to blueprint api-2
    
    Change-Id: Ib34e9800833a6913c992de1a18f9fc331661f057

commit 1f68b21de8b8a3366eb08fe1fa74ae7db2ac72b4
Author: Dan Prince <dprince@redhat.com>
Date:   Sun Jul 1 17:11:41 2012 -0400

    Adds set_acls function for swift store.
    
    Updates the swift store with working implementation of set_acls.
    
    Updates the base store with an example set_acls function.
    
    This function may be implemented by stores which support backend ACLs
    to allow Glance to set read and write ACL's on the store images.
    
    Added tests for swift store function.
    
    Partially implements blueprint: swift-tenant-specific-storage.
    
    Change-Id: I7fbd66b5abf8d27c26bdc5e7d6adc98b5722b647

commit 6668a6111954af0d2e5d560e96cecf8e51e87c95
Author: Dan Prince <dprince@redhat.com>
Date:   Sun Jul 1 08:03:56 2012 -0400

    Store swift images in separate containers.
    
    Updates the swift storage backend so that when using multi tenant
    each images gets stored in a separate container.
    
    As part of this change the unit tests were updated to generate unique
    swift container names for each test. This acts as a container prefix
    in multi-tenant mode so the tests were also updated to cleanup all
    swift containers matching the container name prefix as well.
    
    The motivation for this change is so that we can set swift read/write
    permissions on each individual image.
    
    Partially implements blueprint: swift-tenant-specific-storage.
    
    Change-Id: I43f33594fb40dee33ef52e8ae873722e20b09a10

commit c713fb3385cb794994bdd64d6d3b9486f04b280a
Merge: 33ebb37 8b2d038
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jul 25 14:06:55 2012 +0000

    Merge "Adds multi tenant support for swift backend."

commit 33ebb37f4a263bc89c3d419c6936c60396d12f82
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Tue Jul 24 12:51:54 2012 +0000

    Include chunk_name in swift debug message
    
    Add chunk_name to swift upload debug message. Helps
    to track which image the chunk is part of when several
    uploads are occurring.
    
    Fixes LP bug #1028433.
    
    Change-Id: Ieacfd397939b77246e8c89214cbe902c3ed3e28c

commit 94b9adc4a6a09f3c2b25130888b6a02134e01cc8
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Mon Jul 23 16:43:53 2012 -0400

    Set deleted_at field when image members and properties are deleted.
    
    fixes bug 1028101
    
    Change-Id: I3e9ffa9a97b57912d922ffadce31ed1ce0261fb4

commit 617609a2f38310cd4d45f0fc0d7a795ab77c02f7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jul 17 16:20:36 2012 -0700

    Use size_checked_iter in v2 API
    
    The image file returned in the v2 API should be treated the same
    as in the v1 API. This patch wraps the returned image data in
    the v2 API controller with glance.api.common.size_checked_iter
    
    Change-Id: If7514a4394b17844d92b9737214898f954fe95a6

commit b64d2ea1558d8408d4b3bcd070ab6dce1d7a02d1
Author: Sascha Peilicke <saschpe@suse.de>
Date:   Wed Jul 18 10:53:18 2012 +0200

    Honor '--insecure' commandline flag also for keystone authentication
    
    Currently, keystone auth fails with self-signed certificates. This patch
    essentially passes this value down to KeystoneStrategy._do_request. This
    way, the '--insecure' flag is used by glanceclient to either validate
    all SSL certificates or none. Fixes bug 1003711.
    
    Change-Id: Ia9c9b762d2d474767984b4729bb50a8b78d6cb3f

commit 687604baf67fdbf69cb45dd34a2e6ec98062ee4d
Author: Josh Kearney <josh@jk0.org>
Date:   Thu Jul 19 14:52:51 2012 -0500

    Make functional tests listen on 127.0.0.1.
    
    Fixes bug 987399.
    
    Change-Id: I2a393d9b01c8ae17f289941530a1d4319b174f87

commit 8b2d038185a6d229662260819943c40eefee8bd6
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Jun 29 14:43:29 2012 -0400

    Adds multi tenant support for swift backend.
    
    Updates the swift store to support multiple tenants:
    
     * Added configuration option for swift_store_multi_tenant.
    
     * Updated the swift connection creation logic so that in multi-tenant
       mode the token and storage URL from the service catalog are used
       to create swift connection.
    
     * When in multi-tenant mode locations URL's (stored in the DB) do
       not contain hard coded swift credentials.
    
    Includes unit tests to verify multi-tenant swift storage URLs.
    
    Partially implements blueprint: swift-tenant-specific-storage.
    
    Change-Id: I45fc97027e6f211ac353513c2d9d6da51ccf4489

commit 53e210a0b32d1fad4678e978995433692cfb09cc
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Jun 29 07:50:10 2012 -0400

    Provide stores access to the request context.
    
    Adds context to the constructor for the Store class. This can be used
    to provide Store's access to the RequestContext.
    
    Includes the following changes:
    
    * Updates common store helper methods to create new instance of
      Store objects for each request.
    
    * Updates Glance scrubber to create a real context from credentials.
    
    The motivation for this change is that we will need access to the
    service catalog and token for the Swift multi-tenant backend.
    
    Partially implements blueprint: swift-tenant-specific-storage
    
    Change-Id: I3def2b7c4085a36dd6c0961e762783ebaf7ffa74

commit 1b45a115dd3137a38444b7891a44cbb386d7715b
Merge: 79c298d bd018d6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 19 17:07:48 2012 +0000

    Merge "Move checked_iter from v1 API glance.api.common"

commit 79c298dc1b8fcec29916ea0e520835939e1f0c40
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Jul 18 09:42:53 2012 +0000

    Increase wait time for test_unsupported_default_store
    
    Fix for LP Bug #1026047.
    
    Allow unit test 'test_unsupported_default_store' to
    successfully run on a slow machine.
    
    Change-Id: I4d49c821aeb3027b7f33babf6c4bafe00644f0c9

commit d69a442d09feecd7a138a001849583a293db9af6
Merge: f591a85 251c5e5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jul 18 20:47:30 2012 +0000

    Merge "Replace example.com with localhost for some tests"

commit f591a85840b1ec17f6b1dd930b7298931f27754f
Merge: dc2f241 35d865a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jul 18 19:30:38 2012 +0000

    Merge "Fix registry error message and exception contents"

commit dc2f241c115507f8e5c4e7841739f2b8303943e2
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jul 18 09:22:02 2012 -0700

    Match path_info in image cache middleware
    
    The url matching code in the image cache middleware should only look at
    the unconsumed path, not the full path. Webob denotes this by using
    'path_info' instead of 'path.'
    
    This also adds some tests for the version negotiation middleware to ensure
    it is returning a sane path for the image cache middleware to match.
    
    Fixes bug 1026222
    
    Change-Id: I522e2210e2b7272f9bb47602510a2910fa193415

commit 7956c2bec87b75f59f1453c531f9b1557a6196a5
Author: Sulochan Acharya <sulochan.acharya@rackspace.co.uk>
Date:   Tue Jul 17 09:22:36 2012 -0500

    Dont show stack trace on command line for service error.
    
    - Fix bug 996648
    
    Currently if the Registry service is not running, any glance command
    will show the Internal server error exception response body on the command line.
    This fix proposes to hide that trace with a more generic message. Users can
    still see the trace on log file in debug.
    
    Change-Id: Ia86c42002ae8daabe0d7ad92a2017f1869b10853

commit c244424138282061a822038d0918ead6754ae591
Merge: 9aa4d92 a0689d2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jul 18 14:50:46 2012 +0000

    Merge "Use openstack.common.log to log request id"

commit 251c5e588a168d4aae406e28d2c8da1e307f4275
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Jul 18 09:18:55 2012 +0000

    Replace example.com with localhost for some tests
    
    Fix for LP Bug #1025756.
    
    When running the unit tests on a system without a
    direct internet connection some tests run slowly.
    Replacing example.com with localhost:0 speeds up
    the relevant tests.
    
    Change-Id: Iac6fc506b1d36b18ab21bb956ec2d8acc004bba8

commit 35d865a48cbeb7b21ff68b74c39dde6639469c74
Author: Tom Hancock <tom.hancock@hp.com>
Date:   Tue Jul 17 17:25:50 2012 +0000

    Fix registry error message and exception contents
    
    The variable image_id should have been used instead of the global
    identifier id
    
    Fixes LP Bug #1026072
    
    Change-Id: I2e73810e3165dd8b7032359b5fb8a874e592736f

commit bd018d68bd88ab00b806943981cac10644c10573
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jul 17 16:20:00 2012 -0700

    Move checked_iter from v1 API glance.api.common
    
    The checked_iter image streaming wrapper should be in a common
    place so the v2 API code can use it as well. This moves it to
    glance/api/common.py and gives it a slightly more descriptive
    name 'size_checked_iter'.
    
    Change-Id: I9fbf2c76666bfc0b9227a6a6c4d824367526e56a

commit 9aa4d923c45492d4f2846ea7f38208cbc55ab8fb
Merge: 5840f1d ede120a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 17 15:33:50 2012 +0000

    Merge "Updates run_tests.sh to exclude openstack-common."

commit 5840f1debbe4fe46fb70de928a4008eb1e3e4599
Merge: 6873195 920096f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 17 15:26:08 2012 +0000

    Merge "Prevent client from overriding important headers."

commit 6873195cd19d519a5f6f31461b7b683e33b19784
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Jul 12 15:04:22 2012 +0100

    Support zero-size image creation via the v1 API
    
    Addresses LP 1025353 for the v1 API.
    
    Transition image status to active immediately on creation
    (as opposed to leaving it queued forever) if the size is set
    to zero from the get-go.
    
    The v2 implementation is left unchanged for now, as the image
    status does not appear to ever transition from queued to active
    in that case.
    
    This change allows an image to be created that simply acts as
    a properties bucket, but requires no image data. For example,
    an image created from a booted-from-volume instance where only
    the kernel, ramdisk ID, and block device mappings are required.
    
    Change-Id: I61e96f3fe5f5245fec791170b4a8b4c72135c3de

commit 920096f0f6c7fdc20d906b58e202a5d505dd3a4e
Author: Lars Gellrich <lars.gellrich@hp.com>
Date:   Mon Jul 16 15:20:33 2012 +0000

    Prevent client from overriding important headers.
    
    The glance client offered the opportunity to override
    important headers via the features parameter during image
    creation or update.
    
    Created a blacklist of unsupported features like:
    content-length
    content-type
    x-image-meta-size
    
    These headers should not be overriden by the client.
    
    Fixes LP Bug #1023892
    
    Change-Id: I14aac59e00a2672fd98f6dab221096ab5de86855

commit 00a76835556ecf056bc793c6ade7f59ded8b750b
Merge: 8f745a2 8935b32
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Jul 14 02:09:53 2012 +0000

    Merge "Making docs pretty!"

commit ede120a32d22d39397500304a74c40a11b7f0df3
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Jul 13 14:10:56 2012 -0400

    Updates run_tests.sh to exclude openstack-common.
    
    We exclude openstack-common in tox.ini already. This change updates
    run_tests.sh to match that behaviour.
    
    Change-Id: I1bf5784193e63156bc5fe140ad6e403669c7909d

commit a0689d2b458bb1145ec9b8c17ee09ccfcc32d139
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Jul 13 10:49:41 2012 -0700

    Use openstack.common.log to log request id
    
    * Log request id from the request context for glance-api
      and glance-registry
    * Further integrate with the common log module by storing RequestContext
      objects in thread-local storage so loggers can acces their attributes
    * Move request id formatting into the request module so it appears with
      the preferred prefix (req-) in logs
    * Implement bp glance-request-tracking
    
    Change-Id: I2095ad16fef6b4bc8e49229c9f0326da8c743ff7

commit 8f745a25a1d21a560ee0ce9390a0e6bf9df6abe8
Merge: 2bee2a2 78dbcfa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 13 14:34:18 2012 +0000

    Merge "Make get_endpoint a generic reusable function."

commit 2bee2a2074d8d958adfc4e555c76bc21dcf70a9e
Merge: 29dc7bf 279d07e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 13 00:44:41 2012 +0000

    Merge "Update 'logging' imports to openstack-common"

commit 29dc7bf00aec559b8013706181445d4767a47231
Merge: 69d3cd5 ade7b4f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 13 00:44:34 2012 +0000

    Merge "Remove microseconds before time format conversion."

commit 279d07eebba14f819d2e950069284d8e18fc04f6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jul 10 21:39:06 2012 -0700

    Update 'logging' imports to openstack-common
    
    Change-Id: Ia1a7b5062e7f882971f2061274f6a4a44cfc8ced

commit 69d3cd58b755ac6c50b1aef31131819c911e41f6
Merge: 444ad45 030e8b4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 12 22:54:59 2012 +0000

    Merge "Removing 'Indices and tables' heading from docs."

commit 78dbcfa9e5cb8fcbb3ea7c0d82370b48a692b9ab
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Jun 28 10:23:19 2012 -0400

    Make get_endpoint a generic reusable function.
    
    This patch refactors the get_endpoint function to make it more generic
    and top level so that it can be more easily accessed and tested.
    
    Adds service_type, endpoint_region, and endpoint_type options to
    the get_endpoint function as well.
    
    Added a new test suite specifically for get_endpoint.
    
    The motivation for this change is that we'll need to be able to
    parse the 'object-store' endpoint for each tenant in order to
    enable multi-tenant storage in the swift storage backend.
    
    Partially implements blueprint: swift-tenant-specific-storage
    
    Change-Id: Icf773a1eb057fc9d65cf54890afa4638f2aee0b4

commit 444ad454b76cb2584a45b58c6ed4444d1bfc4530
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Jun 28 10:16:35 2012 -0400

    Adds service_catalog to the context.
    
    Updates the ContextMiddleware so that it stores the service_catalog
    which from set via Keystone's auth_token middleware.
    
    The motivation for this change is that we'll need access to the
    'object-store' endpoint in order to implement swift tenant specific
    storage.
    
    Partially implements blueprint: swift-tenant-specific-storage
    
    Change-Id: I0389e135f6683a353ae915b543d70f6ac1246b2c

commit bcb28c3699509e2114ef396c9376940b3d978ede
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jul 10 21:41:23 2012 -0700

    Add openstack-common's local and notifier modules
    
    Change-Id: I90e063934d64598b440676b63b4be55262f923f1

commit 8935b3268621d1502d922772c115090276bc7aca
Author: jakedahn <jake@ansolabs.com>
Date:   Wed Jul 11 15:25:40 2012 -0700

    Making docs pretty!
    
      * Before: http://stsh.me/2Qt
      * After: http://stsh.me/2Qu
    
    Change-Id: Idca673ee6157e62afc1aef76413f2d54ae8e5c9f

commit 030e8b4b07928543dbb2ab403949f0d20ff1bd29
Author: jakedahn <jake@ansolabs.com>
Date:   Wed Jul 11 15:03:06 2012 -0700

    Removing 'Indices and tables' heading from docs.
    
      * Bug 955475
    
    Change-Id: Ibcd2d2ed535a548d76c8afad54673135c20c8232

commit ade7b4f7d0ed907d87c0b906fcbf9bd5649d4c09
Author: Dan Prince <dprince@redhat.com>
Date:   Sun Jul 8 16:44:58 2012 -0400

    Remove microseconds before time format conversion.
    
    Updates Glance scrubber so that it chops microseconds off of the
    date format before parsing a time format string. This fixes
    an exceptions that can occur when using scrubber with databases
    like PostgreSQL which include microseconds in date strings.
    
    Fixes LP Bug #1022369.
    
    Change-Id: I2e9eb66052d8ce34438a4c1ba7a5174cc2385bcf

commit 5985ef6a0aa541e9faa2104bf8108464822ce258
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Jul 10 18:10:18 2012 -0400

    Add bin/glance-replicator to scripts in setup.py.
    
    Fixes LP Bug #1023182.
    
    Change-Id: I7c5627b4b3390b500e159edace02bdd0417fc59e

commit 77d534e708b788a83292fbef542f8b7f81454f8a
Merge: 9121796 18ee412
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 10 19:25:36 2012 +0000

    Merge "Initial implementation of glance replication."

commit 9121796ca812207498937aeb99e032f011c5dc6a
Merge: 06f7fe9 b77ec18
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 10 19:25:35 2012 +0000

    Merge "Add function tests for image members."

commit 18ee4122ad79b17bcf5356aebc7a2501aaf3cec4
Author: Michael Still <mikal@stillhq.com>
Date:   Mon May 21 11:02:26 2012 +1000

    Initial implementation of glance replication.
    
    * Add the glance-replicator binary
    * Initial implementation of bp image-replication
    
    Change-Id: I7dabbd6671ec75a0052db58312054f611707bdcf

commit 06f7fe92a6e164c3f62bc107807e9587a84b995f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jul 9 12:57:39 2012 -0700

    Generate request id and return in header to client
    
    * Generate a uuid in RequestContext.request_id on init
    * Present request_id in an 'x-openstack-request-id' header using
      process_response in the ContextMiddlewares
    * Related to bp glance-request-tracking
    
    Change-Id: Idd9b86661322250b6167a1ee23e5baae91066ff6

commit ce899351dac7dbdfa8d31d26e3d5244b9768dc06
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jul 9 08:05:28 2012 -0700

    Reorganize context module
    
    * Move RequestContext class to glance.context
    * Move context middlewares to glance.api.middleware
    * Update tests to reflect move
    * Update paste configs
    
    Related to bp glance-request-tracking
    
    Change-Id: I289b546ec28c973a3022be779ce378ae2febb340

commit 320f809ba1c1a31eac204daa9c6e9bff459be27f
Merge: 7d8045d c1e9986
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 10 05:19:08 2012 +0000

    Merge "Allow admin's to modify image members."

commit 7d8045d4779d1d4e5b2065cf8c4547cc67e55fb4
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jul 9 13:56:04 2012 -0700

    Add openstack.common.log
    
    Change-Id: I3827a319db649a2264aa260cd964e0a093fef524

commit 4b162a536f128d5f4e6b780f251886fc246802d8
Merge: cff235e 802b9cb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 10 01:49:58 2012 +0000

    Merge "Ignore openstack-common in pep8 check"

commit 802b9cb84bd11ba742edee07934b26828cf31717
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jul 9 14:39:29 2012 -0700

    Ignore openstack-common in pep8 check
    
    Change-Id: Ic48b12918f8e3ca439917a614927b41cd099c63a

commit cff235e484e79325e9b4b1575fe7992d9a691ea3
Author: Monty Taylor <mordred@inaugust.com>
Date:   Thu Jul 5 09:03:40 2012 -0500

    Keystone dep is not actually needed.
    
    An end user might need to install keystone to use the default config,
    but glance testing uses stubbed out fakes.
    
    Fixes bug 1021798
    
    Change-Id: I99da75d29ba483125518760126d6145310ae1479

commit d6ffe3828c5fe0cb86a95c046bb54ceb43da8f6b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jul 3 09:55:02 2012 -0700

    Report size of image file in v2 API
    
    Size will be None until image data is uploaded. The size attribute
    will be updated to reflect the actual size. Related to bp api-2.
    
    Change-Id: I577d8005b9ce60bf1470cda43413f0cdc034dbe1

commit 919c3d9d176d022240bf08a903c88c03123cac3c
Merge: a93d04a 1a094d5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 9 17:42:14 2012 +0000

    Merge "Simplify v2 API functional tests"

commit a93d04abf35caa4733e00f92ddfd6850c9f26a3d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jul 2 14:38:27 2012 -0700

    Expose owner on v2 image entities
    
    Expand v2 image serialization to accept and return the 'owner'
    attribute. All image entities have an owner attribute, while only
    admins can provide it in a request. Related to bp api-2.
    
    Change-Id: I8746574528c8be1f17cf570c91ba6bd7ef27b032

commit 60159ad3d20b9fc087fd675cd0000e91c99abcb5
Merge: c70974a c80a4d2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 6 15:55:47 2012 +0000

    Merge "Use PyPI for swiftclient."

commit c70974abd658d697fe8b664201ae2f938891db73
Merge: 33ed25f 7dc34f4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 6 15:54:38 2012 +0000

    Merge "Add retry to server launch in respawn test."

commit b77ec18601bc08146d4b2695364cd49c5394d42e
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Jul 3 10:44:20 2012 -0400

    Add function tests for image members.
    
    Updates the bin/glance test suite with support for testing image
    members.
    
    Change-Id: I3e9ba6c59ebc5969b1cee8773c2b6610c1968872

commit c1e99863533d263293b3bb3b8f6b7d34ad4d6b81
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Jul 3 10:41:02 2012 -0400

    Allow admin's to modify image members.
    
    Updates the v1 Glance API and Registry controllers so that admins
    can modify image membership regardless of image ownership.
    
    The motivation for this change is to be able to test image membership
    when noauth middleware (UnauthenticatedContextMiddleware or
    FakeAuthMiddleware) is being used and includes the following changes:
    
     * Added is_admin option to FakeAuthMiddleware.
    
     * Refactors the access checks into a common function called
       _check_can_access_image_members.
    
     * API unit tests which require is_admin=False for noauth were also
       refactored to use an improved FakeAuthMiddleware which supports
       is_admin = False.
    
     * Update RegistryClient to use get_status_code int for 204 status code
       comparisons. Fixes issue where incorrect status code was returned.
    
     * Updated members unit tests to support these changes.
    
    Fixes LP Bug #1021740.
    
    Change-Id: I9d0e4679f9c0cb37f6df7c6f90460c22c37f3fbd

commit 33ed25f8923661e79e91362920ea14fb26aeb0e9
Merge: a61b4bc 70e9690
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 5 20:12:35 2012 +0000

    Merge "Improve eventlet concurrency when uploading/downloading."

commit a61b4bc3776bad642e91bfd4ef414b45c181afff
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Jul 3 10:31:13 2012 -0400

    Allow admins to share images regardless of owner.
    
    Updates the Glance DB's is_image_sharable function so that
    an admin can share an image regardless of the context ownership.
    
    This fixes issues when trying to write Glance functional tests
    which use the noauth middleware (UnauthenticatedContextMiddleware).
    
    The motivation behind this change is I'd like to write some
    functional tests for image-members that work with noauth.
    
    Fix bug 1021054
    
    Change-Id: I6d939876a4c4bf5f191463f5ca434fc524a6ac59

commit 70e9690830653ed92d15c4a696cae8778c635206
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Jul 4 16:38:07 2012 +0000

    Improve eventlet concurrency when uploading/downloading.
    
    When uploading/downloading multiple images using the
    same glance-api worker process some of its eventlet
    threads can become starved. Inserting statements to
    trigger cooperative yields, ie sleep(0), allows fairer
    scheduling of the other eventlet threads.
    
    Fixes LP Bug #1021002.
    
    Change-Id: I5a8f255e9507d18813d07d418e6acefa10d9f6bb

commit 1a094d5388b9345112e6ee18c2c56cb6858c6657
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jul 3 08:50:57 2012 -0700

    Simplify v2 API functional tests
    
    Remove overly-verbose and duplicated test coverage from
    the v2 images functional tests.
    
    Change-Id: Ie6b8057f1d73fd3f1d85e862d3072fc270aef5bd

commit 517a0262086b0346068dfd57a57d68d9e0830bf1
Merge: 4ca2cf4 737bfc3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 3 17:50:45 2012 +0000

    Merge "Fix IndexError when adding/updating image members."

commit 4ca2cf44e88b763d360729c494e5026ddf6febbd
Merge: ad4a10b 878b25e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 3 17:47:06 2012 +0000

    Merge "Reorder imports by full import path"

commit 737bfc30b101a52612b70d6c33fb485809cd977a
Author: Dan Prince <dprince@redhat.com>
Date:   Mon Jul 2 23:02:08 2012 -0400

    Fix IndexError when adding/updating image members.
    
    This patch updates the v1 registry API to work with the latest
    DB API image_member_find function which no longer throws
    NoResultFound when it doesn't find any records.
    
    The latest version of the DB API image_member_find function simply
    returns an empty query result.
    
    This fixes both member-add and members-replace functionality.
    
    Fixes LP Bug #1020380.
    
    Change-Id: I8818c90e09bd9a17f208d0e20106007db04e77f1

commit ad4a10b2f17f7e7f77137ea4a82f393febb69f54
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jul 2 20:42:06 2012 -0700

    Report image checksum in v2 API
    
    * Report checksum with image entities
    * Set checksum when image data is uploaded
    * Related to bp api-2
    
    Change-Id: I6b4f859184cff37cea247bfa56c9c6bebd256969

commit 813e299f282924ee6724aada5dc5e54f4a3188ac
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jul 2 20:30:12 2012 -0700

    Store properties dict as list in simple db driver
    
    Rather than store image properties as a dict, use a list of
    dictionaries with name and value keys. Fix bug 1020388.
    
    Change-Id: Ia41e48cb4e869d01c93466103dea8fb1b0ec07a2

commit c80a4d28dd8543399a6e1ada1fd57b30536abeb6
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Jul 2 17:42:42 2012 -0400

    Use PyPI for swiftclient.
    
    Change-Id: I3cbef069459c82ab175998a8f58091cd8214cb3c

commit faa5ec7bffe300a4178ec699d6d2a46e033004a7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 26 15:35:42 2012 -0700

    Refactor pagination db functional tests
    
    The pagination-related functional tests are overly complex and aren't
    adding a lot of value. This rewrites them in a more straightforward way
    by incorporating them into the main test class.
    
    Related to bp refactor-db-layer
    
    Change-Id: Ic08914cfa8135d73a4aae6724a6561bc337b91fb

commit c56cfffc7883412ab267156c0c4fe026a2d427ca
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 26 10:45:15 2012 -0700

    Combine same-time tests with main db test case
    
    Rather than re-run all of the base test methods to test with
    image fixtures with identical created_at timestamps, we should
    just run methods that matter. This patch removes the subclass
    that sets identical timestamps in favor of adding a third fixture
    to the main test case.
    
    Related to bp refactor-db-layer
    
    Change-Id: I69d0b21d1ef825333881e021dfa9610f1bbad334

commit 82c88313f4e079e86e83741969d8c3a037b89b37
Merge: a404d6b 8a1bcb0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 2 17:29:47 2012 +0000

    Merge "Include all tests in generated tarballs"

commit 7dc34f41bf2b4b008cf30948e6824f8bb798e94b
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Jul 2 14:25:13 2012 +0100

    Add retry to server launch in respawn test.
    
    Avoid test failures caused by EADDRINUSE.
    
    Change-Id: I8cf044b55da30a56c7e2d1435085d23bd198c275

commit 878b25ea2e3cb89b440e773687fc2e4d6f354cb6
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Sat Jun 30 08:41:01 2012 +0800

    Reorder imports by full import path
    
    Fixes bug #1019463
    
    Change-Id: I3fb44cbacb09457ea34571222e0a8e8d4b8d7c87

commit a404d6b39074460b4055e6f7306b731222f5169f
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Fri Jun 29 20:10:59 2012 +0000

    Adds /v2/schemas/images
    
    Fixes bug 1019401
    
    Change-Id: I4fcb9286e5aec0984b61285bfff794126f64d00a

commit 414114e5defb1145c87b4ff5f7b1421e9e9c0a4d
Merge: 7d101eb 1e9bc67
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jun 29 14:59:43 2012 +0000

    Merge "Implement image filtering in v2"

commit 7d101ebcc0ee6cfb31c1f7d7575ad38460383241
Merge: 2f3d054 2a61bf3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 28 20:07:12 2012 +0000

    Merge "Allow CONF.notifier_strategy to be a full path"

commit 1e9bc679b4f3e4c760f11d0e2fb2385134cc6072
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Thu Jun 21 16:40:11 2012 -0400

    Implement image filtering in v2
    
    This allows filtering /images on image attributes and properties.
    In order to filter you just do /images?<filter_key>=<value>.
    For Example: /images?name=image-1
    or user defined image properties:
    /images?foo=bar
    
    You can also filter by a numeric ranges by appending _min and _max to the
    filter key.
    For Example: /images?size_min=15
    For Example: /images?size_max=20&size_min=15
    
    Implements blueprint: api-v2-images-filtering
    Change-Id: Icdbe7c325d08328efb164accf76684a83369c137

commit 8a1bcb0a4bfd0bf38d6e9138356f2b5c872f1728
Author: Thierry Carrez <thierry@openstack.org>
Date:   Thu Jun 28 14:40:45 2012 +0200

    Include all tests in generated tarballs
    
    Make sure all glance/tests is actually shipped in generated
    tarballs. Rather than adding yet another specific entry, recursively
    include all glance/tests and globally exclude all .pyc.
    
    Change-Id: I7875c58dece452b5356cf7e268f504780ec30bff
    Fixes: bug 1018830

commit 2a61bf38ff6dae16083145e6f27d66731d5c3271
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 27 13:49:15 2012 -0700

    Allow CONF.notifier_strategy to be a full path
    
    Rather than limit the notifier_strategy to a list of internal
    drivers, we should also allow a user to supply a full path
    to a custom driver. This is going to help us functionally test
    our notification system without having to ship a fake driver.
    
    Fixes bug 1018638
    
    Change-Id: Ib1cae7b979dabfaa6b8b5aa59719aad2ac12d169

commit 2f3d0546164e6b5e55ad412fdb7e2b068ae9a228
Author: iccha <iccha.sethi@rackspace.com>
Date:   Tue Jun 19 22:12:39 2012 +0000

    Add image access records schema for image resources
    
    Implements blueprint api-v2-refactor-schemas
    
    Change-Id: Ic79d6661d44976057016e1a570674f47a962a3db

commit 0a7473bb10d04200849beb318c592c287760ce21
Merge: 1cb53f9 f634eb3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 27 20:27:28 2012 +0000

    Merge "Added schema links logic to image resources"

commit 1cb53f9ad5f5ee93893fed07acb14d09cf1e5cca
Merge: 3b824f8 9f7b374
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 27 20:15:52 2012 +0000

    Merge "Make image.upload notification send up2date metadata"

commit 3b824f8e6309a727ef382f6ecf2e488f76b99b5b
Merge: 9127701 5e63a22
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 27 19:34:35 2012 +0000

    Merge "Remove image members joinedload"

commit 9127701b669be6adec9ce46091b7c92d309f5c35
Merge: dc9a334 cc900ef
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 27 18:21:50 2012 +0000

    Merge "Clean up image member db api methods"

commit dc9a334132206713120909b64bcd9a051dd04f9d
Merge: 518093b 39f696a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 27 17:51:48 2012 +0000

    Merge "Retry test server launch on failure to listen."

commit 5e63a2246287ced02fa9bfd52f1f2591b2277c4c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 25 21:24:04 2012 -0700

    Remove image members joinedload
    
    * Drop the joinedload on members in image_get and image_get_all
    * Related to bp refactor-db-layer
    
    Change-Id: I6f09c18ad345faa5702f0757566c6abc7eb128b8

commit cc900ef68fab491905823539901dcdaf3057be4f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 25 17:51:15 2012 -0700

    Clean up image member db api methods
    
    * Drop image_member_get
    * Drop image_member_get_memberships
    * Repurpose image_member_find for collection filtering
    * Write a db api functional test to cover image_member_find
    
    Change-Id: I7fc17156feac98ba5d22a436aabfbe50114c6c61

commit 39f696af21c9f367cdbad6d30866ae4ad66a1634
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Jun 26 17:43:46 2012 +0100

    Retry test server launch on failure to listen.
    
    In the functional tests, the registry server intermittently
    fails to listen on the expected port, with the strace revealing
    an EADDRINUSE error.
    
    We now retry the service launch on a fresh port.
    
    Change-Id: Id2e06a7ae90c4a9aa3ff33c19316ebf854a30e22

commit 9f7b374e8b7f3900991dee2a9d444c809af7069f
Author: Chris Behrens <cbehrens@codestud.com>
Date:   Wed Jun 27 03:58:57 2012 +0000

    Make image.upload notification send up2date metadata
    
    The dictionary passed is not updated with image size, etc.
    
    Fixes bug 1018246
    
    Change-Id: I735d355891fcbd6b1db088b218b8fd808b8908e1

commit f634eb381ea6e8c2da29c41e9c508d140fed34d6
Author: iccha <iccha.sethi@rackspace.com>
Date:   Tue Jun 19 16:13:22 2012 +0000

    Added schema links logic to image resources
    
    Implements blueprint api-v2-links
    
    Change-Id: I5b4df7b14b27a52b782c812537118751213be541

commit 518093bc0625ceecd0ea1853814db617e4fa31c3
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 25 16:52:00 2012 -0700

    Simplify sqlalchemy imports in driver
    
    This greatly simplifies the sqlalchemy-related imports in
    glance.db.sqlalchemy.api. Related to bp refactor-db-layer.
    
    Change-Id: I60d39baee420c68efd2f00bbd13162d1b78d9c94

commit c45fe202c54f3397064709a88ec1f3f3ee993db6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 25 08:31:02 2012 -0700

    Reduce 'global' usage in sqlalchemy db driver
    
    Related to bp refactor-db-layer
    
    Change-Id: I1e3e79975fb346d4e721f044db3f8a76690e69ca

commit 4363af6cc81e4bc63fb39fae7b059ca3defaabe0
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 20 10:33:43 2012 -0700

    Standardize logger instantiation
    
    Use LOG for variable name and __name__ for logger name. Also
    document this fact in HACKING.rst
    
    Fixes bug 1015685
    
    Change-Id: I0d9d80bef66197a28ed3d650f17859202048d776

commit 595210b2aa293ebccaa4c7d6dd2b860f0bb03c40
Merge: 202439f cdb2a4f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jun 25 15:16:21 2012 +0000

    Merge "adds missing import and removes empty docstring"

commit 202439f4096336f2b7402411c8b33a401e87af74
Author: Mark J. Washenberger <mark.washenberger@rackspace.com>
Date:   Thu Jun 14 16:45:24 2012 -0400

    Add link descriptor objects to schemas
    
    Part of blueprint api-v2-links
    
    Change-Id: I1e03b38c51931a380c197def88501c4dd483273c

commit c9599a67557eee55ad6429fba42a9d382cd389fe
Author: Sean Dague <sdague@linux.vnet.ibm.com>
Date:   Fri Jun 22 17:52:08 2012 -0400

    Fix exception if glance fails to load schema
    
    * Fixes bug 1016762
    
    Change-Id: Id1f39d39738289161fe43a22c497ee76b7a9574b

commit 5599c951e0078a9276673b57dced828a57a21a99
Author: Mark J. Washenberger <mark.washenberger@rackspace.com>
Date:   Thu Jun 14 13:18:18 2012 -0400

    Move the particulars of v2 schemas under v2
    
    Implements blueprint api-v2-refactor-schemas
    
    Change-Id: I6ddb0aa9a8fdac2d9a7210e0d0b0fb91e8220396

commit 5a45f021521871757826da313386c8b418c92a97
Merge: 13f6fc8 1da7699
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 21 22:24:31 2012 +0000

    Merge "Set up Simple DB driver tests"

commit 13f6fc8ff12c45cb24231810e4aebf962a8ae3ed
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue Jun 19 11:37:27 2012 -0400

    Remove listing of image tags
    
    Change-Id: I22a37e0b841255a652d8083a49317086dca2dcc4

commit 1da76999110f80d058e0647fea05ee429a3a891d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 20 14:29:08 2012 -0700

    Set up Simple DB driver tests
    
    This adds a few bootstrappy test cases to get the db tests running
    against the simple db driver. I've also added a decorator for the
    simple driver methods to make these tests uber useful.
    
    Change-Id: I51cc9c19fd800f7991a46b80ee964a150820ec10

commit 067c41b789a8c8432de812c3336074854790cb77
Merge: 7d041b3 f07a4db
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 18:02:06 2012 +0000

    Merge "Revert "Funnel debug logging through nose properly.""

commit 7d041b314e60ceb6b20a2fc8735a01b73d3246e4
Merge: 47292e9 199128a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 17:03:27 2012 +0000

    Merge "Remove some more glance-cache PasteDeploy remnants"

commit 47292e98fd2cacb2297588eae6a4729cb60a9465
Merge: bff6242 c44e16a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 17:03:25 2012 +0000

    Merge "Don't use PasteDeploy for scrubber and cache daemons"

commit bff62428043b793e9221ac3fb2cb670ca80cf2b6
Merge: 71ba934 be7efbd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 16:54:15 2012 +0000

    Merge "Trace glance service on launch failure."

commit 71ba934c121abc9cf86e5cbbbcdf532cee1cc55c
Merge: 7d45f08 31dcaec
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 16:52:01 2012 +0000

    Merge "Capture logs of failing services in assertion msg"

commit 7d45f0867b5728cc331f5c05dd1bb19d2bb47c61
Merge: d1a81a7 3b4d7a4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 16:48:51 2012 +0000

    Merge "Convert db testing to use inheritance"

commit d1a81a73be04119ff573e6c7c22043177aeb435c
Merge: a1fbd0b 5d53e99
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 16:47:40 2012 +0000

    Merge "Remove unused imports in db migrations"

commit be7efbdfd0965145b42915e23832bd6671d44165
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Jun 19 22:31:30 2012 +0100

    Trace glance service on launch failure.
    
    Where a glance service launched by a functional test fails to
    begin listening on the expected port, attach strace(1) in order
    to determine where the process is blocked.
    
    Change-Id: Ic745bc34306c852fc8125a0a901686d4ff28e403

commit f07a4db6cdca28f58b795b3fcea2877e595867a7
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Wed Jun 20 15:24:17 2012 +0000

    Revert "Funnel debug logging through nose properly."
    
    This fixes bug 1015613
    
    This reverts commit 95fb6e5f8988079d7dffe3a039f1ebd697199eb8.
    
    Change-Id: I827475c86d6f9166c0ee3ba9b0cc9a0a5105c049

commit 31dcaecb2dfe101a383b08d83f879b3b5b8d5898
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Jun 19 16:57:36 2012 +0100

    Capture logs of failing services in assertion msg
    
    This is a temporary measure to help track down the cause of the
    regular functional test failures that manifest as an unhelpful
    'Unexpected server launch status' error.
    
    (Previously the glancelogcapture plugin would have handled dumping
    the logs, but this was broken by the recent change-over to nosetests
    from run_tests.py)
    
    Change-Id: I3dae58aa063536675503f23d1cc87767e68f75b2

commit 199128a5a6e8e97a8b018a90cc81f2001a025a6c
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Jun 20 06:35:30 2012 +0100

    Remove some more glance-cache PasteDeploy remnants
    
    The default_config_file arg to load_paste_app() was only used by the
    cache daemons because they were all using glance-cache-paste.ini.
    
    Since that use case is gone, remove the argument.
    
    Change-Id: Ibf15810b37d9a2b9b94ed311c304916e7de2d6cf

commit a1fbd0baa68d6f1c2d758566ab89e2ac87a1c7ce
Merge: 9a1a2a3 95fb6e5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 19 23:09:34 2012 +0000

    Merge "Funnel debug logging through nose properly."

commit 9a1a2a32a02834bc575d3664529f6417a2981a4a
Merge: cac3506 081823a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 19 23:03:38 2012 +0000

    Merge "make roles case-insensitive"

commit cac35068485729e9a2fd341daaf811c184c41191
Merge: 8697375 088200c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 19 21:13:55 2012 +0000

    Merge "Default db_auto_create to False."

commit 8697375eb951d2ec1d808b6be66dd9e2e562d6fa
Merge: 28616aa 9c8c630
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 19 20:28:04 2012 +0000

    Merge "Increase timeout to avoid spurious test failures"

commit 28616aa0b2baeedd8af517128b6c3f01506d7b87
Merge: 9a7946a 0c0fd6a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 19 20:28:02 2012 +0000

    Merge "Clean up .pyc files before running tests."

commit 9a7946a043044f04f138ad6a622bd6d4329377c3
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Mon Jun 18 14:34:29 2012 -0400

    Fix typo of conf variable in config.py
    
    Fixes bug 1015270
    
    Change-Id: I1cedcb3095f56225920c7482b16cc597b0572a4a

commit 5d53e99e0a7ef644c6169db021168b8969a67c91
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue Jun 19 15:43:55 2012 -0400

    Remove unused imports in db migrations
    
    I went on a hike through the migrations and decided to apply the boyscout rule.
    Scouts honor.
    
    Change-Id: I10c677cfd5186edce3ca96495eafc732168cac86

commit 9c8c630d53877c5a9b0dda856b207468fdb4062c
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Tue Jun 19 18:51:17 2012 +0000

    Increase timeout to avoid spurious test failures
    
    Change-Id: I58552c5c8ca5bea612f80ead1f895b346d187758

commit ee640fc2da2538b8b9376062245cc6bd0ff3b885
Merge: 7aa688a f14d3b9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 19 17:53:37 2012 +0000

    Merge "Fix typo of swift_client/swiftclient in store_utils"

commit cdb2a4f6a6540e1b9b5ffa4b9be45581d3b51e94
Author: Nikhil Komawar <nikhil.komawar@rackspace.com>
Date:   Mon Jun 18 15:03:40 2012 -0400

    adds missing import and removes empty docstring
    
    fixes bug 1014788
    fixes bug 1015210
    
    Change-Id: Id5dd44d5d0265368e39b36ef1d4f6694aedb6456

commit 3b4d7a447c29783b8068308da71a3127187b5cbb
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 13 15:44:04 2012 -0700

    Convert db testing to use inheritance
    
    This modifies the existing sqlalchmey-specific db tests to a more
    generic approach where test cases can be inherited and bootstrapped
    for different db implementations. It's a similar approach to our
    store-specific bootstrapped test cases built off of test_api.
    
    Related to bp refactor-db-layer
    
    Change-Id: Ia516e93abd36e2727f122968d3c7ef6e0f1d5801

commit 0c0fd6acaaa39fd113f96f7e65cd1eb61f49bf26
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue Jun 19 12:07:12 2012 -0400

    Clean up .pyc files before running tests.
    
    Fixes bug 1015181
    
    Change-Id: I5628de56464f882f804522c66d9ffbe35a3b21e1

commit 081823ad862cabc74977299876d000cafaa6f40d
Author: Alessio Ababilov <aababilov@griddynamics.com>
Date:   Fri Jun 8 18:15:47 2012 +0300

    make roles case-insensitive
    
    Fix bug #1010519
    
    Change-Id: I5b4a50e2d546ba8b4b018178af09707bc4d31fce

commit 95fb6e5f8988079d7dffe3a039f1ebd697199eb8
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Jun 18 18:30:21 2012 -0700

    Funnel debug logging through nose properly.
    
    Change-Id: Ic76289c702ed54c9bf7b9fa4cb140d62049dfb9e

commit 7aa688a897bfc96cf198126c03ae89d0e06b404f
Merge: ed16167 b3b4d64
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jun 18 23:26:54 2012 +0000

    Merge "Avoid thread creation prior to service launch."

commit f14d3b9f70c5e3f0fa3465679b6f4238e2d6f502
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Mon Jun 18 14:49:15 2012 -0400

    Fix typo of swift_client/swiftclient in store_utils
    
    Change-Id: I4ae2aedc7bc893ae78d4e4dd03b290ece7d2735f

commit ed16167425c5a2a610ce503c3084bb3b2a03ae63
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Thu Jun 14 15:09:03 2012 -0400

    Stop revealing sensitive store info
    
    Use simpler error messages and log the details.
    
    Fixes bug: 1012268
    
    Change-Id: I3c4d98c81dee6676916c60e71a749037ae1edc81

commit b3b4d64ae23fd3a662e6ebc98642c42fe6631cad
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Jun 18 17:53:37 2012 +0100

    Avoid thread creation prior to service launch.
    
    It appears that the thread serving out the fake HTTP endpoint used
    in the copy-from tests is causing intermittent hangs in the launched
    glance service processes. These hangs manifest as calls to futex(2)
    that never return, and occur almost daily in Smokestack.
    
    The background to the thread/fork mismatch is explained in this
    blog post:
    
     http://rachelbythebay.com/w/2011/06/07/forked
    
    We avoid the issue by delaying the thread creation until after the
    service processes have been launched by the testcase.
    
    Change-Id: I68c6f1735e5001641994ed4f84ad879397ba8713

commit c44e16a538113293c7e73eea22c2ebc0f84c365f
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Sat Jun 16 16:57:56 2012 +0100

    Don't use PasteDeploy for scrubber and cache daemons
    
    There are no WSGI apps involved here, no need to configure pipelines with
    filters etc. All we're using PasteDeploy for is to construct an object.
    
    Well ... there are easier ways to do that! :)
    
    Change-Id: I4166d0071738fe587572db8f2883900408e9f097

commit 3b4c276550f1a126bc985588252b944e147f2d90
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Sat Jun 16 17:00:20 2012 +0100

    Remove some unused glance-cache-queue-image code
    
    Commit d453def removed the glance-cache-queue-image script but
    neglected to remove the PasteDeploy app and config.
    
    Change-Id: I20daf529fd9e466cdad9d3db19bc79ed16f24375

commit 7f4bea708afdd433efa20a20fa83a75ffa591049
Merge: 7e84007 1b78c75
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jun 15 17:55:45 2012 +0000

    Merge "Turn off SQL query logging at log level INFO."

commit 7e84007c6e252e33eaa713962b3660b0c9fbf807
Author: Nikhil Komawar <nikhil.komawar@rackspace.com>
Date:   Fri Jun 8 16:33:41 2012 -0400

    Implement pagination and sorting in v2
    
    implements blueprint: api-v2-images-sorting
    implements blueprint: api-v2-images-pagination
    
    Change-Id: Ibf38847e45534f25dba31c7ffe516e2e3a29450d

commit 1b78c75bb606a22df0d7d51a30e7695861ef685c
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Jun 14 11:48:27 2012 -0400

    Turn off SQL query logging at log level INFO.
    
    Fixes LP Bug #1013235.
    
    Change-Id: I5651a4f22bc396d7d082f95b1ef6df107b943fb5

commit 060a75b506beec26cd4a7d0a994a9dddc92d480b
Merge: abf43ad dc0ba92
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 20:35:52 2012 +0000

    Merge "Import db driver through configuration"

commit 088200c24251e4550187fb012b9026919fb095e0
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Jun 13 15:29:03 2012 -0400

    Default db_auto_create to False.
    
    Fixes LP Bug #1012823.
    
    Change-Id: Iefbcda3885308b7a6f170e137d10e76c94952e18

commit abf43ad147769af85255e9a13b672ab190f5fcf2
Merge: d986920 1e50b99
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 19:02:19 2012 +0000

    Merge "Move RequestContext.is_image_* methods to db layer"

commit d98692089e885692cdf7408cc4140e0f5c852ca9
Merge: dcd8ce6 45b64d5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 18:52:55 2012 +0000

    Merge "Add metadata_encryption_key to glance-cache.conf."

commit dcd8ce6447cb3e4a7d16c5fc7ff894e806d9c5df
Merge: 0aab15e e3f3d68
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 18:44:56 2012 +0000

    Merge "Use zipballs instead of git urls."

commit 0aab15ecb5df2567adbac2b1f4885313c052d5ab
Merge: 2848ddf 25116ed
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 18:22:58 2012 +0000

    Merge "Fix to not use deprecated response.environ any more."

commit 2848ddfc3ee1028500a4a15bfec08f805f22f56b
Merge: d82307e 1672eeb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 18:21:19 2012 +0000

    Merge "Fix help messages for --debug."

commit d82307e7c964b27465520fe36553d2ba90a40a69
Merge: e9dd69c c1f5345
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 17:16:28 2012 +0000

    Merge "Begin replacement of sqlalchemy driver imports"

commit e3f3d681279a9a1eca6686c1ac69d5eb8ac39f4a
Author: Monty Taylor <mordred@inaugust.com>
Date:   Wed Jun 13 11:33:56 2012 -0400

    Use zipballs instead of git urls.
    
    Additionally, update openstack.common.setup
    
    Change-Id: I6e72ac890ed93ab5201fe99f63fd579a9d9db89b

commit 45b64d54950ab64ddfbe20ed4a3d1fd62ed83c7b
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Jun 13 12:30:59 2012 -0400

    Add metadata_encryption_key to glance-cache.conf.
    
    Fixes LP Bug #1012752.
    
    Change-Id: I802583e2766cd1533223638259e57e44b39448eb

commit 1672eeb8807451534f96c20e33b1d4075e84def8
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Jun 13 12:15:08 2012 -0400

    Fix help messages for --debug.
    
    Fixes LP Bug #1012746.
    
    Change-Id: I54af0d20b3f5b56a1b350de3ac1324f1bbcd57ed

commit e9dd69cca62bd95da46467d376648c5f69baa515
Merge: b99e861 fc3f13c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 12 18:42:35 2012 +0000

    Merge "webob exception incorrectly used in v1 images.py"

commit b99e8610adb6d38ccbe91f13698f1e36b096ca74
Author: Chmouel Boudjnah <chmouel@chmouel.com>
Date:   Tue May 22 14:10:14 2012 +0000

    Use python-swiftclient for swift store.
    
    - Use python-swiftclient instead of swift.common.client (pinned to
      github hash).
    - Fixes bug 1002791.
    
    Change-Id: Ibdc00b75c62445a7f0930ee1806ad469e3d3ffe2

commit 4f688ef429c0c4520b2313275237fd5783ccf017
Merge: e2c52dd d33ce44
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jun 11 20:15:33 2012 +0000

    Merge "Remove the conf passing PasteDeploy factories"

commit 25116ed49e685e3d405cf03e7eb3efd95506e37f
Author: Duncan McGreggor <duncan@dreamhost.com>
Date:   Fri Jun 8 13:45:24 2012 -0400

    Fix to not use deprecated response.environ any more.
    
    WebOb 1.2 doesn't auto-set the response environment. There was only one place
    in Glance that was using this, so it was changed in favor of the stable API
    that has always been there: response.request.environ.
    
    This change fixes bug #1010560.
    
    Change-Id: I2e58bf32970c95d25cad0a35ee38b9540483eef0

commit dc0ba92dcfa060d8755b935f0d9b543a1e298778
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu May 31 17:07:46 2012 -0700

    Import db driver through configuration
    
    Using the 'data_api' config option, a deployer can now define
    which module to be used as the db driver.
    
    Related to bp refactor-db-layer
    
    Change-Id: Ie93b7331e5f8f3456b682d974ac6fd2cdb1e53b7

commit 1e50b993c0cebd3c1d22ca7636cb608686a1f526
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Jun 1 09:49:32 2012 -0700

    Move RequestContext.is_image_* methods to db layer
    
    These methods need direct access to the db and therefore require
    the request context module to maintain a connection to the database.
    Moving them to the db layer allows us to further refactor the
    db layer.
    
    This does duplicate the methods in each of the db drivers, so a
    future patch is needed to simplify that.
    
    Related to bp refactor-db-layer
    
    Change-Id: Ia7e0dbb9f2162fb69837699b970f8cab3efcd545

commit c1f53459f582ee4525d5cad58dd662f0a951bb0b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu May 31 16:20:14 2012 -0700

    Begin replacement of sqlalchemy driver imports
    
    Create glance.db:get_api to handle importing the configured data
    api module. Currently it's hard-coded to glance.db.sqlalchemy.api.
    
    Related to bp refactor-db-layer
    
    Change-Id: Ie9b078bddf6324bf0e76d562489a6695ed8b88df

commit fc3f13c29e1373e17147da06daa96b527664c746
Author: iccha <iccha.sethi@rackspace.com>
Date:   Fri Jun 8 21:32:20 2012 +0000

    webob exception incorrectly used in v1 images.py
    
    Fixes bug 1010681
    
    Change-Id: I42cf5a8e87e07b94fbba4af7ad3b16a62817007e

commit e2c52ddfa6b5b6dff88e3d58b55ef7034739bc63
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue Jun 5 13:52:23 2012 -0400

    Add tests and simplify GlanceExceptions.
    
    This also fixes some incorrect use of GlanceException parameters.
    
    Fixes bug: 1009122
    Fixes bug: 1010140
    
    Change-Id: Ic77856686a0259da2318e05b15f3d382508c00b9

commit 575651883d4012c3cf6cf75a8e0dd58514ff67a7
Merge: 86e8fdc c07be92
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Jun 9 14:16:57 2012 +0000

    Merge "Use openstack-common's policy module"

commit 86e8fdc02237f9c151e4780716c9570c65b2e3e7
Merge: 61d007b 15c204a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Jun 9 13:46:25 2012 +0000

    Merge "Update default values for known_stores config."

commit 61d007bc89a9ae0108d6b38352f8584d6ccc6413
Merge: e50ada5 9d9d225
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jun 8 21:44:46 2012 +0000

    Merge "Port remaining code to global conf object"

commit 15c204af75d18235defe1cd41866c4d216eb0fec
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Jun 8 15:37:10 2012 -0400

    Update default values for known_stores config.
    
    Updates the default value for the 'known_stores' config
    variable to include the full list of storage classes
    supported in Glance.
    
    Also, removes the known_stores config section from the
    example config file since it is arguably an advanced config
    that won't get used by most users. Removing this config avoids
    the overhead of maintaining internal class names in config files.
    
    Fixes LP Bug #1008698.
    
    Change-Id: I0117376aa4de3103410ecb1a36df6998fcd0d5b5

commit d33ce445d3e585f14aeb872ce890cf3228055574
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue May 29 08:51:12 2012 +0100

    Remove the conf passing PasteDeploy factories
    
    Implements blueprint cfg-global-object
    
    In glance.common.wsgi we have a paste_deploy_app() API which allows
    a ConfigOpts instance to be passed the the applications and filters
    constructed by PasteDeploy.
    
    Now that we're using a global object, we don't need this anymore
    
    Change-Id: I222d3c58308bc2f504cd802c0c8405d3baa2e49a

commit 9d9d22541902977319457de89e07fb3094d0a4db
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue May 29 08:51:12 2012 +0100

    Port remaining code to global conf object
    
    Implements blueprint cfg-global-object
    
    This iteration fixes up the remaining places where we're passing a
    conf object around.
    
    Change-Id: I3b627d093a6b7afeee129ab66b377a3b0af5439b

commit e50ada54727c07687e54ad5ae9a8a425d85b1c75
Author: iccha <iccha.sethi@rackspace.com>
Date:   Fri Jun 8 15:16:24 2012 +0000

    Made changes to adhere to HACKING.rst specifications
    
    Change-Id: I6a6fe0c2db55f57a74b5968224571c2c1440696c

commit c07be927fb9622bf2a83c03a2a1cda3bbed760b0
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Wed Jun 6 10:05:17 2012 -0500

    Use openstack-common's policy module
    
    Reworks glance to use the new policy module in openstack-common.
    
    Change-Id: I6012c71a16d83762535e7490d8f5bc5102160fc0

commit fc758a46e77de1746c796cd64228694521ee2b07
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Jun 7 22:23:48 2012 -0400

    Re-add migrate.cfg to tarball.
    
    Fixes LP Bug #1010284.
    
    Change-Id: Ic19a5ef16e7e2237c4becfbca9a608ef932fc973

commit c34b8de0aec616d53a4369d21824de4260100b58
Merge: c4c69ac a68eb24
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 7 22:34:53 2012 +0000

    Merge "Create 'simple' db driver"

commit c4c69ac15c66ba84d81dfaf78b3c6a1378e18fe6
Author: Nikhil Komawar <nikhil.komawar@rackspace.com>
Date:   Thu Jun 7 16:02:26 2012 -0400

    Implements cleaner fake_request.
    
    Implements the fake request to be more flexible.
    Changes the fake request calls in the tests.
    fixes bug 1010191
    
    Change-Id: Ic8199b1f8f479ffb3667cead2576c03591e30e43

commit ba0e3afbb21cf29cb3b76f917858337f84bcd4b4
Merge: 82dbff4 e315145
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 7 16:58:28 2012 +0000

    Merge "Fix typo in doc"

commit a68eb244318925adcaf94fa4d86332bd4ad4ebc9
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu May 31 15:39:33 2012 -0700

    Create 'simple' db driver
    
    Move the core of glance.tests.unit.utils:FakeDB to glance.db.simple.
    This 'simple' driver is an alternative to the traditional sqlalchemy
    driver. Additionally, the sqlalchemy driver has been moved from
    glance.db to glance.db.sqlalchemy. The simple db driver is only
    available to be used by tests for now.
    
    Related to bp refactor-db-layer
    
    Change-Id: I9d33a433c0c03e53fb5a3491076086427ae694b3

commit 82dbff438034d20724ecd489aca4496980c3774c
Merge: bbe442d de2a8a8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 7 16:14:56 2012 +0000

    Merge "Clean up a few ugly bits from the testing patch."

commit bbe442dddb6427fa5039ac9dd9ce47b6a5feda36
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Tue Jun 5 14:02:43 2012 +0800

    Glance should use openstack.common.timeutils
    
    Implements blueprint use-common-timeutils
    
    1. Edit openstack-common.conf and import glance/openstack/common/timeutils.py
    2. Replace datetime.utcnow with timeutils.utcnow
    3. Replace utils.isotime with timeutils.isotime
    4. Replace utils.parse_isotime with timeutils.parse_isotime
    5. Replace utils.normalize_time with timeutils.normalize_time
    6. Remove datetime related functions and datetime related unittests
    
    Change-Id: I014548848f738b00c670be3d372b16f47f6dee96

commit ac95b1f9c761c414c0d30837c0d1d6ec452c4391
Merge: 9057989 a25824e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 7 15:14:47 2012 +0000

    Merge "fix side effects from seekability test on input file"

commit de2a8a8d94eb9165fd32074369f79f930d77f06b
Author: Monty Taylor <mordred@inaugust.com>
Date:   Thu Jun 7 10:34:48 2012 -0400

    Clean up a few ugly bits from the testing patch.
    
    The pep8 runner in run_tests.sh was still referencing run_tests.py
    which no longer exists. Replaced that section with one that runs
    pep8 the same way as tox.
    
    Additionally, the first attempt at getting the test runner to do the
    same thing with debug logging as run_tests.sh was doing became a bit
    spammy. For now, actually have logging write out the log file in the
    first place. Eventually, it would be nice to get this to properly
    get spit out in such a way that nosetests would grab it and include
    it in the failed test case output.
    
    Change-Id: Ib5222a0c3507d5d7ede4d303c98323a622705301

commit e3151459e8ee4109ae76412fc6515431fa5b3fd0
Author: Vincent Untz <vuntz@suse.com>
Date:   Thu Jun 7 16:17:42 2012 +0200

    Fix typo in doc
    
    metdata -> metadata
    
    Change-Id: I44e5e73946e9d1a37b8e3a5974083e3fbea33d2d

commit 90579894d26e2c3a2254678db5a633c85084ee81
Merge: 898e732 1038a19
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 6 12:43:53 2012 +0000

    Merge "Add cfg's new global CONF object"

commit 1038a19a32a28f6d8d42a11d435baf5e1e1583bf
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue May 29 08:51:12 2012 +0100

    Add cfg's new global CONF object
    
    Implements blueprint cfg-global-object
    
    Begin adopting cfg's global CONF object pattern rather than passing
    a conf object around everywhere.
    
    This iterations does just enough to have each of the glance programs
    initialize CONF and get the unit tests working.
    
    Change-Id: Ia34959b3ba52cbe933d5d347f31319271b2e14f9

commit a25824e77ae86da840493ee8fbf5dc68a27dd74b
Author: Derek Higgins <derekh@redhat.com>
Date:   Thu May 31 22:13:40 2012 +0100

    fix side effects from seekability test on input file
    
    Fixes Bug #1007093
    
    Mixing use of os.lseek(fileno, 0, os.SEEK_SET) with
    file.seek seems to cause problems when reading data
    with file.read
    
    Change-Id: Ia96ce9bbdc93a1a8c6169d85b99187f8cd7b2fdc

commit 898e732bd7097b2400b82f20e515d32489cd51e3
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Jun 4 13:51:47 2012 -0400

    Just use pure nosetests.
    
    The test suite can be run now with pure nosetests + the openstack nose
    plugin. There is no longer any need for the run_tests.py.
    
    Change-Id: Iad89a2c1cc567ba10919a52166b3309edef20009

commit 66108d0e483028101186e14caaa0dbcca785b797
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sun Jun 3 09:54:51 2012 -0400

    Fix coverage jobs. Also, clean up the tox.ini.
    
    Change-Id: I85e8f1b190e2c5f598ae76f2920dfbe7c4ed1500

commit 41d285ab02525e2d109a3d3db6633cbffb17abb6
Merge: dfd9e20 19d6124
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jun 4 17:23:11 2012 +0000

    Merge "Glance should use openstack.common.importutils"

commit dfd9e207f25dbdb7584c80e015ddcec7099a5c52
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu May 31 11:23:35 2012 -0700

    Move glance.registry.db to glance.db
    
    Related to bp refactor-db-layer
    
    Change-Id: Ia7c5aea29eef8068a9b67ac5fd051b45a38a20de

commit 19d6124ccc99dcec404ef3d5405eb26b40d2038a
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Mon Jun 4 12:15:46 2012 +0800

    Glance should use openstack.common.importutils
    
    Implements blueprint use-common-importutils
    
    Change-Id: If92fcf85c6bbcd330fd3675401d03b12a5fc055c

commit ff32b489da0015686d62c50c33a87261606394f2
Merge: 5d6b05b d885461
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jun 1 18:03:41 2012 +0000

    Merge "Add additional info. to image.delete notification"

commit 5d6b05b57ea2f62ed6fdd0faedff50b08e21162b
Merge: fdc98c9 98b66c1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 31 14:52:24 2012 +0000

    Merge "Add a base class for tests"

commit fdc98c908918da3889fab1cb148b2dd09dbfb8a0
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon May 28 20:43:31 2012 +0100

    Add read-only enforcement to v2 API.
    
    Provide a new @mutating decorator to provide a concise marker for
    operations that should not be accessible to a read-only request.
    
    Related to bp api-v2-anonymous-access
    
    Change-Id: I52710083b4f112d2429afe4faa0660e2a6822929

commit 98b66c1ddd308bacb8ad8a78f71ea75353c3a01e
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue May 29 08:51:12 2012 +0100

    Add a base class for tests
    
    This base class will allow us to DRY up the config setup and teardown.
    
    Change-Id: I49fff259a38657110a4117134b1a8bd728404269

commit f2acb725dafb034567ef65eaa930c01d92240768
Merge: 81fcbc8 2a01e6e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 30 17:40:58 2012 +0000

    Merge "Enable anonymous access through context middleware"

commit 81fcbc8a3f91ee10332c6d23d7717486abd4c17a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 15 14:50:13 2012 -0700

    Expose tags on image entities in v2 API
    
    Enable users to set and view tags on image entities. Before, a user
    had to navigate to the /tags subcollection to interact with image tags.
    Additionally, this refactors the image_tag_* methods to return strings
    rather than sqlalchemy objects.
    
    * Related to bp api-v2-image-tags
    
    Change-Id: Ifdebe9b660f78bee5fda798a1f83e384a8220049

commit d885461b6fadb35c8a3042a1e6b9b8aa2bd29442
Author: Brian Elliott <brian.elliott@rackspace.com>
Date:   Thu May 24 13:04:48 2012 -0500

    Add additional info. to image.delete notification
    
    Add additional information to the 'image.delete' notification payload
    to simplify external usage tracking systems.
    
    Please note that this is not a backwards-compatible change as the
    old payload was simply a string consisting of the image id.  This
    converts the payload to a dictionary.
    
    Change-Id: I641b7de91fcc14dc3c81ec942aeb0acf5a63d128

commit 43a6424b714765ca9b54b25953c3e85773859a5f
Merge: b38a8ec 81224fa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 29 23:12:27 2012 +0000

    Merge "Sync with latest version of openstack.common.cfg"

commit b38a8ec4ec61015bc31f30712fdb2a7fb227ddfd
Merge: 8cda35f 104ed65
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 29 20:37:40 2012 +0000

    Merge "Expose timestamps on image entities in v2 API"

commit 8cda35fc1ff49c99c8269ce71c1ab3323775badd
Merge: 9a838a8 a7b8e62
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 29 19:51:02 2012 +0000

    Merge "Lock pep8 at v1.1"

commit 104ed657b8860f8810d88b0f54775626a22a18b6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed May 16 16:25:03 2012 -0700

    Expose timestamps on image entities in v2 API
    
    * Add created_at and updated_at to image entities
    * Ignore these timestamps on create & update
    * Related to bp api-2
    
    Change-Id: Iff0345de891e928367227f1a46f05e28b95de298

commit 81224fa22c78bcfe61285e6e8652c25b7f894b0d
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue May 29 08:51:11 2012 +0100

    Sync with latest version of openstack.common.cfg
    
    Changes since last sync:
    
     - make reset() clear defaults and overrides
     - automatically create option groups
     - allow options to be marked as required
     - use a list comprehension instead of map()
    
    Change-Id: I20d8b2e7a1fa0080398eaa8e03b0b6d48e7c2a29

commit 2a01e6ef755692240b4ed14f9005296e0653a9a1
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed May 23 08:05:16 2012 -0700

    Enable anonymous access through context middleware
    
    Certain deployments need to allow anonymous access to its
    images. This patch allows a user that has failed to authenticate with
    Keystone to access the API in read-only context.
    
    * Configure through 'allow_anonymous_access' option, defaults to False
    * Implements bp api-v2-anonymous-access
    
    Change-Id: Ia8f57e54bd141a2da1ca4600d1970558fb497f67

commit 9a838a8b34e435223e1e01d73d84665e6e8f7102
Merge: 26ce3e0 d0e6b83
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 24 22:35:46 2012 +0000

    Merge changes I26378e9f,I8b09677f
    
    * changes:
      Add allow_additional_image_properties
      Fix integration of image properties in v2 API

commit 26ce3e0e4cd94d57f3f4c2aaaf87b35c0643cc21
Merge: 4f0e72c 3785ec8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 24 22:25:11 2012 +0000

    Merge "Leave behind sqlite DB for red functional tests."

commit d0e6b8398a1d3787ec9ba77ddd1036c47549dafa
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Tue May 22 14:13:09 2012 -0400

    Add allow_additional_image_properties
    
    Implements bp:api-v2-user-properties
    
    Change-Id: I26378e9f4e8d0f53898f4665bad89922c0b5792a

commit 4f0e72c52ebc4b2d77c5635d543d06fa62f366c9
Merge: 9d3fd05 d2f04a2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 24 16:59:17 2012 +0000

    Merge "Remove unused imports in setup.py"

commit 397884be58d21589002756e1a712ef5b816bafe2
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 21 21:20:55 2012 -0700

    Fix integration of image properties in v2 API
    
    The (de)serialization of images in the v2 API expected a db-like
    properties list in some cases, while in others a flat dictionary. This
    patch aligns the code by ensuring the properties dictionaries are
    normalized before being passed in and out of the controller.
    
    * Expands the images functional test case to cover this integration point
    * Cast all images to dictionaries before returning from the controller
    * Related to bp api-2
    
    Change-Id: I8b09677f622151330630fc7b0267f0549bb1a458

commit a7b8e62556f760a8a05fcfd92394517797376dea
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu May 24 07:16:31 2012 -0700

    Lock pep8 at v1.1
    
    Update offending files to pass pep8 v1.1 and lock our deps on this
    new version.
    
    Change-Id: I5380f213f8e2f62d75f513c8b4496f78fc692dad

commit 9d3fd0598f27a318b29fb90446bb37bf7084380e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu May 24 06:21:17 2012 -0700

    Lock pep8 to version 0.6.1 in tox.ini
    
    Change-Id: Ib88f57a08bb8ba8bd7970300716d84a2a2e2a411

commit 87e45ac659172a49c9ba281e65917d3892308321
Merge: 8bcadbf 88f8020
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 23 22:45:20 2012 +0000

    Merge "Correct format of schema-image.json."

commit 8bcadbfbc1e4ec17de79bdff42274ade07c462ec
Merge: 1b25c55 a92b01f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 23 22:33:36 2012 +0000

    Merge "Adds sql_ config settings to glance-api.conf."

commit 1b25c55dcac905536e025a31587d516e9eaa661f
Merge: 86a7976 03da47b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 23 21:54:41 2012 +0000

    Merge "Fail gracefully if paste config file is missing."

commit 03da47b5ea854175e70393ddc5bc6258a4c21047
Author: Brian Elliott <bdelliott@gmail.com>
Date:   Wed May 23 11:01:03 2012 -0500

    Fail gracefully if paste config file is missing.
    
    If the paste config file can't be found, fail with a RuntimeError
    and message instead of a traceback from os.path.abspath.
    
    Change-Id: Id8823dbadab06a0de6bb7c235b70c355812ed55e

commit 86a7976c82e78d0ef14851610d9f02b54a5b481e
Author: Thierry Carrez <thierry@openstack.org>
Date:   Wed May 23 21:06:04 2012 +0200

    Add missing files to tarball
    
    Add a few missing files to generated tarballs.
    Fixes bug 1001213.
    
    Change-Id: Ie6ce3069e9e93aeb6be78bd2d90ad4f07ae56b3a

commit d2f04a2743009f406dad41968fc414e0a8784097
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed May 23 11:47:11 2012 -0700

    Remove unused imports in setup.py
    
    Change-Id: Ifb08695a8a9a264a3032ae09524e8b37fa0dd761

commit a92b01fe58b5a133c719f114106342e80279efb4
Author: Dan Prince <dprince@redhat.com>
Date:   Wed May 23 11:56:10 2012 -0400

    Adds sql_ config settings to glance-api.conf.
    
    The Glance v2 API makes use of the DB directly. As such
    we should include the sql_ configs in the default glance-api.conf
    file.
    
    Fixes LP Bug #1003504.
    
    Change-Id: I5e287dafcd65864f56789ae22bab3dcc6b353a47

commit 88f802027c4be007becb7dfbe6e1885990a07838
Author: Dan Prince <dprince@redhat.com>
Date:   Wed May 23 10:48:43 2012 -0400

    Correct format of schema-image.json.
    
    Correct the JSON format of schema-image.json. Fixes issues where
    glance-api won't start due to invalid JSON in this file.
    
    Fixes LP Bug #1003470.
    
    Change-Id: Ibacc49f2c45e233bd6ad25b3334e013acaae8339

commit 9462474c143a88914997206b2179f6020b8cb095
Merge: 407a4a6 1533e6d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 22 23:38:52 2012 +0000

    Merge "Fix paste to correctly deploy v2 API"

commit 1533e6d8b822b50f0017fb3348f80fae06fe3924
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 22 13:23:44 2012 -0700

    Fix paste to correctly deploy v2 API
    
    Corrects a typo where 'apiv1app' should be 'apiv2app'
    
    Change-Id: I4ef29f7539a572ed65422fd548e9718e86161b5f

commit 407a4a623f860ec2ae5e7ba6778f558d8a01431c
Author: Dan Prince <dprince@redhat.com>
Date:   Mon May 21 11:55:20 2012 -0400

    Add connection timeout to glance client.
    
    Adds a timeout option to glance client and bin/glance.
    Includes fast running test case to verify the timeout works correctly.
    
    Fixes LP Bug #1002907.
    
    Change-Id: I4a0c4a8ef1862346ec2cd068d9d9e0577cba9b68

commit c5a0b0086b1099ba4139ab0ae5beb98a58443477
Merge: 5ffdc74 71c98ae
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon May 21 21:19:30 2012 +0000

    Merge "Support DB auto-create suppression."

commit 3785ec8b4b5a0d4fbe2385b8cd21e7652c303b1a
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Sun May 20 20:41:04 2012 +0100

    Leave behind sqlite DB for red functional tests.
    
    We leave behind the sqlite DB for failing tests to aid in diagnosis,
    as the file size is relatively small and won't interfere with subsequent
    tests, as it's in a per-test directory (which is blown-away if the test
    is green).
    
    Change-Id: I90be433fc6f02234b1118a547ea0b5524238161d

commit 71c98ae8876b66964623713c2b3bc686ad1dca35
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri May 18 14:23:41 2012 +0100

    Support DB auto-create suppression.
    
    Adds a new boolean config option, db_auto_create, to allow the
    DB auto-creation be suppressed on demand. This defaults to True
    for now to maintain the pre-existing behaviour, but should be
    changed to False before the Folsom release.
    
    The 'glance-manage db_sync' command will now create the image*
    tables if the DB did not previously exist. The db_auto_create
    flag is irrelevant in that case.
    
    The @glance.tests.function.runs_sql annotation is now obsolete
    as the glance-api/registry services launched by functional tests
    must now all run against an on-disk sqlite instance (as opposed
    to in-memory, as this makes no sense when the DB tables are
    created in advance).
    
    Change-Id: I05fc6b3ca7691dfaf00bc75a0743c921c93b9694

commit 5ffdc74a8d6115dc14104a4cf5c259e638f3230b
Merge: 5c2cfa4 0252c18
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 18 19:53:29 2012 +0000

    Merge "Add credential quoting to Swift's StoreLocation."

commit 5c2cfa4e6bae9956c73857038b16e70df9e1c50e
Merge: 457bbfb dd81f12
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 18 19:26:17 2012 +0000

    Merge "Fix glance-api process leak in respawn storm test."

commit dd81f120fd68e136d21fe8f17eae0b3e4fba370d
Author: Dan Prince <dprince@redhat.com>
Date:   Thu May 17 15:14:38 2012 -0400

    Fix glance-api process leak in respawn storm test.
    
    Fixes a glance-api process leak that occurs when running
    TestMultiprocessing.test_interrupt_avoids_respawn_storm.
    
    The test code creates an array of pids sorted numerically sorted in
    reverse (largest to smallest) meaning the child pids should be at the
    top of the list. This patch simply grabs the child pids from the top of
    the list instead of relying on the length of the list.
    
    Fixes LP Bug #1000931.
    
    Change-Id: I91d538e686a770778d9855a1bd5a1767cc83842e

commit 457bbfbde4c4a6dc60792a85f133b288c7347337
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Thu May 17 11:59:05 2012 -0400

    Stubout httplib to avoid actual http calls
    
    Fixes bug #1000828
    
    - Added some additional test code cleanup
    
    Change-Id: I0589aa22d8e4b835a1d8d72e47ba5d1ceb982aa8

commit 1c5d12c65aa6d013e505317fddd532778cdc2f98
Merge: 3f3124a 49a0f96
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 17 17:53:33 2012 +0000

    Merge "Backslash continuation removal (Glance folsom-1)"

commit 3f3124ac51d4773620763043374cb81436ba88f6
Merge: 77552aa 1306c63
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 17 17:15:15 2012 +0000

    Merge "Implement image visibility in v2 API"

commit 49a0f962f66d6c6ef297b03e2551c17b8572c7df
Author: Zhongyue Luo <zhongyue.nah@intel.com>
Date:   Fri Feb 10 23:29:33 2012 +0800

    Backslash continuation removal (Glance folsom-1)
    
    Fixes bug #1000636
    
    Removes backslash continuations (except sqlalchemy and mox related code)
    
    Change-Id: I08e6db28f157d67be9fc11ec02cc0844c006a6df

commit 77552aaac77b3e25b57a865b0643443d68a145ee
Merge: 25b8974 4c43461
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 17 00:23:34 2012 +0000

    Merge "Add min_ram and min_disk to bin/glance help."

commit 1306c63cbe8b6d20363502b1907d3a30e69d4eaa
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 14 17:30:18 2012 -0700

    Implement image visibility in v2 API
    
    * Add visibility attribute to images (aka is_public)
    * Implements bp api-v2-image-visibility
    
    Change-Id: I04e77c051769d0cc87fc632eef12f1a0aadf39a3

commit 25b89747a0b37830075fcaa8b01d527ac88fd93f
Merge: ef475e1 39d0023
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 16 19:56:15 2012 +0000

    Merge "Simplify JSON Schema validation in v2 API"

commit 4c434619d3937624da94d0a03153dec402256b19
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Tue May 15 14:15:20 2012 -0400

    Add min_ram and min_disk to bin/glance help.
    
    The min_ram and min_disk fields are supported for both glance add and
    glance update, so this change adds a description of those fields to the
    glance help (add|update) comment fields.
    
    Change-Id: Ib6ca980e29ad7062eaaa10cde8705f9248d2e3b3

commit ef475e17d501a31523a7fabf067b0d3fc36b084c
Author: Joshua Harlow <harlowja@yahoo-inc.com>
Date:   Tue May 8 17:28:42 2012 -0700

    Implements blueprint import-dynamic-stores.
    
    Make glance more pluggable with regard to stores.
    
    Change-Id: I7b264d1b047a321f7b60857bb73154f831b82a7b

commit 0252c182cf535d4f9db1dc1c0df144430c39b1a1
Author: Maru Newby <mnewby@internap.com>
Date:   Thu May 3 16:09:52 2012 -0700

    Add credential quoting to Swift's StoreLocation.
    
     * Added credential quoting in glance.store.swift.StoreLocation
       to support usernames and passwords that contain '@' characters.
       Without quoting, '@' characters in credentials (e.g. using an
       email address as a username) would result in an exception being
       thrown by parse_uri.
     * Added a migration to support the change in location format.
     * Addresses bug 994296
    
    Change-Id: I92c4f4af914394aada1b4415a42f5a1308187dc4

commit b5bae3d040e38f76c066edc8644749e2149f0599
Merge: 6880a4e 1ca0a1a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 15 22:06:14 2012 +0000

    Merge "Combine v2 functional image tests"

commit 6880a4ecf68fc5c8d234144506a4667fae1e366e
Merge: 233b8ff fe3ae1d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 15 20:28:27 2012 +0000

    Merge "Update glance to pass properly tenant_name."

commit 1ca0a1a283c31bfee2ec699991bd3a07527e77f0
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 14 16:30:53 2012 -0700

    Combine v2 functional image tests
    
    Reverse the premature optimization of breaking up functional tests
    for images, tags, and access records
    
    Change-Id: I0e54c08b84403a1b1e62851c9fe8995f6dd5fa4d

commit 39d0023df3ebe03ce1917309babef3f86b95457d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 14 15:18:50 2012 -0700

    Simplify JSON Schema validation in v2 API
    
    * Move validation into glance/schema.py
    * Related to bp api-v2-schemas
    
    Change-Id: Ic3114a1803ef994f5eb92327c8c6b65de2dc1ff0

commit 233b8ff70541cdcd059c8ef0e4d9dac7952adfb2
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu May 10 14:43:49 2012 -0700

    Expose deployer-specific properties in v2 API
    
    * Validate deployer-specific image attributes in requests
    * Don't validate data on serialization (yet)
    * Partially implements bp api-v2-schemas
    
    Change-Id: Ice5240f05cb8726423386657305381dbd6cfa6eb

commit 09ec351b34f01c2dc05f0afb059833d176b0805e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu May 10 12:33:03 2012 -0700

    Test that v2 deserializers use custom schemas
    
    * Related to bp api-v2-schemas
    
    Change-Id: I82d0692af5196754738d3684a0f1ea116051dae8

commit 1bddaf429edf7806f2a53dd26574905759bdd203
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu May 10 10:12:02 2012 -0700

    Load schema properties when v2 API starts
    
    * Read properties from etc/schema-image.json and etc/schema-access.json
    * Gracefully handle the lack of custom schema property files
    * Partially implements bp api-v2-schemas
    
    Change-Id: Ida1a5afe48be9bce8a5d8faeeda9ed03848a4fd0

commit eee5fecdf6f2853acb0909d077878274cd2ecd7b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri May 4 22:26:52 2012 -0700

    Support custom properties in schemas for v2 API
    
    * Add glance schema API (glance.schema:API)
    * Disallow custom properties that conflict with base properties
    * Implements bp api-v2-schemas
    
    Change-Id: Ibfa617cb5edf16627627debc30149669213d4b2d

commit 7553b4fcb69580c9cbed8c8944e2b5d70fe99048
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri May 11 16:17:16 2012 +0100

    Fix tiny format string nit in log message.
    
    Fixes bug 996157
    
    To avoid "ValueError: unsupported format character ':' ..."
    
    Change-Id: I8666b3441ccbea884dcd7ad54f019a0681b717b4

commit a857842368a92c241453561b378f8e00f7a92245
Author: Unmesh Gurjar <unmesh.gurjar@vertex.co.in>
Date:   Thu May 10 16:29:24 2012 +0530

    Fixes bug 997565.
    
    Modified the help text for 'add' image command.
    
    Change-Id: I32cbd36a3a4ef6368f9128ac0ab4a8efbd14ff2e

commit 7f761e16ce69ec549be1a66bd2797e53d0a1d988
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 8 15:39:00 2012 -0700

    Allow chunked image upload in v2 API
    
    * Related to bp api-v2-image-upload
    
    Change-Id: I728cdd28cab1d63d67cd7ad6c9d33535af4d5535

commit 2c102130ed8bd8e01fc1a4af8ea77555de6c2866
Author: Patrick Mezard <patrick@mezard.eu>
Date:   Sun May 6 14:49:48 2012 +0200

    wsgi: do not respawn on missing eventlet hub
    
    Eventlet 'poll' hub is not available on OSX, wsgi.Server workers have no
    chance to start but the error was not caught and they were respawned
    endlessly. This patch makes these workers not to be respawned.
    
    This has the nice side-effect of avoiding the test suite to get stuck in
    test_multiprocessing on OSX, filling syslog.
    
    Change-Id: I565d21f5c6861102e96d6953ace29cde57e8ec38

commit 28d85923fa561d3f7ba60cba6d9acbe346560386
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri May 4 10:15:50 2012 -0700

    Implement v2 API access resource
    
    * Add functional tests
    * Implements bp api-v2-image-access
    
    Change-Id: If62f4c0c9b387bb1f99306d68b18ad21f5f875d1

commit f9afe586b6c35d721bb63be47427d3fe955e03d2
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri May 4 14:22:12 2012 -0700

    Disallow image uploads in v2 API when data exists
    
    When data has already been uploaded for an image (determined by the existence
    of a location attribute), reject any subsequent requests to upload data with
    a 409 HTTP error code.
    
    * Related to bp api-v2-image-upload
    
    Change-Id: I0c4d2ebf548862ecb9c760bac9e96348f8377567

commit 793bb610050a19108fc5e178b8dfe4212a7d6dcc
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu May 3 20:10:50 2012 -0700

    Implement v2 API image tags
    
    * Add image_tags table and new db methods to manage it
    * Add appropriate API resource classes
    * Implements bp api-v2-image-tags
    
    Change-Id: I5f3748b15239de8da000e7b3ff537c1cfc8e2f0d

commit 5e85329ed10d8963bf05704e00ff142172fe7b44
Merge: e021c3a c1ea910
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 8 02:14:45 2012 +0000

    Merge "Implement image data upload/download for v2 API"

commit e021c3a37c47a65423e277b16d22feb104bd1be5
Merge: e54bc2b f879081
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon May 7 23:06:43 2012 +0000

    Merge "Use sdist cmdclass from openstack-common."

commit e54bc2bec2365897abd0c12d829cec366646b97a
Merge: e2981c8 f184a38
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon May 7 22:57:18 2012 +0000

    Merge "Return 204 from DELETE /v2/images/<image_id>"

commit e2981c82f8401bfef3e49fe7a9bb3a9c87b4d27f
Merge: 8b8debd 06821ea
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon May 7 22:39:26 2012 +0000

    Merge "Update noauth caching pipeline to use unauth-ctx."

commit 8b8debdc124752418c43fd3f2fbeb3294f66eab9
Merge: db86220 eccfcdc
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon May 7 22:21:01 2012 +0000

    Merge "glance-api: separate exit status from message"

commit db86220abb0861ccb58fb6af57a262c734a18d6e
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue May 1 10:30:03 2012 +0100

    Use ConfigOpts.find_file() for policy and paste
    
    Use cfg's new helper method to find the PasteDeploy and policy config
    files. The basic behavior is "look alongside the config file" with a
    fall back to the standard default config paths.
    
    In the fairly obscure case where no --config-file is found we use an
    explicit default paste file taking to account the fact that all the
    glance apps have their paste config in a single file.
    
    Add some new debug logging to make it easier to see which config files
    are being loaded.
    
    Fixes bug 992319
    
    Change-Id: I978c4a8cb6ec6d12aaf746af511ccb572c34b7ee

commit c1ea910bc501643e53bbb2401a62c3482d667c06
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu May 3 15:05:13 2012 -0700

    Implement image data upload/download for v2 API
    
    * Add the ImageDataController to handle upload/download of image data
    * Expose file link in image entities
    * Implements bp api-v2-image-upload
    
    Change-Id: Id3618bd292b61cd5eedf48a034fa66fd80917b72

commit f879081427f265be4310b3067152615b02ecbfee
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sat May 5 12:04:39 2012 -0700

    Use sdist cmdclass from openstack-common.
    
    Change-Id: I6f970cb61929d32fa121c1bc1209fc1fef1d572d

commit eccfcdcd9e30b775cce5c4e96224392ea6f0ede4
Author: Patrick Mezard <patrick@mezard.eu>
Date:   Sun May 6 14:07:52 2012 +0200

    glance-api: separate exit status from message
    
    This will be useful to tell regular failures from child unexpected
    terminations.
    
    Change-Id: I3fdf02558d8bdd8be6487edc20059e0e8a0e50b8

commit 06821eaff2670d9f8c8a0a5be20302d1028dc2a2
Author: Dan Prince <dprince@redhat.com>
Date:   Sat May 5 22:09:19 2012 -0400

    Update noauth caching pipeline to use unauth-ctx.
    
    Updates the noauth version of the caching pipeline to use
    unauthenticated-context.
    
    Fixes LP Bug #995323.
    
    Change-Id: Id83be95f582a4a6ebe47dbeddc8101a51988e05e

commit 6d15a2debb00ee4709ed8df582915501316b1ec3
Merge: 6e65bf9 59aa1ef
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat May 5 20:10:35 2012 +0000

    Merge "Add /v2 to sample glance-api-paste.ini"

commit f184a386271b8305023c90186244a370727b2535
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Sat May 5 19:59:05 2012 +0100

    Return 204 from DELETE /v2/images/<image_id>
    
    Fix bug 995224
    
    The v2 API design and normal RESTful idiom would suggest that a
    204 No Content status is more appropriate than 200 OK.
    
    Change-Id: Ic5ae3ffa22eafdec0f780d16cceb8ce45c84c854

commit 6e65bf9f077479460a441d8b79624d860970359b
Merge: 3f3da92 8bd40b7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 4 19:11:00 2012 +0000

    Merge "Add localization catalog and initial po files to Glance. Fix bug 706449."

commit 3f3da929f62f483dacb4efa60fe8519728934fb7
Merge: 4f21169 bcb6089
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 4 19:01:33 2012 +0000

    Merge "Convert glance to glance/openstack/common/setup.py"

commit 8bd40b7b5a12b8eee5edac224ed5a8a50370faba
Author: ZHANG Hua <zhuadl@cn.ibm.com>
Date:   Thu Apr 26 17:54:03 2012 +0800

    Add localization catalog and initial po files to Glance.
    Fix bug 706449.
    
    Change-Id: I5e8e0ff0161d9db0253db12284cce347aacbac5f

commit 59aa1ef2a7b35ae80a8c50808b24c3564db9caa6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu May 3 17:52:25 2012 -0700

    Add /v2 to sample glance-api-paste.ini
    
    * Related to bp api-2
    
    Change-Id: I147624128bea7e0ca84c1673857b227f0590ec78

commit 4f2116937a9a5408358855343b51f3fd02042c48
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Apr 24 17:14:28 2012 -0700

    Basic functionality of v2 /images resource
    
    * Implement create, upate, and delete actions for images
    * Adds a basic functional test
    * Add all /images url routes
    * Implements bp api-v2-images
    
    Change-Id: Ib9b16c443730943557f555b4aa9ce63840ff8e17

commit eb4aaa97bd1e1c7e541a0ad109fb23dfee0f9c9d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 1 15:41:06 2012 -0700

    Split noauth context middleware into new class
    
    Use UnauthenticatedContextMiddleware in the case that you want to deploy
    without an auth service. ContextMiddleware is now solely for authenticated
    requests.
    
    * Rewrite ownership tests for adding/updating images through the v1 API
    * Fixes bug 992859
    
    Change-Id: I608671aac8300c9195769542708708afda991e04

commit 64ab035f9615e67ce382c9eaf232608d9c5cd8fd
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Apr 27 10:45:22 2012 +0100

    Add -c|--coverage option to run_tests.sh
    
    A convenience for generating coverage metrics. Might make it
    more likely that developers will review the coverage stats more
    often, to identify pre-existing blackspots and avoid proposing
    under-tested new code.
    
    Change-Id: Iecd10ec529dd6e93d18a6763bf36667402640881

commit 90609a35fca063675076f2b75eb4dda4f9ab58d3
Merge: f0a0c4a 6e29b0b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 2 22:30:44 2012 +0000

    Merge "Support for directory source of config files"

commit bcb6089733c334edf35edca2e61338fc7f5ef6e3
Author: Chuck Short <chuck.short@canonical.com>
Date:   Tue Apr 24 09:21:48 2012 -0400

    Convert glance to glance/openstack/common/setup.py
    
    Convert glance to use glance/openstack/common/setup.py
    to write the changelog.
    
    Change-Id: Ibadec15d7e530149cf62cd00d63c06bf63cf53bb
    Signed-off-by: Chuck Short <chuck.short@canonical.com>

commit fe3ae1d73b643c99987eaddb084ed094901cde8d
Author: Chmouel Boudjnah <chmouel@chmouel.com>
Date:   Fri Apr 13 16:44:33 2012 +0000

    Update glance to pass properly tenant_name.
    
    - Update glance with the latest changes in swift.common.client.
    - Use 5000 for port.
    - Properly test v2 in tests.
    - Fixes bug 980196.
    - Test swift against a specific stable version like for keystone.
    
    Change-Id: Iaff536efc92e78e51d8042010ce0eb407c4a71b2

commit f0a0c4a00067b1353fe7f1c677c28458e93297b3
Author: Joe Gordon <jogo@cloudscaling.com>
Date:   Tue May 1 15:38:07 2012 -0700

    Cleanup authtoken examples
    
    * remove auth_uri - do not need when set auth_port, auth_host, auth_protocol
    * remove servce_*  variables - not needed in new keystone
    * update associated documentation
    
    Change-Id: I9bf7d53f7d62371848645a242ae63f77b42319db

commit 6e29b0bd6d3be1af051a5e6615b286dcc60457fb
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Apr 23 20:11:51 2012 +0100

    Support for directory source of config files
    
    Allow multiple config files to be pulled in from a config directory,
    as opposed to individual config files being explicitly enumerated.
    
    This logic is enabled using the --config-dir=/path/to/config CLI option,
    causing config to be retrived from all matching /path/to/config/*.conf
    files.
    
    Sections may be re-opened across config files, and all config items
    must reside in an explicitly specified section (i.e. it does not default
    to [DEFAULT]). This behavior is unchanged.
    
    The common elements of this patch (i.e. not specific to the
    glance-specific location of paste.ini files) have landed in
    to openstack-common as:
    
      https://github.com/openstack/openstack-common/commit/fd8c2e7c
    
    Change-Id: I3b659f1837c082bd1a78fe860a468f9d68f0f132

commit bdcb63d46d6a1eeff0ac6b89226043df5024c4d9
Merge: fb71028 f4ce37b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 1 15:20:12 2012 +0000

    Merge "Auto generate AUTHORS file for glance."

commit fb710288707a8d46cbe898d1b40810d2907e448f
Author: Dan Prince <dprince@redhat.com>
Date:   Tue May 1 09:42:16 2012 -0400

    Support conf from URL's with versions.
    
    Adjusts our version match regex so that it detects URL's
    which already have version's in them that start with
    a '/'.
    
    For example: '/v1'
    
    Fixes LP Bug #992600.
    
    Change-Id: I331e945c46757a01a4dd939b2098e68334b27530

commit f4ce37b9c23cb09b5e4e07c0af5bae7a65f6cc04
Author: Bhuvan Arumugam <bhuvan@apache.org>
Date:   Fri Apr 20 23:37:28 2012 -0700

    Auto generate AUTHORS file for glance.
    
    Bug: 976267
    
    Now that git commits are gated by CLA, we shouldn't enforce
    committers to add an entry in AUTHORS file. The AUTHORS file
    should be generated automatically, based on git commits.
    
    This commit fixes the problem.
    
    * Authors
      Remove this file. To be consistent with other projects,
      the new file AUTHORS is generated automatically.
    
    * .gitignore
      Add AUTHORS file.
    
    * glance/common/setup.py
      generate_authors(): New method to create AUTHORS file. If
      AUTHORS.in file exists, append it's content to AUTHORS file.
    
    * setup.py
      Import the new method.
      local_sdist.run(): Generate AUTHORS file before creating the
      package.
    
    * MANIFEST.in
      s/Authors/AUTHORS
    
    * glance/tests/unit/test_misc.py
      AuthorsTestCase: Remove this class that test an entry in
      Authors file.
      parse_mailmap(), str_dict_replace(): Remove these methods.
    
    Change-Id: If83c3fe9b2142342ac11cc019bc24926f52ee753

commit c1053b233e637a481e70453f4e6f5915deb4d620
Merge: 8b23d4f 60ab521
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 1 00:43:53 2012 +0000

    Merge "Fixes LP #992096 - Ensure version in URL"

commit 8b23d4faafeb5819e5b3db1e8f1970b7d434bf2f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Apr 24 11:30:21 2012 -0700

    Integrate openstack-common using update.py
    
    * Update all cfg and setup imports to point to new location
    * Fixes bug 987968
    
    Change-Id: If2fbf126e0b241e80ee59fa4e43bb5af6eb879a8

commit 60ab521b01b4f653655eecd8ba2e561a7bbdf0c9
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Apr 30 14:38:51 2012 -0400

    Fixes LP #992096 - Ensure version in URL
    
    * Documents the configure_via_auth parameter
    * Ensures that if configure_via_auth is used (the default), that
      if the management_url that is returned does not contain a version
      identifier, the client class' DEFAULT_DOC_ROOT is appended
      appropriately.
    * Adds some log debugging statements into the base client class so
      that the URL being configured/constructed is more easily identifiable
    
    Change-Id: I307a24231b59f7a183ed669f679976cc3f8ec21c

commit 621c392240ebda86a3602a87b1d72016ae85351d
Merge: 5c446d0 bd305fa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Apr 27 01:19:41 2012 +0000

    Merge "Merge registry context with common context"

commit bd305fa07b356365a54e419a4d63f71d798850ce
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Apr 24 20:35:41 2012 -0700

    Merge registry context with common context
    
    Pull the extra methods defined in glance.registry.context:RequestContext into
    glance.common.context:RequestContext. This is necessary as the new v2 API
    implementation talks directly to the database.
    
    * Partially implements bp api-2
    
    Change-Id: Ia8c1fde511bdca69be0dcf61ce12976ace5f7dc3

commit 5c446d063a7d1e468644a53dc310e9bbc07ae4e7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Apr 22 19:51:48 2012 -0700

    Begin functional testing of v2 API
    
    * Ensure the schemas resource functionally works
    * Partially implements bp api-2
    
    Change-Id: I0bedda0276e0ae3a648d425030c434be9c1eb1b6

commit ba939295e3a5b79c1856b2d60800874fe5479e01
Merge: bfb00b1 223fbee
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 24 18:52:47 2012 +0000

    Merge "Omit Content-Length on chunked transfer"

commit bfb00b1547c7a2b7c9cf7692a47a8f6178404237
Merge: 5bed23c c449d76
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 24 18:10:24 2012 +0000

    Merge "Fixes LP #978119 - cachemanagement w/o keystone"

commit c449d76ff2e19fecf46f0830cefbc3255a29fb1c
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Apr 24 13:06:44 2012 -0400

    Fixes LP #978119 - cachemanagement w/o keystone
    
    Removes section of glance-api-paste.ini that refers to
    an improper cachemanagement middleware without keystone
    
    Change-Id: I86a1a84aac16a8345b06ce83562f4508b49dac10

commit 223fbee49a55691504623fa691bbb3e48048d5f3
Author: Mike Lundy <mike@pistoncloud.com>
Date:   Fri Apr 13 19:53:16 2012 -0700

    Omit Content-Length on chunked transfer
    
    Content-Length and Transfer-Encoding conflict according to the HTTP
    spec. This fixes bug 981332.
    
    This also adds the ability to test both the sendfile-present and
    sendfile-absent codepaths; the sendfile-present test will be skipped on
    sendfile-absent platforms.
    
    Change-Id: Ibb017b4a43d89ffdb6b868648296603cfec7780d

commit 5bed23cbc962d3c6503f0ff93e6d1e326efbd49d
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Apr 24 12:24:39 2012 -0400

    Fix content type for qpid notifier.
    
    Fix bug 980872.
    
    This patch fixes a regression I introduced in
    2d36facf14f4eb2742ba46274e04a73b5231aece.  In that patch, I adjusted the
    content_type for messages sent with the qpid notifier to be
    'application/json' to match a change that went into the kombu notifier.
    Unfortunately, it's wrong.
    
    I assumed based on the kombu change that notifications were being json
    encoded before being passed into the notification driver.  That's not
    the case.  The message is a dict.  So, just revert the change to set the
    content_type and let Qpid encode the notification as 'amqp/map'.
    
    Change-Id: Iea027409f6200109b97fed93073cff84bc915536

commit a9fb22483d9ebc08320dcf9019861ecd2e1feb63
Merge: 1a275d4 3a81aa9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 24 15:38:26 2012 +0000

    Merge "Remove __init__.py from locale dir"

commit 1a275d4fa284571a337043b425192b10a06c457a
Merge: 0aa0341 3de99a1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 24 09:49:13 2012 +0000

    Merge "Fix i18n in glance.notifier.notify_kombu"

commit 0aa03410282f32060f40df6cf2e7e6f208f36fd6
Merge: e4bfe50 39e6529
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 24 02:18:57 2012 +0000

    Merge "Add a space to fix minor typo in glance help."

commit e4bfe5020d5426b9d2def07f28c034054fda87e7
Merge: df28738 0e10519
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 24 02:08:43 2012 +0000

    Merge "Suppress pagination on non-tty glance index."

commit 3a81aa9fe2fd97563627a606f7eb95170ec005e4
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Apr 23 09:40:55 2012 -0700

    Remove __init__.py from locale dir
    
    Previously, the __init__.py indicated that we have a custom locale package,
    preventing imports of the locale package that ships with python itself.
    
    * Fixes bug 977021
    
    Change-Id: Id4921a1efd1a223790cc8b52917d00b387e9cba6

commit 3de99a1831ce8550e70dc6b0f96051578b61e1e7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Apr 22 22:21:53 2012 -0700

    Fix i18n in glance.notifier.notify_kombu
    
    * Fixes bug 983829
    
    Change-Id: Ibc5ec12e97e69797d1952c020c3091f42480abec

commit df28738d1f693d5ae35d75dfcdad41706a012230
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Apr 22 20:31:00 2012 -0700

    Override OS_AUTH_URL when running functional tests
    
    * Fixes bug 985671
    
    Change-Id: Ie4f4c13846de727647abe168aeb193a93f03e0bf

commit ca84ec7d5550c0978ac80fad7972e77c1c971107
Author: Ionuț Arțăriși <iartarisi@suse.cz>
Date:   Thu Apr 19 14:16:45 2012 +0300

    remove superfluous 'pass'
    
    Change-Id: Icf959c47a0d63ed1805151a144b99623efc0a1ac

commit 6cc4b8ea2d4642ed0f2167abd6c0ebedd65853c1
Author: Yaguang Tang <heut2008@gmail.com>
Date:   Sun Apr 15 11:53:55 2012 +0800

    fix bug lp:980892,update glance doc.
    
    Change-Id: I5b231421be4dbb38a3af45783543bef50b74c09c

commit 39e652955096474819b6f940561aef4122576458
Author: Matthias Schmitz <matthias@sigxcpu.org>
Date:   Fri Apr 13 20:36:53 2012 +0200

    Add a space to fix minor typo in glance help.
    
    * Add space to fix minor typo in glance help.
    * Add myself to Authors as adviced in the review process.
    
    Change-Id: I9a656e5fce7184605eca98102f9f39a8799c84de

commit 0e105198063d1365a2147d83c85453f21646e333
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Apr 11 11:40:08 2012 +0100

    Suppress pagination on non-tty glance index.
    
    Fixes bug 978610.
    
    Avoid the 'Fetch next page? [Y/n]' prompt interfering with
    redirected output.
    
    The native glance CLI will soon be superceeded by the new
    python-glanceclient, however this patch could still be useful
    to propogate from master to the stable diablo/essex branches.
    
    Change-Id: I16bc6156d7c7e9ed27aabcaa51211060ec24a824

commit 05a6124ea2fb48494d5c0b50a4917ad42b470052
Merge: c34bf10 5182c1e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Apr 12 18:22:14 2012 +0000

    Merge "API v2 controller/serialization separation"

commit c34bf105443a2b064817913b516529773bc3217a
Merge: 38a797d e4d04f5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Apr 12 16:00:05 2012 +0000

    Merge "012_id_to_uuid: Also convert ramdisk + kernel ids"

commit 38a797d1f1392935a40c7afa9b65bb000f1c0575
Merge: 542cca1 93013cc
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Apr 12 15:16:46 2012 +0000

    Merge "Kill glance-api child workers on SIGINT"

commit 542cca173369ea0bf490f45c0a18261f9827ebc3
Merge: fa82103 936b6a6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Apr 12 15:03:14 2012 +0000

    Merge "add postgresql support to test_migrations"

commit 93013cc5d5d3ab1a574e3110f80ff63f2ff76674
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Apr 11 17:44:07 2012 +0100

    Kill glance-api child workers on SIGINT
    
    Fixes bug 978130
    
    Previously glance-api configured to run multiple child
    workers went in a respawn tail-spin when the parent is
    interrupted with crtl+c.
    
    This is now avoided by terminating the process group when
    SIGINT is received, in the same way as SIGTERM is handled.
    
    Change-Id: Ieca90f45e07cc3645a997bba493e0b9a9f08a470

commit fa82103f1cdb9bb26473df3a4ee9ddc077c0541e
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Apr 12 11:27:18 2012 +0100

    Ensure swift auth URL includes trailing slash
    
    Fixes bug 979745
    
    Image objects in swift were previously leaked post-deletion
    due to a silent auth failure caused by the absense of the
    trailing forward slash on the swift connection auth URL.
    
    Change-Id: I9c73a2f75a6466e73801ababdd81db77701ccb20

commit 936b6a6e24b6b0678e54a3cebb2aefd6a0c7cdae
Author: J. Daniel Schmidt <jdsn@suse.de>
Date:   Wed Apr 11 16:11:04 2012 +0200

    add postgresql support to test_migrations
    
    fixes bug 908180
    
    Change-Id: Ic8afdfb3bce4c40c8cb47664dae053ec5e40d03c

commit e4d04f50adc2426f08872b0cececfe48f1d18683
Author: Adam Gandelman <adam.gandelman@canonical.com>
Date:   Fri Apr 6 20:59:39 2012 -0700

    012_id_to_uuid: Also convert ramdisk + kernel ids
    
    The original migration converts numerical IDs to UUIDs.  It updates
    image_members and image_properties that reference image_id, but stops
    short of updating actual properties that reference the new UUIDs,
    specifically kernel_ids and ramdisk_ids.  This breaks launching
    of instances in Nova whos images are associated with a kernel and/or rd.
    
    Also, this fixes an issue when migrating against non-sqlite
    databases where the actual conversion is executed twice.
    
    Fixes bug 975655
    Fixes bug 975651
    
    Update: Only update kernel_ids and ramdisk_ids in image_properties
            when converting to UUIDs
    
    Change-Id: I76ecabc5ee266e2e9765740721e8ec1722cc5a7c

commit f8766a8fb54bd91077ebfcdc546b1513e7604275
Merge: e400677 b8ce9ca
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Apr 11 19:33:37 2012 +0000

    Merge "search for logger in PATH"

commit 5182c1eb21c28a61d0a43a4f4615073470bcd0a5
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Apr 10 21:53:28 2012 -0700

    API v2 controller/serialization separation
    
    * images and access are now separated into deserializers, controllers, and serializers
    * now using schemas to valide incoming requests
    * adding create methods for image access
    * removing ImageNotFound as it was only being generated by fakes, using NotFound until the backend is updated
    
    Change-Id: Ida3c1b117ee0147e818b74518e84ef9101cbdfc3

commit b8ce9caab211004555da3642ab6fb0b40bb85f9e
Author: J. Daniel Schmidt <jdsn@suse.de>
Date:   Wed Apr 11 15:19:55 2012 +0200

    search for logger in PATH
    
    fixes bug 978907
    
    Change-Id: I16a20982cc90f3857e20ab23e2b3f5d1aa2722a0

commit e4006778db0aa75da1958d0d59340e1d553e8c85
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Apr 11 11:20:11 2012 -0400

    Set install_requires in setup.py.
    
    Inline shared version of setup.py from openstack-common. This can
    be removed once projects switch over to use the shared version.
    
    Updates setup.py so that it sets install_requires and dependency_links.
    
    Fixes issues where pip installing glance doesn't properly install
    dependencies.
    
    Fixes LP Bug #975483.
    
    Change-Id: I5a10b311cfde2fda4d4dac341dd866f868b72d0d

commit fc816ee0298de8abf0e0dc08b7c9505fb95c5824
Merge: 9327502 86eb836
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Apr 11 15:17:11 2012 +0000

    Merge "Minor grammar corrections."

commit 9327502f58ce1d7e869d953416dfff134fccc887
Merge: 4255bbf d15ec03
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Apr 11 14:42:01 2012 +0000

    Merge "Skip test depending on sqlite3 if unavailable"

commit 86eb83668511083298e6f5ecfcc80e395277e452
Author: Paul McMillan <paul.mcmillan@nebula.com>
Date:   Tue Apr 10 12:52:56 2012 -0700

    Minor grammar corrections.
    
    Fix its/it's, clarify a few other wordings.
    
    Change-Id: I4459e72e79caf84f4c69378cf20f7c443cf48b97

commit 4255bbfb2ee80abdca9c9858a7076bf4b52180be
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Mar 28 08:33:39 2012 -0700

    Bootstrapping v2 Image API implementation
    
    * Adding barebones of images, access, schema, and root resources
    * Greatly simplify version negotiation middleware
    * Partially implements bp api-2
    
    Change-Id: I3ae72354d7ec7f3766aec164d305c52e7315200d

commit 6999c60d775ba1b2d35d0399f236d46b10d4fe0a
Merge: f0a0b1d 4e35808
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 9 14:54:04 2012 +0000

    Merge "Fix db migration 12"

commit f0a0b1d8132a03fac959da2127853eb89b80b340
Merge: 0411fd2 35ed310
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 9 04:07:43 2012 +0000

    Merge "Reorganize pipelines for multiple api versions"

commit 4e35808f94db8c17a20608e137e2940195821fac
Author: Sam Morrison <sorrison@gmail.com>
Date:   Mon Apr 2 11:22:10 2012 +1000

    Fix db migration 12
    
    * fix bug 976908
    
    Change-Id: I0248f825396d08688238e6d2ef37c8fcb49e8c9d

commit 0411fd29af3cebbc053709b79914286c16ec067b
Author: Josh Kearney <josh@jk0.org>
Date:   Thu Apr 5 17:52:34 2012 -0500

    Remove unused imports.
    
    Change-Id: I9d602ed429caff8ffb00e40f623c473c5425e1cc

commit 35ed3105552cf6c182c76b6f13f719bfe7eb596b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Mar 27 19:18:50 2012 -0700

    Reorganize pipelines for multiple api versions
    
    * Partially implements bp api-2
    
    Change-Id: Ie942c54e0ba294da661de870a95d685a9b8966de

commit d15ec03e5d6daf135dfcd9387122f5ade9b4a44c
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Apr 5 09:29:01 2012 +0100

    Skip test depending on sqlite3 if unavailable
    
    Fixes bug 973626
    
    Add @depends_on_exe to declare a test dependency on the availability
    of an executable.
    
    Skip TestSqlite.test_big_int_mapping if sqlite3 not available on the
    local PATH.
    
    Change-Id: I1b7cf0636f79422f9f31f6a88a493791897a53b4

commit 8e9e0cadaf8ce246861cf661cd4927ba7480484a
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Apr 3 11:22:07 2012 +0100

    Defaulted amazon disk & container formats
    
    Fixes bug 972014
    
    Default unset disk/container format to the corresponding container/disk
    format, where the latter is an amazon format requiring a strict match.
    
    Change-Id: I147df146940a21c368e95901343f36e1e3b7495b

commit f6bdb110c0f3bfa8297b4e75f3708719c04f85e2
Merge: f4d30e7 f28f16a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 2 20:30:37 2012 +0000

    Merge "Compile BigInteger to INTEGER for sqlite"

commit f28f16a750ad134fad2ff663680b149ce77e31c9
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Apr 2 18:55:35 2012 +0100

    Compile BigInteger to INTEGER for sqlite
    
    Fixes bug 966243
    
    Ensure BigInteger does not map to BIGINT for an auto-created
    sqlite registry DB, as this type is not supported by sqlite.
    
    Change-Id: I61f44fbe50ea406d2d593f8f53cab5da3af2222a

commit f4d30e76e68c9934c9035c62fb566802d5519353
Merge: 47af007 fea599e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 2 16:18:44 2012 +0000

    Merge "Updated RST docs on containers, fewer references to OVF format."

commit 47af0073aed4035a8c8796811cc6022161c74457
Merge: 5eddae2 6999834
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 2 16:10:36 2012 +0000

    Merge "Publish v2 in versions responses"

commit fea599efcc0dadc87869aee012c7b1da1f7e26ab
Author: Lorin Hochstein <lorin@nimbisservices.com>
Date:   Sun Apr 1 11:39:53 2012 -0400

    Updated RST docs on containers, fewer references to OVF format.
    
    Updated the RST documentation that discusses container formats, since they
    aren't really used right now.
    
    Changed some examples from ovf to bare, since in most cases, users just upload
    a bare image file.
    
    Change-Id: I844d7827c3de4df6cdddb9b963cc2f236a3e6767

commit 5eddae290dae6efc7c71cdbb35a3b76d37266451
Author: Bernhard M. Wiedemann <bwiedemann@suse.de>
Date:   Fri Mar 30 17:31:53 2012 +0200

    rename the right index
    
    fixes bug 953159
    This did not affect sqlite and mysql, because those can not rename indexes
    and thus used a separate sql file to drop and create the right one.
    
    Change-Id: Iab80a65464a591b732ecce4c00d04df50624e912

commit 257be28b8c77bd1fa3e402d2bd2f5ee67ac4e60e
Merge: 403afc5 0dc093b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 30 09:56:00 2012 +0000

    Merge "Add MySQLPingListener() back"

commit 403afc528658702bb1aff681e43e9f628a31475c
Merge: 1df78db 308642e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 30 01:40:45 2012 +0000

    Merge "Test coverage for update of image ownership"

commit 1df78db43fe27c808aade4e9dc5bc4ed33efb7de
Merge: a17f7de 4955b46
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 30 01:31:48 2012 +0000

    Merge "Run version_control after auto-creating the DB"

commit a17f7deeb5e6ab5eeb05108644d4a96fcf26dde6
Merge: c8a6bf4 da66de0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 29 22:18:34 2012 +0000

    Merge "Allow specifying the current version in 'glance-manage version_control'"

commit c8a6bf45b1cf34a5b61ab1aedb287771426aaf94
Merge: f439f41 8b7a830
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 29 18:02:24 2012 +0000

    Merge "Reject excessively long image names."

commit f439f412855227bdaaf89fef16ba5bbceb954415
Merge: 9fd589c 633f831
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 29 17:53:52 2012 +0000

    Merge "Add support for auth version 2."

commit 8b7a830c047e112b3004f4949a5b857371368508
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Mar 29 17:39:11 2012 +0100

    Reject excessively long image names.
    
    Fixes bug 966240
    
    Image names longer than 255 characters are rejected with 400 BadRequest
    on creation or update.
    
    Change-Id: I460ffee547496829cbf198b50bca564978abe7f3

commit 308642e4a3fafa17b80d0e9227b9c9f92ccd18a5
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Mar 29 11:23:50 2012 +0100

    Test coverage for update of image ownership
    
    Assert the expected behaviour occurs for update of image ownership
    by admin (success) and non-admin users (fails with 403 Forbidden).
    
    Change-Id: I1895f6a30c3c50526955c2fc131c8c3b0817d365

commit 0dc093b98faf8e256ddc48f9dafb4d061662f0e3
Author: Adam Gandelman <adam.gandelman@canonical.com>
Date:   Wed Mar 28 17:08:13 2012 -0700

    Add MySQLPingListener() back
    
    The use of wrap_db() to catch low-level problems in the connection
    pool appears to be incompatible with new versions of sqlalchemy
    (0.7.4/precise).  This re-instates the use of a event listener to
    catch the error of 'mysql has gone away'.  Keeps the wrapping
    logic in place for use before the connection pool has been constructed,
    specifically to allow glance to retry its initial database connection on
    service startup.
    
    Fixes bug 967887
    
    Change-Id: Ia732377d3404104b8acf7fe4ada164ec7ecf705f

commit 9fd589c869dbfefd76af135ed16365ae5bdda954
Merge: 622901d f0a9f97
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 28 08:52:02 2012 +0000

    Merge "Allow yes-like values to be interpreted as bool"

commit 633f83109f0e6185f6960912565194436b2aaf3f
Author: Juerg Haefliger <juerg.haefliger@hp.com>
Date:   Tue Mar 27 08:29:58 2012 +0200

    Add support for auth version 2.
    
    Implements version 2 authentication for the Swift backend.
    Fixes bug 944946.
    
    Change-Id: I614ad03374a2e31a945f12fb9588947022203f1f

commit 4955b4617fa6ad41cc10cc126da4cfc3655f1b9d
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Mar 27 15:03:06 2012 +0100

    Run version_control after auto-creating the DB
    
    Fixes bug #966241
    
    Currently, we auto-create an unversioned DB. This makes it awkward to
    later upgrade it, especially since our 'glance-manage version_control'
    command doesn't support retroactively versiioning it.
    
    This is easily avoided by running version_control() after creating the
    DB.
    
    Change-Id: I935c06fcbcd3611c65d464850ca05445129f905f

commit da66de06763dd872f139491930cf1deb6a723b06
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Mar 27 12:23:47 2012 +0100

    Allow specifying the current version in 'glance-manage version_control'
    
    Fixes bug #966242
    
    The version_control command is a bit useless since you can't actually
    specify what version to  use and it defaults to version=0.
    
    Allow the user to specify a version:
    
      $> glance-manage version_control 9 # set the diablo version
    
    and default to the latest version if none is specified.
    
    Also, allow db_sync to be supplied a version for the case where we're
    upgrading an unversioned DB.
    
    Finally, re-work the argument handling in glance-manage to more easily
    handle optional args.
    
    The tests are extended to test using db_sync for upgrades and to test
    placing an existing database under version control.
    
    Change-Id: I231dc710554198bfd1fdcb82c3c3768963f64bd8

commit 69998343f38b744a6adca77c83a45b3a87d2c7c6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Mar 27 19:18:50 2012 -0700

    Publish v2 in versions responses
    
    * v2 is EXPERIMENTAL for now, as there is no actual implementation
    * Partially implements bp api-2
    
    Change-Id: Ie942c54e0ba294da661de870a95d685a9b8966df

commit 622901d725a379d81ff878035567c2f45f14f0a1
Merge: 9e7dc21 12757d7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 27 22:38:28 2012 +0000

    Merge "Ensure functional db connection in configure_db()"

commit f0a9f97bfaf367497a86d283b10a31bd72f79524
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Mar 27 09:44:49 2012 -0700

    Allow yes-like values to be interpreted as bool
    
    * Accept 'YES', 'yes', 'Y' and 'y'
    * Remove duplicate function bool_from_header_value
    * Fixes bug 965563
    
    Change-Id: I593a50117fd339a8ab281a8daad734770ca9960c

commit 9e7dc210fcf0126b131b7390b6c4c5ee44e302e1
Merge: 9e784cd 6005cb7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 27 15:43:48 2012 +0000

    Merge "Support owner paramater to glance add"

commit 6005cb7e41408912b5ae56d5f23859bcfb217969
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Mar 23 11:32:10 2012 +0000

    Support owner paramater to glance add
    
    Fixes bug 962998
    
    Allow the owner to specified as a first class image attribute
    when creating a new image via the CLI, as it is currently for
    image update.
    
    Also added a simple fakeauth pipeline to allow the user, tenant
    and admin status of API requests to be easily controlled by
    functional tests.
    
    Change-Id: I0f83d55d4a96ad3632fb238ad1758ec3f00ed3fd

commit 9e784cd5312e10d7a2be38224354f3a34f34eab3
Merge: 98405b2 12098c1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 26 16:38:54 2012 +0000

    Merge "Adding versioned namespaces in test dir"

commit 12098c15962ac85df738ef1e5152a77bcd62c6a5
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Mar 25 13:13:43 2012 -0700

    Adding versioned namespaces in test dir
    
    This is being done in preparation for the v2 API.
    
    Change-Id: Ie2fc4df77740b6d1cd629a21942850fd24eb7d60

commit 98405b2a1f88b1ac68746b16d59fd8f5a98f9814
Author: Bhuvan Arumugam <bhuvan@apache.org>
Date:   Wed Mar 21 16:21:39 2012 -0700

    Typo.
    
    * doc/source/configuring.rst
      Fix typo.
    
    * Authors
      Add my name in this file.
    
    Change-Id: I23cea08560a02897c85d031bd0f16f22d7d84db0

commit 12757d70fe6cf0d0fe6e46c5ee09a4f4d3efbd49
Author: Adam Gandelman <adam.gandelman@canonical.com>
Date:   Fri Mar 23 18:23:54 2012 -0700

    Ensure functional db connection in configure_db()
    
    During initial database setup, ensure we can physically connect
    to the database and allow a failed connection to make use of the
    new retry mechanism instead of registry startup failing outright.
    
    Fixes lp bug #959426.
    
    Change-Id: I1c87b19913c4204465e5d2027f2f184f0f358fd0

commit 2d36facf14f4eb2742ba46274e04a73b5231aece
Author: Russell Bryant <rbryant@redhat.com>
Date:   Fri Mar 23 08:55:28 2012 -0400

    Set content_type for messages in Qpid notifier.
    
    Fix bug 963050.
    
    This patch is the Qpid equivalent for a patch that just went in for the
    rabbit/kombu notifier.  Glance encodes the message in json format before
    passing it in to the notifier.  Explicitly set the content type for the
    messages to 'application/json'.
    
    Change-Id: I2f83f51487541b951f3eca0ae4d160a64f5a3db1

commit c1b7b9c5aead3ab7c9b1e9e7670a670c76d9b7e3
Merge: f78b49d 85eb4df
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 22 21:57:26 2012 +0000

    Merge "Fixes lp959670"

commit f78b49df1c74b60bf1bfecd1a58376327f4ea9bf
Merge: 47384f7 801c39a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 22 18:49:32 2012 +0000

    Merge "Avoid leaking secrets into config logging."

commit 801c39ace66c7866a80aea3f26f5848afb416ee8
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Mar 22 16:02:19 2012 +0000

    Avoid leaking secrets into config logging.
    
    Fixes bug 962385
    
    Configuration option values are logged when debug is enabled,
    which is in turn exposed via the glance-logcapture nose plugin
    when tests fail in Jenkins.
    
    Allow options to be declared secret so that their value is
    obfuscated before logging.
    
    Also proposed to openstack-common as:
    
      https://review.openstack.org/5694
    
    Change-Id: Ifdd1696f40c069f83c160afb0bf399da21796b8a

commit 85eb4df48082fd5c8402e17a4e290e7ff7f48dd5
Author: Matt Dietz <matt.dietz@rackspace.com>
Date:   Mon Mar 5 04:23:47 2012 +0000

    Fixes lp959670
    
    Manually sets the content_type in the notification message body. This allows any
    tools dependent on the content_type to function correctly.
    
    Change-Id: I496c005b84df5f4aa2c18ab2b3a4ab136b840111

commit 47384f7b56ebc4479dfb6cca02a5fe642e1f2bb0
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Mar 21 21:10:23 2012 -0400

    Send output of stty test cmd to stderr.
    
    Send the output of the stty test for terminal size to stderr.
    
    Fixes LP Bug #961820.
    
    Change-Id: Ifc46632c9cf8bffb2dec7ef48f17157bf8ae1199

commit 56c7ba73deac0c2fa9ee1887e953428c40782114
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Mar 20 22:07:02 2012 +0000

    Use unique per-test S3 bucket name.
    
    Addresses bug 955527
    
    Avoids a race between the S3 testcase body and the bucket clean-out
    in the S3 test teardown, running near concurrently in the Jenkins
    python26 and python27 builds.
    
    Change-Id: I10f013b02bb74db2cbfc692ed372121d21bca3fb

commit 773b3a89f51af406b22811dccc0ccc7cd2478700
Merge: cb15f06 4150aec
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 21 15:40:10 2012 +0000

    Merge "Specify location when creating s3 bucket."

commit 4150aecfcb1ae2314638301e2db6e808071dc148
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Mar 21 11:54:21 2012 +0000

    Specify location when creating s3 bucket.
    
    Fixes bug 961050
    
    Avoids bucket creation failure when a region-specific S3 endpoint
    (e.g. s3-eu-west-1.amazonaws.com) and also bucket create-on-demand
    are configured.
    
    Change-Id: Ieba9c535ccb961a1f81bd2632b5ac49c23ac7901

commit cb15f0651a6a69a52709caa8aae3713400d45686
Merge: 086e4f3 3f462fb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 21 12:32:56 2012 +0000

    Merge "Fixed db conn recovery issue. Fixes bug 954971."

commit 086e4f32d88a119b0f29cf0cb6630d15cbea6cf1
Author: Thierry Carrez <thierry@openstack.org>
Date:   Tue Mar 20 23:01:09 2012 +0100

    Open Folsom
    
    Bump version to 2012.2 to formally open Folsom development.
    
    Change-Id: I3d86442fdd545842cbc1505cbc478e88747af90d

commit 15d9c8f371dd76bfd20b5718a662409ef3dff8f7
Author: Joe Gordon <jogo@cloudscaling.com>
Date:   Mon Mar 19 18:41:15 2012 -0700

    Update 'bin/glance add' docstring *_format options
    
    fix bug 960627
    
    * 'container_format' from glance/registery/db/api.py CONTAINER_FORMATS
    * 'disk_format' from glance/registery/db/api.py DISK_FORMATS
    container_format
    
    Change-Id: I842a2c6ff96030c863ef916e74fcba8dd952ae6e

commit b0a608c09f0cd83b8ab3cccc8a3851bc3c98733c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Mar 20 09:17:52 2012 -0700

    Ensure all unauthorized reponses return 403
    
    * Clean up authorization vs authentication failures internally
    * Remove ambiguous exception.NotAuthorized in favour of exception.Forbidden for authorization failures
    * Add exception.NotAuthenticated to make authentication failures more clear
    * Fixes bug 956206
    
    Change-Id: I39ce0fcd77d4f06273040a2aa4913a9be911ceab

commit c4426e6352e0022498f80cb857b1f6b987020873
Merge: e0e7dcd a2dc56a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 20 19:29:58 2012 +0000

    Merge "Avoid leaking s3 credentials into logs."

commit e0e7dcd5abcdb7bbdf5959d829e43718beab48f1
Merge: 17397a9 23c222a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 20 18:53:16 2012 +0000

    Merge "Avoid glance-logcapture displaying empty logs."

commit a2dc56aaf2a43cc5e3db2ed901ccbdc5eb56857c
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Mar 20 18:10:57 2012 +0000

    Avoid leaking s3 credentials into logs.
    
    Sanitize the S3 URI of access and secret key before logging.
    
    Change-Id: I12c74ddf8ab01848308c661c0fcbbb4f852a69b6

commit 23c222a70d75ea44959eaa8b3509f7bfdd5e1e22
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Mar 20 17:17:00 2012 +0000

    Avoid glance-logcapture displaying empty logs.
    
    Stop polluting python26 test results with empty glance log
    captures for skipped tests.
    
    Change-Id: I7c6cfe35093c99142fc4f66aa95e1dc6cfad1b03

commit 17397a9ce70fff416acd7c9be52d94a9ed7d2330
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Mar 20 08:08:59 2012 -0700

    Add 'publicize_image' policy
    
    * Allow deployers apply RBAC rules to setting the is_public image attribute to True
    * Add docs for publicize_image and manage_image_cache policies
    * Fixes bug 960261
    
    Change-Id: I100a6c93377617cc0e774b6ee3a69e857a05c260

commit 4a093a45b3846c2416bec373b6107be589fb6afc
Merge: 04937d8 c00ba7d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 20 15:04:12 2012 +0000

    Merge "tox tests with run_tests.sh instead of nosetests"

commit 3f462fbf9a2b9cfe6ac39d87fe5b327ba82e9dac
Author: Unmesh Gurjar <unmesh.gurjar@vertex.co.in>
Date:   Tue Mar 20 12:07:39 2012 +0530

    Fixed db conn recovery issue. Fixes bug 954971.
    
    This implementation wraps the db method calls and retries the method if an attempt failed due to db connectivity issues. Defines 2 new configuration parameters viz sql_max_retries and sql_retry_interval (values default to 10 and 1 respectively).
    This implementation does not have any overhead in the normal case, as opposed to MySQLPingListener implementation, which does a 'select 1' query every time a connection is checkout from the pool.
    
    Change-Id: I24240f22bca445b9ab76a1594631b5eaca393b4d

commit 04937d813c1077afe050ede9fae0388c1ffedfdb
Merge: f5603c8 f6ba144
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 20 00:58:53 2012 +0000

    Merge "Don't use auth url to determine service protocol"

commit c00ba7db26b618e0c1b0ffe4af9865af228a3171
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Mar 19 18:26:34 2012 +0000

    tox tests with run_tests.sh instead of nosetests
    
    In order to ensure the glance-logcapture plugin is loaded dynamically,
    we configure tox to drive tests with the run_tests.sh script intead of
    calling nosetests directly.
    
    This is intended as a temporary measure, pending promotion of the
    glance-logcapture plugin to openstack-nose.
    
    Change-Id: I556c751f4c2d31c1cbacd42d835ab436fb8f6988

commit f6ba144af86f7d41f6b2c6d895b557dd407f11b5
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Fri Mar 16 19:06:00 2012 -0400

    Don't use auth url to determine service protocol
    
    Change the behavior of the command line glance client so that it no
    longer assumes that the glance service always has the same protocol type
    as the authentication service. Determine protocol from the given glance
    service url. If no url is given, allow users to specify the protocol on
    the command line with the --ssl option. If --ssl is not given, default
    to using http.
    
    Change-Id: I949c2ac429c67c3d1752a7b6fc840aa9e45fca8c

commit f5603c87282c2b25be9ba5af304be777e0f53766
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Mar 19 10:41:53 2012 -0700

    Use tenant/user ids rather than names
    
    * Add script that migrates image owners from user/tenant names to ids
    * Fixes bug 950364
    
    Change-Id: I157cb010ed0f8997bd2e1794e9c3b66eba75e36b

commit 265df1ebe85c9d6b133f94bcf84e1b472f080263
Merge: a5056e6 b3be2e4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 17:56:30 2012 +0000

    Merge "Update context middleware with supported headers"

commit a5056e6265216e70af66a9cf695004737927ca81
Merge: e364fc1 094ba9d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 17:14:57 2012 +0000

    Merge "Updating version of Keystone"

commit e364fc1eac533e8c282df14a813be26113ea8a56
Merge: c5cb723 2e94076
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 17:02:16 2012 +0000

    Merge "Disambiguates HTTP 401 and HTTP 403 in Glance. Fixes bug 956513."

commit b3be2e48657fd3f3ab045b250b836c8e4a892418
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Mar 19 08:50:24 2012 -0700

    Update context middleware with supported headers
    
    * This gets us off of deprecated headers, but doesnt get us away from using
      tenant name or user name
    * Fixes bug 957176
    
    Change-Id: I506299c392e30586759d253d4106d39917114e8a

commit c5cb723abb120cf6ea2041dffb1d6ca457e93cdb
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Mar 19 11:42:57 2012 -0400

    Fixes LP #957401 - Remove stray output on stderr
    
    * Removes a stray print statement that was in the
      API functional test
    * Does a NOOP log_message method to the request
      handler used in glance.tests.functional.store_utils
      to prevent output in test runs frmo the HTTP server
    
    Change-Id: I663593d9d666d35d3c2c1655598ef68304726fd4

commit 085f567e097bcfbf6a05ac168e75b9f2d0c19507
Merge: 0e00516 1f0c4ba
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 15:39:53 2012 +0000

    Merge "check connection in Listener. refer to Bug #943031"

commit 0e0051604eb3f8a65cbb7fda447d5266e86dadcf
Merge: a53c5c2 fdb56c8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 15:28:22 2012 +0000

    Merge "Avoid tests leaking empty tmp dirs."

commit a53c5c26782194738c0122dec75aac4c0a0c40bf
Merge: c5ae321 5638fab
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 14:40:44 2012 +0000

    Merge "Do not error when service does not have 'type'."

commit c5ae3213a875cd63427b32f685472965ba464902
Merge: 8cb9275 5bd453b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 13:17:50 2012 +0000

    Merge "Remove keystone.middleware.glance_auth_token"

commit 1f0c4ba67aced9a7ad857cddc0602b243bf38a10
Author: Peng Yong <ppyy@pubyun.com>
Date:   Mon Mar 19 00:23:03 2012 +0800

    check connection in Listener. refer to Bug #943031
    
    Change-Id: I78ec4304a4122c2854799d42737ba3b7bbb76137

commit fdb56c815c5d860236e02a7773f8a8d86b582b72
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Sun Mar 18 17:18:25 2012 +0000

    Avoid tests leaking empty tmp dirs.
    
    Stop the leakage of empty temporary dirs from TestConfigOpts,
    which is regularly causing the Jenkins build to fail.
    
    Change-Id: I0aee6bf55f49adbef948bc56d045639a75455e1a

commit 8cb92751c8686dfe0ac78b4d5156af8d2a9686ee
Merge: 9681f40 2145c24
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Mar 18 17:13:23 2012 +0000

    Merge "nose plugin to capture glance service logs"

commit 5bd453b14e3ea10600241e29ac09d0a35a27460b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Mar 16 15:44:09 2012 -0700

    Remove keystone.middleware.glance_auth_token
    
    * The use of this middleware is no longer necessary
    * Fixes bug 957501
    
    Change-Id: I2536babe6b34aa0cb6aca2b3e768ac85800f93e7

commit 094ba9db22bde4cd06669098313c8aaefc487aa2
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Mar 16 15:27:18 2012 -0700

    Updating version of Keystone
    
    * Remove invalid Keystone + Glance functional tests
    * Fixes bug 957181
    
    Change-Id: Id6c2dfc8b80c3a8913bf054fd97831f7e58c892d

commit 9681f401307a3f625d15b61d61fd421c502bd9e5
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Mar 15 11:17:31 2012 -0700

    Add policy checks for cache manage middleware
    
    * Add checks for 'manage_image_cache' policy
    * Limit 'manage_image_cache' policy to 'admin' role by default
    * Fixes bug 954608
    
    Change-Id: Ie8d79201f39db5a9d8dd0d943056e33dc8498c21

commit 2145c24edbb97d5f53ba25260f5c5a4baa1832a9
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Mar 16 20:52:44 2012 +0000

    nose plugin to capture glance service logs
    
    Adding custom nose plugin to capture entire glance service logs
    for failed tests.
    
    Disabled by default, enable by setting:
    
      $ NOSE_GLANCELOGCAPTURE=true ; ./run_tests.sh
    
    Change-Id: I8a3bd9529ec6adb8b98804e0ddc266a7ea8eca08

commit e1fae1d4bb7b86a800cb4be4418a4144599f2a70
Merge: 29b035b eff04c5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 16 20:35:25 2012 +0000

    Merge "Add admin_role option"

commit 29b035bcc53a514028e60076692e31a0772b8d5c
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Mar 15 21:04:56 2012 +0000

    Add new UnexpectedStatus exception.
    
    Raise UnexpectedStatus as opposed to a generic Exception when
    an unexpected HTTP status is seen by the glance client.
    
    Further fix for bug 952618
    
    Change-Id: I222c7553e1a687aec0f6dde8215e4400ea6be2cb

commit 5638fabe4b5f63bdcb68b8e8d237584b259589b8
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Thu Mar 15 12:52:58 2012 -0400

    Do not error when service does not have 'type'.
    
    Although 'type' should be present, it would seem a NoServiceEndpoint
    exception would be more appropriate in the case of a misconfigured
    authentication service.
    
    Fixes bug 956178
    
    (Patch Set 2) Updated to add logging
    
    Change-Id: Ic8f552d8921107664cdd472f8476a9bd04322131

commit 2e94076ca43ee3f31b1fc7f46b4c137d36bcd7db
Author: Gabriel Hurley <gabriel@strikeawe.com>
Date:   Thu Mar 15 16:09:08 2012 -0700

    Disambiguates HTTP 401 and HTTP 403 in Glance. Fixes bug 956513.
    
    Change-Id: I82865293f60eabaf3bc40b40dc9c8612b12a6d1b

commit eff04c5612e613580e89349858d3e9ae4f5cc64c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Mar 15 16:36:43 2012 -0700

    Add admin_role option
    
    * Allow a deployer to define the role that should give an authenticated
      user admin privileges. Defaults to 'admin'
    * Fixes bug 956547
    
    Change-Id: I018b9c438a12c527833ed8e2e6c377a93fde9130

commit 9f2de6c1e4f0e78c35f8bbbb530b46b793acbde9
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Mar 16 10:53:00 2012 -0700

    Remove references to admin_token
    
    * Fixes bug 957193
    
    Change-Id: Id9e03dd195f4d859a983703b1ed1db0700ffd29d

commit 8a533f9cfeda10bb759b0aa68757e4cea2ce4b43
Merge: d759821 d453def
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 16 00:16:03 2012 +0000

    Merge "Remove glance-cache-queue-image"

commit d453def814dbfd41be8060712124b910b9484dae
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Mar 15 14:25:52 2012 -0700

    Remove glance-cache-queue-image
    
    * bin/glance-cache-queue-image duplicates functionality provided by
      bin/ glance-cache-manage, and it is currently broken. Let's just remove it.
    
    Change-Id: Ib18be2116055154047df6ca9b4c335323c8b2dde

commit d759821b287398f1422af862abaf133ed23e0736
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Mar 15 14:14:14 2012 -0700

    Remove dependency on apiv1app from cachemanage
    
    * Cache management middleware shouldn't depend on being deployed around
      the glance api v1 app. This breaks that dependency in favor of an
      isolated mapper in the cache management middleware.
    * Fixes bug 954596
    
    Change-Id: I3f4f56eac285163d1ce9c7dc1cef5178b16eefb6

commit e2e88d8aad7b9f7f2700bbb160058131f7e6d4ef
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Mar 15 12:55:39 2012 -0700

    Return 403 when policy engine denies action
    
    * Fixes bug 956206
    
    Change-Id: I0447a1a86fed2456c912395a0ab7d6e0aba03f66

commit 3ae0ef012b6a571be14b747dd8f8e9694f145aa0
Merge: 0a19061 6619298
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 15 18:50:16 2012 +0000

    Merge "Ensure copy and original image IDs differ."

commit 0a19061141de1fb70c5e3dc1a5e47f11f5b068fe
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Mar 15 13:28:20 2012 -0400

    Add error checking to get_terminal_size.
    
    Adds returncode error checking to get_terminal_size so that
    it doesn't spew errors to console when running glance commands
    in a shell without a TTY.
    
    Fixes LP Bug #956202.
    
    Change-Id: I42e155d168da1f4f25c0dea9ad9768686bd654ce

commit 223ed0658a1ac45b575166ece6a2c16661e2e493
Merge: 77f0f32 c593722
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 15 17:18:33 2012 +0000

    Merge "Well-formed exception types for 413 & 503."

commit 77f0f325f2abdca400f5414cecac39ec75b66171
Merge: 3a8103e 182b71e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 15 16:47:40 2012 +0000

    Merge "Include babel.cfg and glance.pot in tarballs"

commit c5937221b50614b36d46e77827ab5ad1fd815bd6
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Mar 14 11:24:59 2012 +0000

    Well-formed exception types for 413 & 503.
    
    Fixes bug 952618
    
    Raise well-formed exception types when 413 or 503
    status returned to client.
    
    Change-Id: I26118ff7ec7ba968b303435287d0eb3ff4bd443f

commit 6619298fc17b0cf8b9c0bd0be53162139c802eee
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Mar 15 13:44:56 2012 +0000

    Ensure copy and original image IDs differ.
    
    Ensure the copy_from tests have unmarshalled a distinct ID for the
    copied image, in order to eliminate the possibility that the subsequent
    deletion of the original image impacts on the existence of the copy.
    
    Eliminates one bizarre and unlikely explanation for the test failures
    reported in bug 955527.
    
    Change-Id: If8d0720f6d08cdc57a3e01431bd3460d95a868a9

commit 182b71e9f2e2c502bd42b5c6132b93d9ce2a4f8e
Author: Thierry Carrez <thierry@openstack.org>
Date:   Thu Mar 15 14:05:01 2012 +0100

    Include babel.cfg and glance.pot in tarballs
    
    Ship babel.cfg and glance/locale/glance.pot in generated tarballs.
    Fixes bug 955977.
    
    Change-Id: Ib1b00fae9c3cc752183f38ea88554a06dd706d38

commit 3a8103e68cc27c9fc881b6fe6cd5d96d873aeb88
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Mar 13 15:33:33 2012 -0700

    Updating authentication docs
    
    * Update docs to reflect correct attribute names for configs and env vars
    * Remove old env var conversion tool
    * Fixes bug 952405
    
    Change-Id: I45b2519fe97e76987a9e0acda14b303ba75afd02

commit 50e5d3544d1cadbfb1f682d3de8a37dfbc5867dc
Merge: 2eeb000 65b1b84
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 15 00:52:34 2012 +0000

    Merge "Change CLIAuth arg names"

commit 2eeb0001c4b387cb69309a205ac720f5cd41cfa4
Merge: 45b453b ee2d212
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 22:25:01 2012 +0000

    Merge "General cleanup"

commit 45b453b27695d3c10b417b02b19777fee236c2da
Merge: 66c3d31 b6b28d1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 22:09:13 2012 +0000

    Merge "Add note about cache config options"

commit 66c3d312199c0ee40cc4f926076a0c173bb02c50
Merge: 6be4e3f ce33576
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 22:01:01 2012 +0000

    Merge "Update cli docs"

commit 6be4e3fdcda230fee6b0cee7b35e41ebc90584d6
Merge: 5f0d40b 691deeb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 21:52:48 2012 +0000

    Merge "Remove 'community' doc page"

commit 5f0d40b3afd19be5f5d4ef1ae3aaaf71f2c06e00
Merge: f1bc67c d9f4cbf
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 21:41:59 2012 +0000

    Merge "General docs cleanup"

commit ee2d212f81a20d31ea6a815453911d01e39a1c84
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Mar 14 13:29:01 2012 -0700

    General cleanup
    
    * Reorder imports
    * Remove unused code
    * Add missing copyright header in glance.api.v1.members
    * Pass in 'pool' to glance.store.scrubber.Scrubber._cleanup
    * Fix NameError in glance.api.v1.images.Controller: request -> req
    * Fix except block in glance.notifier to properly catch multiple exceptions
    
    Change-Id: I30d895b5ff1246e8d637720ef2f4aacab9cf7ede

commit d9f4cbfa7543b6deda8e0ad6aaa968ed423094ea
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Mar 13 15:49:57 2012 -0700

    General docs cleanup
    
    Change-Id: If60b8f4bca81add9353fe1e0c6e26eb3d4230d53

commit f1bc67c24bb3165acaf87b7bbdc48b23a8559534
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Mar 13 15:46:05 2012 -0700

    Remove todolist from docs
    
    * Fixes bug 954543
    
    Change-Id: Ib6ca8bbed18f1967108825b8b219a7d46336d11d

commit b4844500a6a722892b91539877b9ca4c1a1f6ed0
Merge: c52d73e 6e2f39d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 18:20:18 2012 +0000

    Merge "Removing registry spec from docs"

commit c52d73e304aaca0f937f58add7bec2b24998c3ee
Merge: 55eb458 51a06aa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 17:49:11 2012 +0000

    Merge "Retry sendfile on EAGAIN or EBUSY"

commit b6b28d1ed45ea725f5d23c9a249a8ba32024cb4c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Mar 14 10:07:34 2012 -0700

    Add note about cache config options
    
    The image cache configuration needs to be duplicated between glance-api.conf
    and glance-cache.conf. This adds a note in the documentation to help clarify
    that fact.
    
    Change-Id: I125a56fecadc89d127570581c3ddb5d3faa3475c

commit 65b1b84decefdd0b07895d5cf38d2f26ac407972
Author: Dean Troyer <dtroyer@gmail.com>
Date:   Tue Mar 13 20:44:03 2012 -0500

    Change CLIAuth arg names
    
    Change the argument names used for common Keystone authentication per the
    updated http://wiki.openstack.org/CLIAuth:
    
    --auth_url -> --os_auth_url
    --password -> --os_password
    --username -> --os_username
    --tenant_id -> os_tenant_id
    --tenant_name -> os_tenant_name
    --auth_strategy -> --os_auth_strategy
    --region -> os_region_name
    --auth_token -> os_auth_token (--auth_token is depricated but remains for compatability)
    
    Fixes bug 954530
    
    Change-Id: Ib7ff3325e5885852aeb3fcca9c5ad665b611e020

commit 51a06aab1c153ff30d71b0ce393cc015063ba7da
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Mar 14 12:31:03 2012 +0000

    Retry sendfile on EAGAIN or EBUSY
    
    Addresses bug 954430
    
    The sendfile call is redriven after a blocking select()
    to ensure the socket is now writeable.
    
    Change-Id: I68242c76593405f78e30324c2913cead63463c77

commit 55eb4580b2f1a9ddaec5193b3d2c6bd6c4bfbaa7
Author: Derek Higgins <derekh@redhat.com>
Date:   Wed Mar 14 14:53:21 2012 +0000

    Add module name to ClientException
    
    Fixes Bug #955127
    
    Change-Id: I12c1d02de2ce06b840f4a726bc528d39d39d4979

commit ce33576e832fa933bfb381b5806ea2c49026bc3c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Mar 13 18:57:41 2012 -0700

    Update cli docs
    
    * Add current examples
    * Remove happiness
    * Remove extraneous example flags
    
    Change-Id: Ia41d2b4763bba58ef60f140b24a0c925a8d68fca

commit 691deeb4a31d2dcd2156afae9c2c2076825470ce
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Mar 13 18:21:58 2012 -0700

    Remove 'community' doc page
    
    This page is duplicated several times over on the wiki, let's get rid of
    it rather than worry about keeping it up to date.
    
    Change-Id: I09a9c093b708526d6c73eb270b05131bfb715af0

commit 6e2f39d69b6a4c936982a5c941b1ffa0b57e94a7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Mar 13 16:01:08 2012 -0700

    Removing registry spec from docs
    
    * Rewords how we refer to to our 'reference' implementation of the registry
      API. glance-registry is an implementation detail of the main glance API, not
      an example of a community-driven API spec
    * Remove duplicate 'gettingstarted' information
    * Fixes bug 954554
    
    Change-Id: I889f61a399c398897f2146b756b2c3c310847718

commit 1615a1fc57da85caae147064c45967d90a9b73f6
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Mar 13 15:21:40 2012 -0400

    Fixes LP#934492 - Allow Null Name
    
    * Modify bin/glance to allow nullable name property,
      in accordance with API spec
    
    This changeset also adds a fix for Swift functional
    tests where HTTPS locations weren't being properly
    constructed.
    
    Change-Id: Ibad2d3ab150ee347449b4e9b3b9e941ce7a0fc6f

commit 101e3ef9f9c7cc1ccb5f9dfb8827be809b77ef99
Merge: 0ccd9f4 7125728
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 12 18:52:06 2012 +0000

    Merge "Refresh SSL cfg after parsing service catalog entry"

commit 7125728d51adf0ded308f622913660f2d2ce2697
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Mar 12 17:58:15 2012 +0000

    Refresh SSL cfg after parsing service catalog entry
    
    Fixes bug 949838
    
    Ensure connection kwargs are re-evaluated after the keystone service
    catalog publicURL for glance has been parsed for potential SSL usage.
    
    Otherwise the attempt to create a HTTPS connection will fail with
    missing __init__() args if the client is using auth-free SSL
    (i.e. is neither validating the server's cert, not authenticating
    itself to the server).
    
    Change-Id: I31c2083616297a64541cc6648d420e724baaf9f4

commit 0ccd9f46fe5946249132e8dccd713af37cd12fa7
Merge: 4d41027 95efaf0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Mar 10 00:33:04 2012 +0000

    Merge "Fix typo in tox.ini."

commit 95efaf0a67951bcbcabf008315ad3e6bda4fd1bd
Author: James E. Blair <jeblair@hp.com>
Date:   Fri Mar 9 23:55:42 2012 +0000

    Fix typo in tox.ini.
    
    My last commit message was right, the code was wrong.  It's tox:jenkins.
    Commands are invalid in tox: sections, so we'll get pip freeze run
    another way.
    
    Change-Id: Iafa21ff47cf5e3d8f57676be93e2fa6a0d0ab9b4

commit 4d41027d219429b44b1036c85b3fb4a09e530121
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Mar 9 02:12:35 2012 -0500

    Glance cache updates to support Keystone Essex.
    
    Glance caching updates to support keystone service tenants:
    
     * Update glance-cache-manage so that it supports the same style OS_
      environment variables and CLI options for auth that bin/glance does.
    
     * Updates registry/client so that it supports Keystone KSL style
      service tenants. As services no longer use admin_tokens this is
      a requirement to be able to use caching w/ KSL.
    
    Fixes LP Bug #949486.
    
    Change-Id: I8d0e56a9ec0d20ef56ed2ce8b860d987ae159e01

commit b43b676e581efd0773a7f83715dcf2e834bd9c85
Author: Ken Pepple <ken.pepple@gmail.com>
Date:   Mon Feb 27 18:59:31 2012 -0800

    updates man page for glance-scrubber.
    this time with extra pep8 scrubbing powers.
    Fixes bug 908803
    
    Change-Id: I105cc3157fe839cc35ef5e1fc1a5f032b04d1c9d

commit c13dbdcf5a1a1aa72e7a4d34ab5f3f1fadf04858
Merge: 7041f19 4ef665a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 9 16:06:58 2012 +0000

    Merge "Glance skip prompting if stdin isn't a tty"

commit 7041f19696e75c38c27e8dacaa7bbc8d56144af8
Merge: d6ba3b2 80cd81f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 9 15:58:47 2012 +0000

    Merge "Replaced use of webob.Request.str_param"

commit d6ba3b23fffe85892a45c7785d644eb970bebc2d
Merge: 30dc759 630c9a5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 9 15:50:13 2012 +0000

    Merge "Fix deprecated warnings."

commit 30dc759f02a5d3332e6e93f4d5b06ccc5fe4b574
Merge: 21ab1a5 2773170
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 9 15:42:02 2012 +0000

    Merge "Update paste file to use service tenant."

commit 21ab1a57ce9e3fb167b68bb421d65557ffbdd5d9
Merge: cb70ff9 9e640d0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 9 05:59:14 2012 +0000

    Merge "Update bin/glance to allow for specifying image id"

commit cb70ff9f5103b3e42c83cef6f95db99cf2bdfd36
Author: James E. Blair <jeblair@hp.com>
Date:   Fri Mar 9 02:06:05 2012 +0000

    Update tox.ini for jenkins.
    
    The tox documentation is wrong, it looks for [tox:jenkins] instead
    of [tox:hudson].  Also, run "pip freeze" before running tests from
    within the virtualenv so we have a record of all versions used
    in each test run in Jenkins.
    
    Change-Id: Id0f34247f4545268f21dacb860d2e0fe72677a11

commit 80cd81f714ab6da60130f450f5c96ad279649871
Author: Maru Newby <mnewby@internap.com>
Date:   Wed Mar 7 21:55:56 2012 -0800

    Replaced use of webob.Request.str_param
    
     * Changed webob.Request.str_param => webob.Request.param to
       ensure compatibility with WebOb >= 1.2.
     * Fixes bug 949677
    
    Change-Id: I59c5af17fdef0754862ef6a0fda99978036112d9

commit 2773170d737a2acbe2b132d8568c0b1507d428e5
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Mar 7 18:17:34 2012 -0500

    Update paste file to use service tenant.
    
    Update the keystone section of api-paste.ini with example settings
    for the keystone service tenant.
    
    Remove the admin_token example lines.
    
    Change-Id: I6169ae727a07e75879b5e2e5c4099c9688c726c6

commit 9e640d01498c03e97ba808fbec9477f3e12f8595
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Fri Mar 2 16:49:38 2012 -0500

    Update bin/glance to allow for specifying image id
    
    Fixes bug 945173
    
    Change-Id: Ic33db6ab846064b142cdb8e79a4fb7a0cb52b0c4

commit 630c9a594a97b3516476e3e04d516f08ec725f1f
Author: Chuck Short <chuck.short@canonical.com>
Date:   Wed Mar 7 10:44:31 2012 -0500

    Fix deprecated warnings.
    
    Fixes deprecated warnings when using sqlalchemy 0.7.4.
    Fixes bug 925609.
    
    Change-Id: I5ad5042dbc9785829694553f2657df3eb6e3ef20
    Signed-off-by: Chuck Short <chuck.short@canonical.com>

commit 3b229c394521e5b1b81e4629c6ff9c09e3b866c9
Merge: 91f88a0 bbf46b4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 6 04:42:43 2012 +0000

    Merge "Remove trailing whitespaces in regular file"

commit 91f88a01202a4e7e93d7729544390743c4db2885
Merge: c6a626e d8f0c38
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 6 04:34:53 2012 +0000

    Merge "Added first step of babel-based translations."

commit bbf46b45cd4c0beafed4dd83008db310fb79ec2e
Author: Hengqing Hu <hudayou@hotmail.com>
Date:   Sat Mar 3 12:09:51 2012 +0800

    Remove trailing whitespaces in regular file
    
    Change-Id: I0d015501492902ddf7fda20e0381fc21fbcaeb91

commit c6a626e24321ba47ea075132deae3f948faa2e51
Author: Jesse Andrews <anotherjesse@gmail.com>
Date:   Fri Mar 2 16:03:13 2012 -0800

    add git commit date / sha1 to sphinx html docs
    
    Change-Id: I9f92a459fbf83bb42ff2fa31c2fb9c09372c8138

commit 4ef665a7cc1af14814f9cade3768b64447a6542f
Author: Ken Thomas <krt@yahoo-inc.com>
Date:   Thu Mar 1 13:09:23 2012 -0800

    Glance skip prompting if stdin isn't a tty
    
    Don't have glance issue prompts if stdin isn't a tty.  Fixes bug 884116.
    
    In glance's user_confirm routine, check if stdin is a tty and if
    not, just return the default value. If it is a tty, then continue
    with the raw_input call to issue the prompt and get the response.
    Latest patch includes recommended change to check for isatty attr before
    using it.
    
    Added myself to Authors.
    
    Change-Id: I8134668b8382b44618c86972190f3d7d98f55e52

commit 8d46288e9cfb10745adfb06a510ed93433a7a9c5
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Tue Feb 21 15:07:51 2012 +0000

    Allow region selection when using V2 keystone
    
    Fix for bug 936798. Allow a client to select which
    region endpoint they want from the service catalogue.
    
    The region can be set via the environment variable
    OS_REGION_NAME or via the '-R/--region' command line
    option.
    
    If a single image endpoint is returned from keystone,
    the client will use that even if no region was specified
    (the default). Where multiple endpoints exist a region
    must be provided.
    
    Change-Id: I6797f8ddf88d5875caf194913082c3fe24c86585

commit 1229d8df69b5823c1291e2862e1ecfaa79b4135a
Merge: e653a00 95dc869
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 29 17:44:52 2012 +0000

    Merge "Fix update of queued image with location set."

commit e653a0032d21729ebd4ec4edd0045cad0f0ab430
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Feb 27 22:57:12 2012 +0000

    Disallow file:// sources on location or copy-from.
    
    Fixes bug #942118
    
    For security reasons, file:// URIs local to the glance services
    should not be supported as external sources (as specified via the
    x-image-meta-location or x-glance-api-copy-from headers).
    
    Change-Id: I43763cbefba95153434c7dcdcce3765ed04e05fe

commit 63f3af7c46296792f3ef06cbec7c1965d7087b6a
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Feb 28 11:08:21 2012 +0000

    Progress bar causes intermittent test failures
    
    I'm seeing intermittent failures on:
    
      glance.tests.functional.test_misc:TestMiscellaneous
        test_api_treats_size_as_a_normal_property
    
    with a 'glance show' command failing with:
    
      STDERR: /bin/sh: line 1: $'\b\b\b\b\b\b[100%]': command not found
    
    apparently due to leakage of the progress bar output associated
    with the previously executed 'glance add' command.
    
    For the same reason, I see failures on:
    
      glance.tests.functional.test_bin_glance:TestBinGlance
        test_show_image_format
    
    Work-around by enabling silent-upload so that test are reliably green.
    
    Change-Id: Ib23e0a1f042d8e7950bddc485696a69338cf8620

commit d8f0c382ef1445ba8394c78ff7b50832451b9c8b
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Feb 20 11:46:46 2012 -0800

    Added first step of babel-based translations.
    
    Change-Id: I34e3f49e96cf6e68306770781e8114e56a6b3556

commit b563deb7970f7611e10007a959851d538dfcbb0a
Merge: 45d0d3d 2090314
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Feb 27 23:31:10 2012 +0000

    Merge "Add checksum to an external image during add."

commit 45d0d3d0b96ff5238cb09cde40c12a5ea643b169
Merge: 0613daa 7db2075
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Feb 27 22:48:15 2012 +0000

    Merge "Complete fix for modification of unowned image"

commit 7db20754a0c9d853ff0a5e283dd7d483ab0c2755
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Feb 27 12:59:52 2012 -0800

    Complete fix for modification of unowned image
    
    * Fully fixes bug 923941
    
    Change-Id: Ia155a4d76e75498629996aaddfc8fe0b41ce6760

commit 95dc869e3c36daaaee8da81f5d1701c938d1f8af
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Feb 24 09:50:17 2012 +0000

    Fix update of queued image with location set.
    
    Fixes lp 939484
    
    When a queued image is updated with the x-image-meta-location header,
    the image size is retrieved from the external store if available and
    the metadata set appropriately.
    
    More importantly, the image is also activated at this point, otherwise
    it remains perpetually queued and cannot be retrieved via GET.
    
    Change-Id: Iae8b06479dcaa5e47785f646b1ebec202fe75371

commit 0613daa931d897fd3a91feef5e9747cdf60ebfe2
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Feb 23 13:25:12 2012 +0000

    Support copy-from for queued images.
    
    Fixes lp 939481
    
    An image may be added referencing an external source via either
    the x-image-meta-location or x-glance-api-copy-from headers.
    
    Similarly, a queued image may be associated with an external source
    via the x-image-meta-location header.
    
    However previously a queued image could not have image content copied
    from an external source via the x-glance-api-copy-from header.
    
    This patch addresses this asymmetry in respect of POST versus PUT.
    
    Change-Id: I81848ba3a5d41e7e5b69daec491e83307023f020

commit 20903144e307784d382b6dac5591cddec19fcaa4
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Wed Feb 22 17:02:07 2012 -0500

    Add checksum to an external image during add.
    
    If 'location=' is set during 'glance add' look for the checksum
    parameter and use that for the checksum. Currently it looks like there
    is no other way to update the checksum and it is being entered as NULL.
    
    (Patch Set 2) Added tests
    
    Change-Id: I1521d1c4a12e43d38c3e13c0735526f4f7789952

commit d26f66bce505cf6f5080e7b3aeaef914da110fe1
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sat Feb 25 17:24:39 2012 -0800

    Align to jenkins tox patterns.
    
    Split requires in to pip-requires and test-requires.
    Updated install_venv to know about test-requires.
    
    Change-Id: I739f42c8676c40e2203cc0bc4aa9763ffac999a9

commit 9593687d3d1959c8342b60e9b620879899628c2f
Author: Thierry Carrez <thierry@openstack.org>
Date:   Fri Feb 24 16:00:39 2012 +0100

    Fix MANIFEST.in to include missing files
    
    Fix MANIFEST.in to include missing files in generated tarballs.
    Fixes bug 940364.
    
    Change-Id: I3f07dba902e5e038d2224d0acdbd14f2b1078467

commit f6e91994f92a9ba6fe5ea6cb61a7b1f15d3b392f
Author: Derek Higgins <derekh@redhat.com>
Date:   Thu Feb 23 15:46:01 2012 +0000

    Fix exception name
    
    Fixes bug 939616
    
    DataInvalid thrown by get_terminal_size is not a defined exception name
    Also added details to Authors
    
    Change-Id: Ia321d62d15b074aca69a5d0e5646966d7e297023

commit 44461b41f42d8eb23cc780c395b3c0fc5f6813c9
Merge: d998278 c83bce1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 22 19:02:02 2012 +0000

    Merge "Support new image copied from external storage."

commit d998278162c90374229bd482eed0b0f00221662f
Merge: 76fec14 c0bce06
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 22 18:51:52 2012 +0000

    Merge "Correct kernel/ramdisk example in docs"

commit 76fec1476ba6f9c0e7d44a5859e2fd5f1ba68ef1
Merge: 8efa62d d5539b2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 22 18:35:06 2012 +0000

    Merge "blueprint progressbar-upload-image"

commit c0bce060b89e50c135e1e0f888daf9c166e57e2c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Feb 22 02:30:15 2012 -0800

    Correct kernel/ramdisk example in docs
    
    * Fixes bug 937260
    
    Change-Id: I43ea7d5c1434cc9e1454f6915e2b76586383bb89

commit 8efa62d85b738a568b58c264e822414ccea8346e
Author: Justin Santa Barbara <justin@fathomdb.com>
Date:   Wed Feb 15 09:42:09 2012 -0800

    Create sorting/pagination helper function
    
    Change-Id: I5e9f3ba8298e50345ab4983db96a3f0ce90cab80

commit c83bce1ce69bf704fbbe6ce944094c14e79996d2
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Feb 9 14:23:32 2012 +0000

    Support new image copied from external storage.
    
    Implements bp retrieve-image-from
    
    Added support for a new header:
    
      x-glance-api-copy-from: URI
    
    where URI is a HTTP, S3, or Swift location that's accessible to the
    glance API service. Where present, the image content is copied from
    the external store to the backend store currently configured for
    the glance API service.
    
    Impedence between the representation returned by Store.get() and
    the implicit requirements of Store.add() required careful iterator/
    filelike wrapping.
    
    Also rationalized the S3 and Swift functional test setup logic and
    added a new decorator-based mechanism to allow a functional testcase
    require multiple backend stores to be available and configured.
    
    Change-Id: If783a09c273832b8926aabc60b7eba8b3ab956d6

commit d5539b2ade1477c0e183c874be5818ad173307a8
Author: Reynolds Chin <benzwt@gmail.com>
Date:   Thu Feb 2 14:26:43 2012 +0800

    blueprint progressbar-upload-image
    
    The goal of this blueprint is to make cli more informative.
    Adds optional animated progressbar upload to the Glance CLI tool.
    This animation is spawned by a separated thread and the following information will be shown:
    
    1. running progressbar
    2. percentage of data has been transferred
    3. bandwidth
    4. ETA for transfer completion
    5. status such as uploading or stalled
    
    The animation can be disabled by adding the flag --silent-upload to the command "glance add"
    
    Change-Id: If954268c6d7b52c975f6c358134be4f587541aa8

commit f380c9e5745ff802ea8ec4fac8346c6e4d6b5261
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Feb 22 15:28:20 2012 +0000

    Avoid TestClient error on missing '__mro__' attr
    
    The TestClient unit test fails with:
    
       AttributeError: class Zeros has no attribute '__mro__'
    
    on Python 2.6 running on Ubuntu Lucid.
    
    Resolve by defining Zeros as a new-style class.
    
    Change-Id: I97f8eaac31d34a68613e9b30a177191a9de281b0

commit 5f3137133054284ced41d3e6702e1dad4591c9c7
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Feb 20 21:49:17 2012 +0000

    disk/container_format required on image activate
    
    Fixes lp 937216
    
    The initial change[1] to require the container and disk formats be
    explicitly set was enforced on the initial image POST, regardless
    of whether the image content accompanied that request (either in
    as the entity-body, or externally specified via x-image-meta-location).
    
    This turned out to be overly restrictive, as these formats may not
    be known to the caller until the image content is supplied via a
    subsequent PUT on the new image.
    
    Now we only enforce the strict requirement for these formats to be
    non-empty when the image is activated (as opposed to the initial
    enqueue).
    
    [1] https://github.com/openstack/glance/commit/62c913c3
    
    Change-Id: I89e068f35fd7da427b547b18cdea4ae84ab3ec87

commit 62c913c3ad4db1a03461f51304fac885196df8ca
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Feb 17 13:46:49 2012 +0000

    Require container & disk formats on image create
    
    Fixes lp 933702
    
    For images created via the glance CLI, the container and disk formats
    were previously defaulted if not explicitly set. However if created via
    the python or REST APIs, these attributes were not defaulted if unset.
    
    There is no real sensible default for these formats, so now an image
    create fails with 400 "Bad Request" if the format metadata are missing.
    
    Also we ensure unset image metadata are not reported in x-image-meta-*
    headers in order to disambiguate None and empty string values.
    
    Change-Id: I8189383f5f9adf42a8cdac7f8dc7e9327baf46da

commit f8f9f17112671872262fcde9671ce392cf1af35c
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Feb 15 16:04:07 2012 +0000

    Support non-UTC timestamps in changes-since filter
    
    Fixes glance aspect of lp 837464
    
    Prevously only Zulu time was supported in the changes-since filter,
    i.e. timestamps formatted as %Y-%m-%dT%H:%M:%SZ
    
    We now support arbitrary timezones, with the offset from UTC expressed
    via the ISO 8601 ±hh:mm notation.
    
    Microsecond accurracy is also optionally supported in timestamps.
    
    Notes:
    
    - glance.common.utils.parse_isotime(), isotime(), & normalize_time()
      are prime candidates for promotion to openstack-common, as these
      methods will be useful in nova also
    
    - this patch introduces a new dependency on python-iso8601, which
      has already been packaged for Fedora, EPEL and Ubuntu/Debian.
    
    Change-Id: I4c80522bcaa14feef93f5f9fbcaaca6a74b6a5f4

commit 45f9e05572303b5bd8ea8ee3f179bb2269bb091c
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Feb 16 20:24:39 2012 +0000

    Return 503 if insufficient permission on filestore
    
    Fixes lp 919257
    
    Return 503 "Service Unavailable" status from POST /images request
    where there's insufficient permission to write image content to
    the backend filestore.
    
    Change-Id: I0c4e8bb1e70d6542852a86903a4a2a200dd23f01

commit 3b8ff189a16eb6f5f8c36ac49bc1f97cf645e8c4
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Feb 17 11:51:42 2012 -0500

    Adds README.rst to the tarball.
    
    Fixes LP Bug #934320.
    
    Change-Id: Ib16ad8d5d1c418c2b3fd94b6bd427d53d30577ad

commit 1d2356c8642f61bfa05226110a18cafcef55c6f0
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Feb 16 18:26:38 2012 +0000

    Ensure StorageFull only raised on space starvation
    
    Additional fix for lp 919255
    
    Limit StorageFull to cases of genuine disk space starvation (ENOSPC or
    EFBIG), in order to avoid confusion with 413 "Request entity too large"
    status being returned from POST /images for issues unrelated to space.
    
    Change-Id: Ib5e68e5d988d0f541803ffb3f37ddf88ac24e9dc

commit 941e160dc24096fd79a7f8dc4b6e2cd11c7c1e1a
Merge: b2eb008 3af64e5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 16 15:09:33 2012 +0000

    Merge "Require auth URL if keystone strategy is enabled."

commit 3af64e56d23d3adddc1ded2e2c00e995d30444a8
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Feb 14 11:08:01 2012 +0000

    Require auth URL if keystone strategy is enabled.
    
    Fixes bug 925681
    
    The glance CLI now fails fast if the keystone authentication strategy
    is enabled, but the --auth_url option or OS_AUTH_URL environment variable
    is not set.
    
    Change-Id: I73bfd4f19a3d882ad53d3d2c914ce11e48ce291d

commit b2eb008a7958d931c99af1b2b7f6c9369aeffc66
Merge: b90575d 59ca8b0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 15 20:25:55 2012 +0000

    Merge "Function uses 'msg' not 'message'"

commit b90575d8e9b8001b1dc7ae5cfb4cc77e74151b69
Author: Adam Gandelman <adam.gandelman@canonical.com>
Date:   Tue Feb 14 17:01:59 2012 -0800

    003_add_disk_format.py: Avoid deadlock in upgrade
    
    The connection used to query existing images needs to be closed
    earlier to avoid deadlocking later calls thru sqlalchemy.
    
    Fixes bug 932466
    
    Update: Update my email in Authors
    
    Update: Revert Authors email to original, add git commit email
            to .mailamp.
    
    Change-Id: Ic248fdfe3933437928f0b393d8cde993b96bf2cb

commit 59ca8b0b44bbb2276d7e5903bfe9d14a6a26d901
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Wed Feb 15 18:58:45 2012 +0000

    Function uses 'msg' not 'message'
    
    Fixes bug 932986
    
    Change-Id: Iafc70145b7bc9d71fef19db0f303a65468b934cb

commit bd4d6328617641642c1152a3defe7330fb8fb86c
Merge: 7990cb4 0f0fe2b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 15 13:44:47 2012 +0000

    Merge "New -k/--insecure command line option"

commit 7990cb4e0c0528f6d4694fa0faf81597ea56d6ba
Author: Justin Santa Barbara <justin@fathomdb.com>
Date:   Mon Feb 13 13:27:44 2012 -0800

    Fix paging ties
    
    Bug #930543
    Bug #930544
    
    Change-Id: Ifad1ea61f3ecbf58af9bc7f0bc635e69246f6ece

commit 0be0aa80db486e6538d8d83cb49b5a19039a9a3c
Merge: 40b5ed7 f0832fd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Feb 14 22:19:09 2012 +0000

    Merge "Add a generic tox build environment."

commit 40b5ed733efd005e4a9ebbe0a0f7e6f844f9d043
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Feb 14 17:22:17 2012 +0000

    Ensure sane chunk size when pysendfile unavailable.
    
    Fixes lp 932183
    
    Previously, small and erratically-sized HTTP chunks were sent
    when pysendfile was unsupported on a particulat platform.
    
    Now, non-terminal chunks will be of size 64k as long data is
    available.
    
    Change-Id: Ic26e4d701ad22a21f06d7142f6ce91583acb5816

commit 0f0fe2ba1b772e6964241c0631683b306fff23c0
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Feb 9 18:10:42 2012 +0000

    New -k/--insecure command line option
    
    Fix for bug 929591.
    
    Change glance to require server certificate validation
    by default when using https. The standard system
    CA file will be used if available (and an alternative was not
    provided).
    
    The --insecure option can be used by clients to skip server
    certificate validation if appropriate.
    
    * This change will impact Nova clients accessing glance over https.
      If the standard CA file is not suitable they will need to provide
      a CA file or else create an 'insecure' glance client.
    * Accesses to a https registry server must now perform server
      certificate validation.
    * If the package which provides the standard
      system CA file is installed then that file will be used by default.
      It probably makes sense for the glance package to have a
      dependency on whichever package provides the default CA bundle.
      (In Ubuntu this is 'ca-certificates')
    
    Change-Id: I7c83361ba0881559ec77d4baf10dfeb5b8e32185

commit f0832fdd886d4173908b7d4da574f47952d28a33
Author: Monty Taylor <mordred@inaugust.com>
Date:   Fri Feb 10 23:38:27 2012 -0800

    Add a generic tox build environment.
    
    Allow for the running of arbitrary commands inside of a venv
    so that we don't have to make tox envs for every blessed thing we want to
    do.
    
    Change-Id: Ia6f9e3cbeaef27ffe1e60b424c2a2d384e6bad0b

commit 56efd271ac08b4c0e0ce273b9cbc0c5952af05fa
Author: Hengqing Hu <hudayou@hotmail.com>
Date:   Sat Feb 11 12:43:25 2012 +0800

    Fix pep8 error
    
    Fixes bug #930536
    
    Change-Id: I17afbd17e5df3ac44e59b8b8d194d48da508e5d2

commit ce2a79c0347308349617c7ac4d93fa14f08c14b7
Merge: c77f4dd 2fa1ed0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Feb 10 22:52:05 2012 +0000

    Merge "Implement blueprint add-qpid-support."

commit c77f4dded47708e14a145ccc42f40a5cd061217b
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Fri Feb 10 16:35:35 2012 -0500

    Update Authors file
    
    Change-Id: I0a49cfb901c2b4733b27b663c2116182f651fdef

commit 2fa1ed0da18cd92c29afcebaa34b15ecbe58bfd2
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed Feb 8 12:24:07 2012 -0500

    Implement blueprint add-qpid-support.
    
    This patch implements a new notification strategy that sends
    notifications to a message queue via Qpid.
    
    Change-Id: Ie2640139dcf735e428af63e9e87b3667a2b22eb5

commit c125a3744f1dd25a6facd1c6daf8fa4fde9b784a
Merge: 0da9d82 e7b32c1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Feb 10 19:51:55 2012 +0000

    Merge "Include glance/tests/etc"

commit 0da9d829d2aadbe87017d6d013ba8ca44cc46858
Merge: 481929b 9c2c97f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Feb 10 19:45:49 2012 +0000

    Merge "Force auth_strategy=keystone if --auth_url or OS_AUTH_URL is set"

commit e7b32c13f83f6018ae470722657a08a3c7af5af8
Author: Chuck Short <chuck.short@canonical.com>
Date:   Thu Feb 9 13:41:51 2012 -0500

    Include glance/tests/etc
    
    Fixes bug 930344
    
    Change-Id: I277185a8b62d982dad597a3ac878608ce5e0de5c
    Signed-off-by: Chuck Short <chuck.short@canonical.com>

commit 481929b5c5dbca90762fe339e9e3224f7628ce2a
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Thu Feb 9 12:59:49 2012 -0500

    Don't fail response if caching failed
    
    Fixes bug 929762
    
    Change-Id: I90761b69cc556b14fd4bdb931541804244b653e8

commit 9c2c97f3602204890ed3c911e5bde94eea3357d0
Author: Dean Troyer <dtroyer@gmail.com>
Date:   Wed Feb 8 15:21:04 2012 -0600

    Force auth_strategy=keystone if --auth_url or OS_AUTH_URL is set
    
    Change-Id: I316f501ffbad1f182a7c1f6a18641c608c0f2ea8

commit e4db87ce4c2757b734b5fc62a82e1076c3367af0
Author: Andrew Hutchings <andrew@linuxjedi.co.uk>
Date:   Mon Feb 6 18:35:49 2012 +0000

    Make Glance work with SQLAlchemy 0.7
    
    Fix execption caught during tests
    Fix test failure wiping out engine in use
    
    Fixes bug 892754
    
    Change-Id: I9de6f077af656730c95bc715c2b765b0c49c7d3c

commit 24c14d5a1c2cadc69aca8d66f00dade3f2c266bd
Merge: 7696ae5 8043962
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 8 18:39:07 2012 +0000

    Merge "Respawn glance services on unexpected death."

commit 7696ae5f2402314b56d8e03dcbad97d9b2b529af
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Feb 7 08:56:50 2012 +0000

    Use sendfile() for zero-copy of uploaded images.
    
    Implements bp support-sendfile
    
    Avoid needless client-side copying through userspace of uploaded
    image file content, using pysendfile to wrap the sendfile() system
    call instead of reading the file one chunk at a time.
    
    The existing iterator pattern is maintained for consistency and
    to allow send progress to be followed by wrapping the iteration.
    
    The performance gain only applies to the client-->glance API service
    leg, so whether the overall speed-up is noticeable depends on the
    image store in use. For example, it would be imperceptible with a
    storage backend showing relatively high PUT latency, such as S3,
    as the blocking Store.add() call would dominate.
    
    At the other extreme, uploading large images via the loopback to
    file-based store is about 60% faster. Detailed performance figures
    for more realistic scenarios to follow when hardware is available
    for benchmarking.
    
    Change-Id: Ia8c74e76d3d6c63e9a9b38ab455a4e6edb47fba9

commit ce35911f6f69f7d6af292cb3474d8e6b083c33af
Merge: eea25b4 8df4d1d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 8 09:58:31 2012 +0000

    Merge "Blueprint cli-auth: common cli args"

commit 804396204e23ebb6c29c396396027bc3b09b0eab
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Jan 30 11:13:28 2012 +0000

    Respawn glance services on unexpected death.
    
    Fixes bug 923894
    
    Add new '--respawn' option to cause glance services launched via
    glance-control to be monitored for unexpected death and resuscitated
    as necessary.
    
    This option will cause glance-control itself to remain running.
    
    Deliberately stopped services are not respawned, neither are rapidly
    bouncing services (where process death occurred within one second
    of the last launch).
    
    Change-Id: I1a9a99cce9b6ad43274836e39ebe4f29c19455af

commit 8df4d1df107b76cfa5fd60f7913291fd9c192190
Author: Dean Troyer <dtroyer@gmail.com>
Date:   Mon Feb 6 14:40:59 2012 -0600

    Blueprint cli-auth: common cli args
    
    Add OS_USERNAME, OS_PASSWORD, OS_TENANT_NAME and OS_TOKEN support
    to glance client binary.
    
    Fixes lp923936
    
    Change-Id: I9339b169eadbe198e6ed183cf1aeb42b99f3a7d9

commit eea25b41499baa62ce73967865c20d2856503bd2
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Feb 6 13:15:38 2012 +0000

    Prep tox config for jenkins builds.
    
    Change-Id: Id81588d3a2aabc0931d5bf12f078d8f770305e69

commit c6c458e6b6cd39b94f89c112c477cee9da8f7f45
Author: Thierry Carrez <thierry@openstack.org>
Date:   Fri Feb 3 16:54:30 2012 +0100

    Get rid of DeprecationWarning during db migration
    
    Use proper syntax to set column type, which avoids printing
    silly warnings and future deprecation issues.
    Fixes bug 854163.
    
    Change-Id: Iab1c3e7a52d739a445cf52eb9a67f61a69075026

commit 300d4031a94b85539a30bde726131231008c80a6
Merge: bad4666 76b894b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 2 23:48:51 2012 +0000

    Merge "Don't force client to supply SSL cert/key"

commit bad46661a2b65f67eae597afdc97b50af5fc5717
Merge: f7434b6 132c54f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 2 23:17:51 2012 +0000

    Merge "Add --capture-output option to glance-control."

commit 132c54f1739cbb201578a875b780f78c4d6b77a2
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Jan 26 14:49:20 2012 +0000

    Add --capture-output option to glance-control.
    
    Fixes bug 923894
    
    Previously all stdout/err from glance services was discarded
    if launched via glance-control.
    
    The --capture-output option allows such output to be instead
    captured in the syslog.
    
    Non-termination output should be flushed to ensure timely
    arrival in /var/log/messages.
    
    Change-Id: I5c11ad4b9f7f321a3d1cab71e34c2a6707ef1b5e

commit f7434b61323032d34e7a035aa3dace31deab6df4
Merge: b5a434b 81ce7b4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 2 22:12:21 2012 +0000

    Merge "Handle access restriction to public unowned image"

commit b5a434bcca3dc33c1fe23ab0b0c528941a2f90cf
Merge: 3092156 fdb7b21
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 2 21:58:18 2012 +0000

    Merge "Fixes LP 922723"

commit 3092156ae53c3d80644e7c7afca0abbfc5d0e377
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Thu Feb 2 12:10:18 2012 -0800

    Add filter validation to glance API
    
    Fixes lp: #919250
    
    Change-Id: Ib47d9d107950f14404734b55486996dc0b095f0e

commit fdb7b21235669599b0d1f3d8b509a220cb7f16c5
Author: Wayne A. Walls <wayne.walls@rackspace.com>
Date:   Thu Feb 2 20:56:50 2012 +0000

    Fixes LP 922723
    
    Versions pycrypto in pip-requires
    
    Change-Id: Id053d8ed0bd4b8c5ae45c2d4727708ed790dbefe

commit 7c2e32511aafa7b0e50b0c9ba6fd942caec93860
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Feb 2 19:25:42 2012 +0000

    Typofix is_publi -> is_public
    
    Change-Id: I58d6de4387c7915acf1fc139ef9a0ad81bf64a91

commit dfe823a02c0a1f384ff0ad26fa3ea82b201ab6ac
Merge: c77776a 593e8c2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 2 18:42:00 2012 +0000

    Merge "Add --await-child option to glance-control."

commit 593e8c2fa745de2926c957ebacbefd55fa40071d
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Feb 2 15:37:13 2012 +0000

    Add --await-child option to glance-control.
    
    Fixes bug 817032
    
    Previously an immediate non-zero exit status from service
    launch was not reflected in the exit status returned from
    glance-control.
    
    Now the parent glance-control process configurably waits for
    the child to exit ungracefully and if this occurs, it inherits
    the non-zero status code from the child.
    
    Change-Id: Ibbe92a5bf40d095951a572d78ae07026d8a9313d

commit c77776a9c9e6883b34f11204044a60564b506183
Author: Pavan Kumar Sunkara <pavan.sss1991@gmail.com>
Date:   Sun Jan 29 11:38:56 2012 +0530

    Fix Bug #919255
    
    Glance Add Image API returns 400 response for disk full scenario
    
    Change-Id: Ia275cfd423bb823583998167516878ced370547b
    Signed-off-by: Pavan Kumar Sunkara <pavan.sss1991@gmail.com>

commit 16b682d273dce16dc79bdb7f2532e0465cb61719
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Wed Feb 1 11:24:15 2012 -0500

    Cap boto version at 2.1.1
    
    boto 2.2.x is not building and should be capped so it does not
    break the build process.
    
    Change-Id: I6a49e44458fb691fb3b60afc6871cf74031d3f40

commit 28f0dd425f151695420a3dee54362576c9d5ea3d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jan 30 20:39:20 2012 -0800

    Simplify pep8 output to one line per violation
    
    Change-Id: Ia1df3d1fbdd21b1b8884848d27c3a2a567b51943

commit 81ce7b44be653599ab8917712f44f94f052ebb94
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jan 30 13:23:35 2012 -0800

    Handle access restriction to public unowned image
    
    Fixes bug 923941. Now we can return a 403 rather than a 404
    if we reject a modification for a public image.
    
    Change-Id: I71915f662c8e9e3ebf4326f47d0cd3bd08c03ac1

commit 28f2cae1612b1dbd854fa45859ac46c995b0d5d1
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Mon Jan 30 14:09:09 2012 +0000

    Check service catalogue type rather than name
    
    Fix for bug 904850. After authenticating with Keystone select
    the 'type' field from the returned ServiceCatalog json rather
    than the 'name'.
    
    Change-Id: I4e3d92a1ff58fa2be1669789fe371f61c53f652a

commit 2ce78382004a567defe98d8ccd196277a7cb66ed
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Sat Jan 28 16:39:06 2012 +0000

    Restore inadvertantly dropped lines.
    
    Fixes bug 852850
    
    Restore two lines inadvertantly dropped when rebasing after a
    merge conflict at patch set 3 in the following review:
    
      https://review.openstack.org/#change,3297,patchset=3
    
    Also improve the test case that should have caught this.
    
    Change-Id: I982b70ee157c19e7aeb7502b7173d8b0fc8c82a1

commit 4f9327ac9a98480512d623ca00cee50a087be09e
Merge: 08dbc2a c713c22
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 26 21:33:22 2012 +0000

    Merge "Few small cleanups to align with Nova"

commit 08dbc2a7cbe24c113d77b9634feadb5ab62adee9
Author: Russell Bryant <rbryant@redhat.com>
Date:   Thu Jan 26 12:26:06 2012 -0500

    Include the LICENSE file in the tarball.
    
    Change-Id: Ib51c9e8b02797d9daa956fe02a217b9e748b0c06

commit aaa18a02a5351365804a95349176666cf3602889
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed Jan 25 12:46:46 2012 -0500

    Change xattr usage to be more broadly compatible.
    
    This patch updates the xattr image cache driver to use methods that are
    more broadly compatible.  The issue here is that there is more than one
    xattr Python module out there.  Specifically, there are:
    
        https://github.com/xattr/xattr
        http://git.k1024.org/pyxattr.git/
    
    The previous glance code expected an interface available in the first
    version.  This patch changes the code to use an interface that is common
    to both of these.
    
    This makes all of the image cache tests working against the current pyxattr
    package in Fedora.
    
    Change-Id: I1fca66cfe914364c921408b676a06387d1de5c2a

commit 8ec2f81e597ba299ba181f1dea7ceb6a0757fa55
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed Jan 25 11:31:34 2012 -0500

    Fix mixed usage of 's' and 'self'.
    
    The first version of this patch fixed one misuse of 'self' when 's' was
    expected.  There were some other uses of 'self' that I missed.  This
    patch just changes these functions to use 'self' everywhere.
    
    Change-Id: I66b74f00e5416e3e67eb60cf6c505f70134e6ddb

commit 76b894b47a9dcd44098fd59eb22eb2fee599a7f9
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Jan 25 11:34:34 2012 +0000

    Don't force client to supply SSL cert/key
    
    Fix for bug 921494. Clients should be able to
    connect using SSL without specifying a client-side
    key or cert.
    
    Change-Id: Iad65d1c77543184cfe7faa8aa07926a87cb14b43

commit c713c22a25872009281201d989f05a304bb1903c
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Jan 24 21:50:55 2012 -0500

    Few small cleanups to align with Nova
    
    * Adds HACKING.rst -- with some modifications that do not apply
      to Glance
    * Renames README to README.rst
    * Remove old cruft with rfc.sh and BZR stuff
    
    Change-Id: I1ff640fcee71e4d9bafa28ddd83c779ac4d702d2

commit 180ae8964d0ab1bcde419aff06e2d299dbe242c9
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Jan 24 15:51:48 2012 -0500

    Adds documentation for policy files.
    
    Implements interim-glance-authz-service
    
    Change-Id: Ifefa4174aa45a29fd58ab40c74b5eaf6fecb4f83

commit 971e4b6a53ccf7ddd23fee0175531792beddcc8b
Merge: 79cc925 7094e89
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 24 20:42:36 2012 +0000

    Merge "Client.add_image() accepts image data as iterable."

commit 79cc9254d949709f72b786d750a37cb1b9359eb6
Merge: 7df7586 6cac288
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 24 20:32:15 2012 +0000

    Merge "More flexible specification of auth credentials."

commit 7094e8926c623a59e5d5fa2b5a9cca13738a79fe
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Jan 23 13:22:53 2012 +0000

    Client.add_image() accepts image data as iterable.
    
    Fixes bug 773562
    
    Allow the image data to be passed to glance.Client.add_add_image()
    via an iterator, in addition to the previously accepted images types
    (file-like or string).
    
    Change-Id: I1f90b9875f5610d478a5ed123fbf431501f1c2b6

commit 6cac288a87d0eba448394ac39981bf9f63238125
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Jan 20 20:27:02 2012 +0000

    More flexible specification of auth credentials.
    
    Fixes bug 853933
    
    Add new --username|--password|--tenant|--auth_url|--auth_strategy
    switches to bin/glance to allow the username, password, tenant name,
    and authentication URL & strategy be specified on the command line.
    
    Avoid needlessly falling back to keystone v2 auth after a successful:
    
      GET /v1.0/tokens
    
    returns with the X-Image-Management-Url or X-Glance header set,
    as opposed to X-Server-Management-Url.
    
    Extend the keystone functional test support to ensure that the URL
    returned by keystone via the X-*-Url header contains the appropriate
    dynamically allocated port for the glance API service.
    
    Ensure the underlying $OS_* environment variables do not leak into the
    TestPrivateImagesCli functional tests, also explicitly exercise both
    noauth and keystone strategies.
    
    Change-Id: Iee8bf3745d65a9c57a9da803d5cf9ae5f343a159

commit 7df7586976f5256525d74ae322992e8073df1aa3
Merge: f66ff4f 3b2ef8e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 24 17:38:57 2012 +0000

    Merge "glance-control need not locate a server's config file (lp#919520)"

commit f66ff4f2e1f835c66e6800e57115b47ce308f47d
Merge: 53c8ad4 601fb31
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 24 17:27:37 2012 +0000

    Merge "glance-api fails fast if default store unsupported"

commit 53c8ad4b9d12eaef529c7ce6e1967693ed690778
Merge: 0db2cfa 946278d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jan 23 21:49:24 2012 +0000

    Merge "Bug #909574: Glance does not sanity-check given image size on upload"

commit 601fb310ef7802a059a375b978e82eb31efafe68
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Jan 23 09:55:06 2012 +0000

    glance-api fails fast if default store unsupported
    
    Fixes bug 852850
    
    Ensure the glance API server will not start if the class supporting
    the configured default store cannot be imported.
    
    Change-Id: I80a97dbc0af4737dbbc1bf0491e7cef222ec3454

commit 946278d1c709db2a5f850619ccd2d6ecf62e8f5a
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Wed Dec 28 21:25:25 2011 -0800

    Bug #909574: Glance does not sanity-check given image size on upload
    
    Don't allow an image size greater than 1 PiB.  Also, add an exception
    block catching and reraising HTTPError inside _upload.  This way, we don't
    fall into the Exception block below and log the full backtrace when the
    error has been diagnosed already.
    
    Adds unit test to verify 400 returned with supplied overlimit image size
    
    Change-Id: Ie745dffaf2fe43fdb7643c27d087e36d76b7c0e4

commit 3b2ef8e29e21ce1c00c33de8f3521b3c7cf8d241
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Jan 23 08:18:57 2012 +0000

    glance-control need not locate a server's config file (lp#919520)
    
    Before converting to cfg, glance-control would use find_config_file() to
    locate the servers config file if the user did not explicitly specify
    it.
    
    With the change over to cfg, we screwed that code up. However, we should
    instead just allow the server to locate its own config file rather than
    trying to guess what it will use.
    
    Change-Id: I422839ae4c684ff2de3a0a96dd54c6b74ce6df97

commit 0db2cfadf5da692aa6f02abd20018f4aa3d49d2a
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Jan 10 21:14:26 2012 -0500

    Bug#911599 - Location field wiped on update
    
    Adds unit test to verify behaviour required:
    
    * Location field may only be **edited** if the image is
      in a queued state, which indicates that the user issued
      a POST /images with NO location field and NO image data
    * Otherwise, Location field may not be edited and may not
      be read via the API server either.
    
    Change-Id: I42aba7bc8e2da6ac81b18b564ba096208406f893

commit 8d83124522e12c5aa3cfdc6d8616b63c402b9073
Merge: 71b0bb8 eb2ab3a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jan 20 20:08:33 2012 +0000

    Merge "Return 400 if registry returns 400."

commit 71b0bb8d12080589ca7b31bbfd01e675da9640a5
Merge: 0870747 eeb4d1e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jan 20 19:58:25 2012 +0000

    Merge "Add policy checking for basic image operations"

commit eb2ab3a40a7ddc6038a254c27870f92cfd012d24
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jan 20 13:31:47 2012 -0600

    Return 400 if registry returns 400.
    
    Fixes bug 919244.  The registry would return 400 for invalid input,
    which resulted in an exception.Invalid being thrown in the registry
    client.  There was no exception handler for this exception, so it
    got bubbled up and turned into a 500.  This should fix the problem
    by adding the missing exception handlers.
    
    Change-Id: I75ecfec1c0b0b4b3df1a8c9ace83e75d19527c93

commit 087074729cfc1b94dac0b771439d6a66009a649a
Merge: 2e8e628 41b981c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jan 20 19:27:50 2012 +0000

    Merge "Swallow exception on unsupported image deletion."

commit 2e8e628d7a320fdec45370a1e024373ee7164f2f
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Jan 20 11:17:01 2012 -0500

    Set url's on AuthBadRequest exceptions.
    
    Fixes LP Bug #919269.
    
    Change-Id: Ibc9c20e90e06ec4c235d07003fc01bcdf77c976f

commit eeb4d1ee29bf1c7a10755fc312229acfcebc9cde
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jan 17 15:43:13 2012 -0800

    Add policy checking for basic image operations
    
    Partially implements bp interim-glance-authz-service.
    This checks basic image operations: get_images, get_image,
    add_image, modify_image, delete_image. It looks for a
    policy json file next to our config files.
    
    Change-Id: I07f29c11934c68d38a6bdadd39f9dc841b61648a

commit 41b981c98d947ada3e8c83af8392e222ce1b00cd
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Jan 19 22:07:25 2012 +0000

    Swallow exception on unsupported image deletion.
    
    Fixes LP #912897
    
    When the remote store does not support deletion of images (e.g. HTTP)
    the StoreDeleteNotSupported exception is now swallowed and logged as
    opposed to it being propagated back to the glance CLI.
    
    Also after a failed delete, we avoid falling through to the delayed
    delete logic.
    
    Change-Id: I6cc529f029750fc66a4d32e2076f29198b3d2093

commit b712949ec531055661357fc2fc79c169f2223999
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Jan 19 11:15:36 2012 -0800

    Ensure we only send a single content-type header
    
    Fixes bug 917438
    
    Change-Id: Ic71bd139f77ed7f291eca258c123deb30c7177ce

commit e893b248a2f541eb8409c552b17b43c67430d117
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Tue Dec 20 18:03:55 2011 +0000

    Multi-process Glance API server support.
    
    Implements blueprint multi-process-server. Allows several Glance API
    worker processes to be started, which can increase performance on machines
    with more than one CPU.
    
    Change-Id: I1cbb48945fd23afd71de3a30b80836b590c023a1

commit 1698eb10b597dc702977b7686edf9aed06e55702
Merge: ee38a16 097ced8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 19 02:01:30 2012 +0000

    Merge "Make paste.ini file location configurable."

commit ee38a16a5eed53bde7234ec368bd8d1854ac684a
Merge: b1abca2 3956c54
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 19 01:43:48 2012 +0000

    Merge "Set size metadata correctly for remote images."

commit b1abca214d17b24619825c040fa70867f57b31be
Merge: bbfa3ed 5835b30
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 19 01:26:28 2012 +0000

    Merge "Avoid the need for users to manually edit PasteDeploy config in order to switch pipelines."

commit bbfa3edc06e7d16055af3dd500566425a262d28c
Merge: b4624ec 14593a3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 19 00:55:22 2012 +0000

    Merge "Split out paste deployment config from the core glance *.conf files into corresponding *-paste.ini files."

commit 3956c546fb725a13784f6e1441a74be1680abd9d
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Jan 17 23:21:15 2012 +0000

    Set size metadata correctly for remote images.
    
    Previously the size metadata was always zero'd for remote images,
    which was misleading and led to issues like:
    
      Bug 900959
    
    We now query the remote store (HTTP, S3 or Swift) with the
    equivalent of a HTTP HEAD in order to determine the correct
    image size without downloading.
    
    Where the size is available, the metadata is set appropriately.
    Otherwise it falls back to zero as before.
    
    Change-Id: I3093eba1b2fa023348558c45febee39e68e1a08f

commit 097ced8cb255604d07e13b5238f2423b719654b7
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Jan 13 15:28:46 2012 +0000

    Make paste.ini file location configurable.
    
    Add an optional paste_deploy.config_file variable to identify
    a non-default location for the paste.ini file (the default for
    /path/to/component.conf is /path/to/component-paste.ini).
    
    Change-Id: Ibd7aefe95706fb50e4e353c14eb6dab0f948331f

commit 5835b30cc241e1dbad4ca2920ea05f19e3097cbe
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Jan 17 11:39:06 2012 +0000

    Avoid the need for users to manually edit PasteDeploy config in order to switch pipelines.
    
    Define multiple pipelines in glace-api.conf to reflect the
    various supported deployment flavors (minimal, with caching,
    with cache management, with keystone-based auth etc.).
    
    Add an optional paste_deploy.flavor config variable to allow the
    user select the appropriate pipeline without having to edit the
    paste config (i.e. uncommenting lines as before). For example
    in glance-api.conf, a setting of:
    
      [paste_deploy]
      flavor = keystone+caching
    
    identifies the following pipeline in glace-api-paste.ini:
    
      [pipeline:glance-api-keystone+caching]
      pipeline = versionnegotiation authtoken auth-context cache apiv1app
    
    the advantage being that the user need not be concerned with
    the precise sequence of filters required to realize the QoS
    they desire.
    
    Modify the functional tests that patch configuration (i.e. the
    keystone and caching tests) to use the new deployment_flavor
    mechanism.
    
    Extend the TestConfigOpts to support option groups.
    
    Change-Id: Ide843ada11bce115b7dc650440397853c6409b03

commit 14593a3b9691bdb6920c7fefe98d1f817495abb9
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Jan 13 00:31:00 2012 +0000

    Split out paste deployment config from the core glance
    *.conf files into corresponding *-paste.ini files.
    
    Fixes LP #815208
    
    Change-Id: I5acb8488cc25bb3c7dd735c8c2b0fe62fcea8e5e

commit b4624ec24240c1c15d4daed07afd19eb21474be4
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Jan 10 17:49:42 2012 -0500

    Fixes LP Bug#913608 - tests should be isolated
    
    This reworks the stubs.FAKE_FILESYSTEM_ROOTDIR used in unit
    tests by making each test case create and destroy its own little
    sandbox in /tmp/test.*/images. Adds a base IsolatedUnitTest that
    tests needing to have an isolated filesystem_store_datadir and
    configuration can inherit from.
    
    Change-Id: I396f5127c6a687da8dcef3368e7ed0912efc9b3a

commit 6fd005465e70f3ac1c1581b10b4e01d041f50f23
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Jan 16 14:55:42 2012 +0000

    Set correct Content-Length on cached remote images
    
    Override the image metadata size attribute with the actual
    cached image file size when setting the Content-Length header
    on the response to a GET of a cache remote image.
    
    This avoids an non-initial GET on a remote image failing when
    caching is enabled, as described in this bug:
    
      Bug 900959
    
    Change-Id: I7656bc971d982cce78ce1ed4cf7ea509f8bbdfa8

commit 195e6670c47352993c920a0dd490aa7e1fb8566e
Author: Chris Behrens <cbehrens@codestud.com>
Date:   Thu Jan 12 23:42:06 2012 -0800

    Implement retries in notify_kombu
    
    Fixes bug 915817
    
    Copies code from nova and includes improvements pending for nova as well
    
    Change-Id: Ib596f4bacc5f58c4507f4111cdfac273029018bc

commit b0181065d0fec61ee2ef2be0b39850d79deaafb6
Merge: 2be1efe b46401a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 12 21:40:21 2012 +0000

    Merge "Return correct href if bind_host is 0.0.0.0."

commit b46401a17b68dee4568e7ff01a5534a62eb9285f
Author: Pete Zaitcev <zaitcev@kotori.zaitcev.us>
Date:   Wed Jan 11 21:24:22 2012 -0700

    Return correct href if bind_host is 0.0.0.0.
    
    The existing code returns incorrect href= in the root document (aka
    "version" document) if the default configuration is used. If a remote
    system accesses Glance API, the netspec of href= contains 0.0.0.0,
    which cannot be used for further remote accesses. This happens because
    attempts to use local configuration or the bind address to reconstruct
    URLs are futile.
    
    The correct way resolve this problem is to use the Host: header
    of the HTTP request. As a bonus, it works with IPv6, should we ever
    support it.
    
    Change-Id: I661351b679c695bd6ab310104a3246dd3069f9c6
    Bug: 915621

commit 2be1efe281eb18ca753f79c6a2381c02466472a5
Author: Major Hayden <major@mhtx.net>
Date:   Thu Jan 12 14:42:14 2012 -0600

    Remove assertDictEqual for python 2.6 compatibility.
    
    Fixes bug 915604. Removes assertDictEqual from glance tests and replaces it with assertEqual.
    
    Change-Id: I1439516331b4e92051ccfce6abebe17a0516a52e

commit c2c805b7078cd6eff86293f67ef8d2d40e642f09
Merge: 76f24c3 e2f9d15
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 12 15:03:29 2012 +0000

    Merge "Add notifications for sending an image"

commit 76f24c3b68ce4a8f9f521f757f157d95afa013a0
Merge: 1590dad 8780360
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 11 16:21:57 2012 +0000

    Merge "LP Bug#912800 - Delete image remain in cache"

commit 1590dadcb495f97a3a2d86c13b5d0f847e6d5964
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Jan 11 07:25:36 2012 +0000

    Add optional revision field to version number
    
    Add a revision field to the version number to account for releases from
    the stable branch, e.g. 2011.3.1.
    
    See http://wiki.openstack.org/StableBranchRelease
    
    Change-Id: Ibe3b69fcc7e7d09f17c8f6e68a0e7bb17afbfdce

commit 878036019af964e982e495183f099daa5a38fdfc
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Jan 10 20:48:04 2012 -0500

    LP Bug#912800 - Delete image remain in cache
    
    Adds a functional test case that verifies that when an
    image is deleted and the cache middleware is place, that
    the image is properly removed from the image cache.
    
    Change-Id: I20fc4461bd5f53528b264536b248f596aff510af

commit e2f9d15e4cb99caa5ab146bc367def81b2fdf6fb
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Fri Jan 6 18:26:38 2012 +0000

    Add notifications for sending an image
    
    An image.send notification is to be sent to the notifier every time an image is
    transmitted from glance. This can be used to track things such as bandwidth
    usage.
    
    Addresses bug 914440
    
    Change-Id: If8b6504c4250fa6444d17d611de43d9704ca9aae

commit 7f4b1c58992cfe6343d4e2b8429a3757c9a1a945
Merge: 883bdd8 f8ae3c4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 10 16:19:45 2012 +0000

    Merge "Split notification strategies out into modules."

commit 883bdd8564e42b63b0d279c5c655c4cd4a1fcf6d
Merge: e27b0e1 d466cec
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 10 02:51:01 2012 +0000

    Merge "Fixes incorrect URI scheme for s3 backend"

commit e27b0e1c2775765be29bf38776ff1e7cd259e0f0
Merge: e4bd841 9633697
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 10 02:41:04 2012 +0000

    Merge "Add comments for swift options in glance-api.conf."

commit e4bd841b6db79187b7ee8923ad05d1d636b25926
Merge: 85a9160 4844917
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jan 9 22:26:08 2012 +0000

    Merge "Bug #909533: Swift uploads through Glance using ridiculously small chunks"

commit 85a91606b12c5d8ddb42d4a1e7942f6bd0e75276
Merge: 1cff825 422c1e4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jan 9 22:21:58 2012 +0000

    Merge "Remove doc/Makefile."

commit 48449171a73e9b470b3caa136f20d56cd1757bdc
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Wed Dec 28 21:13:55 2011 -0800

    Bug #909533: Swift uploads through Glance using ridiculously small chunks
    
    Remove the use of a temporary disk buffer when streaming to Swift.  This
    was added on the assumption that it was not possible to stream chunks to
    Swift direct from webob.Request.body_file.  That's not true -- a simple
    file-like object wrapping body_file does the job perfectly.
    
    This removes the need for swift_store_object_buffer_dir in the config file.
    It is also significantly cheaper, since there is one copy fewer.
    
    Fix the parsing of the swift_store_large_object_size and
    swift_store_large_object_chunk_size options.  These are
    specified in MB in the config file, but needs to be in bytes internally,
    because they are compared against the image_size parameter given to add().
    
    Update the unit tests to match.  This includes an additional check that
    put_object is called the correct number of times.  The unit tests missed the
    latter problem problem because there was no check that a small object is only
    uploaded in one chunk, and despite the comment to the contrary there was no
    check that the right number of chunks were written in the large-object case
    either.  Added these in all places where store.add is called.
    
    Change-Id: Ieb4cf68516b53bd16d2671e49e805b26118b3671

commit 1cff8250c64228cca52a7dd64820b030d3114db9
Author: Pete Zaitcev <zaitcev@kotori.zaitcev.us>
Date:   Thu Jan 5 15:39:55 2012 -0700

    Add Fedora clauses to the installing document.
    
    This change resolves 2 Fedora-related todo items in installing.rst.
    
    It also cleans up a bit:
     - fixes weird grammar
     - fixes improper list numbering
     - uses proper name for Red Hat, where space is necessary
     - replaces A/B syntax with A, B
    
    This is my first commit and I am adding myself to Authors file
    on a suggestion by Brian Waldon.
    
    Change-Id: I398ae8150d7912e0b61375a7bdc5aab1101f34bc

commit 422c1e4aa96f175ace645cb068a2d81f6d742642
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Jan 3 16:07:05 2012 -0500

    Remove doc/Makefile.
    
    Use "python setup.py build_sphinx" instead.  There are some things that
    the Makefile did that setup.py does not do, but they will be easy enough
    to add later if anyone misses them.
    
    Change-Id: I430dcc027bac207af515fb7d927500db18320ba5

commit d466cec3576b12c61491c75c43ec2d839072890e
Author: Hengqing Hu <hudayou@hotmail.com>
Date:   Thu Jan 5 19:05:15 2012 +0800

    Fixes incorrect URI scheme for s3 backend
    
    Fixes bug #912094.
    
    URI scheme for s3 backend should be 's3+https', not 'swift+https'.
    
    Use s3.amazonaws.com instead of s3service.com to follow RFC2606.
    
    Indent reason for BadStoreUri exception in s3.py.
    
    Comments added for the following option in etc/glance-api.conf
        's3_store_host'
    
    Change-Id: Id456b287d82fe61711f0d738e61ccb599f0b5684

commit 9633697ae08bc222c07b96e777061c7d24f45273
Author: Hengqing Hu <hudayou@hotmail.com>
Date:   Thu Jan 5 10:27:30 2012 +0800

    Add comments for swift options in glance-api.conf.
    
    Fixes bug #771465.
    
    Comments added for the following two options in
    glance-api.conf
        'swift_store_auth_address'
        'swift_store_user'
    
    Indent reason for BadStoreUri exception in swift.py.
    
    Change-Id: Ife28e01a4e2344cf1e5a179752d244b68e45d348

commit b7796ecd8cff784bc3dd698510b66e0cdd5d30ab
Merge: bd33de4 2528e56
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 5 02:48:23 2012 +0000

    Merge "fix bug 911681"

commit bd33de49503dd6b821093a7adb16bc8239ce683b
Merge: d57031e aba34d1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 5 00:09:49 2012 +0000

    Merge "Fix help output for inverse of BoolOpt."

commit f8ae3c4995d8716c46750e3715532e3086a2645a
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed Jan 4 16:01:13 2012 -0500

    Split notification strategies out into modules.
    
    1) Add a Strategy class that defines the interface that a particular
    notification strategy must implement.
    
    2) Split each notification strategy out into its own module.
    
    This is in part just an attempt at some "code cleanup", but it also has
    an advantage that it is easier to make a particular notification
    strategy be optional and not impose a hard dependency on all of glance.
    
    Change-Id: Iab658637c56e764e2b3ec54c67e752db0cbfbe5c

commit d57031ed2608a965ac1ad14f67770dbdbb812b73
Merge: 41cd77a 668149d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 4 22:53:15 2012 +0000

    Merge "Set execute permissions on glance-cache-queue-image."

commit 41cd77a978a68374aa258d9fd7077a28dc1d7191
Merge: 5e5d2eb 58532a4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 4 20:04:26 2012 +0000

    Merge "Add more man pages."

commit 2528e569d0a53248dd9cae9b1f6aa2da5f455cdd
Author: Yaguang Tang <heut2008@gmail.com>
Date:   Wed Jan 4 23:28:05 2012 +0800

    fix bug 911681
    
    need not to use optparse in  bin/glance-control.
    
    Change-Id: I3096a39fd0c26f9fa5243f7cc2bd25dd8d5235ea

commit aba34d190e5a453e314cb18fe59b9e4cca2708f9
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Jan 3 19:38:26 2012 -0500

    Fix help output for inverse of BoolOpt.
    
    When a BoolOpt is used, it adds both the option and its inverse.  For
    example, there is "--verbose", and "--noverbose".  Previously, the same
    help text was used for both which didn't make any sense.
    
    This patch modifies the help text used for the inverse option.  It now
    simply says something like "The inverse of --<option>".  For example,
    the help text for --noverbose says "The inverse of --verbose".
    
    Change-Id: I3966fe9ec5ed6282d8a2902f06fc1487532064e0

commit 5e5d2ebde45d5c76b95e4f49ae15a18797265682
Author: lzyeval <zhongyue.nah@intel.com>
Date:   Wed Jan 4 09:20:53 2012 +0800

    PEP8 glance cleanup
    
    Fixes bug #911547
    
    All Object type comparisons should use isinstance()
    instead of comparing types directly.
    
    Change-Id: I9ddabd5cc7333fc63790b140ee52bf995a66cc9c

commit 58532a43738917dc7588f2bd5e96f658ce7ba64d
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Jan 3 16:04:25 2012 -0500

    Add more man pages.
    
    A few man pages were already in place.  This patch uses the --help
    output from each executable to seed a man page for the rest of the
    executables, which include:
    
      - glance
      - glance-cache-cleaner
      - glance-cache-manage
      - glance-cache-prefetcher
      - glance-cache-pruner
      - glance-cache-queue-image
      - glance-control
      - glance-scrubber
    
    Fixes bug 911291.
    
    Change-Id: Ie0de990ff6617e7eb953f270a089c99bc340b4fe

commit 668149d70e83a7501f301ff9b77f3e1035d69571
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Jan 3 16:27:52 2012 -0500

    Set execute permissions on glance-cache-queue-image.
    
    This file didn't have execute permissions set, while the rest of the
    executables in the bin directory did.
    
    Change-Id: I14db6f1fc8ba4af317c2189d1efa292df0f6ba54

commit 98b19af07b4cbe7bac124cfc7092be264ab84586
Merge: 2532c88 add97aa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 3 16:22:20 2012 +0000

    Merge "Add ability to specify syslog facility"

commit 2532c886706e8f66ef36113afecc13d3d9d457bd
Merge: b132709 db29421
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 3 15:23:53 2012 +0000

    Merge "Add a LICENSE file."

commit db2942166de266412ed1f9ccc9127afe32b5cdd4
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Jan 3 09:31:23 2012 -0500

    Add a LICENSE file.
    
    The license file was missing in glance. The LICENSE file added here is
    copied in from nova.
    
    Change-Id: Ifae7610ea2c4d0db9cb4fc58a5639850f2b3e195

commit add97aa9f3a76e5c0e2316c4afaa43324e1aab6f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Nov 8 15:01:16 2011 +0000

    Add ability to specify syslog facility
    
    Addresses bug 887596.
    
    Change-Id: Id5ae9bc2f37b39cdd4236d5df24273cda058e759

commit b1327095b395d83f0ba688e6e2886b18e4220ce0
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Jan 2 13:26:44 2012 -0800

    Install an actual good version of pip.
    
    Change-Id: I0ce36bea05ba4c08818f61805bf052392976cd43

commit 7d61fefd26d396d5f4035484c9135f5c80623ff9
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Wed Dec 28 21:33:54 2011 -0800

    Bug #909538: Swift upload via Glance logs the password it's using
    
    Don't log the key used when creating a Swift connection.
    
    Change-Id: Ia9e7e6b7a14a6169b844ab40eb6adafeaf6d5542

commit 4d7f2afb1d756a1cf608acc09356d6ac906b6cf8
Author: Monty Taylor <mordred@inaugust.com>
Date:   Fri Dec 30 14:03:15 2011 -0800

    Add tox.ini file.
    
    The tox.ini drives the current test suite in multiple virtual envs, so this
    is a first step in trying to get multi-version testing.
    
    Change-Id: I9c28ee11aa7bbe1b221a72e0ee8cc51d788f73c9

commit fa1b0b1f784f1b68c8fc598965155b7f083b61dc
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Wed Dec 28 16:05:05 2011 +0000

    Synchronize notification queue setup between nova and glance
    
    Fixes bug 901376
    
    Glance used a SimpleQueue which would end up with a direct queue with an
    exchange named the same as the queue. This was different than Nova, which
    uses a topic queue with an exchange named 'nova'.
    
    This change makes Glance use a topic queue with a configurable exchange
    name to match Nova.
    
    Change-Id: Ia014e4c00060abc2345289a54e45bbfdc6b7e8e5

commit 00ac2c725097567ab090079db799e70a6f549794
Author: Major Hayden <major@mhtx.net>
Date:   Wed Dec 28 10:17:52 2011 -0600

    Fixes keystone auth test failures in python 2.6.
    
    Fixes bug 909408.
    
    Change-Id: I18f5bf43f390c8a69f49e5f038acb9dcd80ca502

commit 18625fb89a9ee5f34c35795f465037b7240e0f13
Merge: a7b8cd1 391dd0e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Dec 27 16:37:37 2011 +0000

    Merge "Adds support for protecting images from accidental deletion."

commit a7b8cd1be3295422d8435f90f051effd087bd367
Merge: 1571cd8 c827316
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Dec 27 16:19:13 2011 +0000

    Merge "Fix for bug 901609, when using v2 auth should use /v2.0/tokens path."

commit 1571cd8f83cb80f2c89bd226883d7f802119bfb2
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Thu Dec 22 14:22:48 2011 -0500

    Removed bin/glance's TTY detection.
    
    Fixes bug 907906
    
    The logic is sound: if location=XXX is specified, use that.
    If it's not specified, use sys.stdin to read image data. No need to
    error when location=XXX is specified and stdin just happens to be a TTY.
    
    Change-Id: I057312becad59b3dd7a71f94d25ebd032e1a7b52

commit 1e611fa1ae4f4185c50c114a5b41f5581b9358b6
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Wed Dec 21 13:00:07 2011 -0500

    Fixes request with a deleted image as marker
    
    Fixes bug 907461
    
    Change-Id: I5dbcd626ecdbd8dfcb1b1dca80813e07c190b9db

commit 391dd0e21122b3711b1fdd0391f8c82c99cbdccc
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Fri Aug 26 14:51:50 2011 +0000

    Adds support for protecting images from accidental deletion.
    
    Implements blueprint protected-images.
    
    A new attribute 'protected' is now available to prevent an image from being
    deleted. If the image is protected a HTTP Forbidden (403) error is returned.
    The attribute can be changed via an update of the image.
    
    Change-Id: I72ba1c6499065441dc73e5ec2fa873d76c7f60d1

commit c827316cd3be96c5bf70b4fbba78e46f038b8a7d
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Dec 8 13:19:51 2011 +0000

    Fix for bug 901609, when using v2 auth should use /v2.0/tokens path.
    
    Added relevant V1 and V2 auth unit tests.
    
    Also allow keystone authentication to work whether OS_AUTH_URL
    has a trailing slash or not.
    
    Change-Id: Ia94c759644c9394d72cc07999a1eb8eedda5ea3a

commit 1239f61c2b4ddad3087a2e4e59824fd000c5760e
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Sat Dec 17 15:11:14 2011 -0500

    Updated glance.registry.db for bug 904863
    
    Changed sql-connection to sql_connection, updated add_group to register_group,
    and removed the 'registrydb' group designator.
    
    Change-Id: Id9bf38f067806b6f81b23296ed73774e820a577b

commit ea99d1c8f350b545276e91daa3c6304a28d3e185
Merge: 16a591a 105f1fc
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Dec 16 22:23:12 2011 +0000

    Merge "Ensure functional tests clean up their images"

commit 16a591a00d814882e1433ffc2413fc63d9591d78
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Dec 15 12:15:51 2011 -0500

    Removing caching cruft from bin/glance
    
    Fixes bug 888343
    
    Change-Id: Ief0ca93a073f8235afd98ca79f8033fef66260e3

commit 5620ddff24ecf783f37922aa435d71d301b27269
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Thu Dec 8 17:20:50 2011 -0500

    Fixes LP Bug#901534 - Lost properties in upload
    
    Adds test cases that verify the bug behaviour.
    
    Adds some logic to the main API images controller
    update() method that does the following:
    
    * If an image file is being uploaded, do not purge
      existing properties when updating metadata. The idea
      behind this change is that a very common scenario is
      to register an image entry with Glance with some
      properties (like instance_uuid, instance_type, etc) and
      then immediately upload an image (usually snapshots).
      We don't want to mark deleted the originally-registered
      properties during the image upload, which was what was
      happening.
    
    * Add ability to force Glance NOT to purge properties
      when calling PUT /images/<IMAGE_ID> if the
      X-Glance-Registry-Purge-Props: false
      header is passed.
    
    Change-Id: Ie66af8f052ab40d5dca7a3235fdbbb7de20372de

commit f1ccb596024f90a1bf15fb15ab0c3387f9ce780c
Merge: 2c94f6b 4ffe0e6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Dec 15 03:37:05 2011 +0000

    Merge "Allow glance keystone unit tests to run with essex keystone."

commit 2c94f6b5816bbfbc03254d90285d54d16096e69c
Merge: 68de11c 57c4e9b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Dec 14 21:15:21 2011 +0000

    Merge changes Iafa998a2,Ideedf77e,I3a86fc01
    
    * changes:
      Convert glance to use the new cfg module
      Add new cfg module
      Rename 'options' variables to 'conf'

commit 68de11cdab473036dfdf17df48deafd4677d926b
Merge: b535900 ba44d1c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Dec 14 21:05:27 2011 +0000

    Merge "Add generic PasteDeploy app and filter factories"

commit b53590001b6e870ef0232284fe988898183d5c25
Merge: c062423 3bfe910
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Dec 14 15:01:39 2011 +0000

    Merge "Update glance caching middleware so doesn't try to process calls to subresources. Fixes LP bug #889209."

commit 3bfe910a33a2927351b0c5125d1c519aee41d6ef
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Dec 13 15:53:20 2011 -0500

    Update glance caching middleware so doesn't try to process calls to
    subresources. Fixes LP bug #889209.
    
    Change-Id: Id56a535418c70bdc91a81baabc53d0c9db758a29

commit 105f1fc0545e1e05f762f6d302ff4f687a889f2d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Dec 13 14:21:11 2011 -0500

    Ensure functional tests clean up their images
    
    Fixes bug 903887
    
    Change-Id: I8772cf39a7de42b31c65f0b5dfb093693d38751a

commit c06242382e4de3afb67f198f86cdab76c49b00fa
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Dec 13 13:38:10 2011 -0500

    Remove extra swift delete_object call
    
    This only tries to delete the manifest once when deleting an image
    stored (chunked) in swift. Fixes bug 903768.
    
    Change-Id: I65b8f3389e9965a111c4e774f4d1b6f7bbe71a9b

commit 5fc3d42dd7d09ba7a0780f59ab270236ce7e8e49
Author: Thierry Carrez <thierry@openstack.org>
Date:   Mon Dec 12 16:45:48 2011 +0100

    Add missing files to tarball
    
    Add missing files from repository in tarball.
    Fixes bug 901217.
    
    Change-Id: Ib4f5efdce412c9255e13894df77d7e63c2ac6d05

commit 4ffe0e6dd01fc7fd92395994778eb27820a35d93
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Dec 8 13:39:11 2011 +0000

    Allow glance keystone unit tests to run with essex keystone.
    
    Fix for bug 901672.
    
    Change-Id: Idc72797949e47bd75aeba45965e3c8b83571625e

commit d76a7d43a62d967220575a2a669bcea4484e4f31
Merge: d03e347 b23b8ef
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Dec 9 18:50:29 2011 +0000

    Merge "Add the missing column header to list-cached"

commit 57c4e9b6c686f1303c815698cc68b95bf9b033e7
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Nov 28 14:37:58 2011 +0000

    Convert glance to use the new cfg module
    
    The changes here are substantial and widespread, but in summary:
    
      - We use cfg to parse the CLI and config files, rather than optparse
        and PasteDeploy
    
      - A schema is defined for all configuration options close to the code
        which uses the option
    
      - 2 ConfigOpts sub-classes are added to config.py basically just
        defining how to find config files; this means we can now use e.g.
        glance.conf for base config values which glance-api.conf can
        override
    
      - load_paste_app() is changed to load the paste app from the last
        config file in the stack and pass the app the ConfigOpts instance
    
      - The generic app and filter factories in wsgi.py are modified to
        pass a ConfigOpts instance to the apps and filters
    
      - A ConfigOpts subclass is added for the unit tests which writes out
        config values to a temporary config file and uses cfg to parse that
    
    I've tried to keep the switch as unobtrusive as possible leaving further
    cleanups for later e.g.
    
      - Moving PasteDeploy config out of the config files - I think it would
        be good to aim for having users modify the PasteDeploy config files
        only in fairly rare circumstances. To achieve this, we might define
        a number of common pipelines in the PasteDeploy config and allow
        the user to choose between those pipelines in the glance config.
    
      - We should add help strings to all the opts, even just for the sake
        of documenting them
    
      - We should move a bunch of the options into groups - e.g. all the
        rabbit options
    
      - We no longer rely on config files for default values, so the default
        config files could contain nothing but comments - i.e. explaining
        each option and showing what the default for it is - making it
        obvious where a user has explicitly set a value
    
    There are a couple of behavioural changes which I don't think are
    signifcant but are worth mentioning:
    
      - We used to support passing a config file as a positional argument
        but don't anymore; AFAICT, it was only used by glance-manage when
        launching servers and I've changed that to pass --config-file
    
      - log_opt_values() doesn't log unknown opts, so won't log any values
        for opts which get registered at runtime later
    
    Change-Id: Iafa998a2a8d860f1ad57e2cd2afee69686ed58ba

commit e5925473cd2d29024cbabd76250cc369a7090087
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Nov 28 14:37:58 2011 +0000

    Add new cfg module
    
    As discussed on the mailing list and described here:
    
      http://wiki.openstack.org/CommonConfigModule
    
    The module implements an API for defining configuration options and
    reading values for those options that a user may have set in a config
    file or on the command line.
    
    The module will be part of openstack-common and glance will consume
    it from there once openstack-common makes a release with an API
    compatibility commitment.
    
    Change-Id: Ideedf77e5e16fa4e6ca742cfb49f5539c5a4a746

commit d03e347e7b69a1d34ce0f9418509e5dcebe18b4c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Dec 8 13:11:11 2011 -0500

    Lock keystone to specific commit in pip-requires
    
    We'll use commit b9dde8d0e317203e349b8e4bca5bc9923c11974e. This will help ensure our tests don't fail due to a changing keystone trunk
    
    Change-Id: Ie9b8f0bd13b974817e8ce7de08033ab3f5bcce0c

commit b23b8ef2854610ef291396761874396231d5bc49
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Dec 8 13:00:09 2011 -0500

    Add the missing column header to list-cached
    
    Fixes bug 901768
    
    Change-Id: Ic313faba3587a2bfbc62bd81b6d6f5ad98a76ac5

commit 002d711fb7f16a6d5c7977e82e30837287b553b8
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Nov 28 14:37:58 2011 +0000

    Rename 'options' variables to 'conf'
    
    In the common-config patch, I'm going to be using 'conf' as the name of
    the variable holding configuration values rather than 'options.
    
    This patch does the renaming across the codebase without making any
    functional changes.
    
    Change-Id: I3a86fc01fc76825d6d1e86af882eb8245828ce5f

commit ba44d1c384c58ae8059a44c0ef0afaacba40225f
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Nov 28 14:37:58 2011 +0000

    Add generic PasteDeploy app and filter factories
    
    These generic factories allow us to dump the copied and pasted
    app_factory and filter_factory methods in the codebase.
    
    The main difference is the paste configuration changes from:
    
      [app:apiv1app]
      paste.app_factory = glance.api.v1:app_factory
      ...
      [filter:cache]
      paste.filter_factory = glance.api.middleware.cache:filter_factory
    
    to this:
    
      [app:apiv1app]
      paste.app_factory = glance.common.wsgi:app_factory
      glance.app_factory = glance.api.v1:API
      ...
      [filter:cache]
      paste.filter_factory = glance.common.wsgi:filter_factory
      glance.filter_factory = glance.api.middleware.cache:CacheFilter
    
    Apart from reducing code duplication, this will also allow us to have
    the generic factories inject other data into the apps and filters.
    
    Change-Id: I1d2be5630ab61d29b8948ff88d58e6e1b11c2e5f

commit 07dcb32106b1f4eca7f89c7ab6afc4b1bd3a1fef
Merge: 98b1ef3 37fc2b0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Dec 6 21:53:07 2011 +0000

    Merge "Rename .glance-venv to .venv."

commit 98b1ef337ee63f239829b44aec4d05cea99f98ad
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Mon Dec 5 15:56:18 2011 +0000

    Secondary iteration of fix for bug 891738
    
    A problem exists that images larger than large_object_size without a
    known image_size will fail to be segmented and hence fail to be added
    to swift.
    
    This patch alters the chunking process slightly:
    
    - Instead of reading min(large_object_chunk_size, bytes_left) from the
      stream, simply read large_object_chunk_size until we reach EOL(None).
      This works even when there is less than large_object_chunk_size bytes
      amount available.
    
    - The image_size can be determined from the combined length of each
      chunk read. If we are passed an unknown image_size this value can be
      used for the registry.
    
    Test Changes:
    
    - Fixed bug in fake_put_object which was highlighted by Jay when
      reviewing this changeset.
      The put of the manifest object needed to be moved inside the
      check for previous existence of a key.
    
    - Added test_add_large_object_zero_size to
      glance.tests.unit.test_swift_store:TestStore.
    
      This unit test demonstrates the bug and will test for regressions. It
      mirrors test_add_large_object but specifies an image_size of 0 to
      excercise the new code path.
    
    Change-Id: Ic8b78be5dce2281c80372ed446499f6d0bc07f40

commit 37fc2b00c0a8dd67221d83697609913aa78d89c7
Author: James E. Blair <jeblair@hp.com>
Date:   Mon Dec 5 11:23:40 2011 -0800

    Rename .glance-venv to .venv.
    
    This simplifies a number of Jenkins jobs which currently, other
    than directory names, could be the same for all OpenStack
    projects.  By renaming the virtualenv directory, the redundant
    Jenkins virtualenv build and copy jobs can be eliminated.
    
    Change-Id: I7916783d863e5184bad8293c3aed5ba119e374a9

commit d3e57489d82ad60d2860f10b59579958b1ae7443
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Mon Dec 5 12:23:12 2011 +0000

    Fix for bug 900258 -- add documentation for '--url' glance cli option.
    
    Change-Id: If6e72c159209c073a4941b90c4a31fa054c84cd2

commit 2da279408bbecf178126fed39e2ea26292ebcd60
Merge: b183f43 0e9c16d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Dec 2 20:22:11 2011 +0000

    Merge "Add --url option to glance cli."

commit 0e9c16dccf27cc4f85e6772e1d2abfd820af7756
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Dec 1 17:32:44 2011 +0000

    Add --url option to glance cli.
    
    Adds ability to select between http/https protocols.
    
    Fixes bug 898097.
    
    Change-Id: I1d20f314fb7dd8c5462c1f1ff22161ab59c35016

commit b183f43792e38f8210b15cac83a8a745938d22ae
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Wed Nov 16 00:57:27 2011 -0500

    Fixes LP Bug#850377
    
    Reworks Keystone functional tests to not depend on
    a local Keystone (or Glance client) installation path.
    
    Adds deps to tools/pip-requires with comments on
    why they are needed for installing Keystone via pip.
    
    Change-Id: I17c92e8ab37ef116d13e7b87719af4c0988450f9

commit 1ab63ff5c97cfcbcebd993b57e209c0dd17c2ee8
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Nov 15 11:49:10 2011 -0500

    Fixes LP Bug#861650 - Glance client deps
    
    This patch addresses the dependency proliferation in
    the glance client stuff. It removes references to modules
    that contain non-client-necessary libraries (like
    eventlet, xattr, sqlalchemy-migrate and sqlalchemy)
    by restructuring the modules slightly.
    
    Note that the additional httplib2 dependency is because
    that is used in the authentication strategy stuff in
    glance.common.auth. This could be rewritten to use httplib
    instead, further reducing the dependencies of the client lib.
    
    IMPORTANT NOTE: This patch changes the default entrypoint
    for the Images API router application, and therefore this
    should be merged along with the packaging changes in this
    branch:
    
    https://code.launchpad.net/~jaypipes/glance/ubuntu/+merge/82318
    
    Change-Id: I5dbc8584fb77e3e011fb6ff3532f792f5103e242

commit 6bf61e8ce1882ea0f448aaffb7de8a826f19ea6e
Author: Lorin Hochstein <lorin@nimbisservices.com>
Date:   Wed Nov 23 19:46:12 2011 -0500

    Added some examples for "glance add"
    
    Fixed some warnings.
    
    Change-Id: I9658c7458f3073b4bab93d0105d6ba174a4d0ca1

commit 0be6359d28c90252dc018d6903e5ffa66bc19b68
Merge: 105f792 03372c7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 28 03:47:41 2011 +0000

    Merge "Bug#894027: use correct module when building docs"

commit 105f792fa11e07cd0ad79e8730b3b8106fc18756
Merge: bf2b9d0 a7db2db
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 23 17:41:21 2011 +0000

    Merge "Check to make sure the incomplete file exists before moving it during rollback. Fixes bug #888241."

commit bf2b9d01b3886377a0efc91b2a97302353208294
Merge: 49d67bd 8878046
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 23 17:08:17 2011 +0000

    Merge "Fixes LP Bug#837817 - bin/glance cache disabled"

commit 03372c77aa2fddd61cb9b90d9aff553f90ca15d5
Author: Pádraig Brady <P@draigBrady.com>
Date:   Tue Nov 22 16:16:13 2011 +0000

    Bug#894027: use correct module when building docs
    
    Currently the wrong directory is searched for the
    glance module, requiring glance to be installed
    in the default system path, for docs to be buildable.
    Also the path was appended, so the default system version
    which may be completely different is referenced.
    This ensures that only local glance files are referenced.
    
    Change-Id: Ia226c90bbd24d7804401a7c9e444387c78a0f542

commit 49d67bd5051a7399d6108119ade54db92cae23f0
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Thu Nov 17 14:46:11 2011 +0000

    Adds option to set custom data buffer dir
    
    Implements blueprint custom-disk-buffer
    
    When pushing an image large enough to be chunked into either a Swift
    or S3 backend, the chunks are buffered to /tmp.
    
    This change allows a user to define an alternate directory via the
    configuration files.
    
    Change-Id: I2660b6e5a76cbfd43834384b129550b66bb9afce

commit 1f28b6ca7efb9bed12052c10af71e57773693970
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Mon Nov 21 16:50:23 2011 +0000

    Fix bug 891738
    
    Compute image size for the registry in the case where none is specified.
    
    Change-Id: Ic21adf4865d0f481db9bd362cfaeeebd0942c974

commit db10a10f55ad3df67718a45a8522c7f1f219a743
Merge: 5650bd2 7cb8d13
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 17 19:05:21 2011 +0000

    Merge "Casting foreign_keys to a list in order to index into it."

commit 5650bd22b7926c8b40b3af5e9e190780ab6b7760
Author: Monty Taylor <mordred@inaugust.com>
Date:   Wed Nov 16 13:09:18 2011 -0200

    Added missing depend on nosexcover.
    
    Also reverted sqlalchemy.
    
    Change-Id: I815635ef618304123de89f6a10e97cd353e1237b

commit 6eb28314591382366bb07e32b856420fc6cc82f2
Author: Monty Taylor <mordred@inaugust.com>
Date:   Thu Nov 10 12:08:39 2011 -0500

    Removed some cruft.
    
    Removed builddeb.sh - we don't use it.
    Removed a reference to pep8 skipping vcsversion due to bzr bug.
    Updated sqlalchemy in the pip-requires to allow/use 0.7.1 or later to match
    Nova installs.
    
    Change-Id: I2da2b39efd0b1b192a490509a44cb1f641b86092

commit a805a281f4c7811adaa112dc05f693e6a4e0cc5a
Merge: e56cb99 d105e95
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 15 19:57:27 2011 +0000

    Merge "Fixes LP Bug#885341 - Test failure in TestImageCacheManageXattr"

commit 88780460895ccf77747c2db4450919e9daa17020
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Nov 14 18:40:17 2011 -0500

    Fixes LP Bug#837817 - bin/glance cache disabled
    
    This patch removes the cache management commands
    from the main bin/glance client and puts them in
    a bin/glance-cache-manage program. It also adds
    a number of cache management calls to manage the
    cache queue via the HTTP API.
    
    The reason I moved the cache management commands
    into a separate utility is that I'm thinking towards
    the future, where we have a separate admin API, and
    having a separate management utility seemed like the
    best way to go.
    
    Change-Id: Ic916a72f39516a06be27ea6c8ef69eb9e1a70936

commit e56cb998c578ff1b6b0ba47d3f693c871db6c7fa
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Nov 15 07:11:36 2011 +0000

    Separating add vs general store configuration.
    
    Fixes bug #888816
    
    Change-Id: Ic8ce8956f28e07a4c67026bff8da7fa7512b7839

commit d105e954a82030cac21a1e5461ae8f507af54758
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Nov 14 13:54:22 2011 -0500

    Fixes LP Bug#885341 - Test failure in TestImageCacheManageXattr
    
    This bug was due to insufficient checking that not only was
    python-xattr installed, but also the device that the image
    cache dir lives in is actually able to have xattrs written
    to files (user_xattr in fstab). The fix adds a number of checks
    for xattr support on the device, both in the image cache configure()
    methods and in the test cases themselves (using @skip_if_disabled)
    
    Adds a functional test case for queue/prefetch of images into
    the image cache.
    
    Change-Id: I09b3d008fc00564031b0534155430ed0856e9e9c

commit 9657fd258152e85311480ac2f68f4539ca9ef42a
Merge: cc4e83b f394327
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 11 19:11:29 2011 +0000

    Merge "Making prefetcher call create_stores."

commit f394327f3869b8b820f1fdd345c7e6073dd82820
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Nov 11 18:39:31 2011 +0000

    Making prefetcher call create_stores.
    
    Fixes bug 888383
    
    Change-Id: Ia3adc6a30f16f889cd344f8cb3fca4a071871fe4

commit cc4e83bc8988711f0a3dcc996c3db4bd23cafd65
Merge: a18e60c 94dcf3a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 11 18:17:19 2011 +0000

    Merge "Using Keystone's new port number 35357."

commit a18e60c4aa1801147ce80581f19aefc2b4b606cf
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Nov 11 17:53:54 2011 +0000

    Fix handle get_from_backend returning a tuple.
    
    Fixes bug 889182
    
    Change-Id: Ieecb4cc5653be6c4e4004bf8c8d95c8d287fb7ae

commit 7cb8d131bff574e9a62e2ed08e227cc2f0639ed3
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Nov 11 00:51:58 2011 +0000

    Casting foreign_keys to a list in order to index into it.
    
    Fixes bug 888839
    
    Change-Id: I66307cb355120b992913c8a1d8d5855b30f70504

commit 94dcf3acd0b3ef7adcb61b90bf4bdcc733cf61ac
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Nov 10 23:33:45 2011 +0000

    Using Keystone's new port number 35357.
    
    Fixes bug 888753
    
    Change-Id: I22894a31ee54edd6d00ac3458ea4a2f8842aa4a0

commit 0a394707bee38182d980b2ea1906c2aaa6f1c389
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Nov 10 23:22:46 2011 +0000

    Adding admin_token to image-cache config.
    
    Fixes bug 888802
    
    Change-Id: If1fa7c4a6ba09b86ddba0ceff9a922aa6a9d27af

commit 5885b619adc8dcea3f76ceb0430cb58aa888f476
Merge: 4213a1e 1d2e290
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 10 21:43:38 2011 +0000

    Merge "Gracefully handle image_cache_dir being undefined"

commit 4213a1e9dabda4e9174678ce46a0d80da38ded3e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Nov 10 15:47:05 2011 -0500

    Removing assertGreaterEqual
    
    Python 2.6 doesn't support this, so we should use assertTrue
    instead. Fixes bug 888711
    
    Change-Id: I78a0603bc4979ae3831394ea57f12fd328e03573

commit 48d407932c9688c8efd7b84f90463f0fd792f859
Merge: fb7a42c 854d66e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 10 19:08:23 2011 +0000

    Merge "Adding tests to check 'glance show <ID>' format"

commit fb7a42cf0be3ab45e4bcc075a7b50338eb67d4c2
Merge: 0135c42 1f979ca
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 10 18:10:06 2011 +0000

    Merge "Allow glance-cache-* find their config files"

commit 0135c4265380988a5a02b1cefa837b919fd1a8f4
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Nov 10 10:33:07 2011 -0500

    Correcting image cleanup in cache drivers
    
    Fixes bug 888382. Includes some removal of unused code.
    
    Change-Id: I53923bcf1fe13d63f7242cf328eb53e37d28285e

commit 854d66ec65caeda872163e17ececc3dc8fa0f710
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Nov 9 21:06:35 2011 -0500

    Adding tests to check 'glance show <ID>' format
    
    Prevent regression on bug 888370
    
    Change-Id: I7dedc31cd19c242af25b8a947dbe936a1ed2eb13

commit 98cefb7fc8430ad92b002d2300fd2085c71c9750
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Nov 9 20:47:27 2011 -0500

    Update 'glance show' to print a valid URI. Fixes bug #888370.
    
    Change-Id: Ibe8d7974eb2dfca79953b473b904df55daafa748

commit 1d2e29063f359a8187fbcc39d4d00ce203c6193c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Nov 9 20:43:03 2011 -0500

    Gracefully handle image_cache_dir being undefined
    
    This abstracts out the 'set_paths' method of our two cache drivers into the
    base driver for now. It raises an exception when image_cache_dir is not
    defined. Fixes bug 888340
    
    Change-Id: Ib0be8c9b29ba1efebd03a0cdb8d001a003fc236f

commit c7f7040836a56872e92ac33009ebbc45f831f4e9
Merge: 2c66c69 ec99ac3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 10 01:04:07 2011 +0000

    Merge "Add some test cases for glance.common.config"

commit 2c66c6972de9bd5c364228061bf3de27aad746fe
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Nov 8 21:34:01 2011 +0000

    Remove unused versions pipeline from PasteDeploy config
    
    Since the version negotiation middleware was introduced, versions
    pipeline app in the config is unused. Consequently, the versions
    app factory is unused too.
    
    Change-Id: I2d50432de215e51c1e52f8d68eaa0820e9b5bd0b

commit 1f979ca757162b55bc120eb87990f70819a4266f
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Nov 9 22:51:20 2011 +0000

    Allow glance-cache-* find their config files
    
    By default, glance-cache-cleaner looks for glance-cleaner.conf but
    its actual config file is glance-cache.conf.
    
    Change the find_config_file() argument to conf_name and make it an
    optional argument to load_paste_app(). This allows us to specify
    a different config file for the glance apps than their app name.
    
    find_config_file() is also changed to raise an exception if no
    config file is found.
    
    Change-Id: Iec71218f5b2f0a7f057ea02f4549bd743892cc65

commit ec99ac38ae80bded04b18b5807fe2d9cdac1a432
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Nov 9 22:51:20 2011 +0000

    Add some test cases for glance.common.config
    
    Test cases cover find_config_file(), load_paste_config() and
    load_paste_app()
    
    Change-Id: I2b5feea90881ccf80ac3c04b909686409a0a5c0e

commit b82998684ac969d1639b6f002e2040522fb43cf7
Merge: 3f33db7 2a5a0e9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 9 22:40:01 2011 +0000

    Merge "Fixes LP Bug#878411 - No docs for image cache"

commit 3f33db71bbd25dd3ce323c2d962e2a3a450219e7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Nov 9 16:10:45 2011 -0500

    Fix name error in cache middleware
    
    Fixes bug 888284
    
    Change-Id: I9ecb19901feabc5da0c5bc35e8535530e76e08a9

commit a7db2db948626e6727a88f50319306bf48dcc1d9
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Nov 9 14:26:11 2011 -0500

    Check to make sure the incomplete file exists before moving it during
    rollback. Fixes bug #888241.
    
    Change-Id: I98bca574a26f9ab7173ac593d3b32b68d78d2360

commit f6d8437d5bdc81309f850a8d6f9628438b5353da
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Nov 9 13:26:11 2011 -0500

    Fix global name 'sleep' is not defined in wsgi.py. Fixes bug #888215.
    
    Change-Id: I02a43dfaf3cb0505e14b7f942bb64f3e94dbf4fa

commit 2a5a0e9a355e64545da3165c1f2aea049e0eb9fa
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Nov 8 11:50:04 2011 -0500

    Fixes LP Bug#878411 - No docs for image cache
    
    Adds documentation on managing the image cache
    
    Adds a simple CLI program to queue an image for
    caching.
    
    Change-Id: I2b4c9708c521fdcfaf1c6b8f07505e130923c4b7

commit c8de988a8d8f695d32cacb088ff4bc8b5bb6c2fc
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Nov 8 21:45:55 2011 +0000

    Fix typo in the cached images controller
    
    Change-Id: Iffd7bf6d476b7422baa519066885688e49af8eaf

commit 8f122d954bb35d18f0afb38aa2822cd1741f05f0
Author: Mike Lundy <mike@pistoncloud.com>
Date:   Tue Nov 8 10:57:27 2011 -0800

    load gettext in __init__ to fix '_ is not defined'
    
    gettext.install needs to be run on every potential entrypoint; this
    resolves bug #885529 (the python standard library includes a noop
    gettext library for this purpose). This is also how nova does it.
    
    Change-Id: I4ceaa4782461ebf6d27836336f288d79ba15cf2d

commit 5e6fb33b22c868e8ce2638198c27f3e3a099318a
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Fri Oct 28 15:58:49 2011 +0100

    Adds option to encrypt 'location' metadata.
    
    Implements blueprint swift-location-credentials
    
    When the new option is enabled the location metadata
    (which may include user credentials) is encrypted
    before being sent to the registry server.
    
    Change-Id: I072e3f5c81f187435b1c156627076d5fde087af5

commit 2674e8bbbcd340d2161c08d272b57acd18684eb8
Author: Tomas Hancock <tom.hancock@hp.com>
Date:   Thu Nov 3 12:07:34 2011 +0000

    Fix LP Bug#885696 two issues with checked_iter
    
     The error message raised by IOError needed %locals() added
    
     If there is no cache in the pipeline image_meta['size'] appears to be of
     type str on my system. Thus the compare of expected_size and bytes_written
     always failed even when the values should have matched.
     Unconditionally convert expected_size to int to resolve this.
     Curiously image_meta['size'] is of type int if the cache is in the pipeline.
     This latter fix could be removed if the typing is resolved
    
    Change-Id: I05eadce2b5ceb8eb7939acb41668aff089270e21

commit bc7aeb4a0a1295f90f7ea8824a1c8bf5313fafb7
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Wed Nov 2 11:18:16 2011 -0500

    Fix Keystone API skew issue with Glance client.
    
    Fixes bug 878927 by applying Roman Sokolkov's patch.
    
    Change-Id: I9877131c7df65a58e75e6be47f29e9b0a0c2705e

commit 268450cddff0b0cd61c48f1160d625272ef9b2f0
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Wed Nov 2 12:04:29 2011 -0400

    Fixed test failure in Python 2.6.
    
    A recent commit by myself broke tests in Python 2.6...this fixes
    the issue I created.
    
    Change-Id: I01eea54cc318d265de6c17fb18568ebdbbaf3acb

commit cef073049a70b9d6b5bf90678890924e1c3abb7a
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Fri Oct 14 16:46:14 2011 -0400

    Glance redirect support for clients.
    
    Includes functional tests, and small re-working of the BaseClient class.
    
    (Patch Set 2) Updated wrapped to be more explicit about what it is doing.
                  To be clear, this is not a general-purpose decorator but a
                  specific decorator for the _do_request method of BaseClient.
    
    (Patch Set 3) Updated to slightly refactor the _do_request call based
                  on the greate feedback which pointed out after a redirect is
                  encountered the client will still be 'pointed' to the redirect's
                  host/port/etc. This issue should be solved now and test written.
    
    (Patch Set 4) Fixed PEP8 issue
    
    Change-Id: I95a93eb0d920ce57d260423d130eae178705eca3

commit 2e953d684adb5713f3803331768e29daac568c2f
Merge: 25da026 2418efd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 1 20:15:05 2011 +0000

    Merge "Fixes LP Bug#882185 - Document Swift HTTPS default"

commit 25da02654a288704469562ced24ff3cd70764beb
Merge: b20fef5 dcc8847
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 1 20:01:50 2011 +0000

    Merge "Fixes LP Bug#884297 - Install docs should have git"

commit b20fef5ac1d06fb092562d3c2e4ae6ab5353ce46
Merge: bd00433 25bae72
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 1 16:59:18 2011 +0000

    Merge "Add "import errno" to a couple of files."

commit 2418efd7b79ee7703ee8270b0f48b1fcb7819829
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Nov 1 12:32:53 2011 -0400

    Fixes LP Bug#882185 - Document Swift HTTPS default
    
    Documentation should mention Swift auth address
    HTTPS by default.
    
    Change-Id: Ibe0fc1c3590961eb4e025a2fc86b54ac82d9d63d

commit dcc884708a1a08dcbc7d39975dc8f488ca090a93
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Nov 1 12:28:12 2011 -0400

    Fixes LP Bug#884297 - Install docs should have git
    
    Updated installation docs to reference Git, not Bzr/LP
    
    Change-Id: I166e10efafd8d0941e5239671668841e863718e9

commit 25bae72c254242839766eced9f457ee56c2a3131
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Tue Nov 1 11:22:48 2011 -0500

    Add "import errno" to a couple of files.
    
    Two files were missing "import errno"; added it.  This fixes
    bug 884382.
    
    Change-Id: If6e6eea33f5db91e317e4c874f74b268bd34e7f6

commit bd00433233ef2eb19a923b47db30dd43da22d741
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Nov 1 11:14:59 2011 -0400

    Consolidate glance.utils into glance.common.utils
    
    Change-Id: I2512b1d3d47f7d3f45707aa5774d9b4b3cb5c26e

commit 45c72807835fe884901c49652b70701ecfc0e475
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Nov 1 10:14:36 2011 -0400

    Correcting exception handling in glance-manage
    
    Fixes bug 884432
    
    Change-Id: I76c0a97e502dd05b4c56c84fa640d1f0e0cd48ae

commit 1ccc0e2f132d80cdfc480a601d9c2b3c5184bff7
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Fri Oct 28 17:01:38 2011 -0400

    More cache refactoring - Management Middleware
    
    Fixes LP Bug#883236 - Cache management needs refactoring
    
    Refactors cache management middleware by simplifying
    the middleware to image cache calls. The middleware
    now only contains calls for retrieving records of
    which images are cached, queueing an image to be
    cached, deleting a single cached image, and deleting
    all cached images. I removed the special calls for
    reaping invalid or stalled images, as that is handled
    by the cache cleaner utility...
    
    Adds functional test case with caching and cache
    management middleware enabled.
    
    Made a slight change to the way the functional test
    creates a config file: now it adds the configuration
    files used to start servers to $TEST_DIR/etc/$SERVER.conf
    so that test runner can see the config files that
    caused failures for tests.
    
    TODO: Add test case for queue, then run prefetcher, then
    check image is cached...
    TODO: Add docs for cache management API
    TODO: Make bin/glance gracefully handle cache not existing
    
    Change-Id: I76e95ffeeabc079b48b5ce2aeb6520cbdbf6d1e1

commit 6970aa883aaeba8f37cec75f3e07499c57ff702a
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Fri Oct 28 11:45:57 2011 -0400

    Fixes LP Bug#882585 - Backend storage disconnect
    
    Adds a checking iterator to wrap the main image_iter
    returned via the show() method on the images controller.
    This checked_iter validates that the image is fully
    transferred from the backend storage and raises an
    IOError if the chunked reads do not transfer the expected
    number of bytes.
    
    Change-Id: Icf9b303aa8c2c9c728581d59029fd2c29ddb6da5

commit ceab6b3ed4d46aa19ee33dd69560a695c1cdd141
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Sep 27 14:25:44 2011 -0400

    Convert image id value to a uuid
    
    This just changes the value of image.id, leaving the key name alone. We also
    enforce image ids provided on an image create be a uuid. Implements
    blueprint uuid-image-identifiers
    
    Change-Id: I22ba69550ccbc04a24d680748d60414d2d0f1a99

commit 071a880f2419ef6020440b1271a17538b28e423f
Merge: 5677bfa 39c8557
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 26 17:01:27 2011 +0000

    Merge "Adds Driver Layer to Image Cache"

commit 5677bfa44d1d3cbf0f764b09947df454f916b8d0
Merge: 258aa13 e46c0a6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 26 16:28:50 2011 +0000

    Merge "Removing glance-upload"

commit 258aa1356ca0e3e6de0b1cdd54b3736e592d3995
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Oct 25 22:41:42 2011 -0400

    Remove 'location' from POST/PUT image responses
    
    The 'location' field is already removed from GET calls, so we should
    also remove it from POST/PUT operations. Partially fixes bug 880910.
    
    Change-Id: I4f7d8d0309c8a3e10d0c2a99573ca0fa808c93be

commit e46c0a620619758e22f7f73e7668ffe5c95d722b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Oct 25 22:02:10 2011 -0400

    Removing glance-upload
    
    The glance-upload tool targets a very specific use-case that is easily
    handled by simply using the standard glance client. It's not worth keeping
    around. This addresses bug 767344.
    
    Change-Id: Ie7cf42ba517b744a2a440deb15336c0ee372b2e7

commit 39c855743423175beca6955ed30c15b9c40f9129
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Fri Oct 21 16:10:32 2011 -0400

    Adds Driver Layer to Image Cache
    
    Fixes LP Bug#879136 - keyerror: 'image' when doing nova image-list
    Fixes LP Bug#819936 - New image cache breaks Glance on Windows
    
    This patch refactors the image cache further by adding an
    adaptable driver layer to the cache. The existing filesystem-based
    driver that depended on python-xattr and conditional fstab support
    has been moved to /glance/image_cache/drivers/xattr.py, and a new
    default driver is now based on SQLite and has no special requirements.
    
    The image cache now contains a simple interface for pruning the
    cache. Instead of the logic being contained in
    /glance/image_cache/pruner.py, now the prune logic is self-contained
    within the ImageCache.prune() method, with pruning calling the
    simple well-defined driver methods of get_least_recently_accessed()
    and get_cache_size().
    
    Adds a functional test case for the caching middleware and adds
    documentation on how to configure the image cache drivers.
    
    TODO: cache-manage middleware...
    TODO: cache management docs
    
    Change-Id: Id7ae73549d6bb39222eb7ac0427b0083fd1af3ec

commit d521d6529e0d0cdd1138823e0ee5be0e5d87e21c
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Mon Oct 24 16:25:21 2011 -0500

    Removed 'mox==0.5.0' and replaced with just 'mox' in tools/pip-requires.
    
    I was getting an error from pip stating: Could not find a version that
    satisfies the requirement mox==0.5.0 (from versions: ).
    
    Potentially pip is messed up, but all tests seem to run with the latest
    version of mox (0.5.3).
    
    Change-Id: Id6a38766290a20d752177e8d272284b7b632156b

commit ea748f9131c082d7048593359e9557b0779e3a4c
Merge: 8f926f7 17b79b0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 24 17:00:11 2011 +0000

    Merge "Add .gitreview config file for gerrit."

commit 8f926f71903616464e78c63cfc68624c1fe423b6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Oct 24 12:17:42 2011 -0400

    Removing duplicate mox install in pip-requires
    
    Change-Id: I62864aa1d177a758c2cac3bc3e768c5e833703e9

commit 17b79b0220ab5de9e8ba4911764fe0d59d843a5f
Author: James E. Blair <jeblair@hp.com>
Date:   Thu Oct 20 13:44:58 2011 -0400

    Add .gitreview config file for gerrit.
    
    Change-Id: I61524c310738b77df8809495ce5b7822e76562f1

commit efcdac3649a413c5b06ed1661545a2970f71b1fd
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Oct 20 21:54:06 2011 -0400

    Making TCP_KEEPIDLE socket option optional
    
    Not all implementations of the python socket library support
    TCP_KEEPIDLE, so only try to set it when supported. Fixes bug 879195.
    
    Change-Id: I2f062a346a60c69f52d23f70332d7c9da4ecdf35

commit 5ae43a0e15d8cdb0f217e5dd143834915c7d8fe6
Merge: d874893 ad9e9ca
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 20 15:32:46 2011 +0000

    Merge "Overhauls the image cache to be truly optional"

commit d874893ed409838737ab5f21ff8fdd2712647402
Merge: e764565 56e15f6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 20 14:40:13 2011 +0000

    Merge "Fixes LP Bug#844618 - SQLAlchemy errors not logged"

commit ad9e9ca3f741af714b9faf46224bf12e4a2693bd
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Oct 18 09:27:27 2011 -0400

    Overhauls the image cache to be truly optional
    
    Fixes LP Bug#874580 - keyerror 'location' when fetch errors
    Fixes LP Bug#817570 - Make new image cache a true extension
    Fixes LP Bug#872372 - Image cache has virtually no unit test coverage
    
    * Adds unit tests for the image cache (coverage goes from 26% to 100%)
    * Removes caching logic from the images controller and places it into
      a removeable transparent caching middleware
    * Adds a functional test case that verifies caching of an image
      and subsequent cache hits
    * Removes the image_cache_enabled configuration variable, since it's
      now enabled by simply including the cache in the application
      pipeline
    * Adds a singular glance-cache.conf to etc/ that replaces the
      multiple glance-pruner.conf, glance-reaper.conf and
      glance-prefetcher.conf files
    * Adds documentation on enabling and configuring the image cache
    
    TODO: Add documentation on the image cache utilities, like reaper,
          prefetcher, etc.
    
    Change-Id: I58845871deee26f81ffabe1750adc472ce5b3797

commit e76456532c5dadbc3039b33f595878c2ab8f894e
Merge: d3a31b3 a9d4cdd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 19 15:05:53 2011 +0000

    Merge "Fixing functional tests that require keystone"

commit a9d4cddcd2c6c5eaab165c22e7e50079001bb1fb
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Oct 18 18:39:32 2011 -0400

    Fixing functional tests that require keystone
    
    Fixes bug 878200. Tenants switched to be keyed on id rather than name, and there was one error in the members controller.
    
    Change-Id: Ib14015f9ab852107ea368e3aa330de9d15f03527

commit 56e15f6993e85376eb6e3fb4928b0cb8f6df1fda
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Thu Oct 13 11:56:19 2011 -0400

    Fixes LP Bug#844618 - SQLAlchemy errors not logged
    
    Logs any import errors or SQLAlchemy connection failures
    to the glance registry log so that there is some indication
    that a driver module is not installed or there is a problem
    with the sql_connection configuration string.
    
    Adds test case that verifies log output and error raised.
    
    Change-Id: Ib86c353350530d6de62e577df57602d1762879f9

commit d3a31b372ec0ad5955534598135782ce043f6eea
Merge: 6ca5c56 eec5c1a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 18 14:48:01 2011 +0000

    Merge "Adds SSL configuration params to the client"

commit 6ca5c56079a173c00ae2876c1fd05d82dfe1a9e9
Merge: 9385a39 5b27c66
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 17 17:38:58 2011 +0000

    Merge "Better document using Glance with Keystone."

commit 9385a39bec46ee97ca7f8215b8cfd619590e6484
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Oct 13 13:09:35 2011 -0500

    Additions to .gitignore
    
    Installing or testing glance adds several files that are not currently
    ignored by git, leading to cluttered displays of modified files.  This
    causes the 'build', 'dist', and 'glance.egg-info' directories to be
    ignored, reducing the clutter.
    
    Change-Id: I3f0ca3f99fcf6cfe0480fbf5755908ee411552ea

commit 5b27c663b932c30aa7e40a84e55b85223a1d9d2f
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Oct 13 12:02:59 2011 -0500

    Better document using Glance with Keystone.
    
    Addresses bug 871803 by expounding on what configuration should
    look like.  Also fixes the example config files, which generally
    had the authentication setup completely wrong.
    
    Change-Id: I44b2b8bd340ca95b5a2c2e9408797b0308000a65

commit 6aacf2388a03a138502d1ed05dce6c3bfb0502cc
Author: Tomas Hancock <tom.hancock@hp.com>
Date:   Wed Oct 12 16:08:10 2011 +0100

    Fixes LP Bug#872276 - small typo in error message
    
    Add a missing s to a % formatted print statement
    Add my name to Authors file
    
    Change-Id: Ib086fb9bee6f55a3bd89f3108269050c6eb0f8b9

commit eec5c1afa15ae80fa9403fb6bc3271e902afb070
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Aug 9 16:08:50 2011 -0400

    Adds SSL configuration params to the client
    
    * Adds SSL configuration params to all client classes
    * Adds unit test for bad SSL client configuration
    * Refactors the registry methods to no longer need
      configuration options passed, and to configure the
      registry client once, on images.Controller.__init__
    * Adds glance-api.conf options for SSL support in
      registry client connections.
    * Adds SSL CA file socket wrappers via a client auth
      HTTPS connection class
    * Adds server SSL support, but not functional tests
      for SSL support yet. Still need to research self-signed
      cert generation for tests...
    * Updates documentation for bind and startup options
    * Adds functional test case for secure communication
      with API server stood up with SSL supprt. Note it is
      not very DRY. There is some DRY cleanup to do in the
      future...
    
    TODO: Integrate options with bin/glance CLI tool
    
    Change-Id: Ie9fcd36337cc93fd5beeabb9186ad5e93ae2a0f0

commit e2555e1665a8d12d2699928a692d1ef62ae41ed6
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Oct 11 12:57:40 2011 -0400

    Increases test coverage for the common utils
    
    Adds test case for the isotime stuff and removes
    unused legacy utility functions
    
    Change-Id: I6fa2bb6e2699b1050039fa03d1c0a5ecbd651d73

commit 53db059772d8c89facd17970fc967ef2fa1866c5
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Oct 10 13:44:22 2011 -0400

    Refactoring/cleanup around our exception handling
    
    Fixes LP Bug #820643 - import_class() does not
    report original exception.
    
    * Makes ALL exceptions now use base exception class
    * Removes unused exception classes from Nova
    * Removes unused code in glance.common.utils
    * Adds unit tests for bool_from_string and import_class
    
    Change-Id: If6775eb3ce85390bc5d579dff6c59c6066e77e9b

commit dc0e6151c08160c3bde3e633e70b638c69b6c330
Merge: a915076 ee6f91e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 10 15:52:37 2011 +0000

    Merge "Port Authors test to git."

commit ee6f91ed97a7d94febdf9e6cd985a4c225be06b8
Author: Monty Taylor <mordred@inaugust.com>
Date:   Fri Sep 23 17:43:46 2011 -0400

    Port Authors test to git.
    
    Change-Id: I27bb6b3951422ad32e5e0225765b1056c5b3ffc5

commit a9150768884670fb8b15fd295d7a544e8b0127da
Merge: fe1f165 25e2ba4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 6 13:16:46 2011 +0000

    Merge "Fixes LP Bug#860862 - Security creds still shown"

commit fe1f1650a25acb3cf0a5654e32326d6a2fb02e22
Merge: 4230051 7c4d935
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Oct 1 17:50:21 2011 +0000

    Merge "Refactoring registry api controllers"

commit 42300518eab9982596a5eb774cf65a2d04e00395
Author: Josh Durgin <josh.durgin@dreamhost.com>
Date:   Thu Sep 22 13:02:03 2011 -0700

    Add RBD store backend.
    
    To use this you'll need the latest version of Ceph from git,
    which will become version 0.37.
    
    Change-Id: Ia2126395525759eb8c11df055bdc6f286dea97b9

commit 25e2ba4e6a60956cfd7f8ca9457698fd0f4d3747
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Thu Sep 29 16:00:44 2011 -0400

    Fixes LP Bug#860862 - Security creds still shown
    
    This removes the X-Image-Meta-Location entirely from
    GET /images/<ID> and HEAD /images/<ID>
    
    Previous fix only removed from GET /images and GET /images/detail.
    
    Doh.
    
    Change-Id: Ib6c124e196688a77a3a0090bf9174a1daffb78bb

commit e068296d6d39059ea1505e8ca5e9b86432c5228e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Sep 28 16:51:30 2011 -0400

    Extract image members into new Glance API controller
    
    Replacing method names with more common controller actions and simplifying the API router. Also refactors how members.py
    imports and uses webob.exc.
    
    Change-Id: I975b2095980cfc56408fa76b47cf830cdd650ff2

commit 7c4d93502697c03d244a57f47cc90a8db6408df1
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Sep 29 10:01:46 2011 -0400

    Refactoring registry api controllers
    
    Break up images and members controllers in the registry api and restructure it to be more like the glance api. This is
    in preparation for the future split.
    
    Change-Id: I81e6c74815cf15adebb526b31614fd2e63982c3d

commit 47c03a348031d25fafd56ed3c74c5376f21b1cf0
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Sep 27 15:43:33 2011 -0400

    Returning functionality of s3 backend to stream remote images
    
    Fixes bug 860872. Also refactoring swift remote image tests to pull location data from registry now that it is unavailable from the main
    api.
    
    (Update) Fixed minor feedback for Waldon from Vek.
    
    Change-Id: I159958da8ed4187da2e22392fe341042eedfd056

commit 634e6932a39bce348594aba1607ba4603ae5f382
Merge: 2b43f89 4847ceb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 27 13:59:48 2011 +0000

    Merge "Make remote swift image streaming functional"

commit 4847ceb59fe35481fd42ddc9369b7d3814eca721
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Sep 26 17:37:45 2011 -0400

    Make remote swift image streaming functional
    
    Fixes lp 850425
    
    Change-Id: I117d45f7d5b1991296736b7915857e8764aad30d

commit 2b43f89e2cb7e0d89b9f2a957b4ae25c2cb496d7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Sep 26 16:57:59 2011 -0400

    Improving swfit store uri construction
    
    Fixing bug 860010
    
    Change-Id: I1b414fafb492f3cafd5a1e857d55e8a8d3fa9a8a

commit 1bb0600efb444fa4d8a27e876a8c002324746c1e
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Fri Sep 23 17:28:50 2011 -0400

    Fixes LP Bug #850685
    
    Handle 300 Multiple Choices gracefully in client
    
    This patch adds a new exception MultipleChoices that
    is now raised when the client encounters a 300 from the
    server, with a helpful error message indicating the likely
    cause is that the caller has forgotten to include a version
    string in the request URI.
    
    Change-Id: I3ccc2686bea30a770751fde605c78a3b7c5930b6

commit c81ebbcc5a985857e6c86c4b068c15585ddcad80
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Fri Sep 23 16:30:01 2011 -0400

    Do not allow min_ram or min_disk properties to be NULL and if they are None, make sure to default to 0. Fixes bug 857711
    
    Change-Id: I0660b39b19a219e7999468839c0672e0c4911d88

commit 8805302edb452d0d57f49634bcb2a716e42590cd
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Sep 7 14:12:05 2011 -0400

    Implementing changes-since param in api & registry
    
    Change-Id: I1d462b555f20ae6b28968b257cc5c22de65276e7

commit e7d06e409e9cd3fbd92c50d7eb32682fe3a7df23
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Sep 20 18:06:48 2011 -0500

    Documenting nova_to_os_env.sh tool
    
    Change-Id: I4a416e01e4333b43a75944ace01e8b0abe3ec2a3

commit 20b7c6975872bfa157f760e6fbe15c135cdd36e6
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue Sep 20 14:24:50 2011 -0400

    Added min_disk and min_ram properties to images
    Fixes LP Bug#849368
    
    Change-Id: I3e17370537144d117d99af5fa5a21df830b7c7ed

commit ec4af4bea756574fc5d834d4bb079fc856961d55
Merge: e7ec4a1 ef19685
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 19 20:27:15 2011 +0000

    Merge "Fixing bug 794582 - Now able to stream http(s) images"

commit ef196858801d64cef7b0ef0789e01526718bc3ce
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Sep 15 17:30:08 2011 -0400

    Fixing bug 794582 - Now able to stream http(s) images
    
    Change-Id: Ic04dfe32acc21ff068ef0964541c47eee41fbe3b

commit e7ec4a1d02d30999c437e41735ac491dc1376965
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Sep 19 14:42:11 2011 -0400

    Fixes LP Bug#755916 - Location field shows creds
    
    Removes the Location field from the return of the
    API server's GET /images/detail and GET /images/<ID>
    calls. The Registry server API was unchanged, as the API
    server needs to call the Registry server in order to
    find location information...
    
    Change-Id: I914456ad3879f19fa0b55c8a89b8217c193193d8

commit 6c60376f9d2140c5a397e6fca7ab4c6ce7b91fc9
Merge: 5f14075 7ce40a7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 19 15:06:22 2011 +0000

    Merge "Fixes LP Bug #804429"

commit 5f14075081a3b9789a82df3d074b28d72041788b
Merge: f45db5e 4b5e795
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Sep 17 21:45:58 2011 +0000

    Merge "Fixes LP Bug #833285"

commit 7ce40a7486b23a400dca4112c6ab36658912dcef
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Fri Sep 16 14:48:03 2011 -0400

    Fixes LP Bug #804429
    
    The try: finally: block which called conn.close() in the
    http store driver was flawed and the connection was not
    being properly released. This changes the
    http_response_iterator generator to accept the HTTP connection
    and close it on final yield.
    
    Change-Id: I545a7f5c93ccd196a99b50e8464778e075b549d8

commit f45db5e754cd30461f47fe1b65f8cf3681d05874
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Thu Sep 15 18:49:40 2011 -0400

    Fixes Bug #851216
    
    Fixes a recurring issue with tests that were
    decorated with the @runs_sql decorator where the
    file-based SQLite registry database used in those
    tests was not being properly cleaned up, which was causing
    some random-looking failures when python setup.py test was
    run for the DEB builders on Jenkins.
    
    According to Monty, files needed in testing do indeed need
    to be in MANIFEST.in, so I added the test_migrations.conf
    file to that. Sorry, BrianW!
    
    Change-Id: I6535b999921d159de5d957f6b70df3c13310e449

commit 4b5e795e085dd2ade9d2b8e93a0572878397d826
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Thu Sep 15 22:01:29 2011 -0400

    Fixes LP Bug #833285
    
    Large objects, uploaded to Swift using the large object
    manifest method, are uploaded in chunks/segments in the
    Swift store driver.
    
    Unfortunately, doing a DELETE on the object only deletes
    the manifest, leaving the chunks/segments orphaned. This
    patch makes the Swift store driver check for the existence
    of an object manifest, and if found, deletes all intermediate
    chunks, then deletes the object manifest itself.
    
    Adds a functional test to check the segments are actually
    deleted.
    
    Change-Id: Ib5787581a57e419393faca198d867db757fc03b3

commit 7268f2c991c8fab2064d6927898866fb62dee699
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Thu Sep 15 11:44:52 2011 -0400

    Fixes bug 851016.
    
    Fixed test_migrations.py so that it runs migrations again. It will also now fail if test_migrations.conf cannot be found.
    
    Change-Id: I669cc1dda1dc247dc86c6e271b00d296f8445a15

commit 70a5e9c3e199fd860a0fe0345d91945631840410
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Sep 14 17:14:39 2011 -0400

    Fix keystone paste config for functional tests
    
    Change-Id: I67685911ae087e245b3622cde890263a14e875a1

commit 6396b78efcd49aa46c7d7206669123d23c07957c
Merge: 3cb7b9b 27b3df2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 13 18:02:01 2011 +0000

    Merge "* Scrubber now uses registry client to communicate with registry * glance-api writes out to a scrubber "queue" dir on delete * Scrubber determines images to deleted from "queue" dir not db"

commit 3cb7b9b5a261ccc16bcd5b464114d957fda57f4e
Merge: d5099cc ee8c8ba
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 13 16:11:10 2011 +0000

    Merge "Updating image status docs"

commit ee8c8ba8f532a7704a63f9b8572fe00942cdab19
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Sep 9 16:41:46 2011 -0400

    Updating image status docs
    
    Fixes lp bug#844932
    
    Change-Id: Iee4571a2ebdd295f4324e02cde65a96fb53aceb9

commit 27b3df281f8ce3a5fee7a32cd2cf4881b28ab819
Author: Jason Kölker <jason@koelker.net>
Date:   Tue Aug 16 12:38:12 2011 -0500

    * Scrubber now uses registry client to communicate with registry
    * glance-api writes out to a scrubber "queue" dir on delete
    * Scrubber determines images to deleted from "queue" dir not db
    
    Change-Id: Ia5574fc75f1a9c763bdef0f5773c2c182932b68a

commit d5099cca70e20588ffd35b77b24785698269d3c9
Merge: 9337103 6cfff16
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 12 23:08:10 2011 +0000

    Merge "Fixes LP Bug#845788"

commit 9337103675b502b18dc3f75e67e14a489e1ebcce
Merge: 3595cf7 be6d629
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 12 15:48:32 2011 +0000

    Merge "Adding Keystone support for Glance client."

commit 6cfff16f2dc22a870bfe3808a7895dfbbaa11369
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Fri Sep 9 13:03:19 2011 -0400

    Fixes LP Bug#845788
    
    glance.client.image_update needed to calculate size so that Glance's Swift
    driver can do chunking properly for large objects.
    
    Change-Id: Iafe8034a710cff53a0caa3ae5e9ee3a3adda19f8

commit 3595cf750085e966cc8f9a6f3d7f12a01341a7bf
Author: Thierry Carrez <thierry@openstack.org>
Date:   Thu Sep 8 20:49:28 2011 +0200

    Open Essex
    
    Switch version to 2012.1
    
    Change-Id: I7a484997bbd033f11256cacc19a5a19c416c7eeb

commit 136310e63884d5b4f042df8bf37f2bdc88c44114
Merge: 706a533 22d7864
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 8 16:06:44 2011 +0000

    Merge "Update paste config files with keystone examples. see ticket: lp839559"

commit 706a53396c7a6e7dc8fca9d48d23bd9fab31162a
Author: Adam Gandelman <adam.gandelman@canonical.com>
Date:   Mon Aug 29 14:36:10 2011 -0700

    Remove PWD from possible config_file_dirs.
    
    Resolves bug #828719, which can potentially cause problems depending on
    what $PWD commands are executed in.
    
    Amendment: Also update documentation accordingly.
    
    Change-Id: Ib2ec4bb07222e51c86b7d8f8ce1dd0e6bb342a64

commit 22d7864a41c2bc3178612b6ea879aaebd44b41df
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Sep 2 09:32:01 2011 -0400

    Update paste config files with keystone examples.
    see ticket: lp839559
    
    Change-Id: Ie5d5011a601962bcc79cf69ef8db11029fcb866e

commit be6d6294f9878f2f5ce37b5532d5afb9c6b03142
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Aug 26 22:25:49 2011 +0000

    Adding Keystone support for Glance client.
    
    Implements bp pluggable-auth
    
    Change-Id: I2a6e3b1ab4c50200ece64a2e07bf81e9e6467efd

commit 09ea2718a219b13ea9cd67bf80d8fe83b499e153
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 30 23:43:33 2011 -0400

    Fix cached-images API endpoint
    
    The recent chages that renamed 'id' to 'image_id' in the cached_images controller broke the API. This reverts a couple
    of those changes.
    
    Change-Id: I83345f87c7e5f1e35ef6646cb360819d489ec256

commit 3cd46135c9926684858b08f4583844b7dbab1ba7
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Aug 30 20:45:03 2011 -0500

    Bug fix lp:726864
    
    rename 'id' to 'image_id' to avoid conflict with builtin id function
    
    Change-Id: I79605275bf2607331f5b74076cb5689f071c92d5

commit b2381cc702efa4a70384be93f707774e46934451
Merge: 3b14923 d29d2fb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 30 21:48:11 2011 +0000

    Merge "Fixes Bug: lp825024"

commit d29d2fbea9bd8aa48d11cc3d999b1e4d4d1f1f8e
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Aug 29 20:24:53 2011 -0500

    Fixes Bug: lp825024
    
    Added 'size' to the unsupported_fields array in image_add().
    
    Added a test case to functional/test_misc.py that tests for this bug.
    
    Change-Id: Ib223b31656cd75de0b95a0186ea907f93b6c943e

commit 3b149234e725ce902728cea293e325b9eaa771b0
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Mon Aug 29 11:09:25 2011 -0500

    Add functional tests
    
    Adds functional tests to confirm the integration of Keystone with Glance.
    Also adds bug fixes for issues discovered while creating the functional
    tests.
    
    Change-Id: Ie20f8c93a10fbbe085b2ea39373897a058572775

commit ecbcc09ce5c337a84d8adf19f957529c4f76a075
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Thu Aug 25 12:20:51 2011 +0100

    Switch file based logging to WatchedFileHandler for logrotate
    
    Fixes lp:772397
    
    FileHandler opens the logfile at startup, keeps the stream open and
    continues to log to it forever.
    
    If logrotate decides to rotate the file, it will rename the original
    file and a new file is created with the same attributes as the original
    file.
    
    The problem is that the process is still writing to the original file,
    not the newly created file. Traditionally, system daemons respond to
    a SIGHUP by re-opening log files and logrotate can be configured to
    deliver this signal on rotation.
    
    However, python has an elegant solution. WatchedFileHandler monitors
    the inode for the specified log file name and, if that ever changes,
    it re-opens the stream.
    
    Nova already uses WatchedFileHandler to good effect. See:
    
      https://code.launchpad.net/~soren/nova/logrotate/+merge/50292
    
    Change-Id: I7f693f133d230d65d7c94ebf3a2ec0c8b362f993

commit 501b14bf94c7b24361a4bd424e4ada4c89df7753
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Aug 22 14:43:27 2011 -0400

    Fixes LP Bug #827660 - Swift driver fail 5G upload
    
    Fixes LP Bug #827660 - Swift driver fails to
    upload image files greater than 5GB. The swift
    store driver was not using the large object
    manifest methods required to upload objects
    greater than 5GB into Swift.
    
    Adds configuration options to specify the
    size in MB that an image file should be considered
    for large object manifest, and a configurable
    chunk size. We use a disk buffer of this size,
    adding chunks of the image file into Swift and
    then after all chunks are saved, add the manifest
    to Swift.
    
    Change-Id: I4b4421aa1bba584ab242016a041e864ef19d0214

commit bcc7ae3b73c5d953ef04494d118de8904a1a64c6
Merge: 57cbac0 40b98d3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 24 15:14:38 2011 +0000

    Merge "Bug lp:829064"

commit 40b98d32a0ed235cc01fe85b3f6498ad3fdd8d6a
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Aug 24 10:03:07 2011 -0500

    Bug lp:829064
    
    Removed the fetchfile() and execute() methods.. all tests are passing.
    
    Change-Id: If32dff06911e9224da2a31fbc53b92db1b7bb0ca

commit 57cbac057028537fca5af4ed8ffaea4be67e8c64
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Aug 24 09:29:58 2011 -0500

    Bug lp:829654
    
    Assert was not actually validating return data from api query.
    
    Change-Id: I2db2863c749bfabba201ae2d733330b7a71bef2d

commit 3554d5a755c267fbfee2185f666178e61b14ee49
Author: James E. Blair <jeblair@hp.com>
Date:   Tue Aug 23 07:53:25 2011 -0700

    Update rfc.sh to use 'true'.
    
    true is /usr/bin/true os OSX but is in the path
    on both GNU/Linux and OSX.
    
    Change-Id: Ic54b0eb965f87ddb26e8f18e4b317b6a2e90d8d3

commit 9d005656a222bb7031e5ba85baad7b7ba9007c96
Merge: a5f4f89 b339983
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 23 02:58:45 2011 +0000

    Merge "Add rfc.sh for git review."

commit a5f4f89d8432570a770627e0179437d6a38db754
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Sun Aug 21 22:20:33 2011 -0500

    Addresses glance/+spec/i18n
    
    Added gettext wrappers on logger and exception strings.
    
    Change-Id: Ia16fd6452dda4835662fe07d2acdc7b510715fcd

commit 748a8f98dda9b15f54951db110058f1b845c8bff
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Thu Aug 18 22:15:42 2011 -0500

    Addresses glance/+spec/i18n
    
    Added gettext wrappers on logger and exception strings.
    
    Change-Id: Ia17689a0f176af1605bb9e8ea5a95f813d231181

commit b339983ecd1868dcf3c02f74c78d240dd29decbf
Author: James E. Blair <jeblair@hp.com>
Date:   Fri Aug 19 12:00:42 2011 -0700

    Add rfc.sh for git review.
    
    Adding tools/rfc.sh which facilitates an easier git/gerrit workflow
    described at http://wiki.openstack.org/GerritWorkflow
    
    Adding it to the repository is a pre-requisite, instructions on how
    to start using it will be sent to the mailing list soon.
    
    Change-Id: I4086b7c1a9fce4283a196f3aeb00be90c30f0e2a

commit 4fa35070cea6edf6d4f8477cd462ffbc6a2b0b4f
Merge: 091aae8 1e4be06
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 15 21:37:40 2011 +0000

    Merge "Add support for shared images"

commit 1e4be06cb21277c9be2687678e432b3033b7b718
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Mon Aug 15 16:20:49 2011 -0500

    Add support for shared images
    
    Change-Id: I3822a3841e1c10717c180052f929688b9f21a841

commit 091aae8a6ddbe0bbe31df3ead927248496c363c6
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Fri Jul 22 15:43:44 2011 +0000

    Add notifications for uploads, updates and deletes
    
    Change-Id: I372f77fe2d1a575f2108c9b8d1f69301c0d5eb5e

commit 78c718a9f5a7ef80ead51f2a277d230ce4796753
Merge: 7f058d7 2b4369a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 15 17:00:37 2011 +0000

    Merge "Bug Fix lp:825493"

commit 2b4369a26ecefa3ef12c3b3cbfc8f3798e9fc126
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Aug 12 17:32:32 2011 -0500

    Bug Fix lp:825493
    
    Added gettext support in glance/common/client.py
    
    Change-Id: I6933cae26646050de1ef7b05724d1c77fa88b2cf

commit 7f058d7c50b65c5485a27403e460643ca09a460e
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Sat Aug 13 14:07:38 2011 -0500

    Bug fix lp:824706
    
    Added gettext support in glance/tests/__init__.py
    
    Change-Id: I1c52e4e98fc3b24ff077ae1cda880aebc7b5ea00

commit c451de83b9e279745e47024a4d60677353a0052e
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Aug 11 20:15:33 2011 +0000

    Adds syslog support
    
    Change-Id: I05ef04c77b68f0c68d86ae49a5fee68c2f86c80a

commit 388f2919147e9350fff75f68876693e473c9dbfe
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Aug 11 18:43:23 2011 +0000

    Fixes image cache enabled config
    
    Change-Id: I3081968436d877c584b292dfb9e2b3ed48fadeb9

commit ef9c7cb8f8870a7bdb978fe1a9b045366e91053d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Aug 10 14:31:49 2011 -0500

    Improves logging by including traceback
    
    Also tests webob body handling functionally.
    
    Change-Id: Ib734acd1f23a461e91b262a29e894beb47e19c8b

commit 65538040bbff5879b2acdff61bf7aa2872780f06
Merge: b00b637 8a33e24
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 10 15:35:36 2011 +0000

    Merge "Addresses glance/+spec/i18n"

commit 8a33e24311ee8844d2250b78d3c6caf15a3a4d75
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Sat Aug 6 12:28:27 2011 -0500

    Addresses glance/+spec/i18n
    
    Added gettext.install to glance endpoints, setup.py, and run_tests.py. Wrapped all exceptions in common/exception.py with gettext.
    
    Included fix for bug lp:823676.
    
    Change-Id: Ied4381e1676227afea857acd01f4754e6a181106

commit b00b6373e34109b73d72f6e6229f4f2f595b8af4
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 9 14:46:30 2011 -0400

    casting image_id to int in db api to prevent false matching in database lookups
    
    Change-Id: Ibcb79f0e27840dc5ec9ad18e497714f85e47f6fe

commit 934b30c04baea39d7ecb3d445166d5ec76f45cb3
Merge: c951c8b 0a5fbb4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 9 18:26:58 2011 +0000

    Merge changes Id20d6b1d,Ib0272500
    
    * changes:
      Removes faked out datastore entirely, allowing the DB API to be unit tested.
      Consolidates the functional API test cases into /glance/tests/functional/test_api.py, adds a new Swift functional test case, verified that it works on Cloud Files with a test account.

commit c951c8b51500aa74e76ab249c45092046b6fa462
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Aug 9 09:58:01 2011 -0500

    Addresses Bug lp:781410
    
    Currently API throws a 500 error if it attempts to return an image
    that has been removed from the filesystem but still lives in the DB.
    Fixes it so the API now throws a 404 error when this happens.
    
    Change-Id: I8fcf53de7760d462b5f938c71cb29ee837d172af

commit 0a5fbb4cb4f881b9d719a18eec20bd5245803764
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Aug 8 20:16:32 2011 -0400

    Removes faked out datastore entirely, allowing the
    DB API to be unit tested.
    
    Change-Id: Id20d6b1d84e2a3e0cd15d8fce2d9df37f51c5dbc

commit 2105d4efa7288c23d89a48fd584aa0853254f19b
Merge: 6cc1a15 72e2e31
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 8 21:06:42 2011 +0000

    Merge "Add @skip_if_disabled decorator to test.utils and integrate it into the base functional API test case. The S3 functional test case now uses test_api.TestApi as its base class and the setUp() method sets the disabled and disabled_message attributes that the @skip_if_disabled decorator uses."

commit c42faa9e3359bcbf988c345349f311f78e8371e1
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Aug 8 16:59:36 2011 -0400

    Consolidates the functional API test cases into
    /glance/tests/functional/test_api.py, adds a new
    Swift functional test case, verified that it works
    on Cloud Files with a test account.
    
    Change-Id: Ib0272500134e89d22d01240c3eabe632cb178b0d

commit 6cc1a157f9f840dceead43afb93481b1de45b101
Merge: de78df9 faebdec
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 8 18:36:56 2011 +0000

    Merge "breaking up MAX_ITEM_LIMIT and making the new values configurable"

commit faebdec11b4dc50e83645ad22719fb715ef36796
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Aug 5 13:14:46 2011 -0400

    breaking up MAX_ITEM_LIMIT and making the new values configurable
    
    Change-Id: I6655c50a871c75e748106884aa8ab5f1ebe274a3

commit 72e2e31fea41bc3c16083cce6abea51c028f259c
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Aug 8 12:56:30 2011 -0400

    Add @skip_if_disabled decorator to test.utils and integrate
    it into the base functional API test case. The S3 functional
    test case now uses test_api.TestApi as its base class and
    the setUp() method sets the disabled and disabled_message
    attributes that the @skip_if_disabled decorator uses.
    
    The S3 test case now tests all the methods that are tested
    for the filesystem store driver in test_api.TestApi
    
    Removed the test.functional.test_s3.conf file as it was no
    longer needed.
    
    Change-Id: I308d7a655c8c26339d0e2560634421935bbc8b5d

commit de78df90209753a0eec154eb93fb51a936f07935
Merge: 070afb6 853c3ec
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 5 20:37:41 2011 +0000

    Merge "Detect python version in install_venv"

commit 070afb604edd23d13e120bb376cc40d33a3595c6
Merge: 22c3e41 09a67e4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 5 17:02:10 2011 +0000

    Merge "Adds swift_enable_snet config"

commit 09a67e4fb4e5c73cfa01451a7460a8c12d6f64da
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Aug 4 17:12:01 2011 -0500

    Adds swift_enable_snet config
    
    Change-Id: I7b798e2b4256a1b6c4694f0d126d2fa4604c95aa

commit 22c3e412cdf08052d40876304ac3c4c0a31a6b96
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Aug 5 09:41:36 2011 -0500

    Fixes bug lp:821296
    
    Fixed exclude-dir to point to glance/tests/functional, now --unittests-only runs properly.
    
    Change-Id: I237225fb49f1f4a284682768e888a2e03585cdf9

commit 853c3ec5952607417fe53acd94004b68643c45a4
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Aug 5 01:16:00 2011 -0500

    Detect python version in install_venv
    
    Change-Id: I091fff876e959c55f7adeeb16d70cb5f5d68d789

commit 6ce80816fa61324ba430790eaf8c499b7924898b
Merge: 8f5bd2d 486deea
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 4 18:45:04 2011 +0000

    Merge "Implemented @utils.skip_test, @utils.skip_unless and @utils.skip_if functionality in glance/test/utils.py. Added glance/tests/unit/test_skip_examples.py which contains example skip case usages."

commit 486deeabd695bfd06a2aaf3c047e7206cd39f61f
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Thu Aug 4 11:00:00 2011 -0500

    Implemented @utils.skip_test, @utils.skip_unless and @utils.skip_if functionality in glance/test/utils.py. Added glance/tests/unit/test_skip_examples.py which contains example skip case usages.
    
    Fixed issue where ./run_tests.sh would not execute pep8. Fixed couple of pep8 violations in test_skip_examples.py
    
    Change-Id: Id6eaa8768b663b4638fbca0e3bdf72b74969150a

commit 8f5bd2dc1cc09559270eb877140231be64181b6e
Author: Monty Taylor <mordred@inaugust.com>
Date:   Thu Aug 4 08:51:04 2011 -0700

    Changed setup.py to pull version info from git.
    
    Change-Id: Ifdbdd6b587f5e4d0c255d4ed683bc81aeb8d95e4

commit 3aa1701e076db88c445518ef8176f7151b5df5c3
Merge: 2d4f267 54d233d
Author: jaypipes@gmail.com <>
Date:   Wed Aug 3 21:13:09 2011 +0000

    Removes the call to webob.Request.make_body_seekable() in the
    general images controller to prevent the image from being copied
    into memory. In the S3 controller, which needs a seekable file-like
    object when calling boto.s3.Key.set_contents_from_file(), we work
    around this by writing chunks of the request body to a tempfile on
    the API node, then stream this tempfile to S3.

commit 54d233db4fbfb3e969e393620adfe235f77a54cb
Author: jaypipes@gmail.com <>
Date:   Wed Aug 3 14:50:45 2011 -0400

    Make sure we're passing the temporary file in a read-mode file descriptor to S3

commit 8a0378fab0b8f8583d3e9d5b316420894b4ef3bf
Author: jaypipes@gmail.com <>
Date:   Wed Aug 3 14:05:23 2011 -0400

    Removes the call to webob.Request.make_body_seekable() in the
    general images controller to prevent the image from being copied
    into memory. In the S3 controller, which needs a seekable file-like
    object when calling boto.s3.Key.set_contents_from_file(), we work
    around this by writing chunks of the request body to a tempfile on
    the API node, then stream this tempfile to S3.

commit 2d4f26798a8948a86cedc6366488269144b50d3b
Merge: 2135402 d0ddbbc
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 3 04:33:04 2011 +0000

    - removed curl api functional tests
    - moved httplib2 api functional tests to tests/functional/test_api.py

commit d0ddbbc74291e88f53f7719ddf01a8f8a9f49b44
Merge: 5682ec0 2135402
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 3 00:15:22 2011 -0400

    merging trunk

commit 213540224f3a9757cf02053aad335326fa36fc8a
Merge: e2d6afd 327f752
Author: Soren Hansen <soren.hansen@rackspace.com>
Date:   Wed Aug 3 03:48:17 2011 +0000

    Make tests a package under glance.

commit 5682ec0b888743cd4008d7f5c75d1f78353bdd54
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 2 23:27:01 2011 -0400

    removing curl tests and moving httplib2 tests

commit 327f7525c067722a5e822e421120cdf283418e06
Author: Soren Hansen <soren.hansen@rackspace.com>
Date:   Wed Aug 3 00:10:52 2011 +0200

    Move tests under the glance namespace.

commit e2d6afd54df70a1290c6746a1b6e45e7f11374f1
Merge: 99b8a56 0ae7a33
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 2 21:23:37 2011 +0000

    Add filter support to bin/glance index and details calls

commit 0ae7a333a71167bad053eed9c4c877bca3f0cdf5
Merge: 336ec70 99b8a56
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 2 17:10:33 2011 -0400

    merging trunk

commit 99b8a562592d8c0a9daa4080d5b1345ef8f76d8f
Merge: 4a041b8 64a2192
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 2 18:38:20 2011 +0000

    Update registry db api to properly handle pagination through sorted results.

commit 4a041b8d6281238d9fd291bc98731fb09c7fa949
Merge: 22305dc 6cf9643
Author: jaypipes@gmail.com <>
Date:   Tue Aug 2 18:03:22 2011 +0000

    Our code doesn't work with python-xattr 0.5.0, and that's the version installed in RH/Centos :( Andrey has updated the RPM config to specify 0.6.0, and this does the same to pip-requires.

commit 22305dc6ceda437173dd274286bbc43e08f4feb7
Merge: 6a8ac4b 8c8bc7e
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Aug 2 17:43:16 2011 +0000

    Replaced occurances of |str(e)| with |"%s" % e|.
    
    Except in bin/glance, where |unicode(e).split('\n')| makes more sense than |("%s" % e).split('\n')|

commit 6a8ac4b5120b78948826fea1b8654ba30f109f00
Merge: f52191b fe86dfe
Author: jaypipes@gmail.com <>
Date:   Tue Aug 2 17:38:19 2011 +0000

    First round of refactoring on stores.
    
    Refactors stores to be stateful:
    
    * Creates a new base Store class
    * Adds code for new Store modules to "register" with Glance
      and ensure that when the Controller(s) are spun up, that
      the stateful store objects are all created properly and passed
      configuration options. This allows us to refactor a bunch of code
      out of the various store adapters that is constantly re-checking
      configuration option values during each call to get/add/delete, etc
    * Removes the now-unnecessary repetitve option-checking code in the
      Swift, S3, and filesystem drivers

commit fe86dfe1d38cc5f76493c00d32751c0924a74d8e
Author: jaypipes@gmail.com <>
Date:   Tue Aug 2 11:43:05 2011 -0400

    Remove expected_size stuff

commit 3fae488716207694a7dc185c1ceb34be40ecb351
Author: jaypipes@gmail.com <>
Date:   Tue Aug 2 11:12:34 2011 -0400

    Make calling delete on a store that doesn't support it raise an exception, clean up stubout of HTTP store and testing of http store

commit 336ec70c6708f6e029a137191084cca1766ff7b4
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 20:23:06 2011 -0400

    adding sort_key/sort_dir to details

commit e7b96f4dd3893c40f104e5019bdf3ad8e55772e8
Merge: 94361e0 64a2192
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 20:01:20 2011 -0400

    merging lp:~rackspace-titan/glance/registry-marker-lp819551

commit 94361e037f7766fa5232dc93f83e3ae7c74fc085
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 19:59:55 2011 -0400

    adding sort_key/sort_dir params

commit 64a2192ae9a6d183a9500193d754ede13f6c762d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 19:44:33 2011 -0400

    adding --fixes

commit 7b62744cf6d5ba595b7279f66e41d63f10c91cae
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 19:42:50 2011 -0400

    adding complex test cases to recreate bug; updating db api to respect marker

commit 32cca0a25e9f678be9fd03dec3549b587b7cccc5
Author: jaypipes@gmail.com <>
Date:   Mon Aug 1 18:30:23 2011 -0400

    Add configuration check for Filesystem store on configure(), not every call to add()

commit c437a2a2aca81603cac4dc8e10637819fe67e984
Author: jaypipes@gmail.com <>
Date:   Mon Aug 1 18:10:31 2011 -0400

    Refactor S3 store to make configuration one-time at init versus every method call invocation

commit 6d63d1a38425c0bfceff751a606d2a1d55bfd998
Author: jaypipes@gmail.com <>
Date:   Mon Aug 1 17:32:06 2011 -0400

    Refactor Swift store to make configuration one-time at init versus every method call invocation

commit 742219216a9242fb9253e6d8af0928c23f109d0f
Author: jaypipes@gmail.com <>
Date:   Mon Aug 1 14:33:50 2011 -0400

    Forgot to add a new file...

commit 635a220e23fc2330c71f5df0aab9337e8c74e4a4
Author: jaypipes@gmail.com <>
Date:   Mon Aug 1 14:24:25 2011 -0400

      Refactors stores to be stateful:
    
        * Creates a new base Store class
        * Adds code for new Store modules to "register" with Glance
        and ensure that when the Controller(s) are spun up, that
        the stateful store objects are all created properly and passed
        configuration options. This allows us to refactor a bunch of code
        out of the various store adapters that is constantly re-checking
        configuration option values during each call to get/add/delete, etc
    
        Work TODO:
    
        * Remove the now-unnecessary repetitve option-checking code in the
          Swift, S3, and filesystem drivers

commit 6cf96437ef3745d9d64a2985189408543c91588e
Author: jaypipes@gmail.com <>
Date:   Mon Aug 1 11:42:58 2011 -0400

    Make sure xattr>=0.6.0 in pip-requires

commit 06b9130cdb0cb9fa34636e4e615d713b32c2b429
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 04:18:09 2011 -0400

    updating documentation

commit d4eaab15c1da6e17d10fc2b9d6499d72e9d6cd6e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 04:07:59 2011 -0400

    making limit option an integer

commit d51e2a0c75ddfa0e8daa5d1f02163fbf5fd1d369
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 03:59:50 2011 -0400

    updating broken tests

commit 0afa19d9d0588af7b46ce717108f316a227c68f6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 03:47:03 2011 -0400

    adding limit/marker to bin/glance details call

commit 30356837df158b2c46227b458de99df7c93eac5b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 03:26:22 2011 -0400

    adding limit/marker params to bin/glance index

commit 328f978a0f76a936dd0b12e27fd4d903793f9057
Merge: b9b980c f52191b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 02:29:09 2011 -0400

    merging trunk

commit f52191b09f0a74a7435cb3bc2734f8ff2ba54a3c
Merge: caa6dc1 857f2d6
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Sun Jul 31 16:15:29 2011 +0000

    Use of "%default" in help string does not work, have to use "%(default)s". Per the 4th example http://docs.python.org/dev/library/argparse.html#prog

commit caa6dc1637682fd8c8b8134b37ef8f24ce8a9aec
Merge: c21e554 ae980ab
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Sun Jul 31 16:13:47 2011 +0000

    Added nose-exclude to pip-requires.
    
    './run_tests.sh --unittests-only' adds '--exclude-dir=tests/functional' to noseargs.

commit ae980abbb671493d469eccbd0c28c21fb801a58f
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Sat Jul 30 00:12:44 2011 -0500

    Installed nose-exclude, ./run_tests.sh --unittests-only add '--exclude-dir=tests/functional' to NOSEARGS

commit 857f2d6824f7f471abfd2100116b32140616735a
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jul 29 23:30:35 2011 -0500

    This one has been bugging me for a while, finally found out how to use the local default variable in the help string.

commit 8c8bc7e53894824f3fabdd67e759d58497bc3233
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jul 29 22:28:42 2011 -0500

    adding --fixes to commit

commit 0c08a0404f872f66c1e8611d4ecdb62b19a9bcd1
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jul 29 22:26:00 2011 -0500

    Replaced occurances of |str(e)| with |"%s" % e|.
    
    Except in bin/glance, becaue |unicode(e).split('\n')| is prettier than |("%s" % e).split('\n')|

commit c21e55493267bfa3a7dc6365b833a8015bde5129
Merge: 59872c4 9b95371
Author: jaypipes@gmail.com <>
Date:   Fri Jul 29 18:58:58 2011 +0000

    Completes the S3 storage backend. The original code did not actually fit
    the API from boto it turned out, and the stubs that were in the unit test
    were hiding this fact.
    
    Adds a unit test that gets S3 testing up to snuff with the Swift backend.

commit 9b953715df2349344c53c9d23a4876ee387d09ac
Author: jaypipes@gmail.com <>
Date:   Fri Jul 29 14:45:36 2011 -0400

    Fix for boto1.9b issue 540 (http://code.google.com/p/boto/issues/detail?id=540)

commit ba7cd33d4705cb880c9bf1525fe227624a277fa9
Merge: 38cc809 59872c4
Author: jaypipes@gmail.com <>
Date:   Fri Jul 29 14:02:03 2011 -0400

    Merge trunk

commit 59872c45ca19657318d46b2dfb70c13af4ad44c3
Merge: df68907 4e79f47
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Fri Jul 29 16:13:48 2011 +0000

    Remove unnecessary hashlib entry in pip-requires.
    
    Glance currently requires at least Python 2.5 (and actually 2.6 because of inconsistent use of with_statement) which includes hashlib as part of the standard library.

commit 4e79f47b413db1bcc6610c525d509a2cf91c891d
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Fri Jul 29 16:02:46 2011 +0000

    Add myself to Authors (again)

commit 78e3738bba1f9733d08e9046e8b06f24f3bbdcfb
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Fri Jul 29 15:31:43 2011 +0000

    hashlib exists all of the way back to python 2.5, there's no need to install
    an additional copy

commit 38cc809bb85ef905f45223396f9fbfe017afee08
Merge: d962ee0 df68907
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 19:01:40 2011 -0400

    Merge latest trunk

commit df689073566cc35276aafffc33623248527a5dc4
Merge: 2bd5283 a4f4d61
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 28 22:23:49 2011 +0000

    Adds image_cache_enabled config needed to enable/disable the image-cache in the glance-api.

commit 2bd5283a806e9dfca5e82d056c741b0d2bf9ecf7
Merge: 5ba923d a4fe58e
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 18:43:52 2011 +0000

    Add more unit tests for URI parsing and get_backend_class() (which is going away in refactor-stores branch, but oh well..)
    
    Now raising exception.BadStoreUri if glance.store.location.StoreLocation.parse_uri() is passed any URI that looks like this:
    
    swift://user:pass@http://authurl.com/v1/container/obj

commit a4fe58efec5c5f4da2ad59d7923ff3343c645d46
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 13:04:20 2011 -0400

    Added unit tests for swift_auth_url @property. It was broken. startwith('swift+http') matches swift+https first

commit 5ba923de665b54cca5757dfaaf0b41de2cb4dacb
Merge: 61f98ad 73a5d8e
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 28 16:08:47 2011 +0000

    Don't tee into the cache if that image is already being written.

commit d962ee01c993dc2946d8d313ccbb0f6adcd74eb6
Merge: dfc71f4 61f98ad
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 11:42:45 2011 -0400

    Merge trunk

commit 70b938937712f97017356f350ec14349ec4e8bb7
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 11:40:04 2011 -0400

    Re-add else: raise

commit a889225b527482fda639cb04a3c1ac2c0b5c5fb5
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 10:02:57 2011 -0400

    Final fixes merging Rick's swift_auth_url @property with previous URI parsing fixes that were in the S3 bug branch...

commit 44e3f009b161e47c4709bf3d5f8fdc01e1e7b804
Merge: 2253475 61f98ad
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 09:44:13 2011 -0400

    merge trunk

commit 61f98adf14605e59ce924dfbaa61e653b8fe1289
Merge: f8a1d0b 23a1457
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Jul 28 13:38:51 2011 +0000

    This updates the pep8 version in pip-requires and updates run_tests.sh to provide a '-p' option that allows for just pep8 to be run.

commit a4f4d6157c4ce1e273d4dc0eafdbe8fb027e1bda
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 27 19:50:04 2011 -0500

    Adding back image_cache_enabled config option for glance-api

commit 73a5d8e7a4f3f74d00dde5a6f05f8f12164ea402
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 27 19:44:29 2011 -0500

    Don't tee same image into cache multiple times

commit f8a1d0b9ba83d4c5b85a2cf7732540bbc88350d2
Merge: 65f49e2 64012c6
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 27 21:48:53 2011 +0000

    Fixes two things:
    
    * Swift client library requires scheme to be specified
    * Don't swallow exceptions on object get

commit 23a1457db90dfc2c6cb4bcb6e5a77b797ea6c7e6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jul 27 17:06:01 2011 -0400

    adding run_tests.sh -p

commit 64012c6e33e32c70370c389fc5a04c3b45f4f370
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 27 16:01:19 2011 -0500

    PEP8 whitespace fix

commit 663c8d958efcda0b84b9f7741d50476e04baff86
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 27 14:28:14 2011 -0500

    Swift client library needs scheme

commit 225347561ad0086f7faa2a6a3381501df1c75d6c
Author: jaypipes@gmail.com <>
Date:   Wed Jul 27 14:17:59 2011 -0400

    Add tests for bad schemes passed to get_backend_class()

commit 6e60538095c98854f45dc8fbef244d18f4ad479f
Author: jaypipes@gmail.com <>
Date:   Wed Jul 27 14:15:47 2011 -0400

    Add tests for bad URI parsing and get_backend_class()

commit 65f49e266c4eead5053cc75b0584bdcf61c21d33
Merge: 78ff123 4e0eb7a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jul 27 15:18:48 2011 +0000

    Include missing bin/glance-scrubber in tarball

commit 4e0eb7a70fe954bc38b7ebd1a497bc06a6bd3ce6
Author: Thierry Carrez <thierry@openstack.org>
Date:   Wed Jul 27 14:56:08 2011 +0200

    Include bin/glance-scrubber in tarball binaries

commit 78ff123b51c16097e1c1115162ba906d2df2cbe9
Merge: 400815c 5440497
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Tue Jul 26 17:03:56 2011 +0000

    One more auth_tok-related change, to make it easier for nova to use the client without violating any abstraction boundaries.

commit 400815cc4eea02ea1646326d3ab2383bd15d0b12
Merge: 29b3267 4b88b6b
Author: Jason Koelker <jason@koelker.net>
Date:   Tue Jul 26 16:18:47 2011 +0000

    Add fix for Bug #816386. Wait up to 5 min for the image to be deleted, but at least 15 seconds.

commit 4b88b6b9e462e9db513c794ce85e58a6b5bfeec5
Author: Jason Koelker <jason@koelker.net>
Date:   Tue Jul 26 09:59:22 2011 -0500

    remove superfluous if statement

commit b0f71e9c3929c7c874e13000b5e336851c039f12
Author: Jason Koelker <jason@koelker.net>
Date:   Tue Jul 26 09:55:02 2011 -0500

    Loop up to 5 min checking for when the scrubber deletes

commit dfc71f44f2441f06914faa0dabf689cc1ac01d0b
Merge: 0423d63 29b3267
Author: jaypipes@gmail.com <>
Date:   Tue Jul 26 10:26:19 2011 -0400

    Typo in error condition for create_bucket_on_put, make body seekable in req object, and remove +glance from docs and configs

commit 0423d6365634af9a2c992e639f8825beb17ece54
Author: jaypipes@gmail.com <>
Date:   Tue Jul 26 08:36:14 2011 -0400

    Add functional test case for checking delete and get of non-existing image

commit f92adbf05faa549fffb4474b54f551dec56e2d3e
Merge: 88062fe e0b57a7
Author: Jason Kölker <jason@koelker.net>
Date:   Tue Jul 26 10:29:16 2011 +0000

    Merge diablo-3 development from trunk (rev160)

commit e0b57a73a3c3ed4172561d37623bac5eac5f146e
Merge: 88062fe 29b3267
Author: Thierry Carrez <thierry@openstack.org>
Date:   Tue Jul 26 12:11:38 2011 +0200

    Merge diablo-3 development from trunk (rev160)

commit 29b32674be5d20415e1b13ce71695077ec09ca6e
Merge: 8e9b9e5 21b3c82
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jul 26 02:34:03 2011 +0000

    New local filesystem image cache with REST managment API
    
    Additional changes include:
    
        * Added glance-reaper binary
        * Moved invalid cache entry reaping from glance-pruner to glance-reaper
        * Added stalled image detection and reaping
        * Added incomplete image listing (shows which images are currently being fetched)
        * Added percent progress to incomplete image listing and invalid image listing (useful when looking for failure trends)
        * Added ability to reap-invalid and reap-stalled directly from glance command. Helpful for testing and recovering from failures immediately (w/o having to wait for cron to kick off glance-reaper)
        * Renamed glance cache management commands. Now all start with 'cache-' and they better mirror the naming of 'image' commands
        * Fixed bug where print_help didn't have access to parser to print usage

commit 21b3c8229e2903fcf72387e3251b76dd7ecb97aa
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 17:01:26 2011 -0500

    PEP8 Fixes

commit 2a98e5d32318cddf051c53f5f1e804f5c549a3b4
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 16:59:56 2011 -0500

    Using DELETE instead of POST reap_invalid, reap_stalled

commit b6bf0b5891e1cec2fcac80019e40f54eddaf4c1f
Author: jaypipes@gmail.com <>
Date:   Mon Jul 25 16:47:51 2011 -0400

    Forgot to put back fix for the get_backend_class problem...

commit 2697b631d6e4eb85d3402bfbff68b56efc4af491
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 15:42:50 2011 -0500

    Adding logging if unable to delete image cache file

commit 679bda79c32e61e1ee6c4f83d48d4cd5cd6fcf0c
Author: jaypipes@gmail.com <>
Date:   Mon Jul 25 16:39:52 2011 -0400

    Add test case for S3 s3_store_host variations and fixes for URL bug

commit 5814897616f4e8a0fe67c386ef7599fb6fc2bdec
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 15:38:57 2011 -0500

    Ensure image is active before trying to fetch it

commit 54404971519facbf364b87d515f38ef76be30074
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Mon Jul 25 20:36:04 2011 +0000

    Boy, I'm an idiot...put this in the wrong branch directory...

commit 15900f5b222408ac7cbf2a6c4385abcd0483a177
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 15:23:41 2011 -0500

    Handling ZeroDivision Error

commit 8713c5028a45a7c91c81d0655fe265af6b452c07
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 15:05:26 2011 -0500

    Using alternate logging syntax

commit 4645b6bee9044fbc57edf1e7b3790f9180ffe143
Author: jaypipes@gmail.com <>
Date:   Mon Jul 25 15:00:23 2011 -0400

    Missing import of common.config in S3 driver

commit 2cd1949c9f07b6d13abdaadad61204a797987a76
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 13:55:18 2011 -0500

    Tighten up file-mode handling for cache entry

commit 8cd0510d4bb0ba81808de47a973d209013a0da3c
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 13:53:12 2011 -0500

    Adding request context handling

commit 957e4d1831c115a4fd596fc9c50edf2306ff23d4
Merge: b9dee1a 8e9b9e5
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 12:53:01 2011 -0500

    Merging trunk

commit 684d89117e85cfc603d3e6842b0617fca90c86d0
Merge: 6706e15 8e9b9e5
Author: jaypipes@gmail.com <>
Date:   Mon Jul 25 13:45:35 2011 -0400

    Fixed review stuff from Brian

commit 8e9b9e574f0871802153afa0adcc01177fff9b2a
Merge: 8d66dcb cbc5527
Author: Jason Kölker <jason@koelker.net>
Date:   Sat Jul 23 05:13:59 2011 +0000

    Allow delaying the actual deletion of an image.
    
    If glance-api.conf has delayed_delete set to False or not set at all (it defaults to False) immediatly delete the image. If delayed_delete is set to True glance-api sets the status to pending_delete but does not call the backend delete. From the user's point of view it is actually deleted, and future calls will 404.
    
    A new daemon glance-scrubber is introduced which looks for pending_delete images that are older than a configurable interval and will actually delete from the backend the images.

commit cbc55273229678ddd1f1d6d82493ce16ac73548d
Author: Jason Koelker <jason@koelker.net>
Date:   Fri Jul 22 22:38:20 2011 -0500

    have the scrubber init a real context instead of a dict

commit e4eaef7bb802cfce70a238c55c27368bd7f1a079
Merge: 4587c9b 8d66dcb
Author: Jason Koelker <jason@koelker.net>
Date:   Fri Jul 22 19:07:38 2011 -0500

    merge trunk

commit 8d66dcbe2bcf73c252161994ebcb6390e2a422a8
Merge: 6cf282c c54c090
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jul 22 23:58:28 2011 +0000

    Adds authentication middleware support in glance (integration to keystone will be performed as a piece of middleware extending this and committed to the keystone repository).  Also implements private images.  No limited-visibility shared image support is provided yet.

commit c54c09048fc54ec7d5dce4f2e1709d0104c6991b
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jul 22 23:35:24 2011 +0000

    Take out extraneous comments; tune up doc string; rename image_visible() to is_image_visible(); log authorization failures

commit 4587c9b7622671f9d74e408c2eb09e14c4520225
Author: Jason Koelker <jason@koelker.net>
Date:   Fri Jul 22 18:08:43 2011 -0500

    use runs_sql instead of hackery

commit b9dee1abbbb6e5aa0264e1b6ac6238f4b0dae852
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 17:26:15 2011 -0500

    Updating setup.py per bin/image_cache removal

commit b796cb70f9ebb042ec2e6f7a156c7dbe67e9f89d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 17:20:59 2011 -0500

    Removing bin/image_cache directory

commit 631d707a35aca2fea2f9be290416758da3a59689
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 17:11:18 2011 -0500

    Removing cache enabled flag from most confs

commit 35d9da11783e885f37ab64d9b53bdb0d69267a59
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 16:03:03 2011 -0500

    Removing imagecache from default WSGI pipeline

commit fba072aab4301f51b3078c34187a342ea04b7a94
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jul 22 19:57:56 2011 +0000

    Allow plugging in alternate context classes so the owner property and the image_visible() method can be overridden.

commit c2d591114f72d89707c5dad502882299a1014300
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jul 22 19:51:52 2011 +0000

    Make a context property 'owner' that returns the tenant; this makes it possible to change the concept of ownership by using a different context object.

commit 51edd723968d9ae605d133a070a6b9f641f2a297
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jul 22 19:02:48 2011 +0000

    Unit tests for the context's image_visible() routine

commit 59f9b7c2b13350dfc4b57ae25397096929f24391
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jul 22 19:02:08 2011 +0000

    We don't really need elevate()...

commit 652ecc461f29bd110528d3f706ed90631c43fe5f
Merge: edae975 6428277
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 12:32:05 2011 -0500

    Merging in adding_image_caching

commit 64282776bd3d13179b0afacb52e2ee99362f4123
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 12:27:07 2011 -0500

    Importing module rather than function

commit edae9756da2fdb6eca10468953820ec61c9ddbf2
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 12:02:46 2011 -0500

    PEP 8 fixes

commit 11cd9dc8d1f6eb481709e4e8640f7554c01d1b4c
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 12:00:09 2011 -0500

    Adding reap stalled images

commit 3da327fb86c594171cc8bd6355b09ef02340c271
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 11:17:28 2011 -0500

    Returning number of files deleted by cache-clear

commit 234e694e34cf8dc544f38f2cbef6f311a9d73c6e
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 11:11:37 2011 -0500

    Returning num_reaped from reap_invalid

commit 2c9c26216304e784f0a57195b995e51bdaf06891
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 10:57:53 2011 -0500

    Moving bin to image_cache/

commit 6706e15699832fc4bd1c68a5f12c950914e2dfb4
Merge: 4825c94 6cf282c
Author: jaypipes@gmail.com <>
Date:   Fri Jul 22 11:39:22 2011 -0400

    Merge trunk and resolve conflicts. All tests passing for me...

commit 1f75e115e61df8e8485f036c9f713e9557f04d27
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 01:02:56 2011 -0500

    Fixing comment

commit e54deefaff07fcc921f8c4115a7cd6b36cceff48
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 00:53:43 2011 -0500

    Adding reaper script

commit 89d5c0bc8e6e55d6647a05d16fd8ea9ff18d22a9
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 22:33:54 2011 -0500

    Adding percent done to incomplete and invalid image listing

commit ab5cf1c17fb95ca95399a0514a69fb0b9676c430
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 22:20:03 2011 -0500

    Renaming tmp_path to incomplete_path

commit dc5d6120206ccd08638db6b21f983509339c3d72
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 21:44:04 2011 -0500

    Renaming tmp_path to incomplete_path

commit cd43c66e03e2f98f4eb71aba161ce172f3e4ac0a
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 21:26:33 2011 -0500

    Renaming purge_all clear, less elegant variation

commit 32ba9f570bfd9b322077bdef7969f602999f4e12
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 21:18:01 2011 -0500

    Refactor to use lookup_command, so command map is used in one place

commit fcfae5227c92451b7601d8fed4869347671942c7
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 20:54:32 2011 -0500

    Refactoring to use same command map between functions

commit 771e8eab89f4eaa9b548d90b09db345d637aacaa
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 20:36:06 2011 -0500

    Renaming to cache-prefetching

commit f19313b80da4673630b113c35ef7533dca640efe
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 20:31:25 2011 -0500

    Renaming to cache-prefetch

commit d73ddf0f8c245f3aa46fbcd4f05ab64ac549056b
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 20:29:23 2011 -0500

    Renaming to cache-purge-all

commit 6026d70e01a05b80f10df00b0e80034e6dbaf637
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 20:27:26 2011 -0500

    Renaming to cache-purge

commit b281c7f9f5b3157ae7b38452126c2eafcbcbedb2
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 20:25:50 2011 -0500

    Renaming to cache-invalid

commit d2536f7e72ecbe3ab18ed447b19db75164f73cc7
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 18:58:05 2011 -0500

    Beginning to normalize names

commit 26baf11782a421b2c64f1cdbe8b94425ae61d8ec
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 18:50:20 2011 -0500

    Refactoring out common code

commit 12fd52bfcf891fe54bc9325e5c0356dc922068b8
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 18:22:18 2011 -0500

    Refactoring prefetch

commit 468e3ee15e77a40f4f9025de1557b7c4a575da9c
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 18:11:10 2011 -0500

    Refactoring purge

commit 885732386948df4990fdd1faa1cf5e3909bbd922
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 18:06:09 2011 -0500

    Refactoring purge_all

commit 4834976532233b7bcb744a9b7896308ca33fb9aa
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 17:54:17 2011 -0500

    Refactoring listing of prefetching images

commit 2f278a4f25d340bb7beab7bf38579c1e82fcaebc
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 17:50:42 2011 -0500

    Using querystring params for invalid images

commit ef2cde666c98847bd078c19f01ee80ab032dd838
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Jul 21 22:38:27 2011 +0000

    Link incoming context with image owner for authorization decisions

commit 11b2f93dfea701c5cfdd3caee3a5819781e0c6b2
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Jul 21 16:40:44 2011 +0000

    How in the world did I manage to forget this?  *sigh*

commit cd9a799272515357da91c52372cc98c04ee30f25
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Jul 21 16:40:20 2011 +0000

    Make tests work again

commit f62d5b4ac6b50abecedc9a94c914be2cdea53b3f
Merge: 0c0aa5b 6cf282c
Author: Jason Koelker <jason@koelker.net>
Date:   Thu Jul 21 11:33:50 2011 -0500

    merge trunk

commit 9804c086c3ab7a4960ebfd40c22d12213495b4e1
Merge: 52064a6 6cf282c
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Jul 21 16:08:44 2011 +0000

    pull-up from trunk

commit 6cf282ccb9d716a937dcc905790fb5501d63c971
Merge: bd96e20 520cf27
Author: jaypipes@gmail.com <>
Date:   Thu Jul 21 14:07:38 2011 +0000

    This patch:
    
        Overhaul the way that the store URI works. We can now support
        specifying the authurls for Swift and S3 with either an
        http://, an https:// or no prefix at all.
    
        The following specifies an HTTP Swift auth URL:
    
        swift_store_auth_address = http://localhost/v1
    
        The following specifies an HTTPS Swift auth URL:
    
        swift_store_auth_address = https://localhost/v1
        swift_store_autth_address = localhost/v1
    
        The default scheme for Swift auth URL is HTTPS. For S3,
        the default for the s3_store_service_address is HTTP,
        since boto uses private key signing over HTTP by default
        on the s3.amazonaws.com domain. Note that the new S3 stuff
        isn't merged yet...
    
    Future refactoring:
    
    * Instead of storing the store_uri in the database in images.location, split the store_uri out into component pieces in an ImageLocation table, reducing duplicate records in the registry database.
    
    * Never return the store_uri in the metadata. This contains security credentials (see LP Bug #755916)

commit 520cf27b957068b28ba6a10217da19071c2c5b80
Author: jaypipes@gmail.com <>
Date:   Thu Jul 21 09:58:14 2011 -0400

    PEP8 nit

commit bd96e2043c3f82982d2aa2f443c232ab7d57b999
Merge: f1d7fca 56217f9
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Thu Jul 21 12:42:38 2011 +0000

    Added fix for Bug #813291: POST to /images setting x-image-meta-id to an already existing image id causes a 500 error.
    
    I came up with about 3 or 4 different ways of resolving this bug, and all tests pass. Let me know if you think this should be resolved in a different way.
    
    This branch also includes a test in tests/functional/test_httplib2_api.py that shows the 500 error.

commit 5da4353fc7afc3be83af3423ebff86883edb2d84
Author: jaypipes@gmail.com <>
Date:   Wed Jul 20 19:51:54 2011 -0400

    One more try...

commit 0af01122dcdcd90656b0417bb6071fdf4cf59f73
Author: jaypipes@gmail.com <>
Date:   Wed Jul 20 19:49:06 2011 -0400

    Yet another attempt to fix URIs

commit 52064a637859bd7a195e7f4c23acdd6515d08755
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Wed Jul 20 22:53:44 2011 +0000

    Add in security context information

commit d716204d8003d1c1cf64fe099407f2cce6ed45fc
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 20 17:18:03 2011 -0500

    Moving cached image list to middleware

commit 8094e74f5d16f169f7c72bb7f48da4e4835492c2
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 20 16:58:59 2011 -0500

    Initial work on moving cached_images to WSGI middleware

commit 56217f9e62eb069f66669b16f016e4134bd40c2b
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jul 20 15:52:44 2011 -0500

    API is now returning a 409 error on duplicate POST. I also modified the testcase to expect a 409 response.

commit 78c9c3ad55f94212995cd1c7a46c30eccdcf499a
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Wed Jul 20 20:27:33 2011 +0000

    Add owner to database schema

commit 3bc6a30ea8c065ccbdc23e4815f00c321d6b3027
Author: jaypipes@gmail.com <>
Date:   Wed Jul 20 14:14:41 2011 -0400

    Fix URI parsing on MacOSX - Python 2.6.1 urlparse bugs

commit e06e81224769dd9f5a7e02ef6e6a801dda2600bb
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 20 17:25:00 2011 +0000

    Namespacing xattr keys

commit 72fdf836c13e8b8fe35ad702ce16796fecb83928
Merge: 3eda9b8 f1d7fca
Author: jaypipes@gmail.com <>
Date:   Wed Jul 20 12:41:38 2011 -0400

    Merge trunk

commit f8763deb8ee35e5ad15515b37578868bb0bcf7cf
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 20 16:37:29 2011 +0000

    PEP8 fixes

commit f1d7fca1b64e1aa09848b61957abcda4550e1f0e
Merge: 193b695 f637bd4
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jul 20 13:17:36 2011 +0000

    Added 3 tests in tests/functional/test_httplib2_api.py to validate is_public filtering works.
    
    This is based off of functionality from a recent merge: https://code.launchpad.net/~vishvananda/glance/is-public-filter/+merge/68290
    
    Vish added unit tests for the bug, just wanted to make sure we had them tested in the functional tests also.

commit cf3a96fe50162d15e7893861682ca64281bbe0df
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 23:11:54 2011 -0500

    left in 2 fixes.. removing redundant fix

commit 7aa529875b38ff13e2ee8127de4c2c5e8f1911d9
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 23:03:05 2011 -0500

    If meta-data contains an id field, pass it to _image_update()

commit a4fd3ef35df96698a83926931aac98fe9838ab57
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 22:59:56 2011 -0500

    Adding functional test to show bug #813291

commit f637bd4cb76df0438e5bf11226322453e79141ee
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 22:05:28 2011 -0500

    fixed an inline comment

commit 3ef209446b845098feb58ccdc36c5ef22dabb0a7
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 19:25:15 2011 -0500

    removed pprint import, and added check for other 3 images to make sure is_public=True

commit 0c0cd9418e4c39d1dc944a0616d5a18b96460ce9
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 19:21:37 2011 -0500

    Added 3 tests to validate is_public filtering works

commit 193b6953cd7071c8c1d391115f5d0084e7a838af
Merge: f57e765 2bf50d9
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 18:07:37 2011 +0000

    Completed rewrite of tests/functional/test_curl_api.py using httplib2.

commit f57e7655efe1d779d0fe0c2c0584d521159a1698
Merge: 5929f14 6059e85
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Tue Jul 19 17:52:31 2011 +0000

    Changes the default filtering of images to only show is_public to actually use a default filter instead of hard coding. This allows us to override the default behavior by passing in a new filter.

commit 2bf50d90e21c4d7d874fe65693e05106b67e2e96
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jul 18 22:43:27 2011 -0500

    removing pprint import

commit 9b7647d85f2112a441d53900fd7d464f3cf64c3e
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jul 18 22:41:05 2011 -0500

    completed rewrite of test_ordered_images().. this completes rewrite of test_curl_api using httplib2

commit e12b65238be0c9a04590a15fd3799476a765b409
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jul 18 22:04:00 2011 -0500

    test_ordered_images() missing closing self.stop_servers()

commit 64eb18927824683fc9b6aec1ea8d1a3587277728
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jul 18 22:03:22 2011 -0500

    finished rewrite of test_filtered_images()

commit 6059e8533aafce061d02b9515b8f09730d9bf4c6
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Mon Jul 18 11:22:41 2011 -0700

    add tests and make None filters work

commit ee35df8b4f3884b01bc9825d4989d5337090ce3e
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Mon Jul 18 10:28:18 2011 -0700

    Change default is_public = True to just set a default filter instead of hard coding so it can be overridden

commit 0c0aa5b6c6394cab5306a400c89751f4d9159ca0
Author: Jason Koelker <jason@koelker.net>
Date:   Fri Jul 15 17:21:05 2011 -0500

    make the tests work with new trunk

commit 6ac1d5a332202ed3c06004804e65f8a6f1c36e21
Merge: fc5b3b1 5929f14
Author: Jason Koelker <jason@koelker.net>
Date:   Fri Jul 15 16:32:53 2011 -0500

    merge trunk

commit da2ad57d3d030a60296a84b83cc4fdc6709fbfad
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 14 12:17:28 2011 -0500

    Refactoring PrettyTable so it doesn't print the lines itself

commit 413b32ef8a8ab477df69fd6cd166c0017b9c8832
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 14 12:05:00 2011 -0500

    Adding pruner and prefetcher to setup.py

commit 626b7a4f0421d90f8bcd1b71997bfadd6f59b2d5
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 14 00:12:58 2011 +0000

    Removing extraneous text

commit 87c4863678fd8babf37b970de8db6bf1f52b317e
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 14 00:04:29 2011 +0000

    PEP 8 fixes

commit b1be90f24116b100c67aff85dde2f9f885b5d3e7
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 23:55:36 2011 +0000

    Adding prefetching list to bin/glance

commit 3434bc4152a7c1cbb5e90634135e9c210beccc0b
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 23:34:20 2011 +0000

    More cleanups

commit 95c0acb9cb2951b9a16ae9b6e3bb0fdde770886b
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 23:00:52 2011 +0000

    Adding prefetching of images

commit 3eda9b8e506b5a7acfc308ef3e785cc4fd9a43be
Author: jaypipes@gmail.com <>
Date:   Wed Jul 13 16:15:46 2011 -0400

    Overhaul the way that the store URI works. We can now support
    specifying the authurls for Swift and S3 with either an
    http://, an https:// or no prefix at all.
    
    The following specifies an HTTP Swift auth URL:
    
    swift_store_auth_address = http://localhost/v1
    
    The following specifies an HTTPS Swift auth URL:
    
    swift_store_auth_address = https://localhost/v1
    swift_store_autth_address = localhost/v1
    
    The default scheme for Swift auth URL is HTTPS. For S3,
    the default for the s3_store_service_address is HTTP,
    since boto uses private key signing over HTTP by default
    on the s3.amazonaws.com domain. Note that the new S3 stuff
    isn't merged yet...

commit bd8dad642400dbe1a22d8abfe448f0cedcf1742d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 03:39:31 2011 -0500

    Typo fix

commit 26042d3e399f17f6c922ecb15b2b068b5765f042
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 03:29:39 2011 -0500

    Removing test exception

commit 44dadaa7ac520ebfa665438d5b9cfbbf7db352eb
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 03:26:25 2011 -0500

    PEP 8 fixes

commit a1926d4bc9555729a7913bddf6f4fc585497dcf7
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 03:21:13 2011 -0500

    Adding Error to invalid cache images

commit 09b7f23a40a0e64661d1f678100e700227ea3241
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 02:33:53 2011 -0500

    Show invalid images from bin/glance

commit 41535d7ec05126f3a42e60c48fa36359b75f9443
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 01:55:53 2011 -0500

    Improving comments

commit 21a540daab630a8b589698db7ab58bd42238594d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 01:39:05 2011 -0500

    Cleaning up cache write

commit 883520adf4187eeb0608c2b82440faa3cf982c1a
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 01:32:05 2011 -0500

    Moving xattrs out to utils

commit 9cbd3b8ffe65b8a029b9c6fe1e70b6ea508576ee
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 01:04:44 2011 -0500

    Clip and justify columns for display

commit df9081d3adfa8531aa68686a473a4b818fd709cd
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 00:40:14 2011 -0500

    Including last accessed time in cached list

commit cfd64993bc347c74307b061034e87ec6276db842
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 00:26:49 2011 -0500

    Adding more comments

commit 3e6d51b0347f4012ee1acda370cac7baa1154973
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 00:11:37 2011 -0500

    Adding hit counter

commit 7bc060eb31b8bace76977d0f6e72dab0fe1b7f0d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 04:51:51 2011 +0000

    Pruning invalid cache entries after grace period

commit 17dbd0c243aa46533522ebe7bbea569d27e23dcb
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 04:17:17 2011 +0000

    Clear invalid images when purging all cached images

commit ed2de78fa348b016e4848bba9405d2773bee9ad2
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 04:04:29 2011 +0000

    Rollback by moving images to invalid_path

commit 286572961233cb8ea090f53ac7ff08e3ffca1cfc
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 02:37:04 2011 +0000

    Improving comments

commit 11675ce5d0776a7ec393166e639a4deb761638fc
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 02:15:20 2011 +0000

    PEP8 fixes

commit e37c7d85bd329357f26b75836a1cc69474fc710d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 02:13:23 2011 +0000

    Adding cached image purge to bin/glance

commit a27c0b24f8e719596c784c49ed6082abb19e7791
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 02:06:12 2011 +0000

    Adding purge all to bin/glance

commit f5c94f35a1f17af177b49b53927218c2f7483f83
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 01:56:41 2011 +0000

    Adding catch_error decorator to bin/glance

commit b434f6e308a6166cf410987d111fb8a58be85bcc
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 01:28:12 2011 +0000

    Adding 'cached' command to bin/glance

commit 2f75045eda88fe8bd0264c0392b62f00a5473063
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 00:18:48 2011 +0000

    Write incomplete files to tmp path

commit 8b47fb9cfec40caccd29e08f8b0fc4fac919c338
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jul 12 22:39:04 2011 +0000

    Adding purge_all, skip if set if xattrs arent supported

commit 94f4baa3936e31d69ffa3330be79080b80b17d21
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jul 12 04:17:29 2011 -0500

    Adding purge cache API call

commit 2dbc2fb65a1b383e07c732f2ca157951d67ed130
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jul 12 04:09:36 2011 -0500

    Adding API call to query for cache entries

commit a4369c75b3ae0e63c146464a824da103be1d4f5f
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jul 12 02:55:45 2011 -0500

    Create bin/glance-pruner

commit 4d4ef5482ac32b5d1078e7b4c9ed0c03400e4fb6
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jul 12 02:04:36 2011 -0500

    Adding image_caching

commit 4b49b6f9efbba7a02c5a2e8cd58e11c3c7d12baf
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jul 11 18:36:26 2011 -0500

    rewrote test_traceback_not_consumed(), working on test_filtered_images()

commit df1b1098fed4c93dc94036c624896ab0e15bd6ba
Merge: a0bf107 5929f14
Author: jaypipes@gmail.com <>
Date:   Mon Jul 11 14:49:39 2011 -0400

    Merge trunk

commit 5929f143decaa68a62a11e7e1bce486a8a141242
Merge: dc7e182 618e4a0
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Sat Jul 9 23:12:14 2011 +0000

    Only changes is reverting the patch that added migration to configure_db() and resets the in-memory SQLite database as the one used in functional testing. Yamahata's commits were unmodified...

commit 618e4a0aff942672d1911d7e48643b56cf59f7d1
Author: jaypipes@gmail.com <>
Date:   Fri Jul 8 11:43:56 2011 -0400

    Reverts commit that did db migration during configure_db() and makes functional tests use in-memory database again. The issues we were seeing had to do with the timeout not being long enough when starting servers with disk-based registry databases and migrate taking too long when spinning up the registry server... this was shown in almost random failures of tests saying failure to start servers. Rather than increase the timeout from 3 seconds, I reverted the change that runs migrate on every startup and cut the total test duration down about 15 seconds.

commit 3eeb9fec9c49cbfff3e652223b3b564c451d880a
Merge: a5d5429 dc7e182
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Fri Jul 8 18:46:06 2011 +0900

    merged glance trunk

commit 4825c942c784a428c1e40619dffbf7e889de75a8
Merge: b51934d dc7e182
Author: jaypipes@gmail.com <>
Date:   Wed Jul 6 17:35:38 2011 -0400

    Merge trunk

commit a5d542976ce2b27ec14960537606509b802f7975
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Sat Jul 2 13:16:33 2011 +0900

    updated Authors

commit dc7e182e601408371386c62b64f6b216cad87482
Merge: ac33292 94c84ff
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jul 1 16:03:41 2011 +0000

    Resolves bug lp:803260, by adding a check to ensure req.headers['Accept'] exists before it gets assigned to a variable.

commit e263b1cc5fa42bdaf397f4ff0ed2e3fa3a4dcbbf
Merge: d5b13ee c829316
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Thu Jun 30 13:00:06 2011 +0900

    run_tests.py: make test runner accepts plugins
    
    With this changeset, useful plugins are available
    for unit test. Thus we can use debugger for unit tests with
    say, --pdb, --pudb, ...

commit d5b13ee4f6393762da20649302893f4ba40c8b9e
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Thu Jun 30 12:59:27 2011 +0900

    run_tests.py: make run_tests.py work.
    
    Without this patch, the following exception occurs.
    
    Traceback (most recent call last):
      File "run_tests.py", line 280, in <module>
        sys.exit(not core.run(config=c, testRunner=runner))
      File "/home/yamahata/openstack/src/glance/my/.glance-venv/lib/python2.6/site
    ackages/nose/core.py", line 283, in run
        return TestProgram(*arg, **kw).success
      File "/home/yamahata/openstack/src/glance/my/.glance-venv/lib/python2.6/site
    ackages/nose/core.py", line 118, in __init__
        **extra_args)
      File "/usr/lib/python2.6/unittest.py", line 817, in __init__
        self.runTests()
      File "/home/yamahata/openstack/src/glance/my/.glance-venv/lib/python2.6/site
    ackages/nose/core.py", line 197, in runTests
        result = self.testRunner.run(self.test)
      File "/home/yamahata/openstack/src/glance/my/.glance-venv/lib/python2.6/site
    ackages/nose/core.py", line 59, in run
        result = self._makeResult()
      File "run_tests.py", line 268, in _makeResult
        self.config)
      File "run_tests.py", line 183, in __init__
        if colorizer.supported():
      File "run_tests.py", line 92, in supported
        curses.setupterm()

commit ac332926a543e0ce2ac4e20eaac7c6fc139ef4ab
Merge: d0c03d0 124ba2a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 29 21:11:40 2011 +0000

    Fix the poor error handling uncovered through bug in nova

commit 94c84ff2588e23b2f96dc7ddd0ee6941209ab522
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 15:26:43 2011 -0500

    Added stop_servers() to the end of the test cases

commit 124ba2aa93b54c0df19ce2387d1d0f6c17c2c80c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 29 14:10:39 2011 -0400

    adding testing & error handling for invalid markers

commit 0bccd861d3bcbee4ade258ed6d19f8ac0ee65411
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 12:53:06 2011 -0500

    removed pprint import

commit 1ff556a401dd5b1d3f401c0d6be1d417f77c7975
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 11:26:08 2011 -0500

    removed extra space on test_queued_process_flow method definition

commit 2cc265b545e55675a4745e270d052624c51ae592
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 11:24:56 2011 -0500

    removing commented out line

commit 441e6a5207b9c1e0817b58a7b11b12a777624b3d
Merge: 095296a 91b4d95
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 11:18:17 2011 -0500

    merged in lp:~jshepher/glance/functional_tests_using_httplib2_part2

commit 095296aff5745a841dccbc8c021cadaa1ebabc95
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 11:13:18 2011 -0500

    applied requested fix in merge-prop

commit 91b4d95ed78e27bbcef830f47cc83b25987bc122
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 11:11:26 2011 -0500

    Removing ordering numbers from the test cases, per jay pipes

commit cf041554dd368287ed2a659834c4af7a820a3852
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 11:07:46 2011 -0500

    cleaning up the 'no accept headers' test cases. this should fail until Bug lp:803260 is resolved

commit d0c03d0acdaea403b1fc52e1a67014cbec2f7d9f
Merge: 705855c b6aa958
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 29 15:42:49 2011 +0000

    Cleaning up docstring spacing

commit c972f245111b1fd3cae0f9936a17785748a713d6
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 10:38:40 2011 -0500

    rewrite of test_size_greater_2G_mysql from test_curl_api.py using httplib2. All tests currently pass

commit 947e8f1f796b6f279e0c08011619fdae38b4c8da
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 10:04:13 2011 -0500

    completed rewrite of test_003_version_variations. bug lp:803260 filed about step #0, and noted as a comment in code

commit 88062fe50797f6bb2cc0ae4d20774c0890b7b5a1
Merge: b71e625 45d276e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 29 13:07:16 2011 +0000

    Fix for bug 803188. This branch also proposed for merging into trunk

commit 9c01e581bcedf6a8e2724425fd11d1a4a278ca2b
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jun 28 21:22:55 2011 -0500

    miss-numbering of steps

commit ec911b18734f291b69f18caf8885a4edc16a74e5
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jun 28 21:09:08 2011 -0500

    fixing pep8 violation

commit 574387615529d6cc6b90059bd4de7fee7edd1b03
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jun 28 21:04:07 2011 -0500

    Added a check to ensure req.headers['Accept'] exists before it gets assigned to a variable. All unit/functional tests pass with this patch.

commit b17fdbff5fe4868895de0c206b5634847586dafa
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jun 28 20:58:11 2011 -0500

    half way done with rewrite of test_003_version_variations.. step #0 causes a 500 error unless we supply an Accept header

commit 705855c17490db6df6ed64b602910c0d674b9a11
Merge: f8264af 45d276e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 29 00:52:47 2011 +0000

    Prevent query params from being set to None instead of a dict

commit 45d276efa63b8982a190f44d2fd72d9bd9632309
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 19:20:51 2011 -0400

    removing rogue print

commit 3726931fbac2860612c1f8a88d13d9e4e3f044a1
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 18:01:08 2011 -0400

    fixing issue where filters are set to None

commit b71e625d121b08ca58de4bc6bc04e25d533e8151
Merge: b54eb76 47714f1
Author: Thierry Carrez <thierry@openstack.org>
Date:   Tue Jun 28 20:22:20 2011 +0000

    Backport for bug 803055

commit 4c5af0992b758be414cebcdc02281c0c86e7ad46
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jun 28 15:15:18 2011 -0500

    rewrote test_002_queued_process_flow from test_curl_api.py, all 6 steps pass against trunk revno:146

commit 47714f19a0f78b5db830f05d277a0a761fe67673
Author: Thierry Carrez <thierry@openstack.org>
Date:   Tue Jun 28 21:50:11 2011 +0200

    Backport for bug 803055

commit b54eb76d0650070cb13b1fdf1ae67bed1d5c4964
Merge: f341891 55bc08e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 19:42:20 2011 +0000

    Merge diablo-2 development work

commit f8264affea498033848e205e24629782e368faaf
Merge: 1a7ff12 3e1d0b9
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 19:12:50 2011 +0000

    Prevent clients from adding query parameters set to None

commit 3e1d0b91ecdaefcb0b141706c5016d4be746ea6c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 14:12:26 2011 -0400

    ignores None param values passed to do_request

commit b6aa9588620e41f67813b79517dc8c1353a13fee
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 10:37:31 2011 -0400

    cleaning up docstrings

commit 55bc08e69e18e7cb2670ee3a9a5e48dc69a91f73
Merge: f341891 1a7ff12
Author: Thierry Carrez <thierry@openstack.org>
Date:   Tue Jun 28 16:33:09 2011 +0200

    Merge diablo-2 development from trunk (rev146)

commit 116ef8202b77fcf378217cdfe277dfd56674ed54
Merge: 5b8a507 1a7ff12
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 10:17:58 2011 -0400

    merging trunk

commit 5b8a507482270ecbd532cf337fd1de2c8e046eca
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 10:17:42 2011 -0400

    docstring

commit 1a7ff12a4539973f950b2312765d359a7cc41f5b
Merge: 2ea83f6 8c5da9d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 14:03:10 2011 +0000

    Added sort_key and sort_dir query params to apis and clients.

commit 8c5da9d57a8e7e3b53446b975fe6f2c6f81d5812
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 09:51:08 2011 -0400

    fixing one last docstring

commit c7b4168c3cfb6806938aeac650bc2d9009a0de33
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 09:41:50 2011 -0400

    docstrings\!

commit 5ca6a5495cd64535297ad79b947a2e8d31bd40d8
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Tue Jun 28 18:03:34 2011 +0900

    unit/test_config.py: make it independent on sys.argv
    
    The first test in test_config.TestConfig.test_parse_options tests
    no options are specified. But it checks sys.argv when default parameter
    is used. So it fails when some parameter is passed to run_test.py.
    So pass empty list to the parser as argument explicitly in order to
    make it pass independent sys.argv.

commit c82931622e1a62a4b440e498317b6c274b4f4d72
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Tue Jun 28 18:02:38 2011 +0900

    run_tests.py: make test runner accepts plugins
    
    With this changeset, useful plugins are available
    for unit test. Thus we can use debugger for unit tests with
    say, --pdb, --pudb, ...

commit c8b40ee7a7a89e431b49174a7dbd83a0921238f2
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 27 14:05:29 2011 -0400

    reverting one import change; another docstring fix

commit 6214a48000534f680f911e5b0860c3830387ecf7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 27 14:00:09 2011 -0400

    docstring

commit 2ea83f6de813b40c2f47c730ac68792d9ff77f2c
Merge: 3d8b005 ab0a401
Author: Yuriy Taraday <yorik.sar@gmail.com>
Date:   Mon Jun 27 14:37:40 2011 +0000

    Switch image_data to be a file-like object instead of bare string in image creating and updating
    Without this Glance loads all image into memory, then copies it one time, then writes it to temp file, and only after all this copies image to target repository.

commit ab0a4010b56f147a96edab7f920f554aef61ac86
Author: Yuriy Taraday <yorik.sar@gmail.com>
Date:   Mon Jun 27 09:17:49 2011 +0400

    Add myself to Authors file.

commit 763dbc4d6ed607f9362af3f070b80071d755a922
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 26 16:56:17 2011 -0400

    cleaning up None values being passed into images_get_all_public db call

commit c1ff5c38bfcc757ccff69276f8374503aa6d745c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 26 16:45:46 2011 -0400

    adding base client module

commit a2bd04212f5038e57495c858fb001f71ddf8ab2f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 26 16:43:41 2011 -0400

    restructuring client code

commit e947f816f2d49faf2d0884449280b370f238d3ff
Merge: 220be9c 3d8b005
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 26 15:57:51 2011 -0400

    merging trunk

commit 3d8b005e1ba32f7c30ca7b86f73a38c393841782
Merge: 3ee6f99 97c8c46
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 26 18:52:39 2011 +0000

    Explicitly set headers rather than add them

commit 97c8c461f222b26506f82d7a407ee6dcd8998f05
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Jun 24 17:16:53 2011 -0400

    fixing httplib2 functional test that was expecting wrong content-type value

commit 35adb2c169fe8a563ab66bf3569edd476380f4de
Merge: e3312c8 3ee6f99
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Jun 24 17:15:04 2011 -0400

    merging trunk

commit 3ee6f99447740a5ea76b3c20985be4cc9e1761d8
Merge: 6539f82 5659e7d
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jun 24 21:12:41 2011 +0000

    rewrite of test_get_head_simple_post from tests/functional/test_curl_api.py using httplib2.

commit e3312c84ec731d7a36dcae043fcdd6892258eef5
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Jun 24 16:57:02 2011 -0400

    adding assert to check content_type in GET /images/<id> test

commit 84a69ba0dd46f604f239d372696ffdd3a7e49f4a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Jun 24 16:27:25 2011 -0400

    Explicitly setting Content-Type, Content-Length, ETag, Location headers to prevent duplication

commit 6539f82db5cae43d0e704998aec3fd034a337c0b
Merge: c79a489 e010451
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Fri Jun 24 20:07:36 2011 +0000

    Bug #801703: No logging is configured for unit tests
    
    Configure logging to go to stderr during the unit test run.  This gets
    captured by run_tests.sh into run_tests.err.log.

commit e010451e3c250a34708e2c2e12c2784efcc25f95
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Fri Jun 24 11:44:34 2011 -0700

    Bug #801703: No logging is configured for unit tests
    
    Configure logging to go to stderr during the unit test run.  This gets
    captured by run_tests.sh into run_tests.err.log.

commit 30424e7fa06408b3f3356de2ab5f2308c4120612
Author: Yuriy Taraday <yorik.sar@gmail.com>
Date:   Thu Jun 23 17:49:53 2011 +0400

    Change image_data to body_file instead of body.

commit fc5b3b1c2a3c749f5fa0f4ffd69b5515d1961ea4
Author: Jason Koelker <jason@koelker.net>
Date:   Wed Jun 22 13:47:15 2011 -0500

    reset _MAKER every test and make sure to stop the servers

commit 5659e7d75809ee7a69136abc2dd0f6f5e4b640b7
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 22 13:04:19 2011 -0500

    Trunk merge, changed returned content-type header from 'application/octet-stream' to 'text/html; charset=UTF-8, application/octet-stream'

commit 82a0107e39aad03dda902e3c9e80d2f628c81848
Author: Jason Kölker <jason@koelker.net>
Date:   Wed Jun 22 12:47:10 2011 -0500

    yea python strings

commit b51934d9e7b76e89381b001d6ad89b2dd24fd4f1
Merge: d3efc55 c79a489
Author: jaypipes@gmail.com <>
Date:   Wed Jun 22 13:14:00 2011 -0400

    Merge trunk and resolve conflict in pip-requires

commit 99a0116c7a6b4206dbae6cd4974c7a2368e93e1d
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 22 09:20:31 2011 -0500

    updated main docstring, as it was directly coppied from test_curl_api.py

commit 96acd63435f90abe1bf37dcda36f24c52c7efc64
Merge: 17ca961 c79a489
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 22 09:19:33 2011 -0500

    merged trunk

commit 220be9cd83b202222f4137f792d9ac270dbc963b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 16:27:52 2011 -0400

    refactoring for Jay

commit 851516e5a0bb8cab2411985f1aed671fef0f64f1
Author: Jason Kölker <jason@koelker.net>
Date:   Tue Jun 21 15:12:07 2011 -0500

    make image data a constant

commit c79a489b82517231aed88b3894625f849bd6a458
Merge: b6d4093 e0f7e6d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 17:27:37 2011 +0000

    Fixes build failures due to webob upgrade. Updated pop-requires as well

commit e0f7e6d9a015fcb4606faee2016b21ff9281752a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 12:31:54 2011 -0400

    upgrading webob and fixing tests

commit b6d4093d4d5c5c7f9831c703b064d8114e28ec85
Merge: f341891 7ff3587
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 15:52:10 2011 +0000

    - refactoring wsgi code to divide deserialization, controller, serialization among different objects
    - Resource object acts as coordinator
    
    - tests are coming, this is for review purposes

commit d55c2a3d97203262ed62cec2ce07492994a01e69
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 09:41:06 2011 -0400

    updating client docs

commit cb127f68e553306f4b92096cdff4022255eb0e43
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 00:11:00 2011 -0400

    fixing bad request error messages

commit 9ea2bd11ab501cdc3822ccd81ee0f8910c3438ca
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 00:01:39 2011 -0400

    making SUPPORTED_* lists into tuples

commit a21bcc9e558d77fd53c81e050ae5389a301cee9f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 20 23:58:24 2011 -0400

    slight refactoring

commit 3ebfff8ba89a389ce3cb16c969601c1f0fd8851d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 20 23:52:25 2011 -0400

    updating docs

commit 1d454f7595763e5ae0acd498f3749bf55a72bfbd
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 20 23:42:03 2011 -0400

    adding ordering support to glance api

commit 23a4049477e69fa279179a00a31a79d88e5d4ed3
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 20 22:56:51 2011 -0400

    adding support to registry server and client for sort_key and sort_dir params

commit 17ca9618eba55c2c4d2e29a127b477cce2f96d8c
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jun 20 10:39:22 2011 -0500

    re-ordered imports, using alpha-ordering

commit 08a28583e4735cf371364d84beb871647abb27a0
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jun 20 10:17:08 2011 -0500

    removing unnecessary unittest import

commit f517f494fbee502f9050ffaec3bec3a4d3630678
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jun 20 09:36:12 2011 -0500

    moved httplib2 tests to their own test case file, and uncommented md5 match

commit b9b980cb0a81cfa2ffe05aa97e790a9532b308e0
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 19 14:15:06 2011 -0400

    updating docs; adding support for status filter

commit 8c5353c43fecfb4e0e53d4675ec1cbfe688d0053
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 19 13:59:35 2011 -0400

    adding query filters to bin/glance details

commit 4f46603839e669b49fa6615e2936d2e90f992bda
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 19 13:42:40 2011 -0400

    adding query filters to bin/glance index

commit 4324e44c0f08db26ca57f6b0571236f3d3f837d3
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jun 17 20:15:47 2011 -0500

    forgot to remove pprint import

commit 0811301e0dde83f1c58e70a613070b054ec5b6b5
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jun 17 19:58:15 2011 -0500

    adding hashlib as a dependency to pip-requires (not 100% sure it is not part of the base install though)

commit e32adff335fc270b6e4dab3e39537ba25c5f653f
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jun 17 19:48:48 2011 -0500

    fixed pep8 violation

commit f9001276cc5e4df9f5dbb76377cd6260813b39c0
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jun 17 17:04:02 2011 -0500

    rewote the test #7 - #11 for testcase (test_get_head_simple_post)

commit 7ff3587f2bf46182e6000194b0365781e8484ee2
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Jun 17 16:45:45 2011 -0400

    refactoring for Brian

commit e8bd48ea70e59c426d8434cfad8795cdf3f807c5
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Jun 16 21:04:36 2011 -0400

    refactoring from Rick's comments

commit fe242a2ee4828474f1f038bd308d6158c9f75d3a
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 15 21:58:49 2011 -0500

    Added httplib2 dependency to tools/pip-requires
    
    rewrote the test #0 - #6 for testcase (test_get_head_simple_post)

commit 22ea9e008aa033e203c38c4b02468436afe916b4
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 15 19:08:33 2011 -0500

    rewriting functional tests to utilize httplib2 instead of curl

commit 2d91c5701f558e3d5d1df03b8959faf68bb76acd
Author: Jason Kölker <jason@koelker.net>
Date:   Wed Jun 15 10:58:58 2011 -0500

    make sure it runs as a daemon for the tests

commit 112f6be82b5c8137238e4438e2c991d023e140fe
Author: Jason Kölker <jason@koelker.net>
Date:   Wed Jun 15 10:47:38 2011 -0500

    default to no daemon

commit 71174b6575881e140bc5c95e9ef5d4548af0ed34
Author: Jason Kölker <jason@koelker.net>
Date:   Wed Jun 15 10:42:50 2011 -0500

    also allow for daemon in the config file so that we can test it easier

commit e201d6baf9713c3c24aa83c7d1ec7bd0cd8ff5e9
Author: Jason Kölker <jason@koelker.net>
Date:   Wed Jun 15 10:35:16 2011 -0500

    default to non-daemon mode

commit e8ac790b1f3eb17a5e1bbf5d8a14070f60773c4f
Author: Jason Kölker <jason@koelker.net>
Date:   Wed Jun 15 10:33:09 2011 -0500

    change order of paramaters and make event optional

commit 73bc57f13cb97d19a224c5b32cbcb1b720542870
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 15 10:47:00 2011 -0400

    initial refactoring from Jay's comments

commit d36ff21023e058b3e476b6affd9b89922bd5fdf9
Author: Jason Kölker <jason@koelker.net>
Date:   Mon Jun 13 14:58:38 2011 -0500

    remove eventlet import and leftover function from previous refactoring

commit 721b8ffc805ae1b17639091727765bbca1e254e4
Author: Jason Kölker <jason@koelker.net>
Date:   Mon Jun 13 14:57:44 2011 -0500

    remove file that got resurrected by accident

commit 31da4d68fe90a18a95d0d35914245f7f7c66b2b0
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 13 15:45:18 2011 -0400

    fixed test case

commit 8abea7416b2c59ab018c809a92edf38d7a8645e9
Author: Jason Kölker <jason@koelker.net>
Date:   Mon Jun 13 14:41:17 2011 -0500

    add functional tests of the scrubber and delayed_delete

commit 7a6e74ce5d4714719d9220694cb9185000e89604
Author: Jason Kölker <jason@koelker.net>
Date:   Mon Jun 13 12:53:43 2011 -0500

    start the scrubber in addition to the api and registry

commit 4eaf79dc2969ccfae8841692e5351cb99ec0fe67
Author: Jason Kölker <jason@koelker.net>
Date:   Mon Jun 13 12:52:21 2011 -0500

    add glance-scrubber to glance-control

commit aa4433af4cc62365992c30cd4e27b4886c906ef3
Author: Jason Kölker <jason@koelker.net>
Date:   Mon Jun 13 12:21:35 2011 -0500

    call it a Daemon, cuz it is

commit 96251f9e77d37305b9a39fb4ea60a0131828f8d0
Author: Jason Kölker <jason@koelker.net>
Date:   Mon Jun 13 12:05:32 2011 -0500

    Update Authors

commit d3661b7746f4f32806c74d672ba229f124aa7ec2
Author: Jason Kölker <jason@koelker.net>
Date:   Mon Jun 13 11:04:01 2011 -0500

    add the function to the stubs

commit a07bfe68ac946df411bf076eb40cf5adb8de5d3b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Jun 11 16:25:52 2011 -0400

    cleanup

commit 97d457de05d7024643f104cf55d9d1bec9d4bdf8
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Jun 11 15:49:45 2011 -0400

    adding tests for wsgi module

commit 2c4b5009c0666076f04f83f3806546583b242daa
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Jun 11 14:18:22 2011 -0400

    removing rogue print

commit 40c7b43ce4b582c8233c1c432c1b5650399735eb
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Jun 11 14:18:03 2011 -0400

    further refactoring

commit 07e33ebaddcd73e737ba5b301f6c6d3a9c1d04a8
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Jun 11 09:47:47 2011 -0400

    adding refactored wsgi code from nova; moving registry api to new wsgi

commit 03e47cacfcb41926bb15668397c3e8a1d2423a13
Author: Jason Kölker <jason@koelker.net>
Date:   Fri Jun 10 15:51:50 2011 -0500

    delayed scrubbing now works.

commit 8dbb9b501f53fbda616025c47836818d987d6b43
Author: Jason Kölker <jason@koelker.net>
Date:   Fri Jun 10 13:43:47 2011 -0500

    add the scrubber startup script

commit a517e1ab81afc1d4447918c1c83eead7ed96188e
Author: Jason Kölker <jason@koelker.net>
Date:   Fri Jun 10 13:25:15 2011 -0500

    remove unnecessary option

commit 7ac90c8c6bcfd5b2d15e041e674ecfa9b2555878
Author: Jason Kölker <jason@koelker.net>
Date:   Fri Jun 10 13:11:23 2011 -0500

    add pending_delete to stub api

commit e55bdc874baaa20f43494a794ae2a668b7fa68f3
Author: Jason Kölker <jason@koelker.net>
Date:   Fri Jun 10 11:36:40 2011 -0500

    pep8 fixed

commit ebe10bf57d4d5eb50c8ae45491a6cbb9e982dcba
Author: Jason Kölker <jason@koelker.net>
Date:   Fri Jun 10 11:30:43 2011 -0500

    pep8 fixes

commit bac626202968ef2209b3fc926375d4953ee64060
Author: Jason Kölker <jason@koelker.net>
Date:   Fri Jun 10 10:41:03 2011 -0500

    pass in the type we want so it gets converted properly

commit 5105d5986bc9e13e30e70be99404be58f31a311a
Author: Jason Kölker <jason@koelker.net>
Date:   Fri Jun 10 10:37:37 2011 -0500

    self leaked ;(

commit 2b69b3393cf513c7e82b254d0947cdfba897d4d5
Author: Jason Kölker <jason@koelker.net>
Date:   Fri Jun 10 10:35:48 2011 -0500

    only return the results that we need to act on

commit 16e3d3ba84f8962b92a632eaab9a9bc49dae2443
Author: Jason Kölker <jason@koelker.net>
Date:   Fri Jun 10 10:06:17 2011 -0500

    allow passing of time to get only results earlier than the time'

commit f2508386218521d6ca0754898a3a7bd8c3b8c481
Author: Jason Kölker <jason@koelker.net>
Date:   Thu Jun 9 18:07:46 2011 -0500

    server and scrubber work

commit 02173ef6f64a4d17ab5a553e8eef01b389654488
Author: Jason Kölker <jason@koelker.net>
Date:   Thu Jun 9 17:46:47 2011 -0500

    update the docstring to reflect current

commit 0f88cfce25a55231a8d3c89c1c9d831a626ece1a
Author: Jason Kölker <jason@koelker.net>
Date:   Thu Jun 9 16:42:34 2011 -0500

    pass in a wakeup_time for the default time between database hits

commit 33c921a2614b8c1cee3f1f8dd9ce437c23dcf787
Author: Jason Kölker <jason@koelker.net>
Date:   Thu Jun 9 16:37:31 2011 -0500

    start making the server that will periodicly scrub

commit 8cbfca5aa1b95d9c100562ca99ba0365976bc64b
Author: Jason Kölker <jason@koelker.net>
Date:   Thu Jun 9 15:40:00 2011 -0500

    Config file for the scrubber. We make our own connection to the db here and
    bypass using the registry client so we don't have to expose non-public
    images over the http connection.

commit 4cdc31d32d8a2b34816dbbee030e8326310487bb
Author: Jason Kölker <jason@koelker.net>
Date:   Thu Jun 9 13:23:18 2011 -0500

    make the commits

commit d3efc550a805daf473e21d4dab987c96c738b4b6
Author: jaypipes@gmail.com <>
Date:   Thu Jun 9 13:05:19 2011 -0400

    Add webob>=1.0.7 requirement to tools/pip-requires

commit f8d10a4bdf298be9a2100e6600a3bc70bc56b657
Author: Jason Kölker <jason@koelker.net>
Date:   Thu Jun 9 11:50:35 2011 -0500

    all delayed deletes will be going through a new service, if delayed_delete is False, then delete it right away, otherwise set it to pending_delete

commit bd13621450d8be294fd650efe759ab65f146d96e
Author: Jason Kölker <jason@koelker.net>
Date:   Wed Jun 8 16:57:52 2011 -0500

    add scrub file

commit 36e14d9c6e3319955265bef4c34ac724bf751c54
Author: Jason Kölker <jason@koelker.net>
Date:   Wed Jun 8 16:23:50 2011 -0500

    set the image to pending delete prior to scheduling the delete

commit 5df2c2057a815d62071736a435f6f28059b65dcf
Author: Jason Kölker <jason@koelker.net>
Date:   Wed Jun 8 16:23:02 2011 -0500

    refactor a bit so the db gets updated as needed and we only trigger the delay if the config option is set

commit ba22d7febaf2ee2e545d57cffd2d2ccc877ab388
Author: Jason Kölker <jason@koelker.net>
Date:   Wed Jun 8 15:47:13 2011 -0500

    add scheduled_delete_from_backend which delays the deletion of images for at least 1 second

commit 292ca07dac549f96787e9e64bd9ae2c7cea647a4
Author: Jason Kölker <jason@koelker.net>
Date:   Wed Jun 8 15:39:14 2011 -0500

    don't delete directly but schedule deletion

commit 455ceaa9d5cc5e004d9b7141c085e8dae5776324
Author: Jason Kölker <jason@koelker.net>
Date:   Wed Jun 8 14:42:25 2011 -0500

    add the api function to get the images that are pending deleteion

commit 24d17c1f13a54685a3aa80e46c3fe2e771b5e427
Author: Jason Kölker <jason@koelker.net>
Date:   Wed Jun 8 13:45:31 2011 -0500

    add in delayed delete options

commit 745f3a6607ef8eebc3336c521f088ceedba124e3
Merge: 99dd5a8 f341891
Author: jaypipes@gmail.com <>
Date:   Thu Jun 2 10:31:38 2011 -0400

    Merge trunk

commit 99dd5a8582b0101948753faacf948e63a1b89ca0
Author: jaypipes@gmail.com <>
Date:   Thu Jun 2 10:11:11 2011 -0400

    Add workaround for Webob bug issue #12 and fix DELETE operation in S3 where URL parsing was broken

commit 6cedb4c4b2d4aec5d76fe03e96304a2a6aa88b35
Author: jaypipes@gmail.com <>
Date:   Wed Jun 1 00:08:41 2011 -0400

    Add ability to create missing s3 bucket on first post, similar to Swift driver.

commit f341891ce48b664c53a8c9522681d8059b8fbb51
Merge: 80ef6fb c78c055
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 31 19:32:17 2011 +0000

    Adding support for marker/limit query params from api, through registry client/api, and implementing at registry db api layer

commit 80ef6fb4efa9de2a7cb0cfe18f8c32f2b50b6b90
Merge: 6cd1a7e 65d06e2
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Tue May 31 15:47:07 2011 +0000

    Bug #787296: test_walk_versions fails with SQLalchemy 0.7
    
    Cap SQLalchemy and sqlalchemy-migrate at 0.6.x.  This works around the
    problem where test_walk_versions fails with 0.7.
    
    It's obviously not a long-term fix.

commit 4e371841d75e59d9aa2190ec038a9f4dcd5f9cdf
Author: jaypipes@gmail.com <>
Date:   Tue May 31 11:02:01 2011 -0400

    OK, fixes the issue where older versions of webob.Request did not
    have the body_file_seekable attribute. After investigation, turned
    out that webob.Request.make_body_seekable() method was available in
    all versions of webob, so we use that instead.
    
    Also ran into a bug in the HMAC library:
    http://bugs.python.org/issue5285
    http://trac.edgewall.org/ticket/8083
    
    I resolved this by ensuring that access_key and secret_key were
    UTF-8 encoded in the S3 store.

commit 6cd1a7eb79c510f612762a8ed19155fafcbe8206
Merge: 2374f0a ddfe273
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Tue May 31 13:42:17 2011 +0000

    Added new disk_format type of 'iso'.  Nova can use this information to identify images that have to be booted from a CDROM.
    
    Added unit test to uploading correct and bad image metadata, and of a get of image data.
    
    Updated docs in three locations where 'raw' disk format was expalined.  However, no examples of 'iso' were in headers or API calls added.

commit c78c055ae33514865b6970933e39927d1f78f6ef
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 31 09:21:16 2011 -0400

    adding marker & limit params to glance client

commit 2374f0a6ff8222f2d7a4075a9922d93cc1b38e42
Merge: de26f3d a5cd430
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sun May 29 18:12:03 2011 +0000

    Auto-migrate if the tables don't exist yet.

commit fb8b32bd75f70bba961452e9ddd71de4b4ec833d
Author: jaypipes@gmail.com <>
Date:   Sun May 29 11:58:03 2011 -0400

    Fix up unit tests for S3 after note from Chris. Also fix bug when S3 test was skipped, was returning error by accident.

commit 799e92ec22172c147292ba3c4f4441e4a29cb2bf
Author: jaypipes@gmail.com <>
Date:   Fri May 27 19:49:55 2011 -0400

    * Adds functional test that works with Amazon S3
    * Fixes parsing of "S3 URLs" which urlparse utterly barfs on because
      Amazon stupidly allows forward slashes in their secret keys
    * Update /etc/glance-api.conf for S3 settings
    
    Future refactoring:
    
    * Make the cURL API functional test a base test class and
      extend it to allow setting the default store and store settings. There's
      a bit of duplicate code between this new test case and the cURL test
      case, but we can rework it later.
    * Document the S3 store (need to do this better with Swift, too)

commit f913fc79053f7960a4480dc33b66db65ce4da022
Merge: d11959e de26f3d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri May 27 15:48:51 2011 -0400

    merging trunk, resolving conflicts

commit d11959e26e70f876e3cbf24ce5f6a54765683d67
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri May 27 15:43:54 2011 -0400

    fixing sql query

commit e77c35b7cc60c0be047aba77c2ca5e539a5f39bb
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri May 27 14:50:10 2011 -0400

    completing marker functionality

commit de26f3d27db795c799a93815907aa6334ac9fd4a
Merge: 3d19761 1b43d37
Author: jaypipes@gmail.com <>
Date:   Fri May 27 17:27:01 2011 +0000

    Call stop_servers() for those 2 test cases missing it.

commit 6392ec7dad599f3ef56944ec8a9e09bcff6a4af6
Merge: ccdc3a8 1b43d37
Author: jaypipes@gmail.com <>
Date:   Fri May 27 13:24:38 2011 -0400

    Merge trunk

commit ddfe27320b092cd705501892f806071d34889c85
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Fri May 27 15:50:51 2011 +0100

    Correct documentation.

commit 1b43d37b07ac7f179b0f6213f055e865df7d5881
Author: jaypipes@gmail.com <>
Date:   Fri May 27 10:29:59 2011 -0400

    Add missing stop_servers() calls to two functional test cases.

commit e3083228b8736795b87c4b350b81cb83d00f6180
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Fri May 27 10:43:17 2011 +0100

    Remove changes to stub database.

commit a5cd430b0b1cc5afe35995d96055ab443a3ea691
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri May 27 02:24:55 2011 +0000

    Auto-migrate if tables don't exist

commit d82590e6c2e280d89643c4d2a1d96872d3e6e071
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu May 26 17:27:42 2011 +0100

    Fix accidental delete.

commit 3b5e254a67ab39985476759eafcd3a5b5c07538c
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu May 26 17:08:23 2011 +0100

    Remove additions to FIXTURES in test/stubs.py, which requried changes elsewhere.

commit c54e7bf264d25139841bfefd9c7076cad50d4420
Merge: 491c6aa 3d19761
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu May 26 13:53:48 2011 +0100

    Sync with trunk.

commit 3d1976173a64a4412c1849f50b3bcd80c0d37b20
Merge: 1aa4e3b 24625ff
Author: jaypipes@gmail.com <>
Date:   Wed May 25 20:37:10 2011 +0000

    Documentation for new results filtering in the API and client.

commit 24625ffb74ae13e112a740990cb4b2f6f6d97ddb
Author: jaypipes@gmail.com <>
Date:   Wed May 25 16:03:00 2011 -0400

    Fix tiny typo

commit ccdc3a8b46c2113b05f939d4303f338331471338
Merge: 0731152 1aa4e3b
Author: jaypipes@gmail.com <>
Date:   Wed May 25 13:19:05 2011 -0400

    Merge trunk

commit 37b1c2901ec29b43feb42d842413b2cbd3ffadde
Author: jaypipes@gmail.com <>
Date:   Wed May 25 11:03:16 2011 -0400

    Documentation for new results filtering in the API and client.

commit ef6f306d72e341133b505d2d478dc0374f310b23
Merge: 4db9df7 1aa4e3b
Author: jaypipes@gmail.com <>
Date:   Wed May 25 10:44:47 2011 -0400

    Merge trunk

commit 1aa4e3b262b907f2888fcc522b6b6c96c3dd72a3
Merge: b6b231f 7ec4851
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed May 25 14:42:02 2011 +0000

    Adding support for query filtering from the glance client library.

commit 7ec48519309fd90f85e2f274d0883cbe64b1863b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 24 15:47:59 2011 -0400

    renaming query_params to params

commit b347f8bca1a8cc7f9d2d2be5e4610a4c97fad747
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 24 15:45:43 2011 -0400

    abstracting out filters query param serialization into BaseClient.do_request

commit a9237cbff12590877ebbbd25bb22ab083a994aa9
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 24 15:07:19 2011 -0400

    renaming tests to resolve conflict

commit c3aba9a55180192f222a2cd7cda7e77178bbd268
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 24 14:52:22 2011 -0400

    adding filters param to get_images and get_images_detailed in glance client

commit 65d06e2f84dc127e15125b1f53650e4309914194
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Mon May 23 19:01:54 2011 -0700

    Bug #787296: test_walk_versions fails with SQLalchemy 0.7
    
    Cap SQLalchemy and sqlalchemy-migrate at 0.6.x.  This works around the
    problem where test_walk_versions fails with 0.7.
    
    It's obviously not a long-term fix.

commit 491c6aab2c0e80da3ba58d1e00aee326121e70ae
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu May 19 10:24:59 2011 +0100

    Updated doc with 'iso' disk_format.

commit 2ce002b38bcc8168c62c4925bb74c9d9e4540174
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu May 19 10:20:54 2011 +0100

    Update documentation.

commit 593fa8e523c7b2a52f39b2cefaf7749034222887
Merge: 9df794d b6b231f
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu May 19 09:23:41 2011 +0100

    Merge changes.
    Update tests. New image indexes relative to existing indexes.

commit b6b231fd153557982a933e149048acf6d0b366ba
Merge: 5a2b5b6 32fa5ad
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed May 18 15:48:07 2011 +0000

    Adding support for api query filtering
    - equality testing on select attributes: name, status, container_format, disk_format
    - relative comparison of size attribute with size_min, size_max
    - equality testing on user-defined properties (preface property name with "property-" in query)

commit fa9c6b6252c32f6336d088577e68aa7e9bc9ff2e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 20:32:37 2011 -0400

    updating stubs with new sorting logic; updating tests

commit cbab5d20c61c190b8b24159cc14b6faceec4a6d6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 20:19:44 2011 -0400

    fixing some copy/paste errors

commit b35dc0de3ca8a6d284c0ba65fe32a94c91415792
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 20:17:31 2011 -0400

    fixing some webob exceptions

commit d01588a7d7277e3e7df574795bfaaf0ba301100f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 20:14:18 2011 -0400

    slight modification to registry db api to ensure marker works correctly

commit d5d109b735c5381c8d0018941c3b0ab9b4a38bc9
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 20:11:46 2011 -0400

    slight refactoring per jaypipes' suggestions; sort on get images calls is now created_at desc

commit 9df794d23a4944dc2d69cf6df3f2fd5e6f6d7da7
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Tue May 17 15:56:31 2011 +0100

    Add tests for 'iso' image type.
    Remove hard coding of next available image id in tests.  This prevents new test images from being added to the set generated by tests.unit.stubs.FakeDatastore

commit 70164edbd98a46ec94df38585b1cb75a97c965c9
Merge: 812d9b8 32fa5ad
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 09:34:42 2011 -0400

    pulling from parent branch

commit 32fa5ad441979d7c67cfbf378bc5410f75fdb07d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 09:27:09 2011 -0400

    docstring fix

commit b89e2f1875b23490706e58e16141a994a1019643
Merge: f1b939a 5a2b5b6
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Tue May 17 10:47:38 2011 +0100

    Merge latest with latest Glance.

commit 812d9b880d2eb435d84e8e5ec11d3da48d040bdc
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 16 11:17:55 2011 -0400

    pushing marker/limit logic down into registry db api

commit 0931d0dbebf319d6ea316039fbf48a1f7f2ea1a7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 16 10:43:33 2011 -0400

    adding support for marker & limit query params

commit d07be5ab9487e0e3acd645b1de8e2dffaa440602
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 16 10:28:41 2011 -0400

    removing some unnecessary imports

commit 45eb5582b3d4adad2f01974e9ed3d372bb34f300
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 16 09:20:53 2011 -0400

    making registry db api filters more structured; adding in a bit of sqlalchemy code to filter image properties more efficiently

commit e40fb50f28c90dd2e08cbd02d082d41bd3ba9beb
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 16 09:02:09 2011 -0400

    consolidating image_get_all_public and image_get_filtered in registry db api

commit 60bfbbdab096c8f74ec7fd691e08731027beccb2
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun May 15 22:38:44 2011 -0400

    adding test case for multiple parameters from command line

commit fb501c459927b91b2f71a8e34b66adb47bc4aa21
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun May 15 22:16:49 2011 -0400

    adding custom property api filtering

commit 259d853bf2f18f72988dad4a58c0d0ef4864977f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun May 15 20:34:35 2011 -0400

    adding size_min and size_max api query filters

commit fb4576eb3fab1ed81ee3c0e3d6bff3b0bd13e78c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat May 14 21:05:04 2011 -0400

    implemented api filtering on name, status, disk_format, and container_format

commit 5a2b5b68b2d8d190a9540f5de7b19c036e056b33
Merge: 1dc8672 db4eeb9
Author: jaypipes@gmail.com <>
Date:   Sat May 14 02:31:46 2011 +0000

    Adds versioning to the Glance API.
    
    I'd like to just get comments on my approach and go from there. Thanks in advance for review comments!

commit db4eeb91637d1fcaa38a42a78b31aa4b4957648d
Author: jaypipes@gmail.com <>
Date:   Fri May 13 18:28:51 2011 -0400

    Add test and fix for /v1.2/images not properly returning version choices.

commit 82cccf4c03dd17924e0004c7f290fe7d5430e34d
Author: jaypipes@gmail.com <>
Date:   Thu May 12 17:28:25 2011 -0400

    Add more tests for version URIs and accept headers and fix up some of Brian's review comments

commit 94b9c19c402dddf6a8c2eededeea63d9f642cb01
Merge: 77054d4 1dc8672
Author: jaypipes@gmail.com <>
Date:   Wed May 11 19:52:06 2011 -0400

    Fix merge conflict...

commit 77054d402c49c43ab0dbf6b1609f40097392caee
Author: jaypipes@gmail.com <>
Date:   Wed May 11 19:03:51 2011 -0400

    Changes versioned URIs to be /v1/ instead of /v1.0/
    
    Adds middleware that detects versioned URIs and also
    detects media types in the Accept: header and attempts
    to determine the API controller to return for the
    client request.
    
    Adds a bunch of functional test cases for variations
    of calling the versioned and unversioned URIs with and
    without Accept: headers.

commit 1dc867207fd7b6ac93d656c564469e0cf89b74bb
Merge: a0bf107 4db9df7
Author: jaypipes@gmail.com <>
Date:   Wed May 11 17:17:50 2011 +0000

    Improve logging configuration docs...

commit 7f6944c816716b5dfe7fb1f4911110135485c8ed
Author: jaypipes@gmail.com <>
Date:   Tue May 10 12:26:29 2011 -0400

    Doc and docstring fixes from Dan's review

commit bb13fe4c4aaafe425afecfa6eb8272759cd418bd
Author: jaypipes@gmail.com <>
Date:   Mon May 9 15:01:24 2011 -0400

    Removed some test config files that slipped in...

commit 1359d6e2ccf6a9c5db1e16d66f0a23a67aef44e5
Author: jaypipes@gmail.com <>
Date:   Mon May 9 14:55:46 2011 -0400

    Fix up find_config_file() to accept an app_name arg. Update all documentation referencing config files.

commit f1b939a42597c9a56d26ad30d4b7cd619f49f672
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Fri May 6 17:03:50 2011 +0100

    Fix pep8 complaint.

commit bca71e0ffe9be8eb9b25e622340a8f8992ee815e
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Fri May 6 16:06:01 2011 +0100

    Add DISK_FORMAT for 'iso' type images.

commit efa78881ebc91abc342216388aae9a33cbd526f1
Author: jaypipes@gmail.com <>
Date:   Thu May 5 19:12:21 2011 -0400

    Adds versioning to Glance's API.
    
    Important notes:
    
    * Split API and Registry configuration files out into 2 files
      Therefore, we need to update the packaging/upstart scripts
      and documentation
    * The paste.deploy stuff is now ready to go for pipeline-style
      middleware that is coming with authentication
    * /images -> /v1.0/images
    * /versions endpoint added
    * Split out the starting/stopping of servers into a Server class
      in tests.functional.FunctionalTestCase. This was really useful
      to get different configuration files working well.

commit a0bf1074744638845432ab68e754f7a795cf8a91
Merge: eaa24c5 f92cbb5
Author: jaypipes@gmail.com <>
Date:   Thu May 5 16:42:50 2011 +0000

    Changes glance index to return all public images
    in any status other than 'killed'. This should allow
    tools like euca-describe-images to show images while
    they are in a saving/untarring/decrypting state.
    
    One line fix. 110 line test case. :)

commit f92cbb5b03513c527b4d26eea23f4f5c0fb23b70
Author: jaypipes@gmail.com <>
Date:   Wed May 4 11:24:11 2011 -0400

    Fix numbering in comment...

commit 59a8e89c3be8bda60b75d6c7182f50901e8c755f
Author: jaypipes@gmail.com <>
Date:   Wed May 4 11:03:28 2011 -0400

    Fixed doh. Updates test case to test for condition that should have failed with status!='active'

commit 777ff1e4b802cca260dddc8d3e0bf43a9b4e726a
Author: jaypipes@gmail.com <>
Date:   Tue May 3 21:44:28 2011 -0400

    Changes glance index to return all public images
    in any status other than 'killed'. This should allow
    tools like euca-describe-images to show images while
    they are in a saving/untarring/decrypting state.
    
    One line fix. 110 line test case. :)

commit eaa24c578cf91f9bd1dd5e4fa4061ebd24992668
Merge: b902f67 f8dd785
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 29 20:02:42 2011 +0000

    Adding prefilled Authors, mailmap files
    Adding test to validate Authors file is properly set up

commit b902f67ea32ac37ccb4d6f9c2f76768ece71be82
Merge: 8d10e63 c9a22ee
Author: jaypipes@gmail.com <>
Date:   Fri Apr 29 19:02:43 2011 +0000

    Documentation updates to make glance add command clearer, hopefully :)

commit f8dd785a962fd7123795268fdcfce3a977953295
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Apr 27 11:00:49 2011 -0700

    adding Authors functionality; fixing one rogue pep8 violation

commit 4db9df77d0b8cdc4a1598349179d0c9bb1b6165e
Author: jaypipes@gmail.com <>
Date:   Tue Apr 26 16:10:33 2011 -0700

    Improve logging configuration docs...

commit 8d10e637db3fe0fd30e99513749b2c3beb69a5f3
Merge: 40b1324 b3fde25
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Apr 26 21:37:42 2011 +0000

    Prevent users from uploading images with a bad or missing store. Allow deletion from registry when backend cannot be used.

commit 0731152d1349769310c31fa0e833f7e4f354bff6
Author: jaypipes@gmail.com <>
Date:   Tue Apr 26 14:01:16 2011 -0700

    bcwaldon review fixups

commit b3fde25d6d52e49cb0ad3285f81ada12512a96ed
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Apr 26 09:31:48 2011 -0700

    adding comment

commit 40b132475608ded2786e8aac69d9a59e3c1cdcc2
Merge: 779e52f 197e862
Author: jaypipes@gmail.com <>
Date:   Tue Apr 26 04:27:41 2011 +0000

    Fix for bug #768969: glance index shows non-active images; glance show <ID> does not show status.

commit 12a0b2d5f4778802cf8d8bfef63f81d3dcc9eea1
Author: jaypipes@gmail.com <>
Date:   Mon Apr 25 12:11:31 2011 -0400

    Completes the S3 storage backend. The original code did not actually fit
    the API from boto it turned out, and the stubs that were in the unit test
    were hiding this fact.
    
    Adds a unit test that gets S3 testing up to snuff with the Swift backend.

commit 656abb744277c5d15c42e6210c8960baa11f13be
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 17:02:56 2011 -0400

    catching NotFound to prevent failure on bad location

commit 7f339e73ae2fcd8019df368d392858bfa22e36ac
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 16:51:08 2011 -0400

    Prevent requests with invalid store in location param

commit 29f45c563e9cc8fa3876f79d0b1fb105bb69553c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 16:31:29 2011 -0400

    Allow registry deletion to succeed if store deletion fails

commit c9a22eeb6ce930659d63266d2d6e3480c5d539ee
Author: jaypipes@gmail.com <>
Date:   Fri Apr 22 14:54:24 2011 -0400

    Documentation updates to make glance add command clearer, hopefully :)

commit 197e862bfeb7d6951d09cfd0a1bb61f02dc416d9
Author: jaypipes@gmail.com <>
Date:   Fri Apr 22 13:57:19 2011 -0400

    Fix for LP Bug #768969.
    
    Two things were happening that this patch corrects:
    
    a) If adding an image fails, the glance add output says that
       adding the image failed, however, doing a glance index would
       show the image. This was because the call to get all public
       images was not correctly filtering the result for 'active'
       status images. The image failing to be added causes the image
       status to be 'killed', and so killed images should not appear
       in the output of glance index or glance detail.
    b) glance show <ID> was not showing the status of the image, so
       it was not clear that the image, while not added successfully,
       was still in the registry, but in a 'killed' status.
    
    I added a note to the output of the failed add command that the
    Glance registry may still have an image record, but the status
    would likely be in the 'killed' state.
    
    Added a functional test case that verified the behaviour in the bug
    and verified the fix, once coded.

commit 779e52f60a6deb1d1f83c4b9bd26a292ace34e28
Merge: 32e9b88 de1800b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 16:22:41 2011 +0000

    Expanding user confirmation default behavior.

commit de1800b4b3880569aebd902e1488be51d70fd629
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 11:14:14 2011 -0400

    removing excessive exception handling

commit 8a9e4327c4ef159b7784565f817030cb2aba9889
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 10:50:59 2011 -0400

    pep8 fixes

commit f9de2f3ef5afd035bfd8fcfaef5a085fe684c429
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 10:48:50 2011 -0400

    docstring and exception handling

commit 7cbd2a6870e8a8e8e2daaccb071716da4eba4b24
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 10:37:51 2011 -0400

    Expanding user_confirm default behavior

commit 32e9b882e159f14601cba8cd7efcb8959fdc113e
Merge: 50a9f90 0c6403f
Author: Joseph Suh <jsuh@isi.edu>
Date:   Thu Apr 21 15:07:43 2011 +0000

    I modified documentation to show more first-time user friendly examples on using glance. With the previous examples, I followed it as a first-time user and had to spend more than necessary time to figure out how to use it. With this modification, other first-time users would make it work on their systems more quickly.

commit 50a9f90b7dcf17ac398ac3d508e0ae4eb9003e2c
Merge: 25077d4 4ba7a1c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Apr 21 02:17:43 2011 +0000

    - Require user confirmation for "bin/glance clear" and "bin/glance delete <id>"
    - Allow for override with -f/--force command-line option

commit 4ba7a1c80a78c87418021ab8a659fd7b6e2068f5
Merge: ebd81ca 25077d4
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Apr 20 19:58:10 2011 -0400

    adding --force option to test_add_clear

commit 25077d444295d03abc1715ee91c8167ccae3b9ec
Merge: 7d0f1d2 32d04b3
Author: jaypipes@gmail.com <>
Date:   Wed Apr 20 20:47:40 2011 +0000

    Adds a test case for updating an image's Name attribute. glance update was not regarding 'name' as a top-level modifiable attribute...

commit 32d04b3bbaea57a70daac2ebfaec5be4e041f9c1
Author: jaypipes@gmail.com <>
Date:   Wed Apr 20 15:12:18 2011 -0400

    Name is an attribute that is modifiable in glance update, too..

commit 7d0f1d2fef6c9e253aaefe651ea00ebbaf079676
Merge: 5f3f566 5e35359
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Apr 20 18:37:42 2011 +0000

    Mark image properties as deleted when deleting images.
    Added a unit test to verify public images and their properties get deleted when running a 'glance clear' command.

commit 5e35359d45232af097e143fc4067afc5adc7c1a1
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Apr 20 14:08:04 2011 -0400

    Update tests and .bzrignore to use tests.sqlite instead of glance.sqlite.

commit 47af47787b52052950012b36ea7257650d1ba5e4
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Apr 20 14:01:19 2011 -0400

    Only modify the connection URL in runs_sql if the original connection
    string starts with 'sqlite'.

commit 896c81209d0e123ce74f0af6b67710a66ac2431e
Merge: fe7a8e9 d071d65
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Apr 20 13:40:39 2011 -0400

    Merge in code from lp:~jaypipes/glance/clear_image_props to make a nice
    decorator function we can use for tests that need to run backend SQL
    commands. This should keep our tests zippy but provide us the access we
    need for disk based DB access.

commit d071d6548f16a0dac281365abc41e3f10283b58c
Author: jaypipes@gmail.com <>
Date:   Wed Apr 20 13:27:02 2011 -0400

    Create a decorator that handles setting the SQL store to a disk-based SQLite database when arbitrary SQL statements need to be run against the registry database during a test case

commit fe7a8e9ec1dc53d8765c60d2b9995a9459bd7da7
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Apr 20 12:06:20 2011 -0400

    Docstring update on the run_sql_command function.

commit a13fa8a6bd07cd91d4a590bc1415a51be4b392bb
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Apr 20 11:07:44 2011 -0400

    Mark image properties as deleted when deleting images.
    Added a unit test to verify public images and their properties get deleted
    when running a 'glance clear' command.

commit 5f3f566ea7197f6694572f6e7bfe8c71655e940f
Merge: a4a4226 5ae1687
Author: jaypipes@gmail.com <>
Date:   Tue Apr 19 22:32:40 2011 +0000

    Add log_file to example glance.conf

commit ebd81ca0f3f36a48378639871ba12f8f847bc457
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Apr 19 15:15:40 2011 -0400

    fixing spacing in help text

commit 860e8c57a237dd63798f9f50d4acd9cba7e8026d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Apr 19 15:12:52 2011 -0400

    adding confirmation on image delete/clear; adding user_confirm functionality

commit 5ae168752c759ba4f3bf0f25f150a8ba30af8397
Author: jaypipes@gmail.com <>
Date:   Tue Apr 19 15:07:07 2011 -0400

    Add log_file to example glance.conf

commit a4a4226401b223bfc871a441e0679a4278d4776d
Merge: 38d6e62 cd4a41b
Author: jaypipes@gmail.com <>
Date:   Tue Apr 19 17:54:32 2011 +0000

    Make sure we use get_option() when dealing with boolean values
    read from configuration files...otherwise "False" is True :(

commit 38d6e62e67668bf9bb5d79992f438f95a8569366
Merge: 0dba121 2ff7a17
Author: Eldar Nugaev <enugaev@griddynamics.com>
Date:   Tue Apr 19 16:32:41 2011 +0000

    Fixing tests.
    Sorry for late response.
    
    Rick Harris wrote on 2011-04-12
    Really nice job, Eldar.
    
    > 46	+        image_swift = StringIO.StringIO("nevergonnamakeit")
    > 47	+        options = SWIFT_OPTIONS.copy()
    > 48	+        del options['swift_store_user']
    > 49	+        self.assertRaises(BackendException,
    > 50	+                          SwiftBackend.add,
    > 51	+                          2, image_swift, options)
    
    Might be better to DRY up the code some by adding a helper-method, like:
    
    def assertOptionRequiredForSwift(self, key):
      image_swift = StringIO.StringIO("nevergonnamakeit")
      options = SWIFT_OPTIONS.copy()
      del options[key]
      self.assertRaises(BackendException,
        SwiftBackend.add,
        2, image_swift, options)
    
    Marking as Needs Fixing, but if you don't like the idea, I'd be willing to set this as Approved (since the suggestion is so minor :-)

commit cd4a41b44f38ce2d4cb802c54e834ce246a47161
Author: jaypipes@gmail.com <>
Date:   Tue Apr 19 11:43:36 2011 -0400

    Make sure we use get_option() when dealing with boolean values
    read from configuration files...otherwise "False" is True :(

commit 0c6403f454fec1c58ee9032d3033db1a8219ba5b
Merge: 8b7927c d7ce2b9
Author: Joseph Suh <jsuh@isi.edu>
Date:   Mon Apr 18 16:37:48 2011 -0400

     resolve merge conflicts

commit 8b7927c28744872c556f726a75ec2ce477405bf2
Author: Joseph Suh <jsuh@isi.edu>
Date:   Mon Apr 18 16:30:44 2011 -0400

    chnaged output

commit 0dba121f03f5a98bbbb90320a51aebefd27a5266
Merge: e4ae52d 772658f
Author: Thierry Carrez <thierry@openstack.org>
Date:   Fri Apr 15 12:32:43 2011 +0000

    Open Diablo release.

commit 772658fa4ab98786af5df180ec944b56c88ec379
Author: Thierry Carrez <thierry@openstack.org>
Date:   Fri Apr 15 11:47:55 2011 +0200

    Diablo versioning

commit e4ae52d0b4a3e22b0dce1ca58e890bfc2756cd05
Merge: 1975f16 c9d3211
Author: Soren Hansen <soren.hansen@rackspace.com>
Date:   Fri Apr 15 09:34:17 2011 +0000

    Fake merge with ancient trunk. This is only so that people who "accidentally" have been following lp:~hudson-openstack/glance/trunk will not have problems updating to this.

commit 1975f1693380bae370245fbbf1eb6dbd409dcc72
Merge: 3dcfd4a aa71659
Author: Thierry Carrez <thierry@openstack.org>
Date:   Thu Apr 14 22:03:01 2011 +0000

    Final versioning for Cactus

commit 2ff7a179c3826260c25357e84d9847e81fc1843f
Author: Eldar Nugaev <enugaev@griddynamics.com>
Date:   Thu Apr 14 03:18:26 2011 +0400

    fixing after review

commit 3dcfd4a3b4c4ada91b528db3914a00ec55885327
Merge: 5a42a92 046a4e6
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 22:07:59 2011 +0000

    Removes capture of exception from eventlet in _upload_and_activate(), which catches the exceptions that come from the _safe_kill() method properly.
    
    Also fixes an incorrect call to _safe_kill() with mapping instead of image ID in the block of code that kills an image if a bad checksum is given.
    
    Fixes bug #759018.

commit 046a4e628721c257fb3de82ef60c279ceefb7696
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 17:00:08 2011 -0400

    RickH fixups from review

commit 3a3dee990ad0121c225ee4578fbd568dda7c509e
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 15:14:36 2011 -0400

    Add catch-all except: block in _upload()

commit d7ce2b96d3406406a4ab55f1d8890126d4885c57
Author: Joseph Suh <jsuh@isi.edu>
Date:   Wed Apr 13 15:12:46 2011 -0400

    change output from glance-registry

commit 388f66eed382e7d97116e3fb02d85dcd69280e91
Merge: 3602bb1 5a42a92
Author: Joseph Suh <jsuh@isi.edu>
Date:   Wed Apr 13 15:10:06 2011 -0400

    get latest from lp:glance

commit 5a42a92e77018615de60eb7c5ad50f9a14409858
Merge: 9ad6223 1b84b48
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 17:03:04 2011 +0000

    Ensures that configuration values for debug and verbose are used if command-line options are not set.

commit ad4c92bada610654a80e2682411743add8687ea5
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 12:44:47 2011 -0400

    Removes capture of exception from eventlet in _upload_and_activate(), which
    catches the exceptions that come from the _safe_kill() method properly.
    
    Also fixes an incorrect call to _safe_kill() with mapping instead of image
    ID in the block of code that kills an image if a bad checksum is given.
    
    Fixes bug #759018.

commit 9ad6223fd1677a66b6af1e5c638c1a80d794c61e
Merge: 9ed5eef f46c961
Author: Eldar Nugaev <enugaev@griddynamics.com>
Date:   Wed Apr 13 12:57:52 2011 +0000

    Fix logging in swift

commit 1b84b48a245c6d7a93c45528679f3f802ffb36b2
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 08:56:45 2011 -0400

    Fix Thierry's notice about switched debug and verbose

commit 9ed5eefd947983076958a7652533a6426f18c4f9
Merge: cb8b358 6703ba1
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 12:53:02 2011 +0000

    Change parsing of headers to accept 'True', 'on', 1 for boolean truth values.

commit aa716596fdd2cc5e6dcd4ff57c00d96c5db75f96
Author: Thierry Carrez <thierry@openstack.org>
Date:   Wed Apr 13 10:36:44 2011 +0200

    Final cactus versioning

commit 6703ba193e5ea7455777ffdf2d2902593e4204be
Author: jaypipes@gmail.com <>
Date:   Tue Apr 12 17:45:16 2011 -0400

    OK, fix docs to make it clear that only the string 'true' is allowed for boolean headers. Add False-hood unit tests as well.

commit e6f8c72fedb2c3ca323055aad8b60afedc23021e
Author: jaypipes@gmail.com <>
Date:   Tue Apr 12 14:01:27 2011 -0400

    Logging was not being setup with configuration file values for debug/verbose

commit 12fead04efd119d9f6106ab8560eebf06c2b5919
Merge: 65386df cb8b358
Author: jaypipes@gmail.com <>
Date:   Tue Apr 12 13:27:51 2011 -0400

    Merge trunk

commit cb8b3580f7627048c23dd73452392e4a284295a8
Merge: 65386df cc8d96d
Author: jaypipes@gmail.com <>
Date:   Tue Apr 12 17:12:56 2011 +0000

    Fix up the way the exception is raised from _safe_kill()... When I "fixed" bug 729726, I mistakenly used the traceback as the message. doh.

commit 788296100dae6a0ecefff58014bcc0bc422e1874
Author: jaypipes@gmail.com <>
Date:   Mon Apr 11 20:44:06 2011 -0400

    Change parsing of headers to accept 'True', 'on', 1 for boolean truth values.

commit 65386df0b78c770db203f6ef953faa1ba57c17a5
Merge: 74e8627 7582a33
Author: Soren Hansen <soren.hansen@rackspace.com>
Date:   Mon Apr 11 22:22:54 2011 +0000

    Add the migration sql scripts to MANIFEST.in. The gets them included in not only the tarball, but also by setup.py install.

commit 7582a33c79b6fbfda1b68182ce79721113204815
Author: Soren Hansen <soren.hansen@rackspace.com>
Date:   Mon Apr 11 22:21:06 2011 +0200

    Add the migration sql scripts to MANIFEST.in. The gets them included in not only the tarball, but also by setup.py install.

commit cc8d96d550af819202fb4b48e58d5e196397825e
Author: jaypipes@gmail.com <>
Date:   Mon Apr 11 14:57:52 2011 -0400

    Changed raise of exception to avoid displaying incorrect error message in _safe_kill()

commit f46c961ffba6d64c3dcea111e7a9bb71a1015245
Author: Eldar Nugaev <enugaev@griddynamics.com>
Date:   Mon Apr 11 20:53:43 2011 +0400

    fix logging in swift

commit 74e8627738033ff4205ab6388204ac2737451fab
Merge: cc43244 a2c9a1e
Author: jaypipes@gmail.com <>
Date:   Mon Apr 11 14:59:31 2011 +0000

    Changes "key" column in image_properties to "name".

commit cc43244ec3dcf714fcd18a942a190713c568b5f8
Merge: b786ade e8ab6b9
Author: Dan Prince <dprince@redhat.com>
Date:   Mon Apr 11 14:43:00 2011 +0000

    Updated properties should be marked as deleted=0. This allows previously deleted properties to be reactivated on an update.
    
    Add unit tests to check the above condition.
    
    Also updated the help for bin/glance's 'update' command so that it explicitly states:
    
     Metadata fields that are not specified in the update command will be deleted.

commit b786ade24f6ebb13f9164790460ec0fef2aee2fc
Merge: 9311501 9651745
Author: jaypipes@gmail.com <>
Date:   Mon Apr 11 14:37:54 2011 +0000

    Adds --config-file option to common options processing.
    
    Updates glance-manage to use configuration files as well
    as command line options.
    
    Completes documentation on configuring Glance's servers
    and CLI tools.

commit e8ab6b9503fd46673f0c1b3d51a46ac6f3125ccf
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Apr 7 22:11:49 2011 -0400

    Update the docs in bin/glance so that help for the 'update' command states
    that metadata not specified will be deleted.

commit 0178eb424108057cd12044440458624e37c456bb
Merge: 5b9aeee 9311501
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Apr 7 22:05:38 2011 -0400

    Merge w/ trunk.

commit a2c9a1eb5ce3b5abd650811ad9c97d5aa307af8a
Merge: c148274 9311501
Author: jaypipes@gmail.com <>
Date:   Thu Apr 7 15:07:36 2011 -0400

    Merge trunk, resolve conflicts, and 005 -> 006 the migration scripts.

commit 96517452e5d4f540f89404f09452b9dbb66483b4
Author: jaypipes@gmail.com <>
Date:   Thu Apr 7 14:54:07 2011 -0400

    Fix config test fixtures and pep8 error in bin/glance-manage

commit 8e04665f3916c42dc910426f4a4aa1ae14cf404e
Merge: 4eaf065 9311501
Author: jaypipes@gmail.com <>
Date:   Thu Apr 7 14:51:07 2011 -0400

    Merge trunk

commit 93115010a7a4d363ea4e82ab66df8356fab06b4b
Merge: a9f7d1c a3e529f
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Wed Apr 6 20:32:57 2011 +0000

    Provide revised schema and migration scripts for turning 'size' column in 'images' table to BIGINT. This overcomes a 2 gig limit on images sizes that can be downloaded from Glance.

commit 5b9aeeeb0d94c8631527b67a0106f177e4ce88a6
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Apr 6 13:34:58 2011 -0400

    Updated properties should be marked as deleted=0.
    Add unit tests.

commit a9f7d1caa8f63d42a3e416d954dfeb1dc359e402
Merge: 58ffbd0 b70c12d
Author: jaypipes@gmail.com <>
Date:   Wed Apr 6 16:32:51 2011 +0000

    Use logging module, not echo, for logging SQLAlchemy. Fixes bug 746435.

commit b70c12d18d3c55f628744adcd4ca71012911397f
Author: jaypipes@gmail.com <>
Date:   Wed Apr 6 11:17:34 2011 -0400

    Change order of setting debug/verbose logging. Thanks for spotting this, Elgar.

commit 58ffbd03c22ad2d69f8ba759cfa67eb523527d9c
Merge: 9c29336 edbb503
Author: jaypipes@gmail.com <>
Date:   Wed Apr 6 14:32:51 2011 +0000

    Use logging module, not echo, for logging SQLAlchemy. Fixes bug 746435.

commit 9c29336ee3174438d6b103331740e7ba0fda788d
Merge: bdd71d8 b1754fb
Author: jaypipes@gmail.com <>
Date:   Tue Apr 5 20:42:53 2011 +0000

    Ensure we don't ask the backend store to delete an image if the image is in a queued or saving state, since clearly the backend state has yet to completely store the image.

commit c14827491b5f2cf2e365d5644bae8b7bb24fd28f
Author: jaypipes@gmail.com <>
Date:   Mon Apr 4 15:41:34 2011 -0400

    Changes "key" column in image_properties to "name".
    
    As with all things migration, this was a pain in the ass.
    
    MySQL doesn't support RENAME INDEX, so a custom SQL migration
    file for it was needed.
    
    Likewise, SQLite doesn't support either RENAME INDEX or
    ALTER TABLE CHANGE COLUMN, so it also needed a custom migration
    script.

commit edbb503547eef35838747bc543f8217d7f70e4c9
Author: jaypipes@gmail.com <>
Date:   Mon Apr 4 13:58:38 2011 -0400

    Use logging module, not echo for logging SQLAlchemy.

commit 4eaf065305a8b811dc76d88261e39213fa105c15
Author: jaypipes@gmail.com <>
Date:   Mon Apr 4 13:00:26 2011 -0400

    Updates glance-manage to use configuration files as well
    as command line options.
    
    Completes documentation on configuring Glance's servers
    and CLI tools.

commit b1754fb076486efbdb7c7263a023984e007db707
Author: jaypipes@gmail.com <>
Date:   Mon Apr 4 10:32:14 2011 -0400

    Ensure we don't ask a backend store to delete an image if the image is queued or saving.

commit a3e529f8860c6c00ad0d52403052d0ec785f685b
Author: jaypipes@gmail.com <>
Date:   Mon Apr 4 09:59:07 2011 -0400

    Moved migration into Python script, otherwise PostgreSQL was not migrated. Added changes to the functional test base class to reset the data store between tests. GLANCE_SQL_CONNECTION env variable is now GLANCE_TEST_SQL_CONNECTION.

commit 01fea4a95599c68952858f9d68bd9ffc0ad65ae9
Merge: c2dc5cc aefd263
Author: jaypipes@gmail.com <>
Date:   Fri Apr 1 11:49:59 2011 -0400

    Merge Donal

commit c2dc5ccb696696c835539d0ef2390e06e36132e1
Merge: 81ecca0 bdd71d8
Author: jaypipes@gmail.com <>
Date:   Fri Apr 1 11:49:23 2011 -0400

    Merge trunk

commit 3602bb11b696d9b633d7911f3a3a72041ba3e6f0
Author: Jinwoo 'Joseph' Suh <jsuh@isi.edu>
Date:   Thu Mar 31 13:30:46 2011 -0500

    changed to more typical examples

commit aefd2639374360e5610490c8208770f2e352ee11
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu Mar 31 17:48:29 2011 +0100

    Add migration scripts for revising the datatype of the 'size' column in the images table.

commit 84051230f523294a1ea57bcdb3560bcdb4fda84e
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu Mar 31 15:43:28 2011 +0100

    Changes to database schema required to support images larger than 2Gig on MySQL.  Does not update the migration scripts.

commit bdd71d800780a917899da1d3215e9c16fe3447be
Merge: 226e0df 66c59b4
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Mar 29 19:22:25 2011 +0000

      Updates to the Registry API such that only external requests to
      update image properties purge existing properties. The update_image
      call now contains an extra flag to purge_props which is set to
      True for external requests but False internally.
    
      This resolves with revision 99 where Glance API incidentally deleted
      image metadata when uploading new images.

commit 66c59b4f3c1c512406a703cfc712f5acbac44d8d
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Mar 29 10:27:24 2011 -0400

    Updates to the Registry API such that only external requests to
    update image properties purge existing properties. The update_image
    call now contains an extra flag to purge_props which is set to
    True for external requests but False internally.
    
    This resolves with revision 99 where Glance API incedentally deleted
    image metadata when uploading new images.

commit 2a4a88330cb71f3a49d818fdbe6e436053ae76f1
Merge: 81ecca0 226e0df
Author: jaypipes@gmail.com <>
Date:   Mon Mar 28 15:19:58 2011 -0400

    Merge trunk

commit 226e0dfb2f2c3e1ae1146ec6862db790f057d857
Merge: 06b20cd 095f9b8
Author: Dan Prince <dprince@redhat.com>
Date:   Mon Mar 28 18:02:21 2011 +0000

    Update the glance registry so that it marks properties as deleted if they are no longer exist when images are updated.

commit 06b20cd3d9cec7ef15bb745beedec12512e11e70
Merge: eaee4da 23d8980
Author: jaypipes@gmail.com <>
Date:   Fri Mar 25 19:22:31 2011 +0000

    Simple one.. just add back the Changelog I removed by accident in r94. Fixes bug #742353

commit eaee4da21382ab7b3adc934f660d8861b2ee0f58
Merge: 81ecca0 ddee20b
Author: jaypipes@gmail.com <>
Date:   Fri Mar 25 19:17:35 2011 +0000

    Adds checksumming to Glance.
    
    When adding an image (or uploading an image during PUT operations),
    you may now supply an optional X-Image-Meta-Checksum header. When
    storing the uploaded image, the backend image stores now are required
    to return a checksum of the data they just stored. The optional
    X-Image-Meta-Checksum header is compared against this generated checksum
    and returns a 409 Bad Request if there is a mismatch.
    
    The ETag header is now properly set to the image's checksum now
    for all GET /images/<ID>, HEAD /images/<ID>, POST /images and
    PUT /images/<ID> operations.
    
    Adds unit tests verifying the checksumming behaviour in the API, and
    in the Swift and Filesystem backend stores.
    
    Includes migration script.
    
    NOTE: This does not include the DB migration script. Separate bug will be filed for that.

commit ddee20b558871edb79b0ae6459ecddb3509b6369
Author: jaypipes@gmail.com <>
Date:   Fri Mar 25 14:59:56 2011 -0400

    Uhhhm, stop_servers() should stop servers, not start them! Thanks to Cory for uncovering this copy/paste fail.

commit 4adc8f04e517f1f031a54ea13717a4db6ebe00a5
Author: jaypipes@gmail.com <>
Date:   Fri Mar 25 14:42:24 2011 -0400

    Fix up test case after merging in bug fixes from trunk... expected results were incorrect in curl test

commit cd150fbe321573c459b58382598d96733622e659
Merge: 6852c9e 81ecca0
Author: jaypipes@gmail.com <>
Date:   Fri Mar 25 14:33:54 2011 -0400

    Merge trunk

commit 23d8980b8696e6f40fb121f6bd9e20c01f5652a3
Author: jaypipes@gmail.com <>
Date:   Fri Mar 25 13:08:19 2011 -0400

    Add ChangeLog back to MANIFEST.in

commit 81ecca0470d8facd0aabad86969e8998d51eea6e
Merge: 36d0db0 85f91b7
Author: jaypipes@gmail.com <>
Date:   Thu Mar 24 23:12:29 2011 +0000

    Add migration testing and migration for disk_format/container_format

commit 85f91b771c63614b935ea14db32f2b8d1e6c1918
Merge: 3716d83 36d0db0
Author: jaypipes@gmail.com <>
Date:   Thu Mar 24 19:03:17 2011 -0400

    tests.unit.test_misc.execute -> tests.utils.execute after merge

commit 3716d8399516d344650a274aeb5373b6a02ba32b
Author: jaypipes@gmail.com <>
Date:   Thu Mar 24 15:31:30 2011 -0400

    Allow someone to set the GLANCE_TEST_MIGRATIONS_CONF environment
    variable to override the config file to run for the migrations
    unit test:
    
    pipes@serialcoder:~/repos/glance/bug730213$ GLANCE_TEST_MIGRATIONS_CONF=/tmp/glance_test_migrations.conf ./run_tests.sh -V tests.unit.test_migrations
    TestMigrations
        test_no_data_loss_2_to_3_to_2                               OK
            test_walk_versions                                          OK
    
            ----------------------------------------------------------------------
            Ran 2 tests in 2.744s
    
    This will make Monty happy so that Hudson can test more than just SQLite...

commit 095f9b86a4c36ccc233ac17e2f1cf359a13f0fdf
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Mar 23 14:23:20 2011 -0400

    Update the glance registry so that it marks properties as deleted if
    they are no longer in the update list.

commit 36d0db08f66938b05f93e9951d377ff1f8b02652
Merge: b8466c5 b7fcf16
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 18:22:26 2011 +0000

    Start eventlet WSGI server with a logger to avoid stdout output.
    
    Resubmitted to depend on the lp:~jaypipes/glance/bug731304 branch and not the lp:~jaypipes/glance/bug736295 branch, since lp:~jaypipes/glance/bug731304 contains all those fixes for bug736295.

commit b8466c53dbde1c9f5ec0ca1911a85bd7e94020c2
Merge: 5c78a0e 6ada142
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 16:39:11 2011 +0000

    Adds robust functional testing to Glance.

commit 6852c9ee1ff9baf7ea21e5e0e11e8984a8315fba
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 10:52:47 2011 -0400

    Add migration script for checksum column

commit be811f3ef45da52ed1d350a814022909cfb15f84
Merge: 67f5d86 c8d5756
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 10:50:11 2011 -0400

    Merge fix from bug730213

commit c8d5756e9dae046dfe33bc132d7d75feda248d22
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 10:49:20 2011 -0400

    Fixed an oops. Didn't realized Repository.latest returned a 0-based version number, and forgot to reversed() the downgrade test

commit 67f5d86260d77aee04d0cbb5f0885aedd89c02da
Merge: 0d7b3bb b6cc6e4
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 10:20:13 2011 -0400

    Merge bug730213 (Migration fixes and tests)

commit 0d7b3bb668068ac1037a9b473c8f631b4d3e5ebf
Merge: b2ec714 5c78a0e
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 10:16:10 2011 -0400

    Merge trunk and resolve conflicts

commit b6cc6e45606c250e0eb0b1395a4ba9ae23e480ca
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 09:45:11 2011 -0400

    OK, migrations are finally under control and properly tested.
    
    Don't think I need to stress how painful this was. I reworked
    the TestMigrations test case to properly test walking the
    upgrade and downgrade paths for multiple databases. The databases
    used in test_migrations are now configurable by placing sql connection
    strings in the /tests/unit/test_migrations.conf file, which defaults
    to SQLite-only but has an example of MySQL as well. I'll work with
    Monty to set up MySQL and PostgreSQL on the Jenkins box so we can
    verify migrate scripts on all major target DB platforms.
    
    There are a number of bugs in SA-Migrate that have workarounds in
    this patch. Issue 99 (http://code.google.com/p/sqlalchemy-migrate/issues/detail?id=99)
    means that MySQL change scripts cannot contain >1 SQL statement, which
    essentially means for MySQL, you *have* to use a Python change script.
    However, Issue 117 (http://code.google.com/p/sqlalchemy-migrate/issues/detail?id=117)
    points out that you *cannot* use a Python change script when your
    database is SQLite and you need to ALTER a table by adding or dropping
    a column and the table has secondary indexes on it (which, by chance,
    Glance registry's images table did have (on is_public and deleted columns).
    So, for SQLite in these situations, you *must* use a SQL changescript, which
    is why you see both a 003_add_disk_format.py Python change script, which
    is used for MySQL/PostgreSQL and 003_sqlite_downgrade.sql and 003_sqlite_upgrade.sql
    scripts in the migrate repo.
    
    There is a new test case verifies that data is not lost when moving
    from schema v2 to v3, where the type column is removed from the images
    table. I place the values that were in the type column into the image_properties
    table as records with a key column values of 'type'. The test case verifies
    that on upgrade from v2 to v3, the type column values are preserved as
    image properties, and on downgrade from v3 to v2, the type properties
    are re-inserted into the images.type column.
    
    Phew.

commit 6ada142538aa5d5dd1258036e552d343b753b53d
Author: jaypipes@gmail.com <>
Date:   Mon Mar 21 15:23:52 2011 -0400

    Remove non-existing files from MANIFEST.in

commit 4917c6917ffe98c1dabf5cb94394e2a0ec25c1d3
Merge: 95dcc39 5c78a0e
Author: jaypipes@gmail.com <>
Date:   Mon Mar 21 15:22:34 2011 -0400

    Merge trunk

commit 5c78a0e7f219388ff28c58fa0d51713c1a17e0b2
Merge: c898d9c b892a42
Author: Andrey Brindeyev <abrindeyev@griddynamics.com>
Date:   Mon Mar 21 14:12:27 2011 +0000

    Removed glance-combined. Fixed README

commit b892a42631c474856a30dfd97823996d8ee24568
Author: Andrey Brindeyev <abrindeyev@griddynamics.com>
Date:   Mon Mar 21 15:22:26 2011 +0300

    Removed glance-commit

commit ea0104ef1e3b0a8c8a38ed864718ed4b314b4b56
Author: jaypipes@gmail.com <>
Date:   Sun Mar 20 12:04:19 2011 -0400

    Re-raise _safe_kill() exception in non-3-arg form to avoid pep8 deprecation error.

commit 95dcc39fc9d24702c99a037fb336c7a05b997baa
Merge: c149503 c898d9c
Author: jaypipes@gmail.com <>
Date:   Sat Mar 19 10:26:13 2011 -0400

    Merge trunk and fix from Ewan

commit c898d9c0992aa61f4ae35b1ad7c57e1575756dc2
Merge: 4f8fe5a 4791da2
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Sat Mar 19 13:47:23 2011 +0000

    Bug #737979: glance-control uses fixed path to Python interpreter, breaking virtualenv
    
    Change #!/usr/bin/python to #!/usr/bin/env python.

commit 4791da25bacd72d34725820ed7b6f707f7429ce1
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Sat Mar 19 03:03:46 2011 +0000

    Bug #737979: glance-control uses fixed path to Python interpreter, breaking virtualenv
    
    Change #!/usr/bin/python to #!/usr/bin/env python.

commit 4f8fe5a492b65464705444416e462b3bb3ee57e8
Merge: d2db5a3 bdc4b1c
Author: jaypipes@gmail.com <>
Date:   Fri Mar 18 20:17:22 2011 +0000

    Removes glance-combined and fixes TypeError from bad function calls in glance-manage.

commit b7fcf16b1292b12594bab05eed830c4d05f71a3b
Author: jaypipes@gmail.com <>
Date:   Fri Mar 18 12:37:46 2011 -0400

    Start eventlet WSGI server with a logger to avoid stdout output

commit c1495033a0c635760c87966ed17d77beb86f7787
Author: jaypipes@gmail.com <>
Date:   Fri Mar 18 10:23:58 2011 -0400

    Pass boolean values to glance.client as strings, not integers

commit e70bccae0f060f874842a9d889d54d3afa5ba155
Author: jaypipes@gmail.com <>
Date:   Thu Mar 17 18:15:41 2011 -0400

    Small adjustment on wait_for_servers()... fixed infinite loop possibility

commit b936e28cd33ecfd6786fa0c6a05e9c192017531a
Author: jaypipes@gmail.com <>
Date:   Thu Mar 17 17:43:26 2011 -0400

    Adds robust functional testing to Glance.
    
    - Add /tests/functional/*
    - tests.functional.FunctionalTest is the base class for
      any test that needs to execute against *actual* Glance
      API and registry servers instead of stubbed out fakes.
    - Adds functional test case that uses cURL to execute a
      series of actions against the API server
    - Adds functional test case that uses bin/glance to
      execute a series of actions against the API server

commit 7e701349546ed7aa72abe3cb322c18a22caa0d17
Author: jaypipes@gmail.com <>
Date:   Thu Mar 17 17:09:06 2011 -0400

    Ensure Content-type set to application/octet-stream for GET /images/<ID>

commit b6fdefd9ec718f8d54e4e64868eac0c928abac55
Author: jaypipes@gmail.com <>
Date:   Thu Mar 17 17:05:38 2011 -0400

    Ensure Content-Length sent for GET /images/<ID>

commit 7040ce5036830d0591f5f9c90c78548638510d90
Author: jaypipes@gmail.com <>
Date:   Thu Mar 17 15:57:47 2011 -0400

    HTTPBackend.get() needed options in kwargs

commit bdc4b1c8e66e8e06866e391ec5043a13cff8fc11
Author: jaypipes@gmail.com <>
Date:   Thu Mar 17 10:39:50 2011 -0400

    Remove glance-combined (use glance-control all start). Fix glance-manage to call the setup_logging() and add_logging_options() methods according to the way they are called in glance-api and glance-registry

commit d2db5a3b709d646aebe533183c73035369f706f5
Merge: feb92e7 7d32277
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 19:27:26 2011 +0000

    Support account:user:key in Swift URIs. Adds unit tests for various calls to parse_swift_tokens()

commit feb92e7d17056cba55678e8c688867db73fcd27c
Merge: a20158e 3926bfe
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 18:32:36 2011 +0000

    Adds documentation on configuring logging and a unit test for checking simple log output

commit 7d322773d618467e2951473d09c431d359ed45d7
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 12:45:01 2011 -0400

    Support account:user:key in Swift URIs. Adds unit tests for various calls to parse_swift_tokens()

commit 385341a94ec0bf1290f78342d9d9a1aa32ae9ec6
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 12:34:04 2011 -0400

    Cherry pick r86 from bug720816

commit 7d51420e89f84fe933f7d9266bcb25ab3d205cf9
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 12:33:51 2011 -0400

    Cherry pick r87 from bug720816

commit 3926bfe78df75d9e06f82bc6be015f5f1d0c0013
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 12:30:09 2011 -0400

    Fixed run_tests.py addError() method since I noted it was faulty in another branch...

commit 599aec7b814ce5bb63bea137d8fe4710a14210d3
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 12:13:07 2011 -0400

    Tiny pep8'ers

commit 09916c2a4048e555afb74b9049c857bb1a9c4040
Merge: 4e4167c a20158e
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 12:11:56 2011 -0400

    Merge trunk and resolve conflict

commit a20158e7d79f7140b4048028ee43bd54427c5f26
Merge: 12f5450 f561c6e
Author: Taku Fukushima <tfukushima@dcl.info.waseda.ac.jp>
Date:   Wed Mar 16 15:17:20 2011 +0000

    I stole the colorized code from nova.

commit f561c6e460b5d35f82025a90a30927ef30abec87
Author: Taku Fukushima <tfukushima@dcl.info.waseda.ac.jp>
Date:   Wed Mar 16 15:43:16 2011 +0900

    Fix typo

commit 12f5450009c7fd981eb55c033df72cbdd862ed47
Merge: ea52216 63db7f5
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Mar 15 17:32:25 2011 +0000

    A quick patch to allow running the test suite on an alternate db backend.

commit 63db7f59aaa25aebe2b6e67864aac6027659928f
Merge: eef2664 ea52216
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Mar 14 12:10:24 2011 -0700

    Merged trunk -resolved conflicts.

commit d523eb9fa5bd3e2a540d33e641ee163ca506e0d5
Author: Taku Fukushima <tfukushima@dcl.info.waseda.ac.jp>
Date:   Fri Mar 11 12:09:40 2011 +0900

    [Add] colorization stolen from nova

commit ea52216d9d5d2facd6685cd184e9d4cca0853e04
Merge: 4900126 4d7df85
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Mar 9 22:17:06 2011 +0000

    Don't require swift module for unit-tests

commit 4d7df857ca7bc43485df7a5977774e8e775e9c5a
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Mar 9 15:59:56 2011 -0600

    Pep8 fix

commit c3aa5a706c0b1e50b786f4bafbb3fa2c08178c8c
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Mar 9 15:35:38 2011 -0600

    Backing out unit-test workaround

commit eef2664dda2cf30d92280405a886a9dd88254862
Author: Monty Taylor <mordred@inaugust.com>
Date:   Wed Mar 9 13:03:29 2011 -0800

    Changed to have 2 slashes.

commit c6ae25b2c938d8f89e9532727789520bec4766c2
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Mar 9 14:17:37 2011 -0600

    Allow unit-tests to run without swift module

commit 4e4167cca7b31042133b04cf38c28bb16e9825b7
Author: jaypipes@gmail.com <>
Date:   Wed Mar 9 12:33:52 2011 -0500

    Remove spurios comment in test file

commit 49001264d422bc0330b49a5bfd51ca312d71d6ad
Merge: e3a1725 72aa1eb
Author: jaypipes@gmail.com <>
Date:   Wed Mar 9 13:47:14 2011 +0000

    Add Glance CLI tool

commit 72aa1eba7ce90d8184379c6f3d1dc1d3d27f61aa
Author: jaypipes@gmail.com <>
Date:   Wed Mar 9 08:38:25 2011 -0500

    Silly mistake when resolving merge conflict...fixed

commit 0c25ad6ca1daf7a0f87933feeee4fa08a3565ee5
Merge: 3dc0d8d e3a1725
Author: jaypipes@gmail.com <>
Date:   Tue Mar 8 19:07:44 2011 -0500

    Merge trunk and resolve conflicts

commit e3a17257d5b8279e294516e1d77012d378c12d95
Merge: 665d4ea 6ab6bcf
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Tue Mar 8 23:42:01 2011 +0000

    Fixes passing of None values in metadata by turning them into strings.  Also fixes the passing of the deleted column by converting it to and from a bool.  The test for passing metadata was updated to include these values.

commit 75575b41c6598e4e7c60fd216f16fd805b997930
Author: jaypipes@gmail.com <>
Date:   Tue Mar 8 16:52:38 2011 -0500

    Adds documentation on configuring logging and a test that log_file works. It didn't, so this also inludes fixes for setting up log handling :)

commit 6ab6bcfd347f49a5d9d080353bb0edce5e3eec58
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Tue Mar 8 20:12:41 2011 +0000

    fix data passing

commit f973d2863c050178eb92d2efb9fb1717d138040b
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Tue Mar 8 20:11:44 2011 +0000

    add failing test for None and deleted

commit 665d4ea8f135b47005ef251f93ef632131dae2d9
Merge: 02a3cd3 92fe3b8
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Mar 8 20:02:05 2011 +0000

    Uses logger instead of logging in migration.py

commit 92fe3b8614cfd8a159c957ae951c1e6d405f81c1
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Mar 8 19:51:25 2011 +0000

    Using logger in migration api instead of logging directly

commit ed5157ec94f3562953dd336fcfcf807fc448e431
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Mar 8 09:53:25 2011 -0800

    Only clean up in the cleanup method. Also, we don't need the separate URI
    now.

commit 41196fff8be02817d2b7c742b68a651b91b8b7ef
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Mar 8 09:51:33 2011 -0800

    Use unregister_models instead of os.unlink to clean up after ourselves.

commit c2ea1eba6447bf01d1d22f0d763adcf025f4d903
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Mar 8 09:51:19 2011 -0800

    Fixed unregister_models to actually work.

commit 93a4fbefafa561ee7961deeef4ebd2cb1aee6852
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Mar 8 09:29:46 2011 -0800

    Fixed migration test to use a second DB URL

commit 3c10cd4035d75e19c651e4516916135068897c0e
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Mar 8 09:08:29 2011 -0800

    Replaced use of has_key with get + default value.

commit b2ec714d12f553b64d78ecb1fa32ae282fba1ec9
Author: jaypipes@gmail.com <>
Date:   Tue Mar 8 11:40:35 2011 -0500

    Make it clear that the checksum is an MD5 checksum in docs.

commit af11621170f355b3ac62e7a16f9bf5b1719ab1b6
Author: jaypipes@gmail.com <>
Date:   Tue Mar 8 10:22:44 2011 -0500

    Adds checksumming to Glance.
    
    When adding an image (or uploading an image during PUT operations),
    you may now supply an optional X-Image-Meta-Checksum header. When
    storing the uploaded image, the backend image stores now are required
    to return a checksum of the data they just stored. The optional
    X-Image-Meta-Checksum header is compared against this generated checksum
    and returns a 409 Bad Request if there is a mismatch.
    
    The ETag header is now properly set to the image's checksum now
    for all GET /images/<ID>, HEAD /images/<ID>, POST /images and
    PUT /images/<ID> operations.
    
    Adds unit tests verifying the checksumming behaviour in the API, and
    in the Swift and Filesystem backend stores.

commit a3690f0c9aac82eb7b5e9e13482e8d2ee8602ccc
Merge: b694f13 02a3cd3
Author: jaypipes@gmail.com <>
Date:   Tue Mar 8 08:16:16 2011 -0500

    Merge trunk with 713126 and image-format

commit 826c692d7afb11d5b9aed865ab22498bc2a57141
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Mar 7 18:10:25 2011 -0800

    Whoops! Left out a self.db_path.

commit 9441f415562911bb9220bf113362a65b4513b69d
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Mar 7 17:22:50 2011 -0800

    Allow tests to run on an alternate dburi given via environment variables.

commit 02a3cd30c1f94a4e4faa3d43bf9581c07204148f
Merge: 90051cf 310af73
Author: jaypipes@gmail.com <>
Date:   Tue Mar 8 00:57:03 2011 +0000

    Adds ability for Swift to be used as a full-fledged backend.
    Adds POST/PUT capabilities to the SwiftBackend
    Adds lots of unit tests for both FilesystemBackend and SwiftBackend
    Removes now-unused tests.unit.fakeswifthttp module

commit 310af7374e04d9d3a9a2023205f2075d303ea3d3
Author: jaypipes@gmail.com <>
Date:   Mon Mar 7 15:11:59 2011 -0500

    Remove last vestiges of account in Swift store

commit 3dc0d8d8ffeaaecef6ac1d82a2f19bdc6dbb6746
Author: jaypipes@gmail.com <>
Date:   Sun Mar 6 12:26:34 2011 -0500

    Quick fixup on registry.get_client()

commit 5ce7c07e929dd5aa65a5da83a924d79fe3f49c77
Author: jaypipes@gmail.com <>
Date:   Sun Mar 6 12:14:59 2011 -0500

    Public? => Public: per Cory's comment. Added a little more robust exception handling to some methods in bin/glance

commit 226687e48b6d0d14815cc4e2c91a24426c09536a
Merge: 4ec3e0c 90051cf
Author: jaypipes@gmail.com <>
Date:   Sun Mar 6 12:02:44 2011 -0500

    Merge trunk and resolve conflicts from utils and client patch from Vishy

commit a6138a1b54da291a9c9c7bf225db3e0b7c180e3e
Author: jaypipes@gmail.com <>
Date:   Sun Mar 6 11:39:56 2011 -0500

    Fixes for Devin and Rick's reviews

commit a7007ae84952ffe7905f924fdaba5420af64c08d
Merge: 3bba7ac 90051cf
Author: jaypipes@gmail.com <>
Date:   Sun Mar 6 10:41:29 2011 -0500

    Merge trunk

commit 90051cf3a031796a5c3ac50f16bb8865d7f1f1e3
Merge: 46053f8 4a8522d
Author: jaypipes@gmail.com <>
Date:   Sun Mar 6 15:37:28 2011 +0000

    Adds disk_format and container_format to Image, and
    removes the type column.
    
    Needs a migrate script, but having trouble getting sqlalchemy
    migrate to work with any call to drop_column(). :(

commit 46053f891a1fd731d5cc05e4d4c77b5883435a43
Merge: 05ba89c 643ea85
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Sat Mar 5 18:07:04 2011 +0000

    Fixes client update_image to work like create_image.  Also fixes some messed up exceptions that were causing a try, except to reraise.

commit 3bba7ac05da60060e68877a6980fb947334d3161
Merge: ee74c26 05ba89c
Author: jaypipes@gmail.com <>
Date:   Sat Mar 5 12:10:08 2011 -0500

    Merge trunk

commit 4a8522d7941a0cadb03ffc2a534724c8652f8f53
Author: jaypipes@gmail.com <>
Date:   Sat Mar 5 12:04:43 2011 -0500

    Final review fixes. Makes disk_format and container_format optional. Makes glance-upload --type put the type in properties

commit 4bd9da8fdde600babc8302fcfced09f2c5da0bf3
Merge: 79ba479 05ba89c
Author: jaypipes@gmail.com <>
Date:   Sat Mar 5 11:04:32 2011 -0500

    Merge trunk

commit 643ea85bf4ad58bd79842db4aa9d198666e11ba3
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Sat Mar 5 04:24:18 2011 +0000

    remove test skip

commit ee74c26dbd672a13550dcbcae2c2751900eb9d16
Author: jaypipes@gmail.com <>
Date:   Fri Mar 4 19:02:26 2011 -0500

    Put account in glance.conf.sample's swift_store_auth_address, use real swift.common.client.ClientException, ensure tests work with older installed versions of Swift (which do not have, for example, swift.common.client.Connection.get_auth method)

commit 05ba89c1219c357bdf7c3087c3f1dce9ec08036b
Merge: 839f824 c5c3df4
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Mar 1 21:37:04 2011 +0000

    Work around Eventlet exception clearing by memorizing exception context and re-raising using 3-arg form.

commit 4ec3e0cb1ad00e61360fa4b5c1eba475271bcdf8
Author: jaypipes@gmail.com <>
Date:   Tue Mar 1 01:38:34 2011 -0500

    Adds bin/glance to setup.py

commit a6dcd64d6926e9d6841b38cacebbb0bc50e41e4a
Author: jaypipes@gmail.com <>
Date:   Tue Mar 1 01:33:26 2011 -0500

    Fixes from Rick's review #1

commit 839f82483091367262e0b6e20674906c0446c9f1
Merge: 6df9c55 858e66b
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Mar 1 03:22:03 2011 +0000

    Reverts Image `type` back to the old behavior of being nullable.
    
    Necessary because Nova creates Glance image records without knowing which `type` they will be up-front.

commit c5c3df4181fbcfe8b07b24c0ad1cdc4432891b9a
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Feb 28 23:16:24 2011 +0000

    Work around Eventlet exception clearing

commit 6df9c55b5804fa4ccb5825c405ffa8cd0865ce50
Merge: ed1b575 7082ea0
Author: Soren Hansen <soren.hansen@rackspace.com>
Date:   Mon Feb 28 12:17:00 2011 +0000

    Add sys.path mangling to glance-upload.

commit 7082ea0a251689287f294caead8fc4c0d0d502e3
Author: Soren Hansen <soren.hansen@rackspace.com>
Date:   Mon Feb 28 10:25:42 2011 +0100

    Add sys.path adjustment magic to glance-upload.

commit 2cf64655da38d228b8892a86f005353c84ab212b
Author: jaypipes@gmail.com <>
Date:   Sun Feb 27 15:54:29 2011 -0500

    Adds ability for Swift to be used as a full-fledged backend.
    Adds POST/PUT capabilities to the SwiftBackend
    Adds lots of unit tests for both FilesystemBackend and SwiftBackend
    Removes now-unused tests.unit.fakeswifthttp module

commit c4bb2fd8aa31b2c338bdc068a7ae2cc4fa4beab4
Author: jaypipes@gmail.com <>
Date:   Fri Feb 25 11:52:12 2011 -0500

    Couple tiny cleanups noticed when readin merge diff..

commit 13ff5c8eaa85fead46b1d2f66520787f7e6cdc94
Merge: 992e2e9 79ba479
Author: jaypipes@gmail.com <>
Date:   Fri Feb 25 11:33:24 2011 -0500

    bin/glance-admin => bin/glance, since it's really just the CLI tool to interact with Glance. Added lots of documentation and more logging statements in some critical areas (like the glance.registry calls...

commit 992e2e92953478c86fad393b3d0389d08b126f27
Merge: 5c03271 ed1b575
Author: jaypipes@gmail.com <>
Date:   Fri Feb 25 10:12:18 2011 -0500

    Merge trunk

commit 79ba479ada595ce6bd4d830723029bd08dedb6f3
Author: jaypipes@gmail.com <>
Date:   Fri Feb 25 09:55:26 2011 -0500

    Adds lots of unit tests for verifying exceptions are raised
    properly with invalid or mismatched disk and container formats.
    
    Adds documentation on disk and container formats. Updates
    existing documentation to remove references to the now-gone
    type column and replaces these references with disk_format
    and container_format.
    
    Reworked the validates_image() method in the registry.db.api
    to be like what Rick was describing in reviews.

commit 4ddd60b45833fef8b54196445d72f5a15d1ea651
Merge: a70fed3 ed1b575
Author: jaypipes@gmail.com <>
Date:   Fri Feb 25 08:21:13 2011 -0500

    Merge trunk

commit ed1b5758e0457a037d6d53fb8e7c67bc36a696c0
Merge: 79fac03 78d7580
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Feb 25 01:56:56 2011 +0000

    Makes --kernel and --ramdisk required arguments for glance-upload since Nova currently requires them.
    
    The `null_kernel` concept in Nova is slated to be removed, so this is really just a stop gap measure.

commit 858e66b1bdf62d05afad505eeb2b711e82e3e14c
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Feb 25 01:19:00 2011 +0000

    Removing image_type required behavior

commit 78d7580b2c8c64d5c89c74746ea61aab8e82ef41
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Feb 24 23:06:10 2011 +0000

    Removing requirement to pass kernel and ramdisk

commit b694f1353af1cb600390a11d8faccdf944a6756f
Merge: 4f23ca0 a70fed3
Author: jaypipes@gmail.com <>
Date:   Thu Feb 24 13:36:07 2011 -0500

    Merge test cases for missing and invliad disk and container formats

commit a70fed371557e439e188591f66e794551e74087b
Author: jaypipes@gmail.com <>
Date:   Thu Feb 24 13:35:22 2011 -0500

    Add test cases for missing and invalid disk and container formats

commit b984af2d11a2ce4df8a38f818c278e2a2b28acdd
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Feb 24 17:46:07 2011 +0000

    Requiring kernel and ramdisk args in glance-upload

commit 4f23ca038bc1bb1b28d67c07c84c46d6836259f8
Merge: 7cc8a5b c6e681d
Author: jaypipes@gmail.com <>
Date:   Thu Feb 24 11:26:00 2011 -0500

    Make disk_format and container_format required

commit c6e681da3ed912e013488f63f67de0f3483c71f3
Author: jaypipes@gmail.com <>
Date:   Thu Feb 24 11:23:13 2011 -0500

    Make disk_format and container_format required

commit 7cc8a5be98c3777852c2cafa5b975798af40feeb
Merge: 79fac03 0519aee
Author: jaypipes@gmail.com <>
Date:   Thu Feb 24 09:52:13 2011 -0500

    Merge image-format

commit 5c032710487920888b72e9f42de6063bc768aa68
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 21:50:24 2011 -0500

    Adds an admin tool to Glance (bin/glance-admin) that allows
    a user to administer the Glance server:
    
    * add images
    * update image metadata
    * delete images and metadata
    * delete all images (clear)
    * show an image
    * list public images
    * show detailed info on public images
    
    Adds documentation for the tool and cleans up a few issues
    that came up in initial testing.

commit 43c8e2a2b6ebaa9d1144cd697595db111ade8776
Merge: 2c7fcfb 0519aee
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 20:32:08 2011 -0500

    Merge fixups to validate_image

commit 0519aeec06743ba303e4f44b5966911c38ba7528
Merge: 0b12c95 79fac03
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 20:30:58 2011 -0500

    Make sure validate_image() doesn't throw exception on missing status when updating image.

commit 2c7fcfb6de608b2d6a2d7c23622136bd362d133a
Merge: ebf4eb6 0b12c95
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 17:39:25 2011 -0500

    Merge api-image-format

commit ebf4eb6556355a729977cf6a834c978fbb41e2c3
Merge: e95ecdb 79fac03
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 17:39:04 2011 -0500

    Merge fix for bug 704854

commit 0b12c95cf54695808248617271929f2bb26959fa
Merge: 1550ea4 8e27dd4
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 17:22:59 2011 -0500

    Merge fix for bug 704854

commit e95ecdb77cc05409259c3a02c4e9e1c76198e9dc
Merge: 4c69440 8e27dd4
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 17:19:09 2011 -0500

    Merge fix for bug 704854

commit 1550ea4c204d2223fb683b02c05ce331595b38ab
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 17:16:32 2011 -0500

    Adds disk_format and container_format to Image, and
    removes the type column.
    
    Needs migrate script, but having trouble getting sqlalchemy
    migrate to work with any call to drop_column(). :(

commit 79fac03af2d15ebacfbc0e7c225b63fd706b5e91
Merge: 1f890ec 8e27dd4
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 21:27:24 2011 +0000

    This adds a test case for LP Bug 704854 -- Exception
    raised by Registry server gets eaten by API server.
    
    The test involves spinning up an API server and a registry
    server, firing cURL and glance-upload against the API
    server with invalid requests, and verifying that appropriate
    exception messages are contained in the response.
    
    I should probably rebase this commit considering all the previous
    commits weren't actually addressing the issue. The fact that I
    had glance-api and glance-registry installed on my local machine
    was causing the test runs to improperly return a passing result.
    
    It just so happens that the glance-api and glance-registry that
    I had installed to my /usr/local/bin were the very same programs
    that were from a previous branch I had locally where I fixed the
    root cause of this issue, which was that the sqlalchemy @validates
    decorator does NOT fire for *new* objects, only existing ones, which
    resulted in image_create() improperly storing NULL data in type, name,
    and other non-nullable fields in the database. This then set off
    a domino effect which caused the next call from
    glance.server._upload_and_activate() to die a horrible death due to
    the @validates decorator then firing on the already-created Image
    object. This horrible death was improperly being raised from the
    glance.client as a BadRequest instead of exception.Invalid, which
    caused the API server to ignore the text in the actual Invalid
    exception coming from the registry server.
    
    In short, this patch finally fixes the root of the problem by
    placing a validate_image() function guard which throws exception.Invalid
    for any invalid data coming into the _image_update() method in the db
    API. It also adds a bunch of logging statements and ensures that
    exceptions throughout the call stack between the API server to the
    glance.registry.Client to the Registry server are properly handled and
    that the text of those exceptions isn't thrown away willy-nilly.

commit 8e27dd4f48910f6df0349aca9db5744cfdfdba2b
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 15:35:01 2011 -0500

    Add debugging output to assert in test_misc. Trying to debug what Hudson fails on...

commit b5c6a8bfe8ade01de775592a422516b86f4be7d1
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 14:28:25 2011 -0500

    Fixups from Rick's review

commit 2201bf21067df971f88c483f020aa78fd4e477cf
Merge: b456e97 ffc0054
Author: jaypipes@gmail.com <>
Date:   Tue Feb 22 12:17:10 2011 -0500

    Merge fix for bug704854

commit ffc0054bfd3b5c5713e7169223b3b5b1c050ab1d
Author: jaypipes@gmail.com <>
Date:   Tue Feb 22 11:01:09 2011 -0500

    Removes now-unnecessary @validates decorator on model.

commit 369241b3603dfbadbe3a659aa0867fe53279f3de
Author: jaypipes@gmail.com <>
Date:   Tue Feb 22 10:53:32 2011 -0500

    I should probably rebase this commit considering all the previous
    commits weren't actually addressing the issue. The fact that I
    had glance-api and glance-registry installed on my local machine
    was causing the test runs to improperly return a passing result.
    
    It just so happens that the glance-api and glance-registry that
    I had installed to my /usr/local/bin were the very same programs
    that were from a previous branch I had locally where I fixed the
    root cause of this issue, which was that the sqlalchemy @validates
    decorator does NOT fire for *new* objects, only existing ones, which
    resulted in image_create() improperly storing NULL data in type, name,
    and other non-nullable fields in the database. This then set off
    a domino effect which caused the next call from
    glance.server._upload_and_activate() to die a horrible death due to
    the @validates decorator then firing on the already-created Image
    object. This horrible death was improperly being raised from the
    glance.client as a BadRequest instead of exception.Invalid, which
    caused the API server to ignore the text in the actual Invalid
    exception coming from the registry server.
    
    In short, this patch finally fixes the root of the problem by
    placing a validate_image() function guard which throws exception.Invalid
    for any invalid data coming into the _image_update() method in the db
    API. It also adds a bunch of logging statements and ensures that
    exceptions throughout the call stack between the API server to the
    glance.registry.Client to the Registry server are properly handled and
    that the text of those exceptions isn't thrown away willy-nilly.

commit bb5f1229ef44b87064a85dc7a81af9f4ef8d6669
Author: jaypipes@gmail.com <>
Date:   Mon Feb 21 17:11:27 2011 -0500

    Use Nova's path trick in all bins...

commit 45618b7398007cea1cbfe9f9f01aa59595e5893c
Author: jaypipes@gmail.com <>
Date:   Mon Feb 21 16:57:00 2011 -0500

    Add path to glance-control

commit b456e972d1577272cec86bf3d352b5e3b36b9a6a
Merge: 177318d 1f890ec
Author: jaypipes@gmail.com <>
Date:   Mon Feb 21 16:33:09 2011 -0500

    Merge trunk

commit 4c6944081987b1a5bef2814b898c29aa0baf021f
Merge: 5a0ed62 1f890ec
Author: jaypipes@gmail.com <>
Date:   Mon Feb 21 14:47:17 2011 -0500

    Merge trunk

commit a9415cd3423bb00620a9704b83a7e523e6937d78
Merge: 9835b3d 1f890ec
Author: jaypipes@gmail.com <>
Date:   Fri Feb 18 12:39:12 2011 -0500

    Merge trunk

commit 1f890ecb81e788d26336d9a3fd7f4a677e5fc34f
Merge: f19fb80 c131d93
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Feb 17 20:36:56 2011 +0000

    Removes image type validation in the Glance registry.
    
    Nova xs-unified-images requires adding a new image type 'vhd' along side of 'machine', 'raw', etc. Since image_type isn't used by Glance itself (it merely stores the value and hands it back to Nova), Glance shouldn't be the arbiter of what values are acceptable-- Nova should. This promotes loose-coupling and ensures that Glance won't have to change in lock-step with Nova.
    
    More to the point, this a stop-gap to make Glance work with the new xs-unified-images branch until we get proper `container_format` and `disk_format` modeling in Glance. When that happens, we may end up ditching `image_type` altogether.

commit c131d93c5bdf332b2b9970db14c76524345ebf03
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Feb 17 18:34:28 2011 +0000

    Adding vhd as recognized image type

commit 990ac57cfa6d4f2c3f4a65efcf4b0a989ea91c50
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Feb 17 18:30:50 2011 +0000

    Reverting the removal of validation

commit 000011bb2981a606ab1fa546b716c149758c7ea1
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Feb 17 06:09:58 2011 +0000

    Removing image type validation

commit f19fb807ea6d8468078cddd88d92860e561c67e0
Merge: 531e1bc 9846d3e
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 18:57:01 2011 +0000

    Adds --pid-file option to bin/glance-control

commit 9835b3d12e7dddcc94802c051853c03e4c7453d8
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 13:55:08 2011 -0500

    Add %default for image type in glance-upload

commit 531e1bcfb19539c5fd02ea177a7c3f09adb850f0
Merge: 08723f6 be5f0e9
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 18:47:05 2011 +0000

    Adds Location: header to return from API server for POST /images, per APP spec

commit c13d553bc11a7c530fa694dc21aa2087108f18ac
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 13:38:50 2011 -0500

    Cleanups from Soren's review

commit 08723f6afe4984dea0b422fa2816c27540534c51
Merge: be987ad faf738f
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 10:12:00 2011 +0000

    Add an ImportError check when importing migrate.exceptions, as the location of that module changed in a recent version of the sqlalchemy-migrate library.

commit be5f0e95e5b0fee3d46aa6036fc62edbd21f7bbc
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 05:01:21 2011 -0500

    Adds Location: header to return from API server for POST /images, per APP spec

commit 01354520cb62f90d223e44967a739a1c66d0e308
Merge: be987ad faf738f
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 04:52:04 2011 -0500

    Merge fix for bug 719834

commit ea2c494769742f8ade44dd41819e86179a4bd0c4
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 03:06:53 2011 -0500

    This adds a test case for LP Bug 704854 -- Exception
    raised by Registry server gets eaten by API server.
    
    The test involves spinning up an API server and a registry
    server, firing cURL and glance-upload against the API
    server with invalid requests, and verifying that appropriate
    exception messages are contained in the response.
    
    I cannot reproduce 704854 now. Not sure what changed in
    the code that actually fixed this, but the test case verifies
    that the behaviour described in the bug does not occur any more.

commit f977e837f6b8737dd769c12a68a4d2291b3ebf0b
Merge: 19aa31d 9846d3e
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 02:44:09 2011 -0500

    Merge --pid-file option for glance-control

commit 9846d3e69dc1ebd7734cb909eb4577f6ae107626
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 02:43:11 2011 -0500

    Adds --pid-file option to bin/glance-control

commit c0804691519304320d7e450cd95bd3a723de4f19
Merge: be987ad faf738f
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 02:32:19 2011 -0500

    Merge fix for bug 719834

commit 19aa31d140597301313cfa7b5c9d3b25cf325430
Merge: be987ad faf738f
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 02:29:17 2011 -0500

    Merge fix for bug 719834

commit faf738f435f19ebf1f721b927f95548dc6c85bff
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 02:27:48 2011 -0500

    Add an ImportError check when importing migrate.exceptions, as the location of that module changed in a recent version of the sqlalchemy-migrate library.

commit be987ad9e4177355bd22a1de5a5ad4ac35e0d315
Merge: 4151129 f134884
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Feb 11 20:47:02 2011 +0000

    Adds sql_idle_timeout to reestablish connections to database after given period of time.
    
    Fixes MySQL Gone Away exceptions.

commit f13488471491c611bb2602bd4b8e18b943e06322
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Feb 11 00:12:51 2011 +0000

    Add sql_idle_timeout

commit 415112967a24b57ac0d5d7161cbca9e37a3dc004
Merge: 0d48cfb c9259dd
Author: jaypipes@gmail.com <>
Date:   Thu Feb 10 01:16:58 2011 +0000

    Removes lockfile and custom python-daemon server initialization
    in favour of paste.deploy.

commit c9259dd2d96de703191ca61ecb76686406719d80
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 18:57:05 2011 -0500

    Review 3 fixups.

commit 714013e07a0d989d4ae867ed31c0cfab5f824ff8
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 16:59:39 2011 -0500

    Remove get_config_file_options() from glance-control

commit 2fcb4898cbb3d307a59e26653521183042e3e08c
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 16:56:48 2011 -0500

    Fixes for Rick review #2

commit b0b35af60386957203075cb24990b66607cde111
Merge: ff8586d 0d48cfb
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 16:52:48 2011 -0500

    Merge trunk

commit ff8586d68575ed605666b5b9349c43328544049d
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 15:24:59 2011 -0500

    Remove no-longer-needed imports...

commit c269e4da1798f670acdc299de06dba647a334a16
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 15:23:39 2011 -0500

    Remove extraneous debug import...

commit 610499b5ffcd58b8adea4f4cb1cd569ea6d26328
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 15:02:13 2011 -0500

    Changes the server daemon programs to be configured only via
    paste.deploy configuration files. Removed ability to configure
    server options from CLI options when starting the servers with
    the exception of --verbose and --debug, which are useful during
    debugging.
    
    Updated the documentation controllingservers.rst.

commit 0d48cfb8c58926abdb780b2b66ca3734d27685c1
Merge: 51c5306 ccfaa82
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 9 19:56:56 2011 +0000

    Adds glance-combined and glance-manage to setup.py

commit 6ea134ad789e39e27a6a03a4cfaf8e67e1de02c6
Author: jaypipes@gmail.com <>
Date:   Tue Feb 8 15:47:37 2011 -0500

    Fix merge conflicts

commit ccfaa821880beb059abb51cf7fa521ba1a9ce289
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Feb 8 12:07:42 2011 -0600

    Adds glance-combined and glance-manage to setup.py

commit 51c5306dba5e89b8a2028f090b3f4b2fba2d673d
Merge: 42fd0b7 9f37df5
Author: jaypipes@gmail.com <>
Date:   Mon Feb 7 19:06:45 2011 +0000

    Fixes bug 714454.
    
    ReStructured Text files need to end in .rst, not .py ;)

commit 9f37df59502dfa763219cc3af47cf1aa7e764096
Author: jaypipes@gmail.com <>
Date:   Mon Feb 7 13:05:45 2011 -0500

    ReStructure Text files need to end in .rst, not .py ;)

commit 851b46fd4ec8de6c16e546e0586ad7d5192b0213
Merge: defd36a 42fd0b7
Author: jaypipes@gmail.com <>
Date:   Sun Feb 6 09:08:14 2011 -0500

    Merge trunk

commit 42fd0b71491e796720dcad81d5cae3d9fdf6b3fc
Merge: fe49ab6 5314e45
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sun Feb 6 02:41:47 2011 +0000

    Update README, remove some vestigial directories, and other small tweaks.

commit 5314e4558f44f1d48579b6c6e257194886d2f6d9
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sat Feb 5 19:36:05 2011 -0600

    Removing dubious advice

commit fe49ab6900eb0ca92bc59f1e8f412afa6794ae64
Merge: 0c7dbb8 2040ecd
Author: jaypipes@gmail.com <>
Date:   Sat Feb 5 20:26:46 2011 +0000

        Adds facilities for configuring Glance's servers via
        configuration files.
    
        glance-api, glance-registry, and glance-combined now process
        a set of configuration files in order, with options read from
        later files overriding values in earlier files:
    
        /etc/glance.cnf
        /etc/glance/glance.conf
        ~/glance.cnf
        ~/.glance/glance.cnf
        ./glance.cnf
    
        The new glance.common.config.get_config_file_options() function
        processes these config files into a mapping of key/value
        option pairs. This mapping can now be passed to the
        glance.common.config.parse_options() function as default values
    
        Adds a sample glance.cnf to the etc/ directory

commit defd36a16dc25f3632018e06e832fafc40ad7853
Author: jaypipes@gmail.com <>
Date:   Sat Feb 5 14:45:09 2011 -0500

    Use fix_path on find_config_file() too.

commit 347ff743ff339f5a460af1c5dd461c1cf0585ab3
Merge: bc310ce 2040ecd
Author: jaypipes@gmail.com <>
Date:   Sat Feb 5 14:34:03 2011 -0500

    Merge latest config parser changes...

commit 2040ecdbbdd707911617d61701b27ba4f7b4cf98
Author: jaypipes@gmail.com <>
Date:   Sat Feb 5 14:30:47 2011 -0500

    Fixups from Rick's review

commit 19d9a5d9912b8e6dda2a23e06776087941627d0c
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sat Feb 5 01:40:39 2011 -0600

    Including tests/ in pep8

commit dc20f62ef074954dbc78038d3e2eaa9a176644df
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Feb 4 20:37:39 2011 -0600

    Typo fixes, clarifying

commit ee109c1fac7c6810f73f1cff2b7ca10f6fdc7185
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Feb 4 20:32:31 2011 -0600

    Updating README, rmdir some empty dirs

commit bc310ced446ff45e0e11cfab82b658f3cb055264
Merge: 66f4b78 0c7dbb8
Author: jaypipes@gmail.com <>
Date:   Fri Feb 4 19:05:23 2011 -0500

    Merge trunk

commit 66f4b78234bd9be723f82a40016d21b9fae4f3c5
Author: jaypipes@gmail.com <>
Date:   Fri Feb 4 18:59:52 2011 -0500

    Adds bin/glance-control program server daemonization wrapper
    program based on Swift's swift-init script.
    
    Adds a crap-ton of documentation on installing Glance and
    controlling Glance's server programs.
    
    This was necessary since when glance.common.server was removed
    from Glance and paste.deploy used, we lost the ability to control
    server daemonization with CLI options. This adds back some of that
    functionality while still using paste.deploy like Swift does.

commit 58d52ee3ebec27166888feefe4200b170ba216a8
Author: jaypipes@gmail.com <>
Date:   Fri Feb 4 12:45:27 2011 -0500

    Ignore build and deploy-related files

commit 0c7dbb87080abd47c1603252fd46d2dbf8daeaa5
Merge: e5c8fae c72d1a1
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Feb 3 19:16:45 2011 +0000

    Adds sqlalchemy migrations.
    
    Also adds a glance-manage utility for managing migrations.
    
    Potentially glance-manage (and glance-upload) could be merged into glance-admin when that lands.

commit e5c8fae80d0a085bce75c50896567d709281d4ce
Merge: febdf1d b10a2ce
Author: jaypipes@gmail.com <>
Date:   Thu Feb 3 16:56:41 2011 +0000

    Fix bug 712575. Make BASE = models.BASE

commit b10a2ceb8b3b0862d707dee43f996ea5595e4006
Author: jaypipes@gmail.com <>
Date:   Thu Feb 3 11:23:36 2011 -0500

    Make sure BASE is the models.BASE, not a new declarative_base() object.

commit 32600b1b07fafe454e221c8b8ad49678de0d3c0f
Author: jaypipes@gmail.com <>
Date:   Thu Feb 3 10:40:49 2011 -0500

    Had to reverse search order of directories for finding config files.

commit 294228aacbec3d0ec366116286fa03c615959a0d
Author: jaypipes@gmail.com <>
Date:   Thu Feb 3 10:23:48 2011 -0500

    Removes lockfile and custom python-daemon server initialization
    in favour of paste.deploy.
    
    We use a solution that is a hybrid of the code in Nova and Swift:
    
    * We continue to use the object-based WSGI Server/Router objects
      in glance.common.wsgi.
    * We load options from a configuration file like Swift does, merging
      in the typed options returned from glance.common.config.parse_options()
    
    NOTE: Due to http://trac.pythonpaste.org/pythonpaste/ticket/379, we
    removed the CLI option --log-format and use a hard-coded DEFAULT_LOG_FORMAT.
    You are still able to adjust the log format using the --log-config-file
    option, however, and setting the format string in the log config file.

commit 9b955320691d1efbaf26bccbd4ec686c3964fff8
Author: jaypipes@gmail.com <>
Date:   Wed Feb 2 21:17:38 2011 -0500

    Adds facilities for configuring Glance's servers via
    configuration files.
    
    glance-api, glance-registry, and glance-combined now process
    a set of configuration files in order, with options read from
    later files overriding values in earlier files:
    
    /etc/glance.cnf
    /etc/glance/glance.conf
    ~/glance.cnf
    ~/.glance/glance.cnf
    ./glance.cnf
    
    The new glance.common.config.get_config_file_options() function
    processes these config files into a mapping of key/value
    option pairs. This mapping can now be passed to the
    glance.common.config.parse_options() function as default values
    
    Adds a sample glance.cnf to the etc/ directory

commit c72d1a107e6facc602021d2d34aaa18d34eaf916
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 18:01:08 2011 -0600

    Creating indexes

commit d060da4993312aa803371464d876a63ded7afba3
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 17:45:18 2011 -0600

    Adding migration test

commit c45eae7b38e52633d62ca243f4bea341f4fbfae1
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 17:44:56 2011 -0600

    Fixing migration import errors

commit 6e09de35541be67c8477a360e701bf15164886db
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 12:50:37 2011 -0600

    Small cleanups

commit a436b433ca746864aed9fdec8bbe345c3bf147a7
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 12:47:08 2011 -0600

    glance-manage uses common options

commit 0b3e8d8778514fc4d534cb903ddc10d250c3d716
Merge: 24ba01b febdf1d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 12:42:54 2011 -0600

    Merging in glance/cactus

commit 24ba01b8a5e18bf55e08966dea6d28ad615fdc4d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 12:41:28 2011 -0600

    Pep8 fix

commit febdf1d969809185e37228f10804bb2cb07e0dab
Merge: 8a084f6 18c9ae0
Author: jaypipes@gmail.com <>
Date:   Wed Feb 2 12:37:54 2011 -0500

    Merge Rick's Super-Cool Option Group Extravanganza.

commit 18c9ae0877ad211ca5d9ad2e38b971821b1021ec
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 10:55:07 2011 -0600

    Pep8 fixes

commit cc06221694fc86df07d98c5c3cb7aa2cb893f071
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 10:40:57 2011 -0600

    Refactoring into option groups

commit c9d3211caa2f7b0532300f6bcfafe736cf5b1481
Merge: 0c93176 fe4c201
Author: Thierry Carrez <thierry@openstack.org>
Date:   Wed Feb 2 11:15:16 2011 +0000

    Hopefully-final versioning (0.1.7), no review needed

commit fe4c201942836f0edc6adb2f6fc963182f93566e
Author: Thierry Carrez <thierry@openstack.org>
Date:   Wed Feb 2 10:58:23 2011 +0100

    Final versioning, no review needed

commit 15d8f90cb9595ee27e844e0d2b6611fa477d36c0
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 07:07:41 2011 +0000

    Adding db_sync to mirror nova

commit 0236aea227a4569494aa5ca70614fb26a04b651b
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 06:53:05 2011 +0000

    Adding some basic documentation

commit 511b1097947ff2b7681e876928093b3fee785a9d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 06:29:41 2011 +0000

    Better logging

commit d923a0417537552f672fd5b38b63f40c695f5cd5
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 06:13:39 2011 +0000

    Adding image_properties migration

commit 757a155ac6d656309bfd3b13d575870feae6efc6
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 05:00:13 2011 +0000

    Adding migration for images table

commit 9c5290bcb5282e9d4eedf4f4e2b298647c86fb43
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Feb 2 01:43:16 2011 +0000

    Adding migration management commands

commit 8a084f6ff5ab000686a667499372e5abe75b78de
Merge: 13f446d 3551512
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 17:07:26 2011 -0500

    Merge round 1 logging.

commit 3551512d5b0996af3d4d51b8699ae21c46987797
Merge: c7a834b 13f446d
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 16:44:30 2011 -0500

    Merge cactus trunk and resolve conflicts

commit c7a834b8df1ff299af2e9ea3a727e614c978de1d
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 16:38:31 2011 -0500

    Remove debugging output that wasn't supposed to go into this branch (yet) :)

commit 13f446df0e62d3f243e7b6724c9c10499768353f
Merge: 087ebf5 6efe721
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 16:30:07 2011 -0500

    Merge fix from Rick for Bug #711385

commit 3bf2b100b9e0a9dba99307ab83d3ec27287cb4bf
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 16:22:49 2011 -0500

    Adds --debug option for DEBUG-level logging. --verbose now only
    outputs INFO-level log records.
    
    Adds --log-date-format option for greater control over the log
    record date format.
    
    Makes config.setup_logging() set up all loggers, not just an application's
    specific logger. Fixes issue Rick brought up about logging config file
    being overridden by adding a return statement after logging.config stuff
    is done.

commit 6efe7213f11a72a8a353acfb49e843f05c9b7d1e
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Feb 1 19:53:58 2011 +0000

    Typo add_option -> add_options

commit e47760977097f9cf36cbfc78f734ba80094ad7b2
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 14:51:43 2011 -0500

    Fixes from Rick's review. Thanks, Rick.

commit fe363898ce5a80489a6f218ed702aad592b0faa1
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Feb 1 19:29:50 2011 +0000

    Adds --sql-connection option

commit 61711e0378525247f7952c989ce8eeeb9e2b5bbd
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 13:18:40 2011 -0500

    First round of logging functionality:
    
    * Adds option group for logging-only configuration settings
    * Adds /etc and /etc/logging.cnf.sample as an example of setting
      up logging configuration directly with a config file
    * Adds to glance.common.config a couple function useful in
      adding logging options and setting up the logger(s)
    
    Next round will include the addition of a --debug option and
    lots more debugging output to the loggers.

commit 087ebf5fec6c4d77aceb5da09b8b650690f11283
Merge: 58ac711 01c2d8b
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 16:24:00 2011 -0500

    Merge glance-combined

commit 01c2d8be6a4f9ff6593903afc75eb52440856a55
Merge: 628ca53 7acd7cd
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 15:17:25 2011 -0500

    Merge use-optparse

commit 58ac71170df383284a745a3cda0244015c686cdb
Merge: 5f796b8 7acd7cd
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 15:16:19 2011 -0500

    Merged use-optparse

commit 7acd7cd92bc655cc20b2d48b6ea4423932ecd56f
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 14:39:39 2011 -0500

    Removes glance.common.db.sqlalchemy and moves registration of models and create_engine into glance.registry.db.api.

commit 628ca5303ed4850bc816a34882d5af3135532d47
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 13:46:04 2011 -0500

    pep8-er in bin/glance-combined

commit 753ef1fe2f6ca4df84cff18744bc901790fbc475
Merge: 101e9c0 8cd4bc1
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 13:42:23 2011 -0500

    Merge yagni-db-adapter and use-optparse

commit 8cd4bc1899c9d403dda0c71b6b3a52efd7a1bcd8
Merge: daa4a42 5f796b8
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 13:40:08 2011 -0500

    Merge yagni-db-adapter and resolve conflicts.

commit 5f796b8e83a0e67d84936bd05cde1c4edf7b81b5
Merge: 6e9163c bf10761
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 13:28:18 2011 -0500

    Merge yagni-db-adapter removal from rick.

commit daa4a429f7adc1a3c68894ee9174b0830cb2b908
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 13:21:30 2011 -0500

    Fixes lp710789 - use-optparse breaks daemonized process stop
    
    Fix was simple. args = FLAGS(argv) returns ALL argv's including
    the program name. optparse.OptionParser.parse_args() does not
    return the program name as args[0], instead it returns args[1:].
    
    In glance.common.server.serve(), we were checking:
    
    action = 'start':
    if len(args) > 1:
        action = args.pop()
    
    Changing this to if len(args): fixed the problem.

commit 5a0ed6223bf21b08d75c6ec3ca3e18adf9a2f029
Merge: c14b3d4 101e9c0
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 16:31:04 2011 -0600

    Merge glance-combined

commit 101e9c09e6b3f31724087c7720d44cbdfeda97d1
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 16:30:20 2011 -0600

    Adds bin/glance-combined. Useful in testing...

commit c14b3d43d91faf359c447e9248cba6480e43156c
Merge: 7ec3ed2 5fb01cb
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 16:20:33 2011 -0600

    Merge in use-optparse changes.

commit 7ec3ed2b1755817fad1792072ac819763a53a6a5
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 16:19:43 2011 -0600

    Tiny pep8 fixup in setup.py

commit 5fb01cb37bfce28854c872e038166f24a9d3716a
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 16:15:33 2011 -0600

    Rework what comes back from parse_options()[0] to not stringify option values. Keep them typed.

commit 443c46df1d75de3dde0a6c40cbb3f1f496bfcafa
Merge: 0929fc0 6e9163c
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 15:56:17 2011 -0600

    Merge trunk

commit 976dfcc946d8c822c754aba73955bf6d43f69fb7
Merge: 604a843 6e9163c
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 15:55:43 2011 -0600

    Merge trunk

commit 604a8433576cd3a53478ac3f561e1e3e692ffb7b
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 15:54:34 2011 -0600

    Remove use of gflags entirely. Use optparse.

commit 6e9163c05e119c0b6cf954de553c94f91c1fc914
Merge: 67a71df 0c93176
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 14:11:45 2011 -0600

    Merge bexar trunk final changes

commit bf10761102f441ca63786dff7b2a527fd21079e5
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jan 28 19:54:10 2011 +0000

    Removing unecessary param to get_all_public

commit 8304559b331a48862f3a3dde5a7df7e8bc1f4c98
Merge: f221bbf 0c93176
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jan 28 19:39:19 2011 +0000

    Merging trunk

commit f221bbf36db9510e5247a6968d41e70ecb5c7eb4
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jan 28 18:51:22 2011 +0000

    Adding back some missing code

commit 2c0362a0a4a4b3b96791b4394dec87525c0e8329
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jan 28 17:03:57 2011 +0000

    Cleaning up some code

commit 461fa4e2eb0e34371821c1db2d21877733b8ec1d
Merge: 67a71df 7d314e6
Author: jaypipes@gmail.com <>
Date:   Thu Jan 27 14:13:16 2011 -0600

    Merge versioning patches

commit 7d314e6039d67d3e7c5e2e07a32d7935ca884cd6
Merge: 00ac0d4 0c93176
Author: jaypipes@gmail.com <>
Date:   Thu Jan 27 14:01:02 2011 -0600

    Merge Bexar r56

commit 00ac0d44a6818aa6f4fa2c77a9f4dff6fb2caed4
Author: jaypipes@gmail.com <>
Date:   Thu Jan 27 13:59:49 2011 -0600

    Makes Glance's versioning non-static. Uses Nova's versioning scheme.

commit 0c93176178354aa4b4b43c29b0bcc51934c678b5
Merge: 67a71df 35085b8
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Thu Jan 27 17:57:34 2011 +0000

    Adds/updates the copyright info on most of the files in glance and copies over the Authors check from Nova.

commit 62ab25f65cb51306f76bb9ad82ad1b58e6301559
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jan 27 16:00:06 2011 +0000

    Removing sqlalchemy dir

commit f6e671c7e573dfff3cc9cabb53b863dccf901c60
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jan 27 05:14:59 2011 +0000

    Removed methods from sqlalchemy/api

commit dbbd1c4f4d900536a1f9474fe9644cd736d21ef1
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jan 27 04:34:31 2011 +0000

    Refactor update/create

commit 35085b8391b047b49ee1a764335f8a1814b57bfa
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 22:28:22 2011 -0600

    Messed up a permission somehow

commit 5ba81f311bf8b7ab3c493a0e712cb3ea181776d9
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jan 27 04:25:30 2011 +0000

    Refactoring destroy

commit ec35e6d5735babfe16c1f3e46dd6275b53147426
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 22:23:57 2011 -0600

    feh

commit 3234cb335cce4674967a44e5fbbeb5ad34121e27
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 22:19:13 2011 -0600

    A few more

commit 21d3c7222492237024739176b8e7fcacdc91b569
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 22:04:29 2011 -0600

    A few more I missed

commit 67a71df391e5aa9ea256d202ed3837d31ef01226
Merge: 61ba30a c3ed035
Author: jaypipes@gmail.com <>
Date:   Thu Jan 27 01:26:20 2011 +0000

    version bumped after tarball cut. no review needed...

commit c3ed035bbf8b16b36f2af24adfde684998408dfb
Author: jaypipes@gmail.com <>
Date:   Wed Jan 26 19:17:54 2011 -0600

    Bump version

commit dc8e6bb1d10b0cbcf8b032584324e0a587bcc630
Merge: 157b89e 61ba30a
Author: jaypipes@gmail.com <>
Date:   Wed Jan 26 17:12:28 2011 -0600

    Merge trunk

commit 157b89e5a896c2ff09c66c4d39fe7ca7da142710
Merge: 4675f06 99ded3e
Author: jaypipes@gmail.com <>
Date:   Wed Jan 26 17:12:25 2011 -0600

    Merge trunk

commit 7a5b5016ee9281a0fe3f43944647eaf9bb4d7c09
Merge: 2c7f6ff 61ba30a
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 14:47:01 2011 -0600

    Merge conflicts and merge from trunk

commit 2c7f6ff811b6c5185559baaaf2c3540578c7f842
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 14:44:36 2011 -0600

    Merge prop fixes and a few missed things

commit 92b839b1bf71d01bf0684441d5d681220ac96ab5
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 12:42:52 2011 -0600

    Removing authors test for now

commit 5afa9e2b18c74589b6a55613c515663be4a8ac3d
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 11:26:54 2011 -0600

    Merge prop fixes

commit 61ba30ad891596202ffa66cafe83b495da3ed449
Merge: 3202042 f536fdd
Author: Josh Kearney <josh@jk0.org>
Date:   Wed Jan 26 17:06:23 2011 +0000

    PEP8 cleanup.

commit f536fdd8f3dfda9260624902c385a31935e1cfc7
Author: Josh Kearney <josh@jk0.org>
Date:   Wed Jan 26 10:51:08 2011 -0600

    PEP8 cleanup

commit 3202042eccfe91d48ccce53617712a59a07fbe11
Merge: a8d791c 0659d5a
Author: Monty Taylor <mordred@inaugust.com>
Date:   Wed Jan 26 16:46:25 2011 +0000

    Should fix the sphinx issue.

commit a8d791c2d7fe41242d942b6e7ee862b63cc6698b
Merge: 99ded3e 5a74a85
Author: jaypipes@gmail.com <>
Date:   Wed Jan 26 16:01:48 2011 +0000

    Adds architecture docs and enables Graphviz sphinx extension. Also cleans up source code formatting in docs.

commit 0659d5a5de558ec55fbfa3b2556b2e654eaca70b
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Jan 25 11:46:03 2011 -0800

    Make sphinx conditional.

commit 99ded3e6fe02c91042f075d26d951472ecae4af1
Merge: 177318d 4675f06
Author: jaypipes@gmail.com <>
Date:   Tue Jan 25 17:06:21 2011 +0000

    bumps version after tarball release of 0.1.4

commit 4675f0618dda9226a0e8954c99b565f557af9c9c
Author: jaypipes@gmail.com <>
Date:   Tue Jan 25 11:02:07 2011 -0600

    Bump version

commit 16e4b7621c8aadd3b53a1ebe017f7d269956fb92
Merge: cd15f14 177318d
Author: jaypipes@gmail.com <>
Date:   Tue Jan 25 10:55:53 2011 -0600

    Merge trunk with pip-requires fixes

commit 8f4078821dd6902a4312c1d8008949dae0197f62
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Tue Jan 25 00:17:38 2011 -0600

    Added bzr to pip-requires and refixed some pep8 stuff

commit 7bc9ed564c8974ed1e06a22e531c43ae19f8b30a
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Mon Jan 24 17:00:29 2011 -0600

    Authors check

commit ebb5e9cf0c3e378886d07325fd702ed492e3ca48
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Mon Jan 24 16:35:57 2011 -0600

    A few more copyrights

commit db3a02a92393257644cb0291a31474b30fc01a09
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Mon Jan 24 16:34:46 2011 -0600

    Copyright year change

commit 3cf374673901fbc8af4d4dd493786759138e5091
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Mon Jan 24 16:18:06 2011 -0600

    Pylint cleanup

commit 84a6d4cd0e4f4f93012885fce81e2f6a700854d8
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Mon Jan 24 15:48:03 2011 -0600

    Added copyright info

commit 0929fc096181ecc30f4dbc8cbed499abef60d9b8
Merge: dd53fa3 177318d
Author: jaypipes@gmail.com <>
Date:   Mon Jan 24 13:42:25 2011 -0500

    Merge trunk

commit 5a74a85f94b81ac2c9cf92c6d9c7f0c1260ba2e8
Author: jaypipes@gmail.com <>
Date:   Mon Jan 24 13:03:20 2011 -0500

    Adds architecture docs and enables Graphviz sphinx extension. Also cleans up source code formatting in docs.

commit 177318d24c4f62442d9da79a443084fa59d6055e
Merge: 3d3db85 cd15f14
Author: jaypipes@gmail.com <>
Date:   Mon Jan 24 15:31:24 2011 +0000

    bumps release version. ready for Bexar final release.
    
    no need to review...just sending this to trunk now.

commit cd15f14fc83875e80981f4a9886414dc3171c8f0
Author: jaypipes@gmail.com <>
Date:   Mon Jan 24 09:57:49 2011 -0500

    Version bump after release

commit 3d3db85821abbbf2af659b3feb55830fcf5e8129
Merge: 9c7b06d 361ec47
Author: Ken Pepple <ken.pepple@gmail.com>
Date:   Sun Jan 23 23:21:20 2011 +0000

    added sphinx and argparse into tools/pip-requires so that setup.py works.
    this bug also prevents nova from creating a virtualenv.

commit 361ec47e9532f0c2d9aa636c9b454ca9f14525da
Author: Ken Pepple <ken.pepple@gmail.com>
Date:   Sun Jan 23 12:20:28 2011 -0800

    fixes setup install pip dependencies

commit 02781962a494cc3c3e185bd30dcf3f44f0e5c5b6
Author: jaypipes@gmail.com <>
Date:   Sun Jan 23 13:03:51 2011 -0500

    Version bump for release

commit 9c7b06d35dfcea6d82834e58ccdce08b08ed8acf
Merge: 33f9095 9e4d7c8
Author: jaypipes@gmail.com <>
Date:   Sun Jan 23 17:51:19 2011 +0000

    Fixes bug #706636: Make sure pep8 failures will return failure for run_tests.sh

commit 9e4d7c8b0da55767be6f38c9bfe2032b566518b4
Author: jaypipes@gmail.com <>
Date:   Sun Jan 23 12:18:48 2011 -0500

    Make run_tests.sh return failure when pep8 returns fail, and fix the pep8 error in /bin/glance-upload

commit 33f909593f610044b4e2cfec63ebab01ff60fbfb
Merge: e231c61 9685f63
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sun Jan 23 16:26:24 2011 +0000

    This patch:
    * Converts dashes to underscores when extracting image-properties from HTTP headers (we already do this for 'regular' image attributes
    * Update image_properties on image PUTs rather than trying to create dups
    
    Bonus:
    * Remove useless test_data file (no longer needed now that we can actually use Glance API via glance/client.py)
    * Add glance_upload.py which we can use to add raw/extra-kernel images (this might be able to go away once we have a full-blown glance-admin tool. However, for now, this is useful for testing Glance <-> Nova integration.

commit e231c618cdb9512769d262e3271a19fb3969fc94
Merge: df4b32d 9c57d40
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sun Jan 23 16:16:27 2011 +0000

    This patch replaces some remaining references to req.body (which buffers the entire request body into memory!) with the util.has_body method which can determine whether a body is present without reading any of it into memory.

commit 9685f63c255a7e1abe28d89e0b8a86e36e9d6c8a
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sat Jan 22 19:42:07 2011 +0000

    Adding Apache license, fixing long line

commit a89f94d0573394f667c366e7af59cb9dac0a6e21
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sat Jan 22 19:35:29 2011 +0000

    Making glance-upload a first-class binary

commit d0ba568360b2edfdeb35053b39cd0de5c7e5067a
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sat Jan 22 19:17:07 2011 +0000

    Revove useless test_data.py file, add image uploader

commit ba947efb780cbd3858e8cd1f54ae8de4dc4950c9
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sat Jan 22 19:15:55 2011 +0000

    Fix property create

commit 9c57d403b2767b42c57c4fc1efe834010d276ca2
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sat Jan 22 03:53:16 2011 +0000

    Dont buffer entire image stream on PUT

commit df4b32d33e9f60ca5fa6a947be1378014720a0db
Merge: 9af7453 9c95aa6
Author: jaypipes@gmail.com <>
Date:   Fri Jan 21 19:01:45 2011 +0000

    Adds man pages for glance-registry and glance-api programs. Adds Getting Started guide to the Glance documentation.
    
    Fixes Bug #704842

commit 9af7453afe386034eed5614079a9f5787449b348
Merge: e1cacfd 54da96c
Author: jaypipes@gmail.com <>
Date:   Fri Jan 21 18:51:28 2011 +0000

    Fixes LP Bug #700162: Images greater than 2GB cannot be uploaded
    using glance.client.Client.

commit 9c95aa612233f51f6ef528a0956ab341e71c9826
Author: jaypipes@gmail.com <>
Date:   Fri Jan 21 13:00:15 2011 -0500

    Duh, it helps to import the class you are inheriting from....

commit 54da96c611b788ec293d565815126d1ba85a0126
Author: jaypipes@gmail.com <>
Date:   Fri Jan 21 12:35:40 2011 -0500

    OK, found a solution to our test or functional dilemma. w00t.

commit 5bab765b4e6e70e9724685e8937ad5c8f385bfba
Merge: 32866f1 5fd631d
Author: jaypipes@gmail.com <>
Date:   Fri Jan 21 11:35:11 2011 -0500

    Merge Rick's changes and correct small bug that was affecting test cases.

commit 5fd631dde9acd8bae338aa66b4d538a75edd1271
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jan 21 04:55:16 2011 +0000

    Make compat with chunked transfer

commit e1cacfddd21a51b13af1291c64caa80bb6951e38
Merge: ba666b0 d0e3233
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 23:56:18 2011 +0000

    Removes the last vestiges of Twisted from Glance.
    
    Bonus: shaves a full 45 seconds off of run_tests.sh -V -f now that a giant twisted tarball doesn't need to be downloaded.

commit 28cdd61d6bd29c3ce2b80a3e9375e2fc86d2ecc3
Merge: ea0549f fbc496a
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 18:50:35 2011 -0500

    Pull in typo fix

commit ea0549f73d193ec0421783988dda8bb01cb24914
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 18:49:13 2011 -0500

    Add in manpage installation hook. Thanks Soren :)

commit 32866f1a152ee5d35a920de75b4dbd1eccc3c5e8
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 15:27:41 2011 -0500

    Fixes LP Bug #700162: Images greater than 2GB cannot be uploaded
    using glance.client.Client.
    
    This patch introduces chunked-transfer encoding to the client
    classes. When the glance.client.BaseClient.do_request() method
    is called and the method is either POST or PUT and the body
    argument is a file-like object, then the do_request() method
    builds a chunked-transfer encoded request and send()s chunks of
    the body file-like object over the httplib connection.
    
    Not sure how we fully test this, since we'd have to pack up
    a very large file for use in testing, but I'm open to suggestions :)

commit 1f1888d17d321c697f2d7b48e890ab1340b0c154
Merge: ba666b0 d0e3233
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 14:58:34 2011 -0500

    Merge removal of twisted

commit d0e32336aa7be695c630131d7b8db36ac60db70c
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 14:48:11 2011 -0500

    Removes Twisted from tools/install_venv.py and zope.interface from tools/pip-requires. Shaved a full 45 seconds for me off of run_tests.sh -V -f now we're not downloading a giant Twisted tarball...

commit 9f0b0a436b26e9e7811fba3db4941907c49622d8
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 14:37:42 2011 -0500

    Remove last little vestiges of twisted.

commit fbc496ae7b8755323cd7e32361501b601e439d94
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 14:20:34 2011 -0500

    Quick typo fix in docs.

commit ba666b06c636f83b493762721d52a5f67ca5e16b
Merge: bd035df 5187864
Author: Soren Hansen <soren.hansen@rackspace.com>
Date:   Thu Jan 20 15:56:19 2011 +0000

    Add run_tests.py to tarball.

commit 51878645d12ac4b26e676ef6a582ae096838c808
Author: Soren Hansen <soren.hansen@rackspace.com>
Date:   Thu Jan 20 11:13:46 2011 +0100

    Also include run_tests.py in tarball.

commit c967f9ace2742ef5b11e995b48a15c2c4176d55b
Author: jaypipes@gmail.com <>
Date:   Wed Jan 19 16:38:39 2011 -0500

    Adds man pages for glance-registry and glance-api. Adds Getting Started guide to Glance docs.

commit bd035dfd102869568eb38209fa9c8d1a2a716297
Merge: 4d0f6da 96eb80f
Author: jaypipes@gmail.com <>
Date:   Wed Jan 19 20:41:21 2011 +0000

    Fixes bug #696375: x-image-meta-size not optional despite documentation saying so.

commit 96eb80f589af94435a91a8bcbab0f0af8cf472c7
Author: jaypipes@gmail.com <>
Date:   Wed Jan 19 14:22:41 2011 -0500

    PEP8 fixes in /glance/store/__init__.py
    
    Also makes run_tests.sh automatically call pep8.
    Pulls in Nova's run_tests.py wrapper for prettying
    up output from nosetests...

commit 4d0f6da88b18b27e86e03b72d392647a322c3af5
Merge: 9767165 c9d93d2
Author: jaypipes@gmail.com <>
Date:   Wed Jan 19 19:16:19 2011 +0000

    Fix Bug #704038: Unable to start or connect to register server on anything other than 0.0.0.0:9191

commit c9d93d22195d3f40202c303602dba561a7baf757
Author: jaypipes@gmail.com <>
Date:   Tue Jan 18 16:01:49 2011 -0500

    Fix Bug #704038: Unable to start or connect to register server on anything other than 0.0.0.0:9191

commit 97671650987d74c6281e56f3f4e1950f2d996d5b
Merge: c481511 96ddcc0
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Jan 18 18:41:18 2011 +0000

    upgrade version...

commit 56fa9a39bf022192c3e996535a4869823d60dad3
Author: jaypipes@gmail.com <>
Date:   Tue Jan 18 12:58:23 2011 -0500

    Fixes Bug#696375: x-image-meta-size is not optional, contrary to
    documentation.
    
    The image's size is set to zero now during reservation of the image ID if the
    image's size is not passed in with headers. In addition,
    glance.store.Backend.add() now returns a tuple of (location, size) and
    the image's size attribute in the registry is updated to this value if
    previously set to zero.
    
    Adds a new test case that ensures the size attribute is set properly
    when not included in the image meta headers.
    
    Adds documentation for the new _reserve(), _upload(), and _activate()
    methods in glance.server.Controller.

commit f73ee950a1db91fbe243ed5377fe24dc133b8d79
Merge: 14cc5df c481511
Author: jaypipes@gmail.com <>
Date:   Tue Jan 18 12:48:42 2011 -0500

    Merge trunk

commit 96ddcc04626b22e84d21b056a174b76f9c8252d4
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Jan 18 09:31:40 2011 -0800

    Increase version after release.

commit e1ad8532467bf51da3b21c6ed9746830767df2a0
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Jan 17 14:24:50 2011 -0800

    Cut 0.1.2.

commit c4815119a2ef6ab03c58a1294a6792f45029efc6
Merge: 0afe4cc bdb2f22
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Jan 17 22:21:20 2011 +0000

    Files missing from the tarball (and you probably need to cut a 0.1.2.)

commit 14cc5df1ccbc94dc3e367348b76e0fcd9c44dfee
Author: jaypipes@gmail.com <>
Date:   Mon Jan 17 13:09:14 2011 -0500

    Cleanup of RST documentation and addition of docs on an image's status

commit bdb2f2209bf71105c83414e6653c2714739a94f0
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sat Jan 15 12:02:31 2011 -0800

    Include some files that were left out.

commit 0afe4cc55408934b051acb8e53c75a125a609970
Merge: 18d6cf8 9d107d2
Author: jaypipes@gmail.com <>
Date:   Fri Jan 14 22:11:34 2011 +0000

    Implements the S3 store to the level of the swift store.
    
    This branch is Chris' work with a merge of trunk, fix of merge conflicts from trunk, and moving the import of boto into a conditional block so tests can run with the fakes when boto is not installed on the local machine.

commit 9d107d234a11019ac2dae7ef86d896237d74af02
Merge: 14ca119 1f4a644
Author: jaypipes@gmail.com <>
Date:   Fri Jan 14 14:32:52 2011 -0500

    Merge trunk, resolve conflicts, and move import of boto into conditional block to prevent import errors when running tests and not having boto installed.

commit 18d6cf8b32eb048f1646ab516e80b2d105fc3220
Merge: 1f4a644 b2cd2b0
Author: jaypipes@gmail.com <>
Date:   Thu Jan 13 17:16:24 2011 +0000

    fixes bug698318.
    
    Work done by Ewan Mellor; I just fixed a conflict after merging trunk...

commit b2cd2b0c3dc69c5f14d7520c1568c92300c13c3c
Merge: 4b924c9 1f4a644
Author: jaypipes@gmail.com <>
Date:   Thu Jan 13 12:03:04 2011 -0500

    Merge trunk and resolve conflict in server.py

commit 14ca119e295e7f29f2b24d727fdcc09cb4572cb4
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Wed Jan 12 22:03:54 2011 +0100

    Fixes suggested by JayPipes review. Did not modify docstrings in non-related files.

commit 1f4a644e61eae7bd992d97f5d92d9463faa5be00
Merge: 5048e3f 21cea9c
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jan 12 16:31:29 2011 +0000

    This merge is in conjunction with lp:~rconradharris/nova/xs-snap-return-image-id-before-snapshot
    
    The patch does the following:
    
      * Image Create (POST) is broken up into 3 steps (reserve, upload and activate); reserve is used to allow the OpenStack API to return metadata about an image where the data has not been uploaded yet
      * Image Update (PUT) now takes image data as the request body and metadata as headers (just like POST); state is enforced so that image data can only be uploaded once.
      * Image statuses were changed to match the OpenStack API (queued, saving, active, killed); NOTE: preparing is not used
      * update_image and add_image client calls now return metadata instead of just the id

commit 21cea9c5e61990797edb662ed0a49734c5e6f128
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jan 11 11:34:48 2011 -0600

    Updating docs

commit f62a67615943d13ae060606ef2365c7bc282b96c
Merge: 6880a7a 5048e3f
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jan 11 11:04:14 2011 -0600

    Merging trunk

commit 5048e3fc4844e098ab3d1c6f3a42584f2ee7570d
Merge: eff29fc 386b42c
Author: Cory Wright <corywright@gmail.com>
Date:   Mon Jan 10 16:57:03 2011 +0000

    Clean up the rest of Glance's PEP8 problems.

commit 6880a7a764239d445b93062b4d7ee8f52f677929
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jan 7 00:13:33 2011 -0600

    PEP-8 Fixes

commit 19e411bc48ff5a9cec34adccfbc337ce472c01fa
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jan 6 19:14:53 2011 -0600

    Fixing eventlet-raise issue

commit 4b924c96189f51ab6effb4e9321f356e09c9e3ce
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Thu Jan 6 21:24:17 2011 +0000

    Bug #698316: Glance reads the whole image into memory when handling a POST
    /images request
    
    Change the store API so that add takes a file-like object, not a string.
    This avoids loading the whole request body into memory before writing it out,
    and allows us to stream it instead.

commit 0465f1810f3dbf1d0d66e6e287425be8f000cac0
Merge: cb5d4fd eff29fc
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jan 5 11:47:18 2011 -0600

    Merging trunk

commit 3095add3b4ef7d26b5f418b1a225efa333c88cfa
Merge: 71650eb eff29fc
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Wed Jan 5 11:02:36 2011 +0100

    Merge in upstream to avoid merge conflict.

commit 71650ebbbaaf50713542f8acc4a33076ae730933
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Wed Jan 5 10:56:58 2011 +0100

    Fixed pylint/pep8 for glance.store.s3

commit 786f000b39340461b55a793455c2da0fbd95840a
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Wed Jan 5 10:47:21 2011 +0100

    Implement S3 to the level of swift

commit cb5d4fd2e81537f0d6ad0e420ab9aa2610e78c54
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jan 4 18:16:53 2011 -0600

    removing old methods

commit b09e9c9600a1581bb2aba355714d258696573c3c
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jan 4 18:06:31 2011 -0600

    refactoring so update can take image_data

commit 386b42c17631aa1f4221f1c855b0dc39e101d608
Author: Cory Wright <corywright@gmail.com>
Date:   Tue Jan 4 17:00:37 2011 -0500

    More PEP8 fixes

commit eff29fca5def385f98ad5b464d54ddde56a319e3
Merge: 87432b2 f11c8c4
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Tue Jan 4 20:32:07 2011 +0000

      Fix all Glance's pep8 problems.

commit 87432b2ecd2929d4a423c74626236862ca46e998
Merge: 39e1a3c 30e66f2
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Tue Jan 4 16:27:06 2011 +0000

    Remove incorrect doccomments about there being a default for the host
    parameter, fix misdocumented default port, and remove handling of missing
    parameters in BaseClient, because the values are always specified by the
    subclass's __init__.

commit f11c8c4c072dfc1c7ae401af9b2baaf602647285
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Sun Jan 2 02:47:59 2011 +0000

    Bug #696385: Glance is not pep8-clean
    
    Fix all Glance's pep8 problems.

commit 30e66f20aea96504b1c11e4fb27c82d3a9142cc5
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Sun Jan 2 02:26:58 2011 +0000

    Bug #696382: Glance client parameter defaults misdocumented
    
    Remove incorrect doccomments about there being a default for the host
    parameter, fix misdocumented default port, and remove handling of missing
    parameters in BaseClient, because the values are always specified by the
    subclass's __init__.

commit 39e1a3cc44264de4c86997f1bd9df05cfb61d7cf
Merge: a7fb5e7 e47ac36
Author: jaypipes@gmail.com <>
Date:   Tue Dec 28 02:11:57 2010 +0000

        Fixes a number of things that came up during initial
        coding of the admin tool:
    
        * Fix client constructor to behave like httplib.HTTPConnection
          instead of accepting a URL, it now accepts host, port, and
          use_ssl boolean switch that turns on HTTPSConnection
        * Adds headers properly to the request in client.do_request().
          Previously, was erroneously calling httplib.HTTPConnection.putheader
          after calling httplib.HTTPConnection.request, which was incorrect
        * Now returns type and size of images in index
        * Webob.Response and httplib.HTTPResponse have slightly different
          ways of accessing headers. Fixed an attribute error that was coming
          up because the tests assume webob.

commit e47ac364b7650a48c18be0cbeb06a2cd8b54f3da
Author: jaypipes@gmail.com <>
Date:   Mon Dec 27 15:03:03 2010 -0500

    Made review changes from Rick.

commit dd53fa3d058b96aa237b2319c64d581334c29056
Author: jaypipes@gmail.com <>
Date:   Sun Dec 26 00:38:17 2010 -0500

    Duh, use_ssl should not use HTTPConnection...

commit 07c4d00ed366c2411b7ac19ec40e120289eff179
Author: jaypipes@gmail.com <>
Date:   Sun Dec 26 00:02:58 2010 -0500

    Remove final debugging statement

commit 7cf673e7467c4294a8e638616a7db6c9073b675e
Merge: b88d69f a7fb5e7
Author: jaypipes@gmail.com <>
Date:   Sat Dec 25 23:57:40 2010 -0500

    merge trunk

commit b88d69f5044305f8820cbe40d064fc70586dd67d
Author: jaypipes@gmail.com <>
Date:   Sat Dec 25 23:56:10 2010 -0500

    Remove debugging statements

commit 91bdb5e18d32fb3773f3e2634c9d69811eaae36e
Author: jaypipes@gmail.com <>
Date:   Sat Dec 25 23:50:01 2010 -0500

    Fixes a number of things that came up during initial
    coding of the admin tool:
    
    * Fix client constructor to behave like httplib.HTTPConnection
      instead of accepting a URL, it now accepts host, port, and
      use_ssl boolean switch that turns on HTTPSConnection
    * Adds headers properly to the request in client.do_request().
      Previously, was erroneously calling httplib.HTTPConnection.putheader
      after calling httplib.HTTPConnection.request, which was incorrect
    * Now returns type and size of images in index
    * Webob.Response and httplib.HTTPResponse have slightly different
      ways of accessing headers.  Fixed an attribute error that was coming
      up because the tests assume webob.

commit a7fb5e7d6cc64a0abfd798ef8bf07d552d39bc4d
Merge: 25d0731 0b3bf98
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Sun Dec 26 04:11:54 2010 +0000

    fix bug 694382

commit 0b3bf98c9db40e385297bd2cb4cf120bb3811eef
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Sun Dec 26 00:36:47 2010 +0000

    Bug #694382: setup.py refers to parallax-server and teller-server, when these have been renamed
    
    Fix script references, following earlier rename.

commit 25d073136ed6a1759a247ffed4370241c2bf74b8
Merge: 812ef4e 33d54d9
Author: jaypipes@gmail.com <>
Date:   Thu Dec 23 19:57:00 2010 +0000

    documentation cleanup and matching to other OpenStack projects.  Glance is no longer the red-headed documentation stepchild in OpenStack...

commit 812ef4e99f7bfa8dced68a06e6b43a7f9344d206
Merge: faab96f 796674c
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Dec 23 19:41:59 2010 +0000

    Converts timestamp attributes to datetime objects before persisting.
    
    Refactors image_update and image_create to use the same basic code.

commit 796674c71961274e510d2f09f1b4c638e349e503
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Dec 23 13:20:52 2010 -0600

    Adding __protected_attributes__, some PEP8 cleanups

commit 33d54d9f2c74d34548146ad64b91be70f7d6c61d
Author: jaypipes@gmail.com <>
Date:   Thu Dec 23 12:31:47 2010 -0500

    review fixes

commit 240638680911ba3bad79ca93f7383aa04cf9a5e8
Author: jaypipes@gmail.com <>
Date:   Wed Dec 22 12:52:15 2010 -0500

    Update sphinx conf to match other OpenStack projects

commit f32a2eadb03565e962ac1769f85027f19879924d
Author: jaypipes@gmail.com <>
Date:   Wed Dec 22 12:38:54 2010 -0500

    Documentation cleanup. Splits out index.rst into multiple section docs.

commit 7cfe9e09048aaff65ecb3d599dc720d487758d5d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Dec 22 11:36:26 2010 -0600

    Converting to datetime before saving image

commit faab96fda74613d8b6afd35be2e24d97fc6bbfae
Merge: 549c345 b143079
Author: jaypipes@gmail.com <>
Date:   Tue Dec 21 16:07:03 2010 +0000

    Enhances POST /images call to, you know, actually make it work...
    
    Contains Rick's additions as well.

commit b1430797ecacdd82b01a2ee5757f93d9d7a9f791
Merge: cff6301 d4bb114
Author: jaypipes@gmail.com <>
Date:   Tue Dec 21 10:07:16 2010 -0500

    Merge Rick's additions branch and make tiny fixups

commit d4bb114194bd83c35788989d604b3ecea40b5178
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Dec 20 23:30:04 2010 -0600

    Make directory for filesystem backend

commit 549c3455c9fe1cd43322d95ab029565b6cf8195c
Merge: e1aaaa8 9c2a8f2
Author: jaypipes@gmail.com <>
Date:   Mon Dec 20 19:01:53 2010 +0000

    doing the merge of this again...somehow the trunk branch never got rev26 :(

commit cff6301bc1251078f4b7f1ff6631a8048371141b
Author: jaypipes@gmail.com <>
Date:   Mon Dec 20 13:38:56 2010 -0500

    Adds POST /images work that saves image data to a store backend

commit c566d9b77d08ef134f164ce2b8f9725602126800
Author: jaypipes@gmail.com <>
Date:   Mon Dec 20 12:12:46 2010 -0500

    Update docs for adding image...

commit 410aa563505957a3c42370c375656d4d5b5f8022
Author: jaypipes@gmail.com <>
Date:   Mon Dec 20 12:12:35 2010 -0500

    Fix Chris minor nit on docstring

commit 9c2a8f25d9866d3059df4a7ce2d5411693435ac4
Author: jaypipes@gmail.com <>
Date:   Sat Dec 18 13:00:21 2010 -0500

    Fixes binaries, updates WSGI file to more recent version from Nova, and fixes an issue in SQLAlchemy API that was being hidden by stubs and only showed up when starting up the actual binaries and testing...

commit e1aaaa8f0404e6ed2632e28d6c6ef2745e534e60
Merge: 6bd7f30 344828c
Author: jaypipes@gmail.com <>
Date:   Fri Dec 17 16:37:06 2010 +0000

    Major refactoring...

commit 344828cc3d882734f5ba5536b9baa9474976ecdf
Author: jaypipes@gmail.com <>
Date:   Thu Dec 16 18:19:23 2010 -0500

    Fix testing/debug left in

commit 97e966f2dbc4442c105c80021718f970901790e6
Author: jaypipes@gmail.com <>
Date:   Thu Dec 16 17:04:58 2010 -0500

    Fixes from review

commit 4cc79106e7d294e566d2b8192efc2e7b9d102d62
Author: jaypipes@gmail.com <>
Date:   Tue Dec 14 14:47:00 2010 -0500

    Documentation updates and GlanceClient -> Client

commit b9347d2441da4f38cdf58212a5baaa5160d44c8a
Author: jaypipes@gmail.com <>
Date:   Tue Dec 14 14:34:04 2010 -0500

    Refactor a bunch of stuff around the image files collection
    
    * Removes ImageFile table
    * Places restriction on clients and server requests to ensure
      that the image metadata location is set, or the body of the request
      is image data
    * Refactors the FilesystemBackend to be a bit more robust and throw
      NotFound properly and return a real object instead _file_iter.
    * Move some repetitive code around injecting and building x-image-meta
      HTTP headers into /glance/util.py

commit 31d23607073d13b1c1d78a56f54f94c78c64cdd0
Author: jaypipes@gmail.com <>
Date:   Tue Dec 14 10:42:17 2010 -0500

    Cleanup around x-image-meta and x-image-meta-property HTTP headers in GET/HEAD

commit 93b297292100f0b835bc802173906688ff66d9e0
Author: jaypipes@gmail.com <>
Date:   Tue Dec 14 10:10:54 2010 -0500

    Update /glance/client.py to have GlanceClient do all operations
    that RegistryClient does.
    
    Update glance.server.Controller.create() to return image metadata
    in x-image-meta- headers instead of the response body.
    
    Move RegistryClient to /glance/registry/client.py
    
    Next steps:
    
    * Change GlanceClient.add_image() calls to insert metadata
      into HTTP headers and optionally send image data in the
      request body.

commit fba60c3a588ccbae61e3ba8cf6558efc36d116a5
Author: jaypipes@gmail.com <>
Date:   Mon Dec 13 22:22:13 2010 -0500

    Merges Glance API with the registry API:
    * Makes HEAD /images/<ID> return metadata in headers
    * Make GET /images/<ID> return image data with metadata
      in headers
    Updates docs some (more needed)
    
    Next steps:
    
    * Update main GlanceClient class to encapsulate entire Glance API
      and hide RegistryClient from normal usage
    * Refactor registry database API and schema

commit f45dc713d47be32e2f50c35200b4566d34878f24
Author: jaypipes@gmail.com <>
Date:   Mon Dec 13 21:23:42 2010 -0500

    Second step in simplifying the Glance API.
    
    * Removes the notion of Parallax
    * Renames parallax stuff to just "registry"
    
    Next steps:
    
    * Refactor the registry database API to not be so abstract
      and remove the Nova DB super-abstraction layer. Add more
      attributes to the registry database tables, including
      image size_in_bytes
    * Merge Glance API with the registry API:
      ** Make HEAD /images/<ID> return metadata in headers
      ** Make GET /images/<ID> return image data with metadata
         in headers
    * Update client classes to hide registry client fully within
      /glance/registry/
    * Update docs and tests

commit 45335fc86616463bea81ad097f4a4637e227843b
Author: jaypipes@gmail.com <>
Date:   Mon Dec 13 20:56:11 2010 -0500

    This is the first part of simplifying the Glance API and
    consolidating the Teller and Parallax APIs into a single,
    unified Glance API.
    
    The following changes were made:
    * Change the bin/teller-server to bin/glance-api
    * Remove the notion of Teller as something the user
      has to be aware of. Call the previous "Teller backends"
      simple "stores".
    * Moves /glance/teller/controllers.py to /glance/server.py
    * Break out the filesystem store into a separate file
    
    Next steps:
    * Hide Parallax behind a unified API
    * Update docs and wiki
    * Refactor image registry database to include more
      information about images
    * Refactor notion of an image identifier to be a Glance URI

commit 6bd7f30d1d9c7d7e6ff6efdc1bb4f3ffe0b50864
Merge: 6c4f77d 0d38357
Author: jaypipes@gmail.com <>
Date:   Sat Dec 11 20:17:00 2010 +0000

    Adds DELETE call to Teller API

commit 6c4f77d472442f9a77032c99e2cd76f9ac43a66f
Merge: 8f4010a b460679
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Dec 9 16:07:36 2010 +0000

    Fixes Swift URL Parsing in Python 2.6.5 by adding back netloc.

commit 8f4010a5c277d54cb635dff6820e0d180824de50
Merge: c2ec2b6 b39bfa4
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Dec 9 16:07:00 2010 +0000

    Moving imports into main which will only be executed after we daemonize thus avoiding the premature initialization of epoll.

commit b39bfa40b0dce26b7168d11ae78a7cf1285fa383
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Dec 8 23:49:36 2010 -0600

    Delaying eventlet import until after daemonization

commit b460679820d48f5b256de9436aa11d080761995e
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Dec 8 23:19:49 2010 -0600

    Fix Swift URL parsing for Python 2.6.5

commit 0d38357433e0e0f32abcc4ff8a29526326766097
Author: jaypipes@gmail.com <>
Date:   Wed Dec 8 13:07:31 2010 -0500

    Don't leak implementation details in Swift backend. Return None on successful delete_object call

commit 1c240b86d17dd84b03660b773c3a47ad8e6dc0ab
Author: jaypipes@gmail.com <>
Date:   Mon Dec 6 12:57:03 2010 -0500

    Adds call to Swift's DELETE

commit 4b6922dfaec9dc667a7e1856f74cb53130c73138
Author: jaypipes@gmail.com <>
Date:   Mon Dec 6 12:42:05 2010 -0500

    Typo fixed and tiny cleanups

commit c1d66d2bdb05e2db1fea3faf84ea56c4442cc5a2
Author: jaypipes@gmail.com <>
Date:   Mon Dec 6 12:28:30 2010 -0500

    Adds DELETE to Teller's API.

commit 9d80a0d73cf09967b15dea83de1149da8f154ec0
Merge: 06de757 c2ec2b6
Author: jaypipes@gmail.com <>
Date:   Mon Dec 6 10:51:13 2010 -0500

    Merge trunk

commit c2ec2b6984406c3e2e7c975046e2d78c1f9d7c19
Merge: 43bbf01 f6b9baf
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sun Dec 5 17:22:07 2010 +0000

    Just some small cleanups, fixing:
      * Swapped port numbers (Parallax Port <=> Teller port)
      * Removing extraneous routes in Teller API
      * Adding required slashes to do_request
    
    Ran unit-tests and they passed.
    
    Tested functionally using curl and tests/test_data.py, everything worked.

commit 43bbf01126772d547ed1c9b4598774796c4863c7
Merge: f9462be 06de757
Author: jaypipes@gmail.com <>
Date:   Sun Dec 5 16:57:24 2010 +0000

        * Changes Teller API to use REST with opaque ID sent in
          API calls instead of a "parallax URI". This hides the
          URI stuff behind the API layer in communication between
          Parallax and Teller.
        * Adds unit tests for the only complete Teller API call so
          far: GET images/<ID>, which returns a gzip'd string of
          image data
    
          I want to get feedback on these new unit tests and the
          changes to the Teller API to remove the parallax URI from
          the API calls.

commit f6b9baff0d0ec7065e2412a368c9275bf774dc8b
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Dec 2 14:19:26 2010 -0600

    Fixing swapped port numbers, removing extraneous routes in Teller controller, adding required slash for do_request calls

commit 06de7577b59ae6686f1be72e91b253eae66f7bb5
Author: jaypipes@gmail.com <>
Date:   Wed Dec 1 12:10:25 2010 -0500

    * Changes Teller API to use REST with opaque ID sent in
      API calls instead of a "parallax URI".  This hides the
      URI stuff behind the API layer in communication between
      Parallax and Teller.
    * Adds unit tests for the only complete Teller API call so
      far: GET images/<ID>, which returns a gzip'd string of
      image data
    
      I want to get feedback on these new unit tests and the
      changes to the Teller API to remove the parallax URI from
      the API calls.

commit 677a9777ecbeef4a0bfb6abc5d0a6c571d07cd42
Author: jaypipes@gmail.com <>
Date:   Mon Nov 29 11:00:10 2010 -0500

    Add files attribute to Parallax client tests

commit f9462be46496c0ad18a35dd9a217c91eb3c1f926
Merge: f5984a2 0e73f2e
Author: jaypipes@gmail.com <>
Date:   Wed Nov 24 19:42:06 2010 +0000

    Adds client classes for Parallax and Teller and fixes some issues where our controller was not returning proper HTTP response codes on errors...

commit 0e73f2e0cdc3cc8e5b31f5c87f97dd6f032d7637
Author: jaypipes@gmail.com <>
Date:   Tue Nov 23 13:12:11 2010 -0500

    Cleanup/fixes for Rick review

commit 3516f14efb2e463f484b30ae6a5ab4ad32037927
Author: jaypipes@gmail.com <>
Date:   Mon Nov 22 13:35:28 2010 -0500

    Adds client classes ParallaxClient and (stubbed) TellerClient
    to new glance.client module.
    
    Updates test cases for Parallax API to properly raise HTTP
    exceptions (which the client classes convert to Nova/Glance
    exception classes)

commit f5984a271b345447f6709847b4ec1519b157fc89
Merge: a6962d6 83cfeb5
Author: jaypipes@gmail.com <>
Date:   Thu Oct 21 20:46:50 2010 +0000

    packaging fixups preparing for release candidate

commit 83cfeb562038954f11581dd15b230fc4c33d10d6
Author: jaypipes@gmail.com <>
Date:   Thu Oct 21 16:34:53 2010 -0400

    Remove symlinks in bin/

commit 6b220dbea1c8cf21c17eeb7e2466047c0aa92bff
Author: jaypipes@gmail.com <>
Date:   Thu Oct 21 15:51:44 2010 -0400

    Packaging fixups

commit a6962d618e7e0056899c8839e1f875719723aaff
Merge: b335ff2 98dc44c
Author: jaypipes@gmail.com <>
Date:   Mon Oct 18 14:36:46 2010 +0000

    awesomeness. merging into trunk since my parallax-api is already in trunk I believe. :)

commit 98dc44c10e6db4dc0079883e8b88cfa9ab34febe
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sun Oct 17 11:43:19 2010 -0500

    Moving ATTR helpers into db module

commit 9382efb8498b40628753698367d11ea517799a87
Author: Rick Harris <rconradharris@gmail.com>
Date:   Sun Oct 17 11:31:04 2010 -0500

    PUTing and POSTing using image key

commit 86ed4327900bf3108629038ea63c6b3c505fdde5
Author: jaypipes@gmail.com <>
Date:   Fri Oct 15 16:03:13 2010 -0400

    Quick fix...gives base Model an update() method to make it behave like a dict.

commit 381afa40bd9b50be821f5c531dec236cb7e7d9c5
Merge: 20749d8 b335ff2
Author: jaypipes@gmail.com <>
Date:   Fri Oct 15 16:00:47 2010 -0400

    Merge trunk:

commit 20749d8f3040460f0fbacf55de050df3d0c886ac
Author: jaypipes@gmail.com <>
Date:   Fri Oct 15 15:59:52 2010 -0400

    Make returned mapping have an 'image' key to help in XML serialization

commit da2142a7f655e4a7c03178d4d4a46248487e02b8
Author: jaypipes@gmail.com <>
Date:   Fri Oct 15 15:46:21 2010 -0400

    Ignore virtualenv directory in bzr

commit b335ff2a87f05db46e161326915cbbf5e2075ac9
Merge: 543911e bfbc211
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Oct 15 17:16:50 2010 +0000

    This patch removes unique index on the 'key' column of image_metadatum and replaces it with a compound UniqueConstraint on 'image_id' and 'key'. The 'key' column remains indexed.
    
    Adds tests to ensure that two different images can use the same key, while preventing a single image from having two keys with the same name.

commit 543911e581b3515e2415c6341a26c5ce97f5a1eb
Merge: ae51a14 854c906
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Oct 15 15:26:41 2010 +0000

    Fixes lp653358
    
    Using swift.common.client rather than python-cloudfiles for Teller's Swift backend.

commit 854c906f587bf8c67eedacf7f3cc7795b93e279b
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Oct 15 01:03:42 2010 -0500

    Renaming is_cloudfiles_available -> is_swift_available

commit bfbc211bb69773ca8e2c3df7f01b835942112d1b
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Oct 15 00:35:15 2010 -0500

    Adds compound unique constraint to ImageMetadatum

commit 8009d5230581c812fea730092a4525396cdd285e
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Oct 14 18:17:16 2010 -0500

    Using swift.common.client rather than python-cloudfiles in Teller's Swift backend

commit 728b4e5f5f24db398e44d233b992ca0bc38fe763
Author: jaypipes@gmail.com <>
Date:   Thu Oct 14 13:23:37 2010 -0400

    Adds DELETE to the Parallax REST API.

commit 19a653c984d457d311fac4588a972295320feb7b
Author: jaypipes@gmail.com <>
Date:   Thu Oct 14 13:16:09 2010 -0400

    Implements the REST call for updating image metadata in the Parallax API

commit ae51a143a10e78ef375676c6751355f1be66b421
Merge: 6ba2353 fa66de6
Author: jaypipes@gmail.com <>
Date:   Wed Oct 13 21:36:57 2010 +0000

    Implements Parallax API call to register a new image
    
    * Adds unit test for Parallax API controller
    * Adds stubouts for glance.parallax.db.sqlalchemy.api calls
      regarding images
    * Adds unittest for bad status on image creation
    * Adds --logging-clear-handlers arg to nosetests in run_tests.sh to
      prevent extra output in running tests when tests complete successfully

commit fa66de6d9a24ef74176535ac9f6feaedb193617c
Author: jaypipes@gmail.com <>
Date:   Wed Oct 13 13:47:05 2010 -0400

    Adds a /images/detail route to the Parallax controller, adds a unit test for it, and cleans up Michael's suggestions.

commit 6ba23534c811c7320dec3c91178aa6cfd57e7618
Merge: 4c5a45f 2d8dfd2
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Oct 12 20:01:44 2010 +0000

    Works around non-RFC compliance in Python (< 2.6.5) urlparse library.

commit 2d8dfd2d4257fe7d89205f7dc593a38f1b9bf89e
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Oct 12 14:47:38 2010 -0500

    Workaround for bug in Python 2.6.1 urlparse library

commit bee23da1c69c94021fc0d72d0933ad9a144ec9e9
Author: jaypipes@gmail.com <>
Date:   Tue Oct 12 14:26:02 2010 -0400

    Adds tests for bad status set on image

commit d59d1f1ca10233fd18fb5ad7ebade0e58dd88c0b
Author: jaypipes@gmail.com <>
Date:   Tue Oct 12 14:01:12 2010 -0400

    Implements Parallax API call to register a new image
    
    * Adds unit test for Parallax API controller
    * Adds stubouts for glance.parallax.db.sqlalchemy.api calls
      regarding images
    * Adds --logging-clear-handlers arg to nosetests in run_tests.sh to
      prevent extra output in running tests when tests complete successfully

commit 4c5a45f42d7dcd86225bf59e01de7128b357661a
Merge: f8b1b31 3cb8642
Author: jaypipes@gmail.com <>
Date:   Mon Oct 11 19:56:54 2010 +0000

    This patch overhauls the testing in Glance:
    
    * Adds Nova-like run_tests.sh and tools/* files to automatically run unit tests in a virtual environment.  Just do ./run_tests.sh -V from project root.  All required dependencies will be installed into a new virtual environment at .glance-venv.
    * Adds proper mocking and stubouts using pymox.  This removes the need for all the FakeParallaxAdapter and similar code.  Unit tests now call stubs.stub_out_parallax(), etc instead of having swiftfakehttp.py and similar code.

commit 3cb8642af4ad44bf47721e6911765fbe14e76fcc
Author: jaypipes@gmail.com <>
Date:   Mon Oct 11 15:34:10 2010 -0400

    unittest2 -> unittest. For now, since not using unittest2 features yet.

commit ab8de9fe7348468f36211ad3fe4749bc20f3ed0c
Author: jaypipes@gmail.com <>
Date:   Mon Oct 11 14:28:35 2010 -0400

    Fixes up test_teller_api.py to use stubout correctly. Fixes a few bugs that showed up in the process, and remove the now-unnecessary FakeParallaxAdapter.

commit 63fe51eab5a7fbd5d3b6392c8dc36601c0937309
Author: jaypipes@gmail.com <>
Date:   Fri Oct 8 16:42:13 2010 -0400

    First round of cleaning up the unittests. Adds test suite runner, support for virtualenv setup and library dependencies, resolves issues with ImportErrors on cloudfiles, adds pymox/stubout support and splits the backend testing into distinct unittest cases.

commit f8b1b31707ab99186090e41fd853f3070ef56b42
Merge: ddc056e 2535f4f
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Oct 5 16:16:42 2010 +0000

    With this patch Parallax and teller now work end-to-end with the Swift backend.
    
    bash-3.2$ curl localhost:9292/image?uri=http://localhost:9191/images/2 > testimg.tar.gz
      % Total % Received % Xferd Average Speed Time Time Time Current
                                     Dload Upload Total Spent Left Speed
    100 189M 0 189M 0 0 203k 0 --:--:-- 0:15:52 --:--:-- 214k
    
    bash-3.2$ md5 testimg.tar.gz
    MD5 (testimg.tar.gz) = ef6c5db4f55b0030828b71dd253a2384

commit 2535f4f5bd8dc22846615ae75d5844c91305784f
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Oct 4 17:18:12 2010 -0500

    Adding missing backend files, fixing typos in comments

commit ddc056e4bec96a6062292d988c508b70d541c941
Merge: 346d5f0 acf4012
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Oct 4 19:06:48 2010 +0000

    This patch:
      * Decouples Controller for ParallaxAdapter implementation by adding generic RegistryAdapter and providing a lookup function
      * Adds base model attributes to Parallax's JSON (created_at, etc)

commit c0d0451aa2a79f61c5e303791a54aaac984e2350
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Oct 1 22:36:15 2010 -0500

    Improving symmetry between teller and parallax

commit 2a90df69e96c86eeffd418bac9afb75baeaa9d6c
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Oct 1 21:24:29 2010 -0500

    Fixing swift authurl

commit acf40127986b2441ccfc78ee8c4f9fc717475251
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Oct 1 18:07:46 2010 -0500

    Add RegistryAdapter, include ModelBase attributes

commit 00afd1dd9380455f54434a41775d13f9c5eb405f
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Oct 1 16:51:42 2010 -0500

    Fixing Teller image tests

commit 5e2ce8dbedb5fbf4f4aaa6b90408d6f74bc34983
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Oct 1 16:41:53 2010 -0500

    Created teller-server.py in bin/

commit 32d184e34e7711931c2ef035a4cc20d0740ab638
Merge: bc11926 346d5f0
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Oct 1 15:54:22 2010 -0500

    Merge trunk

commit bc119260505016ec51b881f871aa48e484d5d781
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Oct 1 15:41:54 2010 -0500

    Cleaning up Teller backend

commit 346d5f0312863726b3ec0cee2297661e199ee285
Merge: 8ce1d05 3cebcb0
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Fri Oct 1 20:31:50 2010 +0000

    Rewrote ImageController to inherit from the work Rick Harris did in glance.common. Moved it into teller/api/images.py to make teller match parallax. Fixed tests. Renamed them to distinguish if any parallax tests ever get written.

commit 6c2c7b2c24fe276a0fbe672ec44c14097f0c2260
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Oct 1 15:27:48 2010 -0500

    Adding Image index call, nesting the Image show dict to facilitate XML serialization

commit 93ec338f1717dabc0c49963e5c701f5f8970f426
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Oct 1 14:51:29 2010 -0500

    Moving parallax models out of common and into the parallax module

commit 3cebcb065295245928c1558395954e375cc22ba9
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Thu Sep 30 18:16:15 2010 -0700

    Updated tests

commit 226cebf66b9f61f4108711b73564b00a221534fd
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Thu Sep 30 17:52:50 2010 -0700

    Reimplements server.py as a wsgi api inheriting from glance.common

commit 8ce1d057d12411da655252122c45830e01a15bbc
Merge: e994a6c a9cd0bc
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Sep 30 21:02:24 2010 +0000

    This patch:
      * pulls in a number of useful libraries from Nova under the common/ path (we can factor those out to a shared library in Bexar-release)
      * Defines the models in common.db.sqlalchemy.models.py (this should be factored out into the parallax package soon)
      * Adds the parallax api-server under /bin (if PyPI was used to pull python-daemon and python-lockfile, you may need to apply a patch I have against it)

commit e994a6c56aaffd98f8146ac749dd6953ec6c099f
Merge: 5dfb38f 61b1951
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Thu Sep 30 21:01:45 2010 +0000

    Changes the obj['uri'] to obj['location'] to better sync with the representation within Nova. Adds the image_lookup_fn = ParallaxAdapter.lookup to teller.server

commit a9cd0bc4ea408ad5b72b41cdfd74dd85ec503650
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Sep 29 15:51:21 2010 -0500

    ImageChunk -> ImageFile, merging APIRouter into API for now

commit ce92e8132d539d40599b3b5daa0f88db3fb91456
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Sep 29 11:49:17 2010 -0500

    Adding Apache header to test_data.py

commit 185410b957840c2cb40360e1ce34ac678ef42fe7
Merge: d827767 5dfb38f
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Sep 29 11:47:13 2010 -0500

    Merge trunk

commit d8277674e9c1d90aa96a0a1595c8cb8af2e0ecf1
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Sep 29 11:25:55 2010 -0500

    Small cleanups

commit 61b1951dc757c3ff5e26342b4cd99fcea017db82
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Wed Sep 29 11:22:52 2010 -0500

    Parallax will return obj['location'] instead of obj['uri'], also maybe a parallax lookup fn would be nice?

commit 5dfb38fe41668cda85e7a2f8ad5255dcf82a4f13
Merge: d3a89b3 5f43ca1
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Wed Sep 29 16:21:52 2010 +0000

    Implements a Parallax adapter for looking up images requested from nova. Adds a size check to SwiftBackend to ensure that the chunks haven't been truncated or anything.

commit 4960fb60e4f60054678f03541923adcf7f1133fc
Merge: abaf040 d3a89b3
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Sep 29 00:14:03 2010 -0500

    Reconciling parallax modifications with modulization of glance

commit abaf040e3b7f9fd0b2909d51eb8a4fce09909a82
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Sep 28 23:54:27 2010 -0500

    Adding Images controller

commit ecbed9f2291279101a7e22a7e284a9511c559139
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Sep 28 19:20:11 2010 -0500

    Adding API directory and server.py

commit 5f43ca1a535f4d7640dc8eece8590ae9f99436d2
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Tue Sep 28 16:04:02 2010 -0500

    Modulify the imports

commit ff52b2cdb1447f8d5a0257eac6a9fce491508456
Merge: d1b108a d3a89b3
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Tue Sep 28 15:34:06 2010 -0500

    Merge with trunk

commit d1b108a6533790de015c4f801cb0d11dab034656
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Tue Sep 28 15:18:30 2010 -0500

    Implements Parallax adapter for lookups from Teller, also adds size expectations to the backend adapters.

commit 41da7c03643dbef472a0ea033d38ac38e9d2b45e
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Sep 28 11:59:01 2010 -0500

    Adding files from Nova

commit d3a89b36610045c79bf4990fbfa9c3c3f8dbb58a
Merge: 74e5e01 2d922a5
Author: jaypipes@gmail.com <>
Date:   Tue Sep 28 15:16:48 2010 +0000

    Makes glance a module, containing teller and parallax sub-modules.
    
    Makes tests and tests.unit packages so nosetests will find the unit tests.

commit 2d922a5e5cd2764d8603a464c141d8156e6667af
Author: jaypipes@gmail.com <>
Date:   Mon Sep 27 18:43:04 2010 -0400

    libify glance into teller and parallax modules. Make nosetests work by making tests and tests/unit/ into packages.

commit 74e5e01885eb026f9d407c166d4af76c43660f39
Merge: ce49d94 3d69f40
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Sep 27 15:46:52 2010 +0000

    Rearranged the code a little. Added a setup.py. Added sphinx doc skeleton.

commit 3d69f40135977b0e21a6e32f5e906c6b20ff4f2b
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sun Sep 26 00:25:34 2010 -0700

    Added setup.py and sphinx docs.

commit acd7cf916dba337713311c36a014ceac547f6c1f
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sun Sep 26 00:17:54 2010 -0700

    Reorg to make Monty's build pedanticness side happier.

commit ce49d94f3ef5299334c287dfb30d249ca1c94cce
Merge: 149a12d 7035db0
Author: jaypipes@gmail.com <>
Date:   Fri Sep 24 16:49:17 2010 -0400

    Merge Chris' swift work.

commit 7035db08fa8f07f52ee7329bc3e436081b4e0fd0
Author: jaypipes@gmail.com <>
Date:   Fri Sep 24 16:36:31 2010 -0400

    Implements Swift backend for teller

commit 5fcedf01eb91063462e79ad1822c9c71b443217c
Author: jaypipes@gmail.com <>
Date:   Fri Sep 24 16:20:46 2010 -0400

    ignore all .pyc files

commit 149a12d776a0f382e81ea30b32650ea1e073af2e
Merge: 78b45ee 6d4ba15
Author: Rick Clark <rick@openstack.org>
Date:   Wed Sep 22 14:01:55 2010 -0500

    Merging ricks changes

commit 6d4ba15007e467780c031b0b4c3bbed6e9181407
Merge: 78b45ee e765b23
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Aug 25 13:49:40 2010 -0500

    Adding basic image controller and mock backends

commit e765b236a952d0cfc983efd002e020e12618d058
Author: Cory Wright <corywright@gmail.com>
Date:   Mon Aug 23 23:32:57 2010 -0500

    Adding description of registry data structure

commit 545efb517a67c1e63220379cb266a216e1084388
Author: Cory Wright <corywright@gmail.com>
Date:   Wed Aug 11 20:17:56 2010 -0500

    Adding teller_server

commit 80715f835259bae33974f532a992c92696313b1b
Author: Cory Wright <corywright@gmail.com>
Date:   Wed Aug 11 17:54:34 2010 -0500

    adding filesystem and http backends

commit 78b45ee909994eef9fbdeba59bb91d9fc955272b
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Aug 5 22:06:42 2010 -0500

    Initial check-in